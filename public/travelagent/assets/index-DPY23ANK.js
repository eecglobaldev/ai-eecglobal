(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function eA(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var bx={exports:{}},lc={},Rx={exports:{}},ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pa=Symbol.for("react.element"),tA=Symbol.for("react.portal"),nA=Symbol.for("react.fragment"),rA=Symbol.for("react.strict_mode"),sA=Symbol.for("react.profiler"),iA=Symbol.for("react.provider"),oA=Symbol.for("react.context"),aA=Symbol.for("react.forward_ref"),lA=Symbol.for("react.suspense"),uA=Symbol.for("react.memo"),cA=Symbol.for("react.lazy"),Qg=Symbol.iterator;function dA(t){return t===null||typeof t!="object"?null:(t=Qg&&t[Qg]||t["@@iterator"],typeof t=="function"?t:null)}var Px={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Mx=Object.assign,Dx={};function Ui(t,e,n){this.props=t,this.context=e,this.refs=Dx,this.updater=n||Px}Ui.prototype.isReactComponent={};Ui.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ui.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Lx(){}Lx.prototype=Ui.prototype;function Xh(t,e,n){this.props=t,this.context=e,this.refs=Dx,this.updater=n||Px}var Zh=Xh.prototype=new Lx;Zh.constructor=Xh;Mx(Zh,Ui.prototype);Zh.isPureReactComponent=!0;var Xg=Array.isArray,Vx=Object.prototype.hasOwnProperty,ep={current:null},Ux={key:!0,ref:!0,__self:!0,__source:!0};function Fx(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Vx.call(e,r)&&!Ux.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Pa,type:t,key:i,ref:o,props:s,_owner:ep.current}}function fA(t,e){return{$$typeof:Pa,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function tp(t){return typeof t=="object"&&t!==null&&t.$$typeof===Pa}function hA(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Zg=/\/+/g;function wd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?hA(""+t.key):e.toString(36)}function Fl(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Pa:case tA:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+wd(o,0):r,Xg(s)?(n="",t!=null&&(n=t.replace(Zg,"$&/")+"/"),Fl(s,e,n,"",function(c){return c})):s!=null&&(tp(s)&&(s=fA(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Zg,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Xg(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+wd(i,a);o+=Fl(i,e,n,l,s)}else if(l=dA(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+wd(i,a++),o+=Fl(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function fl(t,e,n){if(t==null)return t;var r=[],s=0;return Fl(t,r,"","",function(i){return e.call(n,i,s++)}),r}function pA(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var kt={current:null},Ol={transition:null},mA={ReactCurrentDispatcher:kt,ReactCurrentBatchConfig:Ol,ReactCurrentOwner:ep};function Ox(){throw Error("act(...) is not supported in production builds of React.")}ce.Children={map:fl,forEach:function(t,e,n){fl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return fl(t,function(){e++}),e},toArray:function(t){return fl(t,function(e){return e})||[]},only:function(t){if(!tp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ce.Component=Ui;ce.Fragment=nA;ce.Profiler=sA;ce.PureComponent=Xh;ce.StrictMode=rA;ce.Suspense=lA;ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mA;ce.act=Ox;ce.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Mx({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=ep.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Vx.call(e,l)&&!Ux.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Pa,type:t.type,key:s,ref:i,props:r,_owner:o}};ce.createContext=function(t){return t={$$typeof:oA,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:iA,_context:t},t.Consumer=t};ce.createElement=Fx;ce.createFactory=function(t){var e=Fx.bind(null,t);return e.type=t,e};ce.createRef=function(){return{current:null}};ce.forwardRef=function(t){return{$$typeof:aA,render:t}};ce.isValidElement=tp;ce.lazy=function(t){return{$$typeof:cA,_payload:{_status:-1,_result:t},_init:pA}};ce.memo=function(t,e){return{$$typeof:uA,type:t,compare:e===void 0?null:e}};ce.startTransition=function(t){var e=Ol.transition;Ol.transition={};try{t()}finally{Ol.transition=e}};ce.unstable_act=Ox;ce.useCallback=function(t,e){return kt.current.useCallback(t,e)};ce.useContext=function(t){return kt.current.useContext(t)};ce.useDebugValue=function(){};ce.useDeferredValue=function(t){return kt.current.useDeferredValue(t)};ce.useEffect=function(t,e){return kt.current.useEffect(t,e)};ce.useId=function(){return kt.current.useId()};ce.useImperativeHandle=function(t,e,n){return kt.current.useImperativeHandle(t,e,n)};ce.useInsertionEffect=function(t,e){return kt.current.useInsertionEffect(t,e)};ce.useLayoutEffect=function(t,e){return kt.current.useLayoutEffect(t,e)};ce.useMemo=function(t,e){return kt.current.useMemo(t,e)};ce.useReducer=function(t,e,n){return kt.current.useReducer(t,e,n)};ce.useRef=function(t){return kt.current.useRef(t)};ce.useState=function(t){return kt.current.useState(t)};ce.useSyncExternalStore=function(t,e,n){return kt.current.useSyncExternalStore(t,e,n)};ce.useTransition=function(){return kt.current.useTransition()};ce.version="18.3.1";Rx.exports=ce;var $=Rx.exports;const du=eA($);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gA=$,yA=Symbol.for("react.element"),vA=Symbol.for("react.fragment"),_A=Object.prototype.hasOwnProperty,xA=gA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,wA={key:!0,ref:!0,__self:!0,__source:!0};function Bx(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)_A.call(e,r)&&!wA.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:yA,type:t,key:i,ref:o,props:s,_owner:xA.current}}lc.Fragment=vA;lc.jsx=Bx;lc.jsxs=Bx;bx.exports=lc;var p=bx.exports,df={},Gx={exports:{}},Wt={},qx={exports:{}},Hx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,j){var z=B.length;B.push(j);e:for(;0<z;){var ee=z-1>>>1,le=B[ee];if(0<s(le,j))B[ee]=j,B[z]=le,z=ee;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var j=B[0],z=B.pop();if(z!==j){B[0]=z;e:for(var ee=0,le=B.length,bt=le>>>1;ee<bt;){var Ee=2*(ee+1)-1,Xe=B[Ee],ie=Ee+1,Ce=B[ie];if(0>s(Xe,z))ie<le&&0>s(Ce,Xe)?(B[ee]=Ce,B[ie]=z,ee=ie):(B[ee]=Xe,B[Ee]=z,ee=Ee);else if(ie<le&&0>s(Ce,z))B[ee]=Ce,B[ie]=z,ee=ie;else break e}}return j}function s(B,j){var z=B.sortIndex-j.sortIndex;return z!==0?z:B.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,m=null,g=3,v=!1,x=!1,I=!1,P=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(B){for(var j=n(c);j!==null;){if(j.callback===null)r(c);else if(j.startTime<=B)r(c),j.sortIndex=j.expirationTime,e(l,j);else break;j=n(c)}}function D(B){if(I=!1,k(B),!x)if(n(l)!==null)x=!0,pe(U);else{var j=n(c);j!==null&&ye(D,j.startTime-B)}}function U(B,j){x=!1,I&&(I=!1,A(w),w=-1),v=!0;var z=g;try{for(k(j),m=n(l);m!==null&&(!(m.expirationTime>j)||B&&!N());){var ee=m.callback;if(typeof ee=="function"){m.callback=null,g=m.priorityLevel;var le=ee(m.expirationTime<=j);j=t.unstable_now(),typeof le=="function"?m.callback=le:m===n(l)&&r(l),k(j)}else r(l);m=n(l)}if(m!==null)var bt=!0;else{var Ee=n(c);Ee!==null&&ye(D,Ee.startTime-j),bt=!1}return bt}finally{m=null,g=z,v=!1}}var L=!1,T=null,w=-1,C=5,R=-1;function N(){return!(t.unstable_now()-R<C)}function M(){if(T!==null){var B=t.unstable_now();R=B;var j=!0;try{j=T(!0,B)}finally{j?b():(L=!1,T=null)}}else L=!1}var b;if(typeof E=="function")b=function(){E(M)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,_e=X.port2;X.port1.onmessage=M,b=function(){_e.postMessage(null)}}else b=function(){P(M,0)};function pe(B){T=B,L||(L=!0,b())}function ye(B,j){w=P(function(){B(t.unstable_now())},j)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){x||v||(x=!0,pe(U))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(B){switch(g){case 1:case 2:case 3:var j=3;break;default:j=g}var z=g;g=j;try{return B()}finally{g=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,j){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var z=g;g=B;try{return j()}finally{g=z}},t.unstable_scheduleCallback=function(B,j,z){var ee=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?ee+z:ee):z=ee,B){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=z+le,B={id:h++,callback:j,priorityLevel:B,startTime:z,expirationTime:le,sortIndex:-1},z>ee?(B.sortIndex=z,e(c,B),n(l)===null&&B===n(c)&&(I?(A(w),w=-1):I=!0,ye(D,z-ee))):(B.sortIndex=le,e(l,B),x||v||(x=!0,pe(U))),B},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(B){var j=g;return function(){var z=g;g=j;try{return B.apply(this,arguments)}finally{g=z}}}})(Hx);qx.exports=Hx;var EA=qx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TA=$,$t=EA;function H(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var jx=new Set,Zo={};function ks(t,e){xi(t,e),xi(t+"Capture",e)}function xi(t,e){for(Zo[t]=e,t=0;t<e.length;t++)jx.add(e[t])}var Hn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ff=Object.prototype.hasOwnProperty,CA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,e0={},t0={};function SA(t){return ff.call(t0,t)?!0:ff.call(e0,t)?!1:CA.test(t)?t0[t]=!0:(e0[t]=!0,!1)}function IA(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function AA(t,e,n,r){if(e===null||typeof e>"u"||IA(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Nt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var lt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){lt[t]=new Nt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];lt[e]=new Nt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){lt[t]=new Nt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){lt[t]=new Nt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){lt[t]=new Nt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){lt[t]=new Nt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){lt[t]=new Nt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){lt[t]=new Nt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){lt[t]=new Nt(t,5,!1,t.toLowerCase(),null,!1,!1)});var np=/[\-:]([a-z])/g;function rp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(np,rp);lt[e]=new Nt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(np,rp);lt[e]=new Nt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(np,rp);lt[e]=new Nt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){lt[t]=new Nt(t,1,!1,t.toLowerCase(),null,!1,!1)});lt.xlinkHref=new Nt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){lt[t]=new Nt(t,1,!1,t.toLowerCase(),null,!0,!0)});function sp(t,e,n,r){var s=lt.hasOwnProperty(e)?lt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(AA(e,n,s,r)&&(n=null),r||s===null?SA(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Zn=TA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,hl=Symbol.for("react.element"),zs=Symbol.for("react.portal"),$s=Symbol.for("react.fragment"),ip=Symbol.for("react.strict_mode"),hf=Symbol.for("react.profiler"),zx=Symbol.for("react.provider"),$x=Symbol.for("react.context"),op=Symbol.for("react.forward_ref"),pf=Symbol.for("react.suspense"),mf=Symbol.for("react.suspense_list"),ap=Symbol.for("react.memo"),dr=Symbol.for("react.lazy"),Wx=Symbol.for("react.offscreen"),n0=Symbol.iterator;function go(t){return t===null||typeof t!="object"?null:(t=n0&&t[n0]||t["@@iterator"],typeof t=="function"?t:null)}var Le=Object.assign,Ed;function Io(t){if(Ed===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ed=e&&e[1]||""}return`
`+Ed+t}var Td=!1;function Cd(t,e){if(!t||Td)return"";Td=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Td=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Io(t):""}function kA(t){switch(t.tag){case 5:return Io(t.type);case 16:return Io("Lazy");case 13:return Io("Suspense");case 19:return Io("SuspenseList");case 0:case 2:case 15:return t=Cd(t.type,!1),t;case 11:return t=Cd(t.type.render,!1),t;case 1:return t=Cd(t.type,!0),t;default:return""}}function gf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case $s:return"Fragment";case zs:return"Portal";case hf:return"Profiler";case ip:return"StrictMode";case pf:return"Suspense";case mf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case $x:return(t.displayName||"Context")+".Consumer";case zx:return(t._context.displayName||"Context")+".Provider";case op:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ap:return e=t.displayName||null,e!==null?e:gf(t.type)||"Memo";case dr:e=t._payload,t=t._init;try{return gf(t(e))}catch{}}return null}function NA(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return gf(e);case 8:return e===ip?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ur(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Kx(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function bA(t){var e=Kx(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function pl(t){t._valueTracker||(t._valueTracker=bA(t))}function Jx(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Kx(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function fu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function yf(t,e){var n=e.checked;return Le({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function r0(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ur(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Yx(t,e){e=e.checked,e!=null&&sp(t,"checked",e,!1)}function vf(t,e){Yx(t,e);var n=Ur(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?_f(t,e.type,n):e.hasOwnProperty("defaultValue")&&_f(t,e.type,Ur(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function s0(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function _f(t,e,n){(e!=="number"||fu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ao=Array.isArray;function ii(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ur(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function xf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(H(91));return Le({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function i0(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(H(92));if(Ao(n)){if(1<n.length)throw Error(H(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ur(n)}}function Qx(t,e){var n=Ur(e.value),r=Ur(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function o0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Xx(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function wf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Xx(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ml,Zx=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ml=ml||document.createElement("div"),ml.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ml.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ea(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Do={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},RA=["Webkit","ms","Moz","O"];Object.keys(Do).forEach(function(t){RA.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Do[e]=Do[t]})});function ew(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Do.hasOwnProperty(t)&&Do[t]?(""+e).trim():e+"px"}function tw(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=ew(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var PA=Le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ef(t,e){if(e){if(PA[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(H(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(H(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(H(61))}if(e.style!=null&&typeof e.style!="object")throw Error(H(62))}}function Tf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cf=null;function lp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Sf=null,oi=null,ai=null;function a0(t){if(t=La(t)){if(typeof Sf!="function")throw Error(H(280));var e=t.stateNode;e&&(e=hc(e),Sf(t.stateNode,t.type,e))}}function nw(t){oi?ai?ai.push(t):ai=[t]:oi=t}function rw(){if(oi){var t=oi,e=ai;if(ai=oi=null,a0(t),e)for(t=0;t<e.length;t++)a0(e[t])}}function sw(t,e){return t(e)}function iw(){}var Sd=!1;function ow(t,e,n){if(Sd)return t(e,n);Sd=!0;try{return sw(t,e,n)}finally{Sd=!1,(oi!==null||ai!==null)&&(iw(),rw())}}function ta(t,e){var n=t.stateNode;if(n===null)return null;var r=hc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(H(231,e,typeof n));return n}var If=!1;if(Hn)try{var yo={};Object.defineProperty(yo,"passive",{get:function(){If=!0}}),window.addEventListener("test",yo,yo),window.removeEventListener("test",yo,yo)}catch{If=!1}function MA(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var Lo=!1,hu=null,pu=!1,Af=null,DA={onError:function(t){Lo=!0,hu=t}};function LA(t,e,n,r,s,i,o,a,l){Lo=!1,hu=null,MA.apply(DA,arguments)}function VA(t,e,n,r,s,i,o,a,l){if(LA.apply(this,arguments),Lo){if(Lo){var c=hu;Lo=!1,hu=null}else throw Error(H(198));pu||(pu=!0,Af=c)}}function Ns(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function aw(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function l0(t){if(Ns(t)!==t)throw Error(H(188))}function UA(t){var e=t.alternate;if(!e){if(e=Ns(t),e===null)throw Error(H(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return l0(s),t;if(i===r)return l0(s),e;i=i.sibling}throw Error(H(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(H(189))}}if(n.alternate!==r)throw Error(H(190))}if(n.tag!==3)throw Error(H(188));return n.stateNode.current===n?t:e}function lw(t){return t=UA(t),t!==null?uw(t):null}function uw(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=uw(t);if(e!==null)return e;t=t.sibling}return null}var cw=$t.unstable_scheduleCallback,u0=$t.unstable_cancelCallback,FA=$t.unstable_shouldYield,OA=$t.unstable_requestPaint,qe=$t.unstable_now,BA=$t.unstable_getCurrentPriorityLevel,up=$t.unstable_ImmediatePriority,dw=$t.unstable_UserBlockingPriority,mu=$t.unstable_NormalPriority,GA=$t.unstable_LowPriority,fw=$t.unstable_IdlePriority,uc=null,Cn=null;function qA(t){if(Cn&&typeof Cn.onCommitFiberRoot=="function")try{Cn.onCommitFiberRoot(uc,t,void 0,(t.current.flags&128)===128)}catch{}}var un=Math.clz32?Math.clz32:zA,HA=Math.log,jA=Math.LN2;function zA(t){return t>>>=0,t===0?32:31-(HA(t)/jA|0)|0}var gl=64,yl=4194304;function ko(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function gu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=ko(a):(i&=o,i!==0&&(r=ko(i)))}else o=n&~s,o!==0?r=ko(o):i!==0&&(r=ko(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-un(e),s=1<<n,r|=t[n],e&=~s;return r}function $A(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function WA(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-un(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=$A(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function kf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function hw(){var t=gl;return gl<<=1,!(gl&4194240)&&(gl=64),t}function Id(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ma(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-un(e),t[e]=n}function KA(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-un(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function cp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-un(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var we=0;function pw(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var mw,dp,gw,yw,vw,Nf=!1,vl=[],Er=null,Tr=null,Cr=null,na=new Map,ra=new Map,hr=[],JA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function c0(t,e){switch(t){case"focusin":case"focusout":Er=null;break;case"dragenter":case"dragleave":Tr=null;break;case"mouseover":case"mouseout":Cr=null;break;case"pointerover":case"pointerout":na.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ra.delete(e.pointerId)}}function vo(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=La(e),e!==null&&dp(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function YA(t,e,n,r,s){switch(e){case"focusin":return Er=vo(Er,t,e,n,r,s),!0;case"dragenter":return Tr=vo(Tr,t,e,n,r,s),!0;case"mouseover":return Cr=vo(Cr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return na.set(i,vo(na.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ra.set(i,vo(ra.get(i)||null,t,e,n,r,s)),!0}return!1}function _w(t){var e=as(t.target);if(e!==null){var n=Ns(e);if(n!==null){if(e=n.tag,e===13){if(e=aw(n),e!==null){t.blockedOn=e,vw(t.priority,function(){gw(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Bl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=bf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Cf=r,n.target.dispatchEvent(r),Cf=null}else return e=La(n),e!==null&&dp(e),t.blockedOn=n,!1;e.shift()}return!0}function d0(t,e,n){Bl(t)&&n.delete(e)}function QA(){Nf=!1,Er!==null&&Bl(Er)&&(Er=null),Tr!==null&&Bl(Tr)&&(Tr=null),Cr!==null&&Bl(Cr)&&(Cr=null),na.forEach(d0),ra.forEach(d0)}function _o(t,e){t.blockedOn===e&&(t.blockedOn=null,Nf||(Nf=!0,$t.unstable_scheduleCallback($t.unstable_NormalPriority,QA)))}function sa(t){function e(s){return _o(s,t)}if(0<vl.length){_o(vl[0],t);for(var n=1;n<vl.length;n++){var r=vl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Er!==null&&_o(Er,t),Tr!==null&&_o(Tr,t),Cr!==null&&_o(Cr,t),na.forEach(e),ra.forEach(e),n=0;n<hr.length;n++)r=hr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<hr.length&&(n=hr[0],n.blockedOn===null);)_w(n),n.blockedOn===null&&hr.shift()}var li=Zn.ReactCurrentBatchConfig,yu=!0;function XA(t,e,n,r){var s=we,i=li.transition;li.transition=null;try{we=1,fp(t,e,n,r)}finally{we=s,li.transition=i}}function ZA(t,e,n,r){var s=we,i=li.transition;li.transition=null;try{we=4,fp(t,e,n,r)}finally{we=s,li.transition=i}}function fp(t,e,n,r){if(yu){var s=bf(t,e,n,r);if(s===null)Vd(t,e,r,vu,n),c0(t,r);else if(YA(s,t,e,n,r))r.stopPropagation();else if(c0(t,r),e&4&&-1<JA.indexOf(t)){for(;s!==null;){var i=La(s);if(i!==null&&mw(i),i=bf(t,e,n,r),i===null&&Vd(t,e,r,vu,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Vd(t,e,r,null,n)}}var vu=null;function bf(t,e,n,r){if(vu=null,t=lp(r),t=as(t),t!==null)if(e=Ns(t),e===null)t=null;else if(n=e.tag,n===13){if(t=aw(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return vu=t,null}function xw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(BA()){case up:return 1;case dw:return 4;case mu:case GA:return 16;case fw:return 536870912;default:return 16}default:return 16}}var _r=null,hp=null,Gl=null;function ww(){if(Gl)return Gl;var t,e=hp,n=e.length,r,s="value"in _r?_r.value:_r.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Gl=s.slice(t,1<r?1-r:void 0)}function ql(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function _l(){return!0}function f0(){return!1}function Kt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?_l:f0,this.isPropagationStopped=f0,this}return Le(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=_l)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=_l)},persist:function(){},isPersistent:_l}),e}var Fi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pp=Kt(Fi),Da=Le({},Fi,{view:0,detail:0}),e1=Kt(Da),Ad,kd,xo,cc=Le({},Da,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==xo&&(xo&&t.type==="mousemove"?(Ad=t.screenX-xo.screenX,kd=t.screenY-xo.screenY):kd=Ad=0,xo=t),Ad)},movementY:function(t){return"movementY"in t?t.movementY:kd}}),h0=Kt(cc),t1=Le({},cc,{dataTransfer:0}),n1=Kt(t1),r1=Le({},Da,{relatedTarget:0}),Nd=Kt(r1),s1=Le({},Fi,{animationName:0,elapsedTime:0,pseudoElement:0}),i1=Kt(s1),o1=Le({},Fi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),a1=Kt(o1),l1=Le({},Fi,{data:0}),p0=Kt(l1),u1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},c1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},d1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function f1(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=d1[t])?!!e[t]:!1}function mp(){return f1}var h1=Le({},Da,{key:function(t){if(t.key){var e=u1[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ql(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?c1[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mp,charCode:function(t){return t.type==="keypress"?ql(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ql(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),p1=Kt(h1),m1=Le({},cc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),m0=Kt(m1),g1=Le({},Da,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mp}),y1=Kt(g1),v1=Le({},Fi,{propertyName:0,elapsedTime:0,pseudoElement:0}),_1=Kt(v1),x1=Le({},cc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),w1=Kt(x1),E1=[9,13,27,32],gp=Hn&&"CompositionEvent"in window,Vo=null;Hn&&"documentMode"in document&&(Vo=document.documentMode);var T1=Hn&&"TextEvent"in window&&!Vo,Ew=Hn&&(!gp||Vo&&8<Vo&&11>=Vo),g0=" ",y0=!1;function Tw(t,e){switch(t){case"keyup":return E1.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Cw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ws=!1;function C1(t,e){switch(t){case"compositionend":return Cw(e);case"keypress":return e.which!==32?null:(y0=!0,g0);case"textInput":return t=e.data,t===g0&&y0?null:t;default:return null}}function S1(t,e){if(Ws)return t==="compositionend"||!gp&&Tw(t,e)?(t=ww(),Gl=hp=_r=null,Ws=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Ew&&e.locale!=="ko"?null:e.data;default:return null}}var I1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function v0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!I1[t.type]:e==="textarea"}function Sw(t,e,n,r){nw(r),e=_u(e,"onChange"),0<e.length&&(n=new pp("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Uo=null,ia=null;function A1(t){Vw(t,0)}function dc(t){var e=Ys(t);if(Jx(e))return t}function k1(t,e){if(t==="change")return e}var Iw=!1;if(Hn){var bd;if(Hn){var Rd="oninput"in document;if(!Rd){var _0=document.createElement("div");_0.setAttribute("oninput","return;"),Rd=typeof _0.oninput=="function"}bd=Rd}else bd=!1;Iw=bd&&(!document.documentMode||9<document.documentMode)}function x0(){Uo&&(Uo.detachEvent("onpropertychange",Aw),ia=Uo=null)}function Aw(t){if(t.propertyName==="value"&&dc(ia)){var e=[];Sw(e,ia,t,lp(t)),ow(A1,e)}}function N1(t,e,n){t==="focusin"?(x0(),Uo=e,ia=n,Uo.attachEvent("onpropertychange",Aw)):t==="focusout"&&x0()}function b1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return dc(ia)}function R1(t,e){if(t==="click")return dc(e)}function P1(t,e){if(t==="input"||t==="change")return dc(e)}function M1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var dn=typeof Object.is=="function"?Object.is:M1;function oa(t,e){if(dn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!ff.call(e,s)||!dn(t[s],e[s]))return!1}return!0}function w0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function E0(t,e){var n=w0(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=w0(n)}}function kw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?kw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Nw(){for(var t=window,e=fu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=fu(t.document)}return e}function yp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function D1(t){var e=Nw(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&kw(n.ownerDocument.documentElement,n)){if(r!==null&&yp(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=E0(n,i);var o=E0(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var L1=Hn&&"documentMode"in document&&11>=document.documentMode,Ks=null,Rf=null,Fo=null,Pf=!1;function T0(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Pf||Ks==null||Ks!==fu(r)||(r=Ks,"selectionStart"in r&&yp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Fo&&oa(Fo,r)||(Fo=r,r=_u(Rf,"onSelect"),0<r.length&&(e=new pp("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ks)))}function xl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Js={animationend:xl("Animation","AnimationEnd"),animationiteration:xl("Animation","AnimationIteration"),animationstart:xl("Animation","AnimationStart"),transitionend:xl("Transition","TransitionEnd")},Pd={},bw={};Hn&&(bw=document.createElement("div").style,"AnimationEvent"in window||(delete Js.animationend.animation,delete Js.animationiteration.animation,delete Js.animationstart.animation),"TransitionEvent"in window||delete Js.transitionend.transition);function fc(t){if(Pd[t])return Pd[t];if(!Js[t])return t;var e=Js[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in bw)return Pd[t]=e[n];return t}var Rw=fc("animationend"),Pw=fc("animationiteration"),Mw=fc("animationstart"),Dw=fc("transitionend"),Lw=new Map,C0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zr(t,e){Lw.set(t,e),ks(e,[t])}for(var Md=0;Md<C0.length;Md++){var Dd=C0[Md],V1=Dd.toLowerCase(),U1=Dd[0].toUpperCase()+Dd.slice(1);zr(V1,"on"+U1)}zr(Rw,"onAnimationEnd");zr(Pw,"onAnimationIteration");zr(Mw,"onAnimationStart");zr("dblclick","onDoubleClick");zr("focusin","onFocus");zr("focusout","onBlur");zr(Dw,"onTransitionEnd");xi("onMouseEnter",["mouseout","mouseover"]);xi("onMouseLeave",["mouseout","mouseover"]);xi("onPointerEnter",["pointerout","pointerover"]);xi("onPointerLeave",["pointerout","pointerover"]);ks("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ks("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ks("onBeforeInput",["compositionend","keypress","textInput","paste"]);ks("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ks("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ks("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var No="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),F1=new Set("cancel close invalid load scroll toggle".split(" ").concat(No));function S0(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,VA(r,e,void 0,t),t.currentTarget=null}function Vw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;S0(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;S0(s,a,c),i=l}}}if(pu)throw t=Af,pu=!1,Af=null,t}function ke(t,e){var n=e[Uf];n===void 0&&(n=e[Uf]=new Set);var r=t+"__bubble";n.has(r)||(Uw(e,t,2,!1),n.add(r))}function Ld(t,e,n){var r=0;e&&(r|=4),Uw(n,t,r,e)}var wl="_reactListening"+Math.random().toString(36).slice(2);function aa(t){if(!t[wl]){t[wl]=!0,jx.forEach(function(n){n!=="selectionchange"&&(F1.has(n)||Ld(n,!1,t),Ld(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[wl]||(e[wl]=!0,Ld("selectionchange",!1,e))}}function Uw(t,e,n,r){switch(xw(e)){case 1:var s=XA;break;case 4:s=ZA;break;default:s=fp}n=s.bind(null,e,n,t),s=void 0,!If||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Vd(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=as(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}ow(function(){var c=i,h=lp(n),m=[];e:{var g=Lw.get(t);if(g!==void 0){var v=pp,x=t;switch(t){case"keypress":if(ql(n)===0)break e;case"keydown":case"keyup":v=p1;break;case"focusin":x="focus",v=Nd;break;case"focusout":x="blur",v=Nd;break;case"beforeblur":case"afterblur":v=Nd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=h0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=n1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=y1;break;case Rw:case Pw:case Mw:v=i1;break;case Dw:v=_1;break;case"scroll":v=e1;break;case"wheel":v=w1;break;case"copy":case"cut":case"paste":v=a1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=m0}var I=(e&4)!==0,P=!I&&t==="scroll",A=I?g!==null?g+"Capture":null:g;I=[];for(var E=c,k;E!==null;){k=E;var D=k.stateNode;if(k.tag===5&&D!==null&&(k=D,A!==null&&(D=ta(E,A),D!=null&&I.push(la(E,D,k)))),P)break;E=E.return}0<I.length&&(g=new v(g,x,null,n,h),m.push({event:g,listeners:I}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",g&&n!==Cf&&(x=n.relatedTarget||n.fromElement)&&(as(x)||x[jn]))break e;if((v||g)&&(g=h.window===h?h:(g=h.ownerDocument)?g.defaultView||g.parentWindow:window,v?(x=n.relatedTarget||n.toElement,v=c,x=x?as(x):null,x!==null&&(P=Ns(x),x!==P||x.tag!==5&&x.tag!==6)&&(x=null)):(v=null,x=c),v!==x)){if(I=h0,D="onMouseLeave",A="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(I=m0,D="onPointerLeave",A="onPointerEnter",E="pointer"),P=v==null?g:Ys(v),k=x==null?g:Ys(x),g=new I(D,E+"leave",v,n,h),g.target=P,g.relatedTarget=k,D=null,as(h)===c&&(I=new I(A,E+"enter",x,n,h),I.target=k,I.relatedTarget=P,D=I),P=D,v&&x)t:{for(I=v,A=x,E=0,k=I;k;k=Bs(k))E++;for(k=0,D=A;D;D=Bs(D))k++;for(;0<E-k;)I=Bs(I),E--;for(;0<k-E;)A=Bs(A),k--;for(;E--;){if(I===A||A!==null&&I===A.alternate)break t;I=Bs(I),A=Bs(A)}I=null}else I=null;v!==null&&I0(m,g,v,I,!1),x!==null&&P!==null&&I0(m,P,x,I,!0)}}e:{if(g=c?Ys(c):window,v=g.nodeName&&g.nodeName.toLowerCase(),v==="select"||v==="input"&&g.type==="file")var U=k1;else if(v0(g))if(Iw)U=P1;else{U=b1;var L=N1}else(v=g.nodeName)&&v.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(U=R1);if(U&&(U=U(t,c))){Sw(m,U,n,h);break e}L&&L(t,g,c),t==="focusout"&&(L=g._wrapperState)&&L.controlled&&g.type==="number"&&_f(g,"number",g.value)}switch(L=c?Ys(c):window,t){case"focusin":(v0(L)||L.contentEditable==="true")&&(Ks=L,Rf=c,Fo=null);break;case"focusout":Fo=Rf=Ks=null;break;case"mousedown":Pf=!0;break;case"contextmenu":case"mouseup":case"dragend":Pf=!1,T0(m,n,h);break;case"selectionchange":if(L1)break;case"keydown":case"keyup":T0(m,n,h)}var T;if(gp)e:{switch(t){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Ws?Tw(t,n)&&(w="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(w="onCompositionStart");w&&(Ew&&n.locale!=="ko"&&(Ws||w!=="onCompositionStart"?w==="onCompositionEnd"&&Ws&&(T=ww()):(_r=h,hp="value"in _r?_r.value:_r.textContent,Ws=!0)),L=_u(c,w),0<L.length&&(w=new p0(w,t,null,n,h),m.push({event:w,listeners:L}),T?w.data=T:(T=Cw(n),T!==null&&(w.data=T)))),(T=T1?C1(t,n):S1(t,n))&&(c=_u(c,"onBeforeInput"),0<c.length&&(h=new p0("onBeforeInput","beforeinput",null,n,h),m.push({event:h,listeners:c}),h.data=T))}Vw(m,e)})}function la(t,e,n){return{instance:t,listener:e,currentTarget:n}}function _u(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ta(t,n),i!=null&&r.unshift(la(t,i,s)),i=ta(t,e),i!=null&&r.push(la(t,i,s))),t=t.return}return r}function Bs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function I0(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=ta(n,i),l!=null&&o.unshift(la(n,l,a))):s||(l=ta(n,i),l!=null&&o.push(la(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var O1=/\r\n?/g,B1=/\u0000|\uFFFD/g;function A0(t){return(typeof t=="string"?t:""+t).replace(O1,`
`).replace(B1,"")}function El(t,e,n){if(e=A0(e),A0(t)!==e&&n)throw Error(H(425))}function xu(){}var Mf=null,Df=null;function Lf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Vf=typeof setTimeout=="function"?setTimeout:void 0,G1=typeof clearTimeout=="function"?clearTimeout:void 0,k0=typeof Promise=="function"?Promise:void 0,q1=typeof queueMicrotask=="function"?queueMicrotask:typeof k0<"u"?function(t){return k0.resolve(null).then(t).catch(H1)}:Vf;function H1(t){setTimeout(function(){throw t})}function Ud(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),sa(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);sa(e)}function Sr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function N0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Oi=Math.random().toString(36).slice(2),wn="__reactFiber$"+Oi,ua="__reactProps$"+Oi,jn="__reactContainer$"+Oi,Uf="__reactEvents$"+Oi,j1="__reactListeners$"+Oi,z1="__reactHandles$"+Oi;function as(t){var e=t[wn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[jn]||n[wn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=N0(t);t!==null;){if(n=t[wn])return n;t=N0(t)}return e}t=n,n=t.parentNode}return null}function La(t){return t=t[wn]||t[jn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ys(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(H(33))}function hc(t){return t[ua]||null}var Ff=[],Qs=-1;function $r(t){return{current:t}}function Re(t){0>Qs||(t.current=Ff[Qs],Ff[Qs]=null,Qs--)}function Ie(t,e){Qs++,Ff[Qs]=t.current,t.current=e}var Fr={},wt=$r(Fr),Lt=$r(!1),gs=Fr;function wi(t,e){var n=t.type.contextTypes;if(!n)return Fr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Vt(t){return t=t.childContextTypes,t!=null}function wu(){Re(Lt),Re(wt)}function b0(t,e,n){if(wt.current!==Fr)throw Error(H(168));Ie(wt,e),Ie(Lt,n)}function Fw(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(H(108,NA(t)||"Unknown",s));return Le({},n,r)}function Eu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Fr,gs=wt.current,Ie(wt,t),Ie(Lt,Lt.current),!0}function R0(t,e,n){var r=t.stateNode;if(!r)throw Error(H(169));n?(t=Fw(t,e,gs),r.__reactInternalMemoizedMergedChildContext=t,Re(Lt),Re(wt),Ie(wt,t)):Re(Lt),Ie(Lt,n)}var Un=null,pc=!1,Fd=!1;function Ow(t){Un===null?Un=[t]:Un.push(t)}function $1(t){pc=!0,Ow(t)}function Wr(){if(!Fd&&Un!==null){Fd=!0;var t=0,e=we;try{var n=Un;for(we=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Un=null,pc=!1}catch(s){throw Un!==null&&(Un=Un.slice(t+1)),cw(up,Wr),s}finally{we=e,Fd=!1}}return null}var Xs=[],Zs=0,Tu=null,Cu=0,Jt=[],Yt=0,ys=null,Fn=1,On="";function ss(t,e){Xs[Zs++]=Cu,Xs[Zs++]=Tu,Tu=t,Cu=e}function Bw(t,e,n){Jt[Yt++]=Fn,Jt[Yt++]=On,Jt[Yt++]=ys,ys=t;var r=Fn;t=On;var s=32-un(r)-1;r&=~(1<<s),n+=1;var i=32-un(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Fn=1<<32-un(e)+s|n<<s|r,On=i+t}else Fn=1<<i|n<<s|r,On=t}function vp(t){t.return!==null&&(ss(t,1),Bw(t,1,0))}function _p(t){for(;t===Tu;)Tu=Xs[--Zs],Xs[Zs]=null,Cu=Xs[--Zs],Xs[Zs]=null;for(;t===ys;)ys=Jt[--Yt],Jt[Yt]=null,On=Jt[--Yt],Jt[Yt]=null,Fn=Jt[--Yt],Jt[Yt]=null}var zt=null,Ht=null,Pe=!1,an=null;function Gw(t,e){var n=Xt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function P0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,zt=t,Ht=Sr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,zt=t,Ht=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ys!==null?{id:Fn,overflow:On}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Xt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,zt=t,Ht=null,!0):!1;default:return!1}}function Of(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Bf(t){if(Pe){var e=Ht;if(e){var n=e;if(!P0(t,e)){if(Of(t))throw Error(H(418));e=Sr(n.nextSibling);var r=zt;e&&P0(t,e)?Gw(r,n):(t.flags=t.flags&-4097|2,Pe=!1,zt=t)}}else{if(Of(t))throw Error(H(418));t.flags=t.flags&-4097|2,Pe=!1,zt=t}}}function M0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;zt=t}function Tl(t){if(t!==zt)return!1;if(!Pe)return M0(t),Pe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Lf(t.type,t.memoizedProps)),e&&(e=Ht)){if(Of(t))throw qw(),Error(H(418));for(;e;)Gw(t,e),e=Sr(e.nextSibling)}if(M0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(H(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ht=Sr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ht=null}}else Ht=zt?Sr(t.stateNode.nextSibling):null;return!0}function qw(){for(var t=Ht;t;)t=Sr(t.nextSibling)}function Ei(){Ht=zt=null,Pe=!1}function xp(t){an===null?an=[t]:an.push(t)}var W1=Zn.ReactCurrentBatchConfig;function wo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(H(309));var r=n.stateNode}if(!r)throw Error(H(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(H(284));if(!n._owner)throw Error(H(290,t))}return t}function Cl(t,e){throw t=Object.prototype.toString.call(e),Error(H(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function D0(t){var e=t._init;return e(t._payload)}function Hw(t){function e(A,E){if(t){var k=A.deletions;k===null?(A.deletions=[E],A.flags|=16):k.push(E)}}function n(A,E){if(!t)return null;for(;E!==null;)e(A,E),E=E.sibling;return null}function r(A,E){for(A=new Map;E!==null;)E.key!==null?A.set(E.key,E):A.set(E.index,E),E=E.sibling;return A}function s(A,E){return A=Nr(A,E),A.index=0,A.sibling=null,A}function i(A,E,k){return A.index=k,t?(k=A.alternate,k!==null?(k=k.index,k<E?(A.flags|=2,E):k):(A.flags|=2,E)):(A.flags|=1048576,E)}function o(A){return t&&A.alternate===null&&(A.flags|=2),A}function a(A,E,k,D){return E===null||E.tag!==6?(E=zd(k,A.mode,D),E.return=A,E):(E=s(E,k),E.return=A,E)}function l(A,E,k,D){var U=k.type;return U===$s?h(A,E,k.props.children,D,k.key):E!==null&&(E.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===dr&&D0(U)===E.type)?(D=s(E,k.props),D.ref=wo(A,E,k),D.return=A,D):(D=Jl(k.type,k.key,k.props,null,A.mode,D),D.ref=wo(A,E,k),D.return=A,D)}function c(A,E,k,D){return E===null||E.tag!==4||E.stateNode.containerInfo!==k.containerInfo||E.stateNode.implementation!==k.implementation?(E=$d(k,A.mode,D),E.return=A,E):(E=s(E,k.children||[]),E.return=A,E)}function h(A,E,k,D,U){return E===null||E.tag!==7?(E=hs(k,A.mode,D,U),E.return=A,E):(E=s(E,k),E.return=A,E)}function m(A,E,k){if(typeof E=="string"&&E!==""||typeof E=="number")return E=zd(""+E,A.mode,k),E.return=A,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case hl:return k=Jl(E.type,E.key,E.props,null,A.mode,k),k.ref=wo(A,null,E),k.return=A,k;case zs:return E=$d(E,A.mode,k),E.return=A,E;case dr:var D=E._init;return m(A,D(E._payload),k)}if(Ao(E)||go(E))return E=hs(E,A.mode,k,null),E.return=A,E;Cl(A,E)}return null}function g(A,E,k,D){var U=E!==null?E.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return U!==null?null:a(A,E,""+k,D);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case hl:return k.key===U?l(A,E,k,D):null;case zs:return k.key===U?c(A,E,k,D):null;case dr:return U=k._init,g(A,E,U(k._payload),D)}if(Ao(k)||go(k))return U!==null?null:h(A,E,k,D,null);Cl(A,k)}return null}function v(A,E,k,D,U){if(typeof D=="string"&&D!==""||typeof D=="number")return A=A.get(k)||null,a(E,A,""+D,U);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case hl:return A=A.get(D.key===null?k:D.key)||null,l(E,A,D,U);case zs:return A=A.get(D.key===null?k:D.key)||null,c(E,A,D,U);case dr:var L=D._init;return v(A,E,k,L(D._payload),U)}if(Ao(D)||go(D))return A=A.get(k)||null,h(E,A,D,U,null);Cl(E,D)}return null}function x(A,E,k,D){for(var U=null,L=null,T=E,w=E=0,C=null;T!==null&&w<k.length;w++){T.index>w?(C=T,T=null):C=T.sibling;var R=g(A,T,k[w],D);if(R===null){T===null&&(T=C);break}t&&T&&R.alternate===null&&e(A,T),E=i(R,E,w),L===null?U=R:L.sibling=R,L=R,T=C}if(w===k.length)return n(A,T),Pe&&ss(A,w),U;if(T===null){for(;w<k.length;w++)T=m(A,k[w],D),T!==null&&(E=i(T,E,w),L===null?U=T:L.sibling=T,L=T);return Pe&&ss(A,w),U}for(T=r(A,T);w<k.length;w++)C=v(T,A,w,k[w],D),C!==null&&(t&&C.alternate!==null&&T.delete(C.key===null?w:C.key),E=i(C,E,w),L===null?U=C:L.sibling=C,L=C);return t&&T.forEach(function(N){return e(A,N)}),Pe&&ss(A,w),U}function I(A,E,k,D){var U=go(k);if(typeof U!="function")throw Error(H(150));if(k=U.call(k),k==null)throw Error(H(151));for(var L=U=null,T=E,w=E=0,C=null,R=k.next();T!==null&&!R.done;w++,R=k.next()){T.index>w?(C=T,T=null):C=T.sibling;var N=g(A,T,R.value,D);if(N===null){T===null&&(T=C);break}t&&T&&N.alternate===null&&e(A,T),E=i(N,E,w),L===null?U=N:L.sibling=N,L=N,T=C}if(R.done)return n(A,T),Pe&&ss(A,w),U;if(T===null){for(;!R.done;w++,R=k.next())R=m(A,R.value,D),R!==null&&(E=i(R,E,w),L===null?U=R:L.sibling=R,L=R);return Pe&&ss(A,w),U}for(T=r(A,T);!R.done;w++,R=k.next())R=v(T,A,w,R.value,D),R!==null&&(t&&R.alternate!==null&&T.delete(R.key===null?w:R.key),E=i(R,E,w),L===null?U=R:L.sibling=R,L=R);return t&&T.forEach(function(M){return e(A,M)}),Pe&&ss(A,w),U}function P(A,E,k,D){if(typeof k=="object"&&k!==null&&k.type===$s&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case hl:e:{for(var U=k.key,L=E;L!==null;){if(L.key===U){if(U=k.type,U===$s){if(L.tag===7){n(A,L.sibling),E=s(L,k.props.children),E.return=A,A=E;break e}}else if(L.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===dr&&D0(U)===L.type){n(A,L.sibling),E=s(L,k.props),E.ref=wo(A,L,k),E.return=A,A=E;break e}n(A,L);break}else e(A,L);L=L.sibling}k.type===$s?(E=hs(k.props.children,A.mode,D,k.key),E.return=A,A=E):(D=Jl(k.type,k.key,k.props,null,A.mode,D),D.ref=wo(A,E,k),D.return=A,A=D)}return o(A);case zs:e:{for(L=k.key;E!==null;){if(E.key===L)if(E.tag===4&&E.stateNode.containerInfo===k.containerInfo&&E.stateNode.implementation===k.implementation){n(A,E.sibling),E=s(E,k.children||[]),E.return=A,A=E;break e}else{n(A,E);break}else e(A,E);E=E.sibling}E=$d(k,A.mode,D),E.return=A,A=E}return o(A);case dr:return L=k._init,P(A,E,L(k._payload),D)}if(Ao(k))return x(A,E,k,D);if(go(k))return I(A,E,k,D);Cl(A,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,E!==null&&E.tag===6?(n(A,E.sibling),E=s(E,k),E.return=A,A=E):(n(A,E),E=zd(k,A.mode,D),E.return=A,A=E),o(A)):n(A,E)}return P}var Ti=Hw(!0),jw=Hw(!1),Su=$r(null),Iu=null,ei=null,wp=null;function Ep(){wp=ei=Iu=null}function Tp(t){var e=Su.current;Re(Su),t._currentValue=e}function Gf(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ui(t,e){Iu=t,wp=ei=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Dt=!0),t.firstContext=null)}function tn(t){var e=t._currentValue;if(wp!==t)if(t={context:t,memoizedValue:e,next:null},ei===null){if(Iu===null)throw Error(H(308));ei=t,Iu.dependencies={lanes:0,firstContext:t}}else ei=ei.next=t;return e}var ls=null;function Cp(t){ls===null?ls=[t]:ls.push(t)}function zw(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Cp(e)):(n.next=s.next,s.next=n),e.interleaved=n,zn(t,r)}function zn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var fr=!1;function Sp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $w(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function qn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ir(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ge&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,zn(t,n)}return s=r.interleaved,s===null?(e.next=e,Cp(r)):(e.next=s.next,s.next=e),r.interleaved=e,zn(t,n)}function Hl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,cp(t,n)}}function L0(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Au(t,e,n,r){var s=t.updateQueue;fr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(i!==null){var m=s.baseState;o=0,h=c=l=null,a=i;do{var g=a.lane,v=a.eventTime;if((r&g)===g){h!==null&&(h=h.next={eventTime:v,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var x=t,I=a;switch(g=e,v=n,I.tag){case 1:if(x=I.payload,typeof x=="function"){m=x.call(v,m,g);break e}m=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=I.payload,g=typeof x=="function"?x.call(v,m,g):x,g==null)break e;m=Le({},m,g);break e;case 2:fr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[a]:g.push(a))}else v={eventTime:v,lane:g,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=v,l=m):h=h.next=v,o|=g;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;g=a,a=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(h===null&&(l=m),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);_s|=o,t.lanes=o,t.memoizedState=m}}function V0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(H(191,s));s.call(r)}}}var Va={},Sn=$r(Va),ca=$r(Va),da=$r(Va);function us(t){if(t===Va)throw Error(H(174));return t}function Ip(t,e){switch(Ie(da,e),Ie(ca,t),Ie(Sn,Va),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:wf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=wf(e,t)}Re(Sn),Ie(Sn,e)}function Ci(){Re(Sn),Re(ca),Re(da)}function Ww(t){us(da.current);var e=us(Sn.current),n=wf(e,t.type);e!==n&&(Ie(ca,t),Ie(Sn,n))}function Ap(t){ca.current===t&&(Re(Sn),Re(ca))}var Me=$r(0);function ku(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Od=[];function kp(){for(var t=0;t<Od.length;t++)Od[t]._workInProgressVersionPrimary=null;Od.length=0}var jl=Zn.ReactCurrentDispatcher,Bd=Zn.ReactCurrentBatchConfig,vs=0,De=null,Ke=null,tt=null,Nu=!1,Oo=!1,fa=0,K1=0;function ft(){throw Error(H(321))}function Np(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!dn(t[n],e[n]))return!1;return!0}function bp(t,e,n,r,s,i){if(vs=i,De=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,jl.current=t===null||t.memoizedState===null?X1:Z1,t=n(r,s),Oo){i=0;do{if(Oo=!1,fa=0,25<=i)throw Error(H(301));i+=1,tt=Ke=null,e.updateQueue=null,jl.current=ek,t=n(r,s)}while(Oo)}if(jl.current=bu,e=Ke!==null&&Ke.next!==null,vs=0,tt=Ke=De=null,Nu=!1,e)throw Error(H(300));return t}function Rp(){var t=fa!==0;return fa=0,t}function _n(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tt===null?De.memoizedState=tt=t:tt=tt.next=t,tt}function nn(){if(Ke===null){var t=De.alternate;t=t!==null?t.memoizedState:null}else t=Ke.next;var e=tt===null?De.memoizedState:tt.next;if(e!==null)tt=e,Ke=t;else{if(t===null)throw Error(H(310));Ke=t,t={memoizedState:Ke.memoizedState,baseState:Ke.baseState,baseQueue:Ke.baseQueue,queue:Ke.queue,next:null},tt===null?De.memoizedState=tt=t:tt=tt.next=t}return tt}function ha(t,e){return typeof e=="function"?e(t):e}function Gd(t){var e=nn(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=Ke,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var h=c.lane;if((vs&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var m={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=m,o=r):l=l.next=m,De.lanes|=h,_s|=h}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,dn(r,e.memoizedState)||(Dt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,De.lanes|=i,_s|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function qd(t){var e=nn(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);dn(i,e.memoizedState)||(Dt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Kw(){}function Jw(t,e){var n=De,r=nn(),s=e(),i=!dn(r.memoizedState,s);if(i&&(r.memoizedState=s,Dt=!0),r=r.queue,Pp(Xw.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||tt!==null&&tt.memoizedState.tag&1){if(n.flags|=2048,pa(9,Qw.bind(null,n,r,s,e),void 0,null),nt===null)throw Error(H(349));vs&30||Yw(n,e,s)}return s}function Yw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Qw(t,e,n,r){e.value=n,e.getSnapshot=r,Zw(e)&&eE(t)}function Xw(t,e,n){return n(function(){Zw(e)&&eE(t)})}function Zw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!dn(t,n)}catch{return!0}}function eE(t){var e=zn(t,1);e!==null&&cn(e,t,1,-1)}function U0(t){var e=_n();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ha,lastRenderedState:t},e.queue=t,t=t.dispatch=Q1.bind(null,De,t),[e.memoizedState,t]}function pa(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function tE(){return nn().memoizedState}function zl(t,e,n,r){var s=_n();De.flags|=t,s.memoizedState=pa(1|e,n,void 0,r===void 0?null:r)}function mc(t,e,n,r){var s=nn();r=r===void 0?null:r;var i=void 0;if(Ke!==null){var o=Ke.memoizedState;if(i=o.destroy,r!==null&&Np(r,o.deps)){s.memoizedState=pa(e,n,i,r);return}}De.flags|=t,s.memoizedState=pa(1|e,n,i,r)}function F0(t,e){return zl(8390656,8,t,e)}function Pp(t,e){return mc(2048,8,t,e)}function nE(t,e){return mc(4,2,t,e)}function rE(t,e){return mc(4,4,t,e)}function sE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function iE(t,e,n){return n=n!=null?n.concat([t]):null,mc(4,4,sE.bind(null,e,t),n)}function Mp(){}function oE(t,e){var n=nn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Np(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function aE(t,e){var n=nn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Np(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function lE(t,e,n){return vs&21?(dn(n,e)||(n=hw(),De.lanes|=n,_s|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Dt=!0),t.memoizedState=n)}function J1(t,e){var n=we;we=n!==0&&4>n?n:4,t(!0);var r=Bd.transition;Bd.transition={};try{t(!1),e()}finally{we=n,Bd.transition=r}}function uE(){return nn().memoizedState}function Y1(t,e,n){var r=kr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},cE(t))dE(e,n);else if(n=zw(t,e,n,r),n!==null){var s=It();cn(n,t,r,s),fE(n,e,r)}}function Q1(t,e,n){var r=kr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(cE(t))dE(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,dn(a,o)){var l=e.interleaved;l===null?(s.next=s,Cp(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=zw(t,e,s,r),n!==null&&(s=It(),cn(n,t,r,s),fE(n,e,r))}}function cE(t){var e=t.alternate;return t===De||e!==null&&e===De}function dE(t,e){Oo=Nu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function fE(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,cp(t,n)}}var bu={readContext:tn,useCallback:ft,useContext:ft,useEffect:ft,useImperativeHandle:ft,useInsertionEffect:ft,useLayoutEffect:ft,useMemo:ft,useReducer:ft,useRef:ft,useState:ft,useDebugValue:ft,useDeferredValue:ft,useTransition:ft,useMutableSource:ft,useSyncExternalStore:ft,useId:ft,unstable_isNewReconciler:!1},X1={readContext:tn,useCallback:function(t,e){return _n().memoizedState=[t,e===void 0?null:e],t},useContext:tn,useEffect:F0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,zl(4194308,4,sE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return zl(4194308,4,t,e)},useInsertionEffect:function(t,e){return zl(4,2,t,e)},useMemo:function(t,e){var n=_n();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=_n();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Y1.bind(null,De,t),[r.memoizedState,t]},useRef:function(t){var e=_n();return t={current:t},e.memoizedState=t},useState:U0,useDebugValue:Mp,useDeferredValue:function(t){return _n().memoizedState=t},useTransition:function(){var t=U0(!1),e=t[0];return t=J1.bind(null,t[1]),_n().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=De,s=_n();if(Pe){if(n===void 0)throw Error(H(407));n=n()}else{if(n=e(),nt===null)throw Error(H(349));vs&30||Yw(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,F0(Xw.bind(null,r,i,t),[t]),r.flags|=2048,pa(9,Qw.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=_n(),e=nt.identifierPrefix;if(Pe){var n=On,r=Fn;n=(r&~(1<<32-un(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=fa++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=K1++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Z1={readContext:tn,useCallback:oE,useContext:tn,useEffect:Pp,useImperativeHandle:iE,useInsertionEffect:nE,useLayoutEffect:rE,useMemo:aE,useReducer:Gd,useRef:tE,useState:function(){return Gd(ha)},useDebugValue:Mp,useDeferredValue:function(t){var e=nn();return lE(e,Ke.memoizedState,t)},useTransition:function(){var t=Gd(ha)[0],e=nn().memoizedState;return[t,e]},useMutableSource:Kw,useSyncExternalStore:Jw,useId:uE,unstable_isNewReconciler:!1},ek={readContext:tn,useCallback:oE,useContext:tn,useEffect:Pp,useImperativeHandle:iE,useInsertionEffect:nE,useLayoutEffect:rE,useMemo:aE,useReducer:qd,useRef:tE,useState:function(){return qd(ha)},useDebugValue:Mp,useDeferredValue:function(t){var e=nn();return Ke===null?e.memoizedState=t:lE(e,Ke.memoizedState,t)},useTransition:function(){var t=qd(ha)[0],e=nn().memoizedState;return[t,e]},useMutableSource:Kw,useSyncExternalStore:Jw,useId:uE,unstable_isNewReconciler:!1};function sn(t,e){if(t&&t.defaultProps){e=Le({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function qf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Le({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var gc={isMounted:function(t){return(t=t._reactInternals)?Ns(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=It(),s=kr(t),i=qn(r,s);i.payload=e,n!=null&&(i.callback=n),e=Ir(t,i,s),e!==null&&(cn(e,t,s,r),Hl(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=It(),s=kr(t),i=qn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Ir(t,i,s),e!==null&&(cn(e,t,s,r),Hl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=It(),r=kr(t),s=qn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Ir(t,s,r),e!==null&&(cn(e,t,r,n),Hl(e,t,r))}};function O0(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!oa(n,r)||!oa(s,i):!0}function hE(t,e,n){var r=!1,s=Fr,i=e.contextType;return typeof i=="object"&&i!==null?i=tn(i):(s=Vt(e)?gs:wt.current,r=e.contextTypes,i=(r=r!=null)?wi(t,s):Fr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=gc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function B0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&gc.enqueueReplaceState(e,e.state,null)}function Hf(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Sp(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=tn(i):(i=Vt(e)?gs:wt.current,s.context=wi(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(qf(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&gc.enqueueReplaceState(s,s.state,null),Au(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Si(t,e){try{var n="",r=e;do n+=kA(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Hd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function jf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var tk=typeof WeakMap=="function"?WeakMap:Map;function pE(t,e,n){n=qn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Pu||(Pu=!0,eh=r),jf(t,e)},n}function mE(t,e,n){n=qn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){jf(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){jf(t,e),typeof r!="function"&&(Ar===null?Ar=new Set([this]):Ar.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function G0(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new tk;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=mk.bind(null,t,e,n),e.then(t,t))}function q0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function H0(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=qn(-1,1),e.tag=2,Ir(n,e,1))),n.lanes|=1),t)}var nk=Zn.ReactCurrentOwner,Dt=!1;function St(t,e,n,r){e.child=t===null?jw(e,null,n,r):Ti(e,t.child,n,r)}function j0(t,e,n,r,s){n=n.render;var i=e.ref;return ui(e,s),r=bp(t,e,n,r,i,s),n=Rp(),t!==null&&!Dt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,$n(t,e,s)):(Pe&&n&&vp(e),e.flags|=1,St(t,e,r,s),e.child)}function z0(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Gp(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,gE(t,e,i,r,s)):(t=Jl(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:oa,n(o,r)&&t.ref===e.ref)return $n(t,e,s)}return e.flags|=1,t=Nr(i,r),t.ref=e.ref,t.return=e,e.child=t}function gE(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(oa(i,r)&&t.ref===e.ref)if(Dt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Dt=!0);else return e.lanes=t.lanes,$n(t,e,s)}return zf(t,e,n,r,s)}function yE(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ie(ni,qt),qt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ie(ni,qt),qt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ie(ni,qt),qt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ie(ni,qt),qt|=r;return St(t,e,s,n),e.child}function vE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function zf(t,e,n,r,s){var i=Vt(n)?gs:wt.current;return i=wi(e,i),ui(e,s),n=bp(t,e,n,r,i,s),r=Rp(),t!==null&&!Dt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,$n(t,e,s)):(Pe&&r&&vp(e),e.flags|=1,St(t,e,n,s),e.child)}function $0(t,e,n,r,s){if(Vt(n)){var i=!0;Eu(e)}else i=!1;if(ui(e,s),e.stateNode===null)$l(t,e),hE(e,n,r),Hf(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=tn(c):(c=Vt(n)?gs:wt.current,c=wi(e,c));var h=n.getDerivedStateFromProps,m=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&B0(e,o,r,c),fr=!1;var g=e.memoizedState;o.state=g,Au(e,r,o,s),l=e.memoizedState,a!==r||g!==l||Lt.current||fr?(typeof h=="function"&&(qf(e,n,h,r),l=e.memoizedState),(a=fr||O0(e,n,a,r,g,l,c))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,$w(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:sn(e.type,a),o.props=c,m=e.pendingProps,g=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=tn(l):(l=Vt(n)?gs:wt.current,l=wi(e,l));var v=n.getDerivedStateFromProps;(h=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==m||g!==l)&&B0(e,o,r,l),fr=!1,g=e.memoizedState,o.state=g,Au(e,r,o,s);var x=e.memoizedState;a!==m||g!==x||Lt.current||fr?(typeof v=="function"&&(qf(e,n,v,r),x=e.memoizedState),(c=fr||O0(e,n,c,r,g,x,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,x,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,x,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=x),o.props=r,o.state=x,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return $f(t,e,n,r,i,s)}function $f(t,e,n,r,s,i){vE(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&R0(e,n,!1),$n(t,e,i);r=e.stateNode,nk.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ti(e,t.child,null,i),e.child=Ti(e,null,a,i)):St(t,e,a,i),e.memoizedState=r.state,s&&R0(e,n,!0),e.child}function _E(t){var e=t.stateNode;e.pendingContext?b0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&b0(t,e.context,!1),Ip(t,e.containerInfo)}function W0(t,e,n,r,s){return Ei(),xp(s),e.flags|=256,St(t,e,n,r),e.child}var Wf={dehydrated:null,treeContext:null,retryLane:0};function Kf(t){return{baseLanes:t,cachePool:null,transitions:null}}function xE(t,e,n){var r=e.pendingProps,s=Me.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ie(Me,s&1),t===null)return Bf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=_c(o,r,0,null),t=hs(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Kf(n),e.memoizedState=Wf,t):Dp(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return rk(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Nr(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Nr(a,i):(i=hs(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Kf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Wf,r}return i=t.child,t=i.sibling,r=Nr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Dp(t,e){return e=_c({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Sl(t,e,n,r){return r!==null&&xp(r),Ti(e,t.child,null,n),t=Dp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function rk(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Hd(Error(H(422))),Sl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=_c({mode:"visible",children:r.children},s,0,null),i=hs(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Ti(e,t.child,null,o),e.child.memoizedState=Kf(o),e.memoizedState=Wf,i);if(!(e.mode&1))return Sl(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(H(419)),r=Hd(i,r,void 0),Sl(t,e,o,r)}if(a=(o&t.childLanes)!==0,Dt||a){if(r=nt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,zn(t,s),cn(r,t,s,-1))}return Bp(),r=Hd(Error(H(421))),Sl(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=gk.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Ht=Sr(s.nextSibling),zt=e,Pe=!0,an=null,t!==null&&(Jt[Yt++]=Fn,Jt[Yt++]=On,Jt[Yt++]=ys,Fn=t.id,On=t.overflow,ys=e),e=Dp(e,r.children),e.flags|=4096,e)}function K0(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Gf(t.return,e,n)}function jd(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function wE(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(St(t,e,r.children,n),r=Me.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&K0(t,n,e);else if(t.tag===19)K0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ie(Me,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&ku(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),jd(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&ku(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}jd(e,!0,n,null,i);break;case"together":jd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function $l(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function $n(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),_s|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(H(153));if(e.child!==null){for(t=e.child,n=Nr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Nr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function sk(t,e,n){switch(e.tag){case 3:_E(e),Ei();break;case 5:Ww(e);break;case 1:Vt(e.type)&&Eu(e);break;case 4:Ip(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ie(Su,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ie(Me,Me.current&1),e.flags|=128,null):n&e.child.childLanes?xE(t,e,n):(Ie(Me,Me.current&1),t=$n(t,e,n),t!==null?t.sibling:null);Ie(Me,Me.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return wE(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ie(Me,Me.current),r)break;return null;case 22:case 23:return e.lanes=0,yE(t,e,n)}return $n(t,e,n)}var EE,Jf,TE,CE;EE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Jf=function(){};TE=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,us(Sn.current);var i=null;switch(n){case"input":s=yf(t,s),r=yf(t,r),i=[];break;case"select":s=Le({},s,{value:void 0}),r=Le({},r,{value:void 0}),i=[];break;case"textarea":s=xf(t,s),r=xf(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=xu)}Ef(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Zo.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Zo.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&ke("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};CE=function(t,e,n,r){n!==r&&(e.flags|=4)};function Eo(t,e){if(!Pe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ht(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function ik(t,e,n){var r=e.pendingProps;switch(_p(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ht(e),null;case 1:return Vt(e.type)&&wu(),ht(e),null;case 3:return r=e.stateNode,Ci(),Re(Lt),Re(wt),kp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Tl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,an!==null&&(rh(an),an=null))),Jf(t,e),ht(e),null;case 5:Ap(e);var s=us(da.current);if(n=e.type,t!==null&&e.stateNode!=null)TE(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(H(166));return ht(e),null}if(t=us(Sn.current),Tl(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[wn]=e,r[ua]=i,t=(e.mode&1)!==0,n){case"dialog":ke("cancel",r),ke("close",r);break;case"iframe":case"object":case"embed":ke("load",r);break;case"video":case"audio":for(s=0;s<No.length;s++)ke(No[s],r);break;case"source":ke("error",r);break;case"img":case"image":case"link":ke("error",r),ke("load",r);break;case"details":ke("toggle",r);break;case"input":r0(r,i),ke("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ke("invalid",r);break;case"textarea":i0(r,i),ke("invalid",r)}Ef(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&El(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&El(r.textContent,a,t),s=["children",""+a]):Zo.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ke("scroll",r)}switch(n){case"input":pl(r),s0(r,i,!0);break;case"textarea":pl(r),o0(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=xu)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Xx(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[wn]=e,t[ua]=r,EE(t,e,!1,!1),e.stateNode=t;e:{switch(o=Tf(n,r),n){case"dialog":ke("cancel",t),ke("close",t),s=r;break;case"iframe":case"object":case"embed":ke("load",t),s=r;break;case"video":case"audio":for(s=0;s<No.length;s++)ke(No[s],t);s=r;break;case"source":ke("error",t),s=r;break;case"img":case"image":case"link":ke("error",t),ke("load",t),s=r;break;case"details":ke("toggle",t),s=r;break;case"input":r0(t,r),s=yf(t,r),ke("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Le({},r,{value:void 0}),ke("invalid",t);break;case"textarea":i0(t,r),s=xf(t,r),ke("invalid",t);break;default:s=r}Ef(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?tw(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Zx(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&ea(t,l):typeof l=="number"&&ea(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Zo.hasOwnProperty(i)?l!=null&&i==="onScroll"&&ke("scroll",t):l!=null&&sp(t,i,l,o))}switch(n){case"input":pl(t),s0(t,r,!1);break;case"textarea":pl(t),o0(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ur(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?ii(t,!!r.multiple,i,!1):r.defaultValue!=null&&ii(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=xu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ht(e),null;case 6:if(t&&e.stateNode!=null)CE(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(H(166));if(n=us(da.current),us(Sn.current),Tl(e)){if(r=e.stateNode,n=e.memoizedProps,r[wn]=e,(i=r.nodeValue!==n)&&(t=zt,t!==null))switch(t.tag){case 3:El(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&El(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[wn]=e,e.stateNode=r}return ht(e),null;case 13:if(Re(Me),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Pe&&Ht!==null&&e.mode&1&&!(e.flags&128))qw(),Ei(),e.flags|=98560,i=!1;else if(i=Tl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(H(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(H(317));i[wn]=e}else Ei(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ht(e),i=!1}else an!==null&&(rh(an),an=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Me.current&1?Je===0&&(Je=3):Bp())),e.updateQueue!==null&&(e.flags|=4),ht(e),null);case 4:return Ci(),Jf(t,e),t===null&&aa(e.stateNode.containerInfo),ht(e),null;case 10:return Tp(e.type._context),ht(e),null;case 17:return Vt(e.type)&&wu(),ht(e),null;case 19:if(Re(Me),i=e.memoizedState,i===null)return ht(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Eo(i,!1);else{if(Je!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ku(t),o!==null){for(e.flags|=128,Eo(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ie(Me,Me.current&1|2),e.child}t=t.sibling}i.tail!==null&&qe()>Ii&&(e.flags|=128,r=!0,Eo(i,!1),e.lanes=4194304)}else{if(!r)if(t=ku(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Eo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Pe)return ht(e),null}else 2*qe()-i.renderingStartTime>Ii&&n!==1073741824&&(e.flags|=128,r=!0,Eo(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=qe(),e.sibling=null,n=Me.current,Ie(Me,r?n&1|2:n&1),e):(ht(e),null);case 22:case 23:return Op(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?qt&1073741824&&(ht(e),e.subtreeFlags&6&&(e.flags|=8192)):ht(e),null;case 24:return null;case 25:return null}throw Error(H(156,e.tag))}function ok(t,e){switch(_p(e),e.tag){case 1:return Vt(e.type)&&wu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ci(),Re(Lt),Re(wt),kp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ap(e),null;case 13:if(Re(Me),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(H(340));Ei()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Re(Me),null;case 4:return Ci(),null;case 10:return Tp(e.type._context),null;case 22:case 23:return Op(),null;case 24:return null;default:return null}}var Il=!1,yt=!1,ak=typeof WeakSet=="function"?WeakSet:Set,Q=null;function ti(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Fe(t,e,r)}else n.current=null}function Yf(t,e,n){try{n()}catch(r){Fe(t,e,r)}}var J0=!1;function lk(t,e){if(Mf=yu,t=Nw(),yp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,h=0,m=t,g=null;t:for(;;){for(var v;m!==n||s!==0&&m.nodeType!==3||(a=o+s),m!==i||r!==0&&m.nodeType!==3||(l=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(v=m.firstChild)!==null;)g=m,m=v;for(;;){if(m===t)break t;if(g===n&&++c===s&&(a=o),g===i&&++h===r&&(l=o),(v=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=v}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Df={focusedElem:t,selectionRange:n},yu=!1,Q=e;Q!==null;)if(e=Q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Q=t;else for(;Q!==null;){e=Q;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var I=x.memoizedProps,P=x.memoizedState,A=e.stateNode,E=A.getSnapshotBeforeUpdate(e.elementType===e.type?I:sn(e.type,I),P);A.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var k=e.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(H(163))}}catch(D){Fe(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,Q=t;break}Q=e.return}return x=J0,J0=!1,x}function Bo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Yf(e,n,i)}s=s.next}while(s!==r)}}function yc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Qf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function SE(t){var e=t.alternate;e!==null&&(t.alternate=null,SE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[wn],delete e[ua],delete e[Uf],delete e[j1],delete e[z1])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function IE(t){return t.tag===5||t.tag===3||t.tag===4}function Y0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||IE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Xf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=xu));else if(r!==4&&(t=t.child,t!==null))for(Xf(t,e,n),t=t.sibling;t!==null;)Xf(t,e,n),t=t.sibling}function Zf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Zf(t,e,n),t=t.sibling;t!==null;)Zf(t,e,n),t=t.sibling}var st=null,on=!1;function ur(t,e,n){for(n=n.child;n!==null;)AE(t,e,n),n=n.sibling}function AE(t,e,n){if(Cn&&typeof Cn.onCommitFiberUnmount=="function")try{Cn.onCommitFiberUnmount(uc,n)}catch{}switch(n.tag){case 5:yt||ti(n,e);case 6:var r=st,s=on;st=null,ur(t,e,n),st=r,on=s,st!==null&&(on?(t=st,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):st.removeChild(n.stateNode));break;case 18:st!==null&&(on?(t=st,n=n.stateNode,t.nodeType===8?Ud(t.parentNode,n):t.nodeType===1&&Ud(t,n),sa(t)):Ud(st,n.stateNode));break;case 4:r=st,s=on,st=n.stateNode.containerInfo,on=!0,ur(t,e,n),st=r,on=s;break;case 0:case 11:case 14:case 15:if(!yt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Yf(n,e,o),s=s.next}while(s!==r)}ur(t,e,n);break;case 1:if(!yt&&(ti(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Fe(n,e,a)}ur(t,e,n);break;case 21:ur(t,e,n);break;case 22:n.mode&1?(yt=(r=yt)||n.memoizedState!==null,ur(t,e,n),yt=r):ur(t,e,n);break;default:ur(t,e,n)}}function Q0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new ak),e.forEach(function(r){var s=yk.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function rn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:st=a.stateNode,on=!1;break e;case 3:st=a.stateNode.containerInfo,on=!0;break e;case 4:st=a.stateNode.containerInfo,on=!0;break e}a=a.return}if(st===null)throw Error(H(160));AE(i,o,s),st=null,on=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){Fe(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)kE(e,t),e=e.sibling}function kE(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(rn(e,t),yn(t),r&4){try{Bo(3,t,t.return),yc(3,t)}catch(I){Fe(t,t.return,I)}try{Bo(5,t,t.return)}catch(I){Fe(t,t.return,I)}}break;case 1:rn(e,t),yn(t),r&512&&n!==null&&ti(n,n.return);break;case 5:if(rn(e,t),yn(t),r&512&&n!==null&&ti(n,n.return),t.flags&32){var s=t.stateNode;try{ea(s,"")}catch(I){Fe(t,t.return,I)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Yx(s,i),Tf(a,o);var c=Tf(a,i);for(o=0;o<l.length;o+=2){var h=l[o],m=l[o+1];h==="style"?tw(s,m):h==="dangerouslySetInnerHTML"?Zx(s,m):h==="children"?ea(s,m):sp(s,h,m,c)}switch(a){case"input":vf(s,i);break;case"textarea":Qx(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var v=i.value;v!=null?ii(s,!!i.multiple,v,!1):g!==!!i.multiple&&(i.defaultValue!=null?ii(s,!!i.multiple,i.defaultValue,!0):ii(s,!!i.multiple,i.multiple?[]:"",!1))}s[ua]=i}catch(I){Fe(t,t.return,I)}}break;case 6:if(rn(e,t),yn(t),r&4){if(t.stateNode===null)throw Error(H(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(I){Fe(t,t.return,I)}}break;case 3:if(rn(e,t),yn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{sa(e.containerInfo)}catch(I){Fe(t,t.return,I)}break;case 4:rn(e,t),yn(t);break;case 13:rn(e,t),yn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Up=qe())),r&4&&Q0(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(yt=(c=yt)||h,rn(e,t),yt=c):rn(e,t),yn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(Q=t,h=t.child;h!==null;){for(m=Q=h;Q!==null;){switch(g=Q,v=g.child,g.tag){case 0:case 11:case 14:case 15:Bo(4,g,g.return);break;case 1:ti(g,g.return);var x=g.stateNode;if(typeof x.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(I){Fe(r,n,I)}}break;case 5:ti(g,g.return);break;case 22:if(g.memoizedState!==null){Z0(m);continue}}v!==null?(v.return=g,Q=v):Z0(m)}h=h.sibling}e:for(h=null,m=t;;){if(m.tag===5){if(h===null){h=m;try{s=m.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=m.stateNode,l=m.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=ew("display",o))}catch(I){Fe(t,t.return,I)}}}else if(m.tag===6){if(h===null)try{m.stateNode.nodeValue=c?"":m.memoizedProps}catch(I){Fe(t,t.return,I)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;h===m&&(h=null),m=m.return}h===m&&(h=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:rn(e,t),yn(t),r&4&&Q0(t);break;case 21:break;default:rn(e,t),yn(t)}}function yn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(IE(n)){var r=n;break e}n=n.return}throw Error(H(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ea(s,""),r.flags&=-33);var i=Y0(t);Zf(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Y0(t);Xf(t,a,o);break;default:throw Error(H(161))}}catch(l){Fe(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function uk(t,e,n){Q=t,NE(t)}function NE(t,e,n){for(var r=(t.mode&1)!==0;Q!==null;){var s=Q,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Il;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||yt;a=Il;var c=yt;if(Il=o,(yt=l)&&!c)for(Q=s;Q!==null;)o=Q,l=o.child,o.tag===22&&o.memoizedState!==null?ey(s):l!==null?(l.return=o,Q=l):ey(s);for(;i!==null;)Q=i,NE(i),i=i.sibling;Q=s,Il=a,yt=c}X0(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Q=i):X0(t)}}function X0(t){for(;Q!==null;){var e=Q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:yt||yc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!yt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:sn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&V0(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}V0(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var m=h.dehydrated;m!==null&&sa(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(H(163))}yt||e.flags&512&&Qf(e)}catch(g){Fe(e,e.return,g)}}if(e===t){Q=null;break}if(n=e.sibling,n!==null){n.return=e.return,Q=n;break}Q=e.return}}function Z0(t){for(;Q!==null;){var e=Q;if(e===t){Q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Q=n;break}Q=e.return}}function ey(t){for(;Q!==null;){var e=Q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{yc(4,e)}catch(l){Fe(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){Fe(e,s,l)}}var i=e.return;try{Qf(e)}catch(l){Fe(e,i,l)}break;case 5:var o=e.return;try{Qf(e)}catch(l){Fe(e,o,l)}}}catch(l){Fe(e,e.return,l)}if(e===t){Q=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Q=a;break}Q=e.return}}var ck=Math.ceil,Ru=Zn.ReactCurrentDispatcher,Lp=Zn.ReactCurrentOwner,Zt=Zn.ReactCurrentBatchConfig,ge=0,nt=null,je=null,at=0,qt=0,ni=$r(0),Je=0,ma=null,_s=0,vc=0,Vp=0,Go=null,Pt=null,Up=0,Ii=1/0,Vn=null,Pu=!1,eh=null,Ar=null,Al=!1,xr=null,Mu=0,qo=0,th=null,Wl=-1,Kl=0;function It(){return ge&6?qe():Wl!==-1?Wl:Wl=qe()}function kr(t){return t.mode&1?ge&2&&at!==0?at&-at:W1.transition!==null?(Kl===0&&(Kl=hw()),Kl):(t=we,t!==0||(t=window.event,t=t===void 0?16:xw(t.type)),t):1}function cn(t,e,n,r){if(50<qo)throw qo=0,th=null,Error(H(185));Ma(t,n,r),(!(ge&2)||t!==nt)&&(t===nt&&(!(ge&2)&&(vc|=n),Je===4&&pr(t,at)),Ut(t,r),n===1&&ge===0&&!(e.mode&1)&&(Ii=qe()+500,pc&&Wr()))}function Ut(t,e){var n=t.callbackNode;WA(t,e);var r=gu(t,t===nt?at:0);if(r===0)n!==null&&u0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&u0(n),e===1)t.tag===0?$1(ty.bind(null,t)):Ow(ty.bind(null,t)),q1(function(){!(ge&6)&&Wr()}),n=null;else{switch(pw(r)){case 1:n=up;break;case 4:n=dw;break;case 16:n=mu;break;case 536870912:n=fw;break;default:n=mu}n=UE(n,bE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function bE(t,e){if(Wl=-1,Kl=0,ge&6)throw Error(H(327));var n=t.callbackNode;if(ci()&&t.callbackNode!==n)return null;var r=gu(t,t===nt?at:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Du(t,r);else{e=r;var s=ge;ge|=2;var i=PE();(nt!==t||at!==e)&&(Vn=null,Ii=qe()+500,fs(t,e));do try{hk();break}catch(a){RE(t,a)}while(!0);Ep(),Ru.current=i,ge=s,je!==null?e=0:(nt=null,at=0,e=Je)}if(e!==0){if(e===2&&(s=kf(t),s!==0&&(r=s,e=nh(t,s))),e===1)throw n=ma,fs(t,0),pr(t,r),Ut(t,qe()),n;if(e===6)pr(t,r);else{if(s=t.current.alternate,!(r&30)&&!dk(s)&&(e=Du(t,r),e===2&&(i=kf(t),i!==0&&(r=i,e=nh(t,i))),e===1))throw n=ma,fs(t,0),pr(t,r),Ut(t,qe()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(H(345));case 2:is(t,Pt,Vn);break;case 3:if(pr(t,r),(r&130023424)===r&&(e=Up+500-qe(),10<e)){if(gu(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){It(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Vf(is.bind(null,t,Pt,Vn),e);break}is(t,Pt,Vn);break;case 4:if(pr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-un(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=qe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ck(r/1960))-r,10<r){t.timeoutHandle=Vf(is.bind(null,t,Pt,Vn),r);break}is(t,Pt,Vn);break;case 5:is(t,Pt,Vn);break;default:throw Error(H(329))}}}return Ut(t,qe()),t.callbackNode===n?bE.bind(null,t):null}function nh(t,e){var n=Go;return t.current.memoizedState.isDehydrated&&(fs(t,e).flags|=256),t=Du(t,e),t!==2&&(e=Pt,Pt=n,e!==null&&rh(e)),t}function rh(t){Pt===null?Pt=t:Pt.push.apply(Pt,t)}function dk(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!dn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function pr(t,e){for(e&=~Vp,e&=~vc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-un(e),r=1<<n;t[n]=-1,e&=~r}}function ty(t){if(ge&6)throw Error(H(327));ci();var e=gu(t,0);if(!(e&1))return Ut(t,qe()),null;var n=Du(t,e);if(t.tag!==0&&n===2){var r=kf(t);r!==0&&(e=r,n=nh(t,r))}if(n===1)throw n=ma,fs(t,0),pr(t,e),Ut(t,qe()),n;if(n===6)throw Error(H(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,is(t,Pt,Vn),Ut(t,qe()),null}function Fp(t,e){var n=ge;ge|=1;try{return t(e)}finally{ge=n,ge===0&&(Ii=qe()+500,pc&&Wr())}}function xs(t){xr!==null&&xr.tag===0&&!(ge&6)&&ci();var e=ge;ge|=1;var n=Zt.transition,r=we;try{if(Zt.transition=null,we=1,t)return t()}finally{we=r,Zt.transition=n,ge=e,!(ge&6)&&Wr()}}function Op(){qt=ni.current,Re(ni)}function fs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,G1(n)),je!==null)for(n=je.return;n!==null;){var r=n;switch(_p(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&wu();break;case 3:Ci(),Re(Lt),Re(wt),kp();break;case 5:Ap(r);break;case 4:Ci();break;case 13:Re(Me);break;case 19:Re(Me);break;case 10:Tp(r.type._context);break;case 22:case 23:Op()}n=n.return}if(nt=t,je=t=Nr(t.current,null),at=qt=e,Je=0,ma=null,Vp=vc=_s=0,Pt=Go=null,ls!==null){for(e=0;e<ls.length;e++)if(n=ls[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}ls=null}return t}function RE(t,e){do{var n=je;try{if(Ep(),jl.current=bu,Nu){for(var r=De.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Nu=!1}if(vs=0,tt=Ke=De=null,Oo=!1,fa=0,Lp.current=null,n===null||n.return===null){Je=1,ma=e,je=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=at,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,m=h.tag;if(!(h.mode&1)&&(m===0||m===11||m===15)){var g=h.alternate;g?(h.updateQueue=g.updateQueue,h.memoizedState=g.memoizedState,h.lanes=g.lanes):(h.updateQueue=null,h.memoizedState=null)}var v=q0(o);if(v!==null){v.flags&=-257,H0(v,o,a,i,e),v.mode&1&&G0(i,c,e),e=v,l=c;var x=e.updateQueue;if(x===null){var I=new Set;I.add(l),e.updateQueue=I}else x.add(l);break e}else{if(!(e&1)){G0(i,c,e),Bp();break e}l=Error(H(426))}}else if(Pe&&a.mode&1){var P=q0(o);if(P!==null){!(P.flags&65536)&&(P.flags|=256),H0(P,o,a,i,e),xp(Si(l,a));break e}}i=l=Si(l,a),Je!==4&&(Je=2),Go===null?Go=[i]:Go.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var A=pE(i,l,e);L0(i,A);break e;case 1:a=l;var E=i.type,k=i.stateNode;if(!(i.flags&128)&&(typeof E.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(Ar===null||!Ar.has(k)))){i.flags|=65536,e&=-e,i.lanes|=e;var D=mE(i,a,e);L0(i,D);break e}}i=i.return}while(i!==null)}DE(n)}catch(U){e=U,je===n&&n!==null&&(je=n=n.return);continue}break}while(!0)}function PE(){var t=Ru.current;return Ru.current=bu,t===null?bu:t}function Bp(){(Je===0||Je===3||Je===2)&&(Je=4),nt===null||!(_s&268435455)&&!(vc&268435455)||pr(nt,at)}function Du(t,e){var n=ge;ge|=2;var r=PE();(nt!==t||at!==e)&&(Vn=null,fs(t,e));do try{fk();break}catch(s){RE(t,s)}while(!0);if(Ep(),ge=n,Ru.current=r,je!==null)throw Error(H(261));return nt=null,at=0,Je}function fk(){for(;je!==null;)ME(je)}function hk(){for(;je!==null&&!FA();)ME(je)}function ME(t){var e=VE(t.alternate,t,qt);t.memoizedProps=t.pendingProps,e===null?DE(t):je=e,Lp.current=null}function DE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=ok(n,e),n!==null){n.flags&=32767,je=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Je=6,je=null;return}}else if(n=ik(n,e,qt),n!==null){je=n;return}if(e=e.sibling,e!==null){je=e;return}je=e=t}while(e!==null);Je===0&&(Je=5)}function is(t,e,n){var r=we,s=Zt.transition;try{Zt.transition=null,we=1,pk(t,e,n,r)}finally{Zt.transition=s,we=r}return null}function pk(t,e,n,r){do ci();while(xr!==null);if(ge&6)throw Error(H(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(H(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(KA(t,i),t===nt&&(je=nt=null,at=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Al||(Al=!0,UE(mu,function(){return ci(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Zt.transition,Zt.transition=null;var o=we;we=1;var a=ge;ge|=4,Lp.current=null,lk(t,n),kE(n,t),D1(Df),yu=!!Mf,Df=Mf=null,t.current=n,uk(n),OA(),ge=a,we=o,Zt.transition=i}else t.current=n;if(Al&&(Al=!1,xr=t,Mu=s),i=t.pendingLanes,i===0&&(Ar=null),qA(n.stateNode),Ut(t,qe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Pu)throw Pu=!1,t=eh,eh=null,t;return Mu&1&&t.tag!==0&&ci(),i=t.pendingLanes,i&1?t===th?qo++:(qo=0,th=t):qo=0,Wr(),null}function ci(){if(xr!==null){var t=pw(Mu),e=Zt.transition,n=we;try{if(Zt.transition=null,we=16>t?16:t,xr===null)var r=!1;else{if(t=xr,xr=null,Mu=0,ge&6)throw Error(H(331));var s=ge;for(ge|=4,Q=t.current;Q!==null;){var i=Q,o=i.child;if(Q.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Q=c;Q!==null;){var h=Q;switch(h.tag){case 0:case 11:case 15:Bo(8,h,i)}var m=h.child;if(m!==null)m.return=h,Q=m;else for(;Q!==null;){h=Q;var g=h.sibling,v=h.return;if(SE(h),h===c){Q=null;break}if(g!==null){g.return=v,Q=g;break}Q=v}}}var x=i.alternate;if(x!==null){var I=x.child;if(I!==null){x.child=null;do{var P=I.sibling;I.sibling=null,I=P}while(I!==null)}}Q=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Q=o;else e:for(;Q!==null;){if(i=Q,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Bo(9,i,i.return)}var A=i.sibling;if(A!==null){A.return=i.return,Q=A;break e}Q=i.return}}var E=t.current;for(Q=E;Q!==null;){o=Q;var k=o.child;if(o.subtreeFlags&2064&&k!==null)k.return=o,Q=k;else e:for(o=E;Q!==null;){if(a=Q,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:yc(9,a)}}catch(U){Fe(a,a.return,U)}if(a===o){Q=null;break e}var D=a.sibling;if(D!==null){D.return=a.return,Q=D;break e}Q=a.return}}if(ge=s,Wr(),Cn&&typeof Cn.onPostCommitFiberRoot=="function")try{Cn.onPostCommitFiberRoot(uc,t)}catch{}r=!0}return r}finally{we=n,Zt.transition=e}}return!1}function ny(t,e,n){e=Si(n,e),e=pE(t,e,1),t=Ir(t,e,1),e=It(),t!==null&&(Ma(t,1,e),Ut(t,e))}function Fe(t,e,n){if(t.tag===3)ny(t,t,n);else for(;e!==null;){if(e.tag===3){ny(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ar===null||!Ar.has(r))){t=Si(n,t),t=mE(e,t,1),e=Ir(e,t,1),t=It(),e!==null&&(Ma(e,1,t),Ut(e,t));break}}e=e.return}}function mk(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=It(),t.pingedLanes|=t.suspendedLanes&n,nt===t&&(at&n)===n&&(Je===4||Je===3&&(at&130023424)===at&&500>qe()-Up?fs(t,0):Vp|=n),Ut(t,e)}function LE(t,e){e===0&&(t.mode&1?(e=yl,yl<<=1,!(yl&130023424)&&(yl=4194304)):e=1);var n=It();t=zn(t,e),t!==null&&(Ma(t,e,n),Ut(t,n))}function gk(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),LE(t,n)}function yk(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(H(314))}r!==null&&r.delete(e),LE(t,n)}var VE;VE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Lt.current)Dt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Dt=!1,sk(t,e,n);Dt=!!(t.flags&131072)}else Dt=!1,Pe&&e.flags&1048576&&Bw(e,Cu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;$l(t,e),t=e.pendingProps;var s=wi(e,wt.current);ui(e,n),s=bp(null,e,r,t,s,n);var i=Rp();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Vt(r)?(i=!0,Eu(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Sp(e),s.updater=gc,e.stateNode=s,s._reactInternals=e,Hf(e,r,t,n),e=$f(null,e,r,!0,i,n)):(e.tag=0,Pe&&i&&vp(e),St(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch($l(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=_k(r),t=sn(r,t),s){case 0:e=zf(null,e,r,t,n);break e;case 1:e=$0(null,e,r,t,n);break e;case 11:e=j0(null,e,r,t,n);break e;case 14:e=z0(null,e,r,sn(r.type,t),n);break e}throw Error(H(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:sn(r,s),zf(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:sn(r,s),$0(t,e,r,s,n);case 3:e:{if(_E(e),t===null)throw Error(H(387));r=e.pendingProps,i=e.memoizedState,s=i.element,$w(t,e),Au(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Si(Error(H(423)),e),e=W0(t,e,r,n,s);break e}else if(r!==s){s=Si(Error(H(424)),e),e=W0(t,e,r,n,s);break e}else for(Ht=Sr(e.stateNode.containerInfo.firstChild),zt=e,Pe=!0,an=null,n=jw(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ei(),r===s){e=$n(t,e,n);break e}St(t,e,r,n)}e=e.child}return e;case 5:return Ww(e),t===null&&Bf(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Lf(r,s)?o=null:i!==null&&Lf(r,i)&&(e.flags|=32),vE(t,e),St(t,e,o,n),e.child;case 6:return t===null&&Bf(e),null;case 13:return xE(t,e,n);case 4:return Ip(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ti(e,null,r,n):St(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:sn(r,s),j0(t,e,r,s,n);case 7:return St(t,e,e.pendingProps,n),e.child;case 8:return St(t,e,e.pendingProps.children,n),e.child;case 12:return St(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Ie(Su,r._currentValue),r._currentValue=o,i!==null)if(dn(i.value,o)){if(i.children===s.children&&!Lt.current){e=$n(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=qn(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Gf(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(H(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Gf(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}St(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ui(e,n),s=tn(s),r=r(s),e.flags|=1,St(t,e,r,n),e.child;case 14:return r=e.type,s=sn(r,e.pendingProps),s=sn(r.type,s),z0(t,e,r,s,n);case 15:return gE(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:sn(r,s),$l(t,e),e.tag=1,Vt(r)?(t=!0,Eu(e)):t=!1,ui(e,n),hE(e,r,s),Hf(e,r,s,n),$f(null,e,r,!0,t,n);case 19:return wE(t,e,n);case 22:return yE(t,e,n)}throw Error(H(156,e.tag))};function UE(t,e){return cw(t,e)}function vk(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xt(t,e,n,r){return new vk(t,e,n,r)}function Gp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function _k(t){if(typeof t=="function")return Gp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===op)return 11;if(t===ap)return 14}return 2}function Nr(t,e){var n=t.alternate;return n===null?(n=Xt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Jl(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Gp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case $s:return hs(n.children,s,i,e);case ip:o=8,s|=8;break;case hf:return t=Xt(12,n,e,s|2),t.elementType=hf,t.lanes=i,t;case pf:return t=Xt(13,n,e,s),t.elementType=pf,t.lanes=i,t;case mf:return t=Xt(19,n,e,s),t.elementType=mf,t.lanes=i,t;case Wx:return _c(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case zx:o=10;break e;case $x:o=9;break e;case op:o=11;break e;case ap:o=14;break e;case dr:o=16,r=null;break e}throw Error(H(130,t==null?t:typeof t,""))}return e=Xt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function hs(t,e,n,r){return t=Xt(7,t,r,e),t.lanes=n,t}function _c(t,e,n,r){return t=Xt(22,t,r,e),t.elementType=Wx,t.lanes=n,t.stateNode={isHidden:!1},t}function zd(t,e,n){return t=Xt(6,t,null,e),t.lanes=n,t}function $d(t,e,n){return e=Xt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function xk(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Id(0),this.expirationTimes=Id(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Id(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function qp(t,e,n,r,s,i,o,a,l){return t=new xk(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Xt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Sp(i),t}function wk(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:zs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function FE(t){if(!t)return Fr;t=t._reactInternals;e:{if(Ns(t)!==t||t.tag!==1)throw Error(H(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Vt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(H(171))}if(t.tag===1){var n=t.type;if(Vt(n))return Fw(t,n,e)}return e}function OE(t,e,n,r,s,i,o,a,l){return t=qp(n,r,!0,t,s,i,o,a,l),t.context=FE(null),n=t.current,r=It(),s=kr(n),i=qn(r,s),i.callback=e??null,Ir(n,i,s),t.current.lanes=s,Ma(t,s,r),Ut(t,r),t}function xc(t,e,n,r){var s=e.current,i=It(),o=kr(s);return n=FE(n),e.context===null?e.context=n:e.pendingContext=n,e=qn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ir(s,e,o),t!==null&&(cn(t,s,o,i),Hl(t,s,o)),o}function Lu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function ry(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Hp(t,e){ry(t,e),(t=t.alternate)&&ry(t,e)}function Ek(){return null}var BE=typeof reportError=="function"?reportError:function(t){console.error(t)};function jp(t){this._internalRoot=t}wc.prototype.render=jp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(H(409));xc(t,e,null,null)};wc.prototype.unmount=jp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;xs(function(){xc(null,t,null,null)}),e[jn]=null}};function wc(t){this._internalRoot=t}wc.prototype.unstable_scheduleHydration=function(t){if(t){var e=yw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<hr.length&&e!==0&&e<hr[n].priority;n++);hr.splice(n,0,t),n===0&&_w(t)}};function zp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ec(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function sy(){}function Tk(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=Lu(o);i.call(c)}}var o=OE(e,r,t,0,null,!1,!1,"",sy);return t._reactRootContainer=o,t[jn]=o.current,aa(t.nodeType===8?t.parentNode:t),xs(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=Lu(l);a.call(c)}}var l=qp(t,0,!1,null,null,!1,!1,"",sy);return t._reactRootContainer=l,t[jn]=l.current,aa(t.nodeType===8?t.parentNode:t),xs(function(){xc(e,l,n,r)}),l}function Tc(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Lu(o);a.call(l)}}xc(e,o,t,s)}else o=Tk(n,e,t,s,r);return Lu(o)}mw=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ko(e.pendingLanes);n!==0&&(cp(e,n|1),Ut(e,qe()),!(ge&6)&&(Ii=qe()+500,Wr()))}break;case 13:xs(function(){var r=zn(t,1);if(r!==null){var s=It();cn(r,t,1,s)}}),Hp(t,1)}};dp=function(t){if(t.tag===13){var e=zn(t,134217728);if(e!==null){var n=It();cn(e,t,134217728,n)}Hp(t,134217728)}};gw=function(t){if(t.tag===13){var e=kr(t),n=zn(t,e);if(n!==null){var r=It();cn(n,t,e,r)}Hp(t,e)}};yw=function(){return we};vw=function(t,e){var n=we;try{return we=t,e()}finally{we=n}};Sf=function(t,e,n){switch(e){case"input":if(vf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=hc(r);if(!s)throw Error(H(90));Jx(r),vf(r,s)}}}break;case"textarea":Qx(t,n);break;case"select":e=n.value,e!=null&&ii(t,!!n.multiple,e,!1)}};sw=Fp;iw=xs;var Ck={usingClientEntryPoint:!1,Events:[La,Ys,hc,nw,rw,Fp]},To={findFiberByHostInstance:as,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Sk={bundleType:To.bundleType,version:To.version,rendererPackageName:To.rendererPackageName,rendererConfig:To.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Zn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=lw(t),t===null?null:t.stateNode},findFiberByHostInstance:To.findFiberByHostInstance||Ek,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kl.isDisabled&&kl.supportsFiber)try{uc=kl.inject(Sk),Cn=kl}catch{}}Wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ck;Wt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zp(e))throw Error(H(200));return wk(t,e,null,n)};Wt.createRoot=function(t,e){if(!zp(t))throw Error(H(299));var n=!1,r="",s=BE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=qp(t,1,!1,null,null,n,!1,r,s),t[jn]=e.current,aa(t.nodeType===8?t.parentNode:t),new jp(e)};Wt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(H(188)):(t=Object.keys(t).join(","),Error(H(268,t)));return t=lw(e),t=t===null?null:t.stateNode,t};Wt.flushSync=function(t){return xs(t)};Wt.hydrate=function(t,e,n){if(!Ec(e))throw Error(H(200));return Tc(null,t,e,!0,n)};Wt.hydrateRoot=function(t,e,n){if(!zp(t))throw Error(H(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=BE;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=OE(e,null,t,1,n??null,s,!1,i,o),t[jn]=e.current,aa(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new wc(e)};Wt.render=function(t,e,n){if(!Ec(e))throw Error(H(200));return Tc(null,t,e,!1,n)};Wt.unmountComponentAtNode=function(t){if(!Ec(t))throw Error(H(40));return t._reactRootContainer?(xs(function(){Tc(null,null,t,!1,function(){t._reactRootContainer=null,t[jn]=null})}),!0):!1};Wt.unstable_batchedUpdates=Fp;Wt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ec(n))throw Error(H(200));if(t==null||t._reactInternals===void 0)throw Error(H(38));return Tc(t,e,n,!1,r)};Wt.version="18.3.1-next-f1338f8080-20240426";function GE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(GE)}catch(t){console.error(t)}}GE(),Gx.exports=Wt;var Ik=Gx.exports,iy=Ik;df.createRoot=iy.createRoot,df.hydrateRoot=iy.hydrateRoot;var Gt=(t=>(t.IDLE="IDLE",t.LOADING="LOADING",t.SUCCESS="SUCCESS",t.ERROR="ERROR",t))(Gt||{});const qE=["Hindi","Gujarati","Marathi","Punjabi","Bengali","Telugu","Tamil","Kannada","Malayalam","Oriya"],oy=["Andhra Pradesh","Arunachal Pradesh","Assam","Bihar","Chhattisgarh","Goa","Gujarat","Haryana","Himachal Pradesh","Jharkhand","Karnataka","Kerala","Madhya Pradesh","Maharashtra","Manipur","Meghalaya","Mizoram","Nagaland","Odisha","Punjab","Rajasthan","Sikkim","Tamil Nadu","Telangana","Tripura","Uttar Pradesh","Uttarakhand","West Bengal","Andaman and Nicobar Islands","Chandigarh","Dadra and Nagar Haveli and Daman and Diu","Delhi","Jammu and Kashmir","Ladakh","Lakshadweep","Puducherry"],Ak=["Australia","Austria","Azerbaijan","Bahrain","Belgium","Bulgaria","Canada","China","Croatia","Cyprus","Czech Republic","Denmark","Estonia","Finland","France","Georgia","Germany","Greece","Hong Kong","Hungary","Iceland","Indonesia","Ireland","Israel","Italy","Japan","Kazakhstan","Kuwait","Latvia","Liechtenstein","Lithuania","Luxembourg","Macau","Malaysia","Maldives","Malta","Mexico","Monaco","Netherlands","New Zealand","Norway","Oman","Poland","Portugal","Qatar","Romania","Russia","Saudi Arabia","Schengen Area","Singapore","Slovakia","Slovenia","South Korea","Spain","Sweden","Switzerland","Taiwan","Thailand","Turkey","United Arab Emirates","United Kingdom","United States","Uzbekistan","Vatican City","Vietnam"];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let kk,Nk;function bk(){return{geminiUrl:kk,vertexUrl:Nk}}function Rk(t,e,n,r){var s,i;if(!(t!=null&&t.baseUrl)){const o=bk();return e?(s=o.vertexUrl)!==null&&s!==void 0?s:n:(i=o.geminiUrl)!==null&&i!==void 0?i:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class er{}function K(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const i=e[s];return i!=null?String(i):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function d(t,e,n){for(let i=0;i<e.length-1;i++){const o=e[i];if(o.endsWith("[]")){const a=o.slice(0,-2);if(!(a in t))if(Array.isArray(n))t[a]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${o}`);if(Array.isArray(t[a])){const l=t[a];if(Array.isArray(n))for(let c=0;c<l.length;c++){const h=l[c];d(h,e.slice(i+1),n[c])}else for(const c of l)d(c,e.slice(i+1),n)}return}else if(o.endsWith("[0]")){const a=o.slice(0,-3);a in t||(t[a]=[{}]);const l=t[a];d(l[0],e.slice(i+1),n);return}(!t[o]||typeof t[o]!="object")&&(t[o]={}),t=t[o]}const r=e[e.length-1],s=t[r];if(s!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===s)return;if(typeof s=="object"&&typeof n=="object"&&s!==null&&n!==null)Object.assign(s,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[r]=n}function u(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return n;const s=e[r];if(s.endsWith("[]")){const i=s.slice(0,-2);if(i in t){const o=t[i];return Array.isArray(o)?o.map(a=>u(a,e.slice(r+1),n)):n}else return n}else t=t[s]}return t}catch(r){if(r instanceof TypeError)return n;throw r}}function Pk(t,e){for(const[n,r]of Object.entries(e)){const s=n.split("."),i=r.split("."),o=new Set;let a=-1;for(let l=0;l<s.length;l++)if(s[l]==="*"){a=l;break}if(a!==-1&&i.length>a)for(let l=a;l<i.length;l++){const c=i[l];c!=="*"&&!c.endsWith("[]")&&!c.endsWith("[0]")&&o.add(c)}sh(t,s,i,0,o)}}function sh(t,e,n,r,s){if(r>=e.length||typeof t!="object"||t===null)return;const i=e[r];if(i.endsWith("[]")){const o=i.slice(0,-2),a=t;if(o in a&&Array.isArray(a[o]))for(const l of a[o])sh(l,e,n,r+1,s)}else if(i==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const o=t,a=Object.keys(o).filter(c=>!c.startsWith("_")&&!s.has(c)),l={};for(const c of a)l[c]=o[c];for(const[c,h]of Object.entries(l)){const m=[];for(const g of n.slice(r))g==="*"?m.push(c):m.push(g);d(o,m,h)}for(const c of a)delete o[c]}}else{const o=t;i in o&&sh(o[i],e,n,r+1,s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $p(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Mk(t){const e={},n=u(t,["operationName"]);n!=null&&d(e,["operationName"],n);const r=u(t,["resourceName"]);return r!=null&&d(e,["_url","resourceName"],r),e}function Dk(t){const e={},n=u(t,["name"]);n!=null&&d(e,["name"],n);const r=u(t,["metadata"]);r!=null&&d(e,["metadata"],r);const s=u(t,["done"]);s!=null&&d(e,["done"],s);const i=u(t,["error"]);i!=null&&d(e,["error"],i);const o=u(t,["response","generateVideoResponse"]);return o!=null&&d(e,["response"],Vk(o)),e}function Lk(t){const e={},n=u(t,["name"]);n!=null&&d(e,["name"],n);const r=u(t,["metadata"]);r!=null&&d(e,["metadata"],r);const s=u(t,["done"]);s!=null&&d(e,["done"],s);const i=u(t,["error"]);i!=null&&d(e,["error"],i);const o=u(t,["response"]);return o!=null&&d(e,["response"],Uk(o)),e}function Vk(t){const e={},n=u(t,["generatedSamples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Fk(o))),d(e,["generatedVideos"],i)}const r=u(t,["raiMediaFilteredCount"]);r!=null&&d(e,["raiMediaFilteredCount"],r);const s=u(t,["raiMediaFilteredReasons"]);return s!=null&&d(e,["raiMediaFilteredReasons"],s),e}function Uk(t){const e={},n=u(t,["videos"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Ok(o))),d(e,["generatedVideos"],i)}const r=u(t,["raiMediaFilteredCount"]);r!=null&&d(e,["raiMediaFilteredCount"],r);const s=u(t,["raiMediaFilteredReasons"]);return s!=null&&d(e,["raiMediaFilteredReasons"],s),e}function Fk(t){const e={},n=u(t,["video"]);return n!=null&&d(e,["video"],zk(n)),e}function Ok(t){const e={},n=u(t,["_self"]);return n!=null&&d(e,["video"],$k(n)),e}function Bk(t){const e={},n=u(t,["operationName"]);return n!=null&&d(e,["_url","operationName"],n),e}function Gk(t){const e={},n=u(t,["operationName"]);return n!=null&&d(e,["_url","operationName"],n),e}function qk(t){const e={},n=u(t,["name"]);n!=null&&d(e,["name"],n);const r=u(t,["metadata"]);r!=null&&d(e,["metadata"],r);const s=u(t,["done"]);s!=null&&d(e,["done"],s);const i=u(t,["error"]);i!=null&&d(e,["error"],i);const o=u(t,["response"]);return o!=null&&d(e,["response"],Hk(o)),e}function Hk(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=u(t,["parent"]);r!=null&&d(e,["parent"],r);const s=u(t,["documentName"]);return s!=null&&d(e,["documentName"],s),e}function HE(t){const e={},n=u(t,["name"]);n!=null&&d(e,["name"],n);const r=u(t,["metadata"]);r!=null&&d(e,["metadata"],r);const s=u(t,["done"]);s!=null&&d(e,["done"],s);const i=u(t,["error"]);i!=null&&d(e,["error"],i);const o=u(t,["response"]);return o!=null&&d(e,["response"],jk(o)),e}function jk(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=u(t,["parent"]);r!=null&&d(e,["parent"],r);const s=u(t,["documentName"]);return s!=null&&d(e,["documentName"],s),e}function zk(t){const e={},n=u(t,["uri"]);n!=null&&d(e,["uri"],n);const r=u(t,["encodedVideo"]);r!=null&&d(e,["videoBytes"],$p(r));const s=u(t,["encoding"]);return s!=null&&d(e,["mimeType"],s),e}function $k(t){const e={},n=u(t,["gcsUri"]);n!=null&&d(e,["uri"],n);const r=u(t,["bytesBase64Encoded"]);r!=null&&d(e,["videoBytes"],$p(r));const s=u(t,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ay;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(ay||(ay={}));var ly;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(ly||(ly={}));var uy;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(uy||(uy={}));var mt;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(mt||(mt={}));var cy;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(cy||(cy={}));var dy;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(dy||(dy={}));var fy;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(fy||(fy={}));var hy;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(hy||(hy={}));var py;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(py||(py={}));var my;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.HIGH="HIGH"})(my||(my={}));var gy;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(gy||(gy={}));var yy;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(yy||(yy={}));var vy;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(vy||(vy={}));var _y;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE"})(_y||(_y={}));var xy;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(xy||(xy={}));var wy;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(wy||(wy={}));var Ey;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Ey||(Ey={}));var Ty;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(Ty||(Ty={}));var Cy;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Cy||(Cy={}));var Vu;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Vu||(Vu={}));var Sy;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Sy||(Sy={}));var Iy;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Iy||(Iy={}));var Ay;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Ay||(Ay={}));var ih;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(ih||(ih={}));var ky;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(ky||(ky={}));var Ny;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Ny||(Ny={}));var by;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(by||(by={}));var Ry;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Ry||(Ry={}));var Py;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Py||(Py={}));var My;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(My||(My={}));var Dy;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(Dy||(Dy={}));var Ly;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Ly||(Ly={}));var Vy;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(Vy||(Vy={}));var Uy;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(Uy||(Uy={}));var Fy;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Fy||(Fy={}));var Oy;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Oy||(Oy={}));var By;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(By||(By={}));var Gy;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Gy||(Gy={}));var qy;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(qy||(qy={}));var Hy;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(Hy||(Hy={}));var jy;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(jy||(jy={}));var zy;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(zy||(zy={}));var $y;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})($y||($y={}));var Wy;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(Wy||(Wy={}));var Ky;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(Ky||(Ky={}));var Jy;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(Jy||(Jy={}));var Yy;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Yy||(Yy={}));var Qy;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(Qy||(Qy={}));var Xy;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Xy||(Xy={}));var Zy;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Zy||(Zy={}));var ev;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(ev||(ev={}));var tv;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(tv||(tv={}));var nv;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(nv||(nv={}));var rv;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(rv||(rv={}));var ri;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(ri||(ri={}));class oh{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Co{get text(){var e,n,r,s,i,o,a,l;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",h=!1;const m=[];for(const g of(l=(a=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[v,x]of Object.entries(g))v!=="text"&&v!=="thought"&&v!=="thoughtSignature"&&(x!==null||x!==void 0)&&m.push(v);if(typeof g.text=="string"){if(typeof g.thought=="boolean"&&g.thought)continue;h=!0,c+=g.text}}return m.length>0&&console.warn(`there are non-text parts ${m} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),h?c:void 0}get data(){var e,n,r,s,i,o,a,l;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const h=[];for(const m of(l=(a=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[g,v]of Object.entries(m))g!=="inlineData"&&(v!==null||v!==void 0)&&h.push(g);m.inlineData&&typeof m.inlineData.data=="string"&&(c+=atob(m.inlineData.data))}return h.length>0&&console.warn(`there are non-data parts ${h} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var e,n,r,s,i,o,a,l;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(l=(a=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(h=>h.functionCall).map(h=>h.functionCall).filter(h=>h!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var e,n,r,s,i,o,a,l,c;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const h=(l=(a=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(m=>m.executableCode).map(m=>m.executableCode).filter(m=>m!==void 0);if((h==null?void 0:h.length)!==0)return(c=h==null?void 0:h[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var e,n,r,s,i,o,a,l,c;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const h=(l=(a=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(m=>m.codeExecutionResult).map(m=>m.codeExecutionResult).filter(m=>m!==void 0);if((h==null?void 0:h.length)!==0)return(c=h==null?void 0:h[0])===null||c===void 0?void 0:c.output}}class sv{}class iv{}class Wk{}class Kk{}class Jk{}class Yk{}class ov{}class av{}class lv{}class Qk{}class Uu{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new Uu;let s;const i=e;return n?s=Lk(i):s=Dk(i),Object.assign(r,s),r}}class uv{}class cv{}class dv{}class Xk{}class Zk{}class eN{}class Wp{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new Wp,i=qk(e);return Object.assign(r,i),r}}class tN{}class nN{}class rN{}class fv{}class sN{get text(){var e,n,r;let s="",i=!1;const o=[];for(const a of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[l,c]of Object.entries(a))l!=="text"&&l!=="thought"&&c!==null&&o.push(l);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;i=!0,s+=a.text}}return o.length>0&&console.warn(`there are non-text parts ${o} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),i?s:void 0}get data(){var e,n,r;let s="";const i=[];for(const o of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[a,l]of Object.entries(o))a!=="inlineData"&&l!==null&&i.push(a);o.inlineData&&typeof o.inlineData.data=="string"&&(s+=atob(o.inlineData.data))}return i.length>0&&console.warn(`there are non-data parts ${i} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class iN{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Kp{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new Kp,i=HE(e);return Object.assign(r,i),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ve(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function jE(t,e){const n=ve(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function zE(t){return Array.isArray(t)?t.map(e=>Fu(e)):[Fu(t)]}function Fu(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function $E(t){const e=Fu(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function WE(t){const e=Fu(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function hv(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function KE(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>hv(e)):[hv(t)]}function ah(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function pv(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function mv(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function xt(t){if(t==null)throw new Error("ContentUnion is required");return ah(t)?t:{role:"user",parts:KE(t)}}function Jp(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=xt(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=xt(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>xt(n)):[xt(e)]}function en(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(pv(t)||mv(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[xt(t)]}const e=[],n=[],r=ah(t[0]);for(const s of t){const i=ah(s);if(i!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(i)e.push(s);else{if(pv(s)||mv(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(s)}}return r||e.push({role:"user",parts:KE(n)}),e}function oN(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(mt).includes(n[0].toUpperCase())?n[0].toUpperCase():mt.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(mt).includes(r.toUpperCase())?r.toUpperCase():mt.TYPE_UNSPECIFIED})}}function di(t){const e={},n=["items"],r=["anyOf"],s=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const i=t.anyOf;i!=null&&i.length==2&&(i[0].type==="null"?(e.nullable=!0,t=i[1]):i[1].type==="null"&&(e.nullable=!0,t=i[0])),t.type instanceof Array&&oN(t.type,e);for(const[o,a]of Object.entries(t))if(a!=null)if(o=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;e.type=Object.values(mt).includes(a.toUpperCase())?a.toUpperCase():mt.TYPE_UNSPECIFIED}else if(n.includes(o))e[o]=di(a);else if(r.includes(o)){const l=[];for(const c of a){if(c.type=="null"){e.nullable=!0;continue}l.push(di(c))}e[o]=l}else if(s.includes(o)){const l={};for(const[c,h]of Object.entries(a))l[c]=di(h);e[o]=l}else{if(o==="additionalProperties")continue;e[o]=a}return e}function Yp(t){return di(t)}function Qp(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Xp(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Bi(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=di(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=di(e.response));return t}function Gi(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function aN(t,e,n,r=1){const s=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:s?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:s?`${n}/${e}`:e}function tr(t,e){if(typeof e!="string")throw new Error("name must be a string");return aN(t,e,"cachedContents")}function JE(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Kr(t){return $p(t)}function lN(t){return t!=null&&typeof t=="object"&&"name"in t}function uN(t){return t!=null&&typeof t=="object"&&"video"in t}function cN(t){return t!=null&&typeof t=="object"&&"uri"in t}function YE(t){var e;let n;if(lN(t)&&(n=t.name),!(cN(t)&&(n=t.uri,n===void 0))&&!(uN(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const s=n.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${n}`);n=s[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function QE(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function XE(t){for(const e of["models","tunedModels","publisherModels"])if(dN(t,e))return t[e];return[]}function dN(t,e){return t!==null&&typeof t=="object"&&e in t}function fN(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function hN(t,e={}){const n=[],r=new Set;for(const s of t){const i=s.name;if(r.has(i))throw new Error(`Duplicate function name ${i} found in MCP tools. Please ensure function names are unique.`);r.add(i);const o=fN(s,e);o.functionDeclarations&&n.push(...o.functionDeclarations)}return{functionDeclarations:n}}function ZE(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,s=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(s>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||s!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function pN(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function eT(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const s=n.inlinedResponses;if(!Array.isArray(s)||s.length===0)return t;let i=!1;for(const o of s){if(typeof o!="object"||o===null)continue;const l=o.response;if(typeof l!="object"||l===null)continue;if(l.embedding!==void 0){i=!0;break}}return i&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function qi(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function tT(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mN(t){const e={},n=u(t,["responsesFile"]);n!=null&&d(e,["fileName"],n);const r=u(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>JN(o))),d(e,["inlinedResponses"],i)}const s=u(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>o)),d(e,["inlinedEmbedContentResponses"],i)}return e}function gN(t){const e={},n=u(t,["predictionsFormat"]);n!=null&&d(e,["format"],n);const r=u(t,["gcsDestination","outputUriPrefix"]);r!=null&&d(e,["gcsUri"],r);const s=u(t,["bigqueryDestination","outputUri"]);return s!=null&&d(e,["bigqueryUri"],s),e}function yN(t){const e={},n=u(t,["format"]);n!=null&&d(e,["predictionsFormat"],n);const r=u(t,["gcsUri"]);r!=null&&d(e,["gcsDestination","outputUriPrefix"],r);const s=u(t,["bigqueryUri"]);if(s!=null&&d(e,["bigqueryDestination","outputUri"],s),u(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(u(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Yl(t){const e={},n=u(t,["name"]);n!=null&&d(e,["name"],n);const r=u(t,["metadata","displayName"]);r!=null&&d(e,["displayName"],r);const s=u(t,["metadata","state"]);s!=null&&d(e,["state"],tT(s));const i=u(t,["metadata","createTime"]);i!=null&&d(e,["createTime"],i);const o=u(t,["metadata","endTime"]);o!=null&&d(e,["endTime"],o);const a=u(t,["metadata","updateTime"]);a!=null&&d(e,["updateTime"],a);const l=u(t,["metadata","model"]);l!=null&&d(e,["model"],l);const c=u(t,["metadata","output"]);return c!=null&&d(e,["dest"],mN(eT(c))),e}function lh(t){const e={},n=u(t,["name"]);n!=null&&d(e,["name"],n);const r=u(t,["displayName"]);r!=null&&d(e,["displayName"],r);const s=u(t,["state"]);s!=null&&d(e,["state"],tT(s));const i=u(t,["error"]);i!=null&&d(e,["error"],i);const o=u(t,["createTime"]);o!=null&&d(e,["createTime"],o);const a=u(t,["startTime"]);a!=null&&d(e,["startTime"],a);const l=u(t,["endTime"]);l!=null&&d(e,["endTime"],l);const c=u(t,["updateTime"]);c!=null&&d(e,["updateTime"],c);const h=u(t,["model"]);h!=null&&d(e,["model"],h);const m=u(t,["inputConfig"]);m!=null&&d(e,["src"],vN(m));const g=u(t,["outputConfig"]);g!=null&&d(e,["dest"],gN(eT(g)));const v=u(t,["completionStats"]);return v!=null&&d(e,["completionStats"],v),e}function vN(t){const e={},n=u(t,["instancesFormat"]);n!=null&&d(e,["format"],n);const r=u(t,["gcsSource","uris"]);r!=null&&d(e,["gcsUri"],r);const s=u(t,["bigquerySource","inputUri"]);return s!=null&&d(e,["bigqueryUri"],s),e}function _N(t,e){const n={};if(u(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(u(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=u(e,["fileName"]);r!=null&&d(n,["fileName"],r);const s=u(e,["inlinedRequests"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>KN(t,o))),d(n,["requests","requests"],i)}return n}function xN(t){const e={},n=u(t,["format"]);n!=null&&d(e,["instancesFormat"],n);const r=u(t,["gcsUri"]);r!=null&&d(e,["gcsSource","uris"],r);const s=u(t,["bigqueryUri"]);if(s!=null&&d(e,["bigquerySource","inputUri"],s),u(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function wN(t){const e={},n=u(t,["data"]);if(n!=null&&d(e,["data"],n),u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=u(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function EN(t,e){const n={},r=u(e,["name"]);return r!=null&&d(n,["_url","name"],qi(t,r)),n}function TN(t,e){const n={},r=u(e,["name"]);return r!=null&&d(n,["_url","name"],qi(t,r)),n}function CN(t){const e={},n=u(t,["content"]);n!=null&&d(e,["content"],n);const r=u(t,["citationMetadata"]);r!=null&&d(e,["citationMetadata"],SN(r));const s=u(t,["tokenCount"]);s!=null&&d(e,["tokenCount"],s);const i=u(t,["finishReason"]);i!=null&&d(e,["finishReason"],i);const o=u(t,["avgLogprobs"]);o!=null&&d(e,["avgLogprobs"],o);const a=u(t,["groundingMetadata"]);a!=null&&d(e,["groundingMetadata"],a);const l=u(t,["index"]);l!=null&&d(e,["index"],l);const c=u(t,["logprobsResult"]);c!=null&&d(e,["logprobsResult"],c);const h=u(t,["safetyRatings"]);if(h!=null){let g=h;Array.isArray(g)&&(g=g.map(v=>v)),d(e,["safetyRatings"],g)}const m=u(t,["urlContextMetadata"]);return m!=null&&d(e,["urlContextMetadata"],m),e}function SN(t){const e={},n=u(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>s)),d(e,["citations"],r)}return e}function nT(t){const e={},n=u(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>nb(i))),d(e,["parts"],s)}const r=u(t,["role"]);return r!=null&&d(e,["role"],r),e}function IN(t,e){const n={},r=u(t,["displayName"]);if(e!==void 0&&r!=null&&d(e,["batch","displayName"],r),u(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function AN(t,e){const n={},r=u(t,["displayName"]);e!==void 0&&r!=null&&d(e,["displayName"],r);const s=u(t,["dest"]);return e!==void 0&&s!=null&&d(e,["outputConfig"],yN(pN(s))),n}function gv(t,e){const n={},r=u(e,["model"]);r!=null&&d(n,["_url","model"],ve(t,r));const s=u(e,["src"]);s!=null&&d(n,["batch","inputConfig"],_N(t,ZE(t,s)));const i=u(e,["config"]);return i!=null&&IN(i,n),n}function kN(t,e){const n={},r=u(e,["model"]);r!=null&&d(n,["model"],ve(t,r));const s=u(e,["src"]);s!=null&&d(n,["inputConfig"],xN(ZE(t,s)));const i=u(e,["config"]);return i!=null&&AN(i,n),n}function NN(t,e){const n={},r=u(t,["displayName"]);return e!==void 0&&r!=null&&d(e,["batch","displayName"],r),n}function bN(t,e){const n={},r=u(e,["model"]);r!=null&&d(n,["_url","model"],ve(t,r));const s=u(e,["src"]);s!=null&&d(n,["batch","inputConfig"],UN(t,s));const i=u(e,["config"]);return i!=null&&NN(i,n),n}function RN(t,e){const n={},r=u(e,["name"]);return r!=null&&d(n,["_url","name"],qi(t,r)),n}function PN(t,e){const n={},r=u(e,["name"]);return r!=null&&d(n,["_url","name"],qi(t,r)),n}function MN(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=u(t,["name"]);r!=null&&d(e,["name"],r);const s=u(t,["done"]);s!=null&&d(e,["done"],s);const i=u(t,["error"]);return i!=null&&d(e,["error"],i),e}function DN(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=u(t,["name"]);r!=null&&d(e,["name"],r);const s=u(t,["done"]);s!=null&&d(e,["done"],s);const i=u(t,["error"]);return i!=null&&d(e,["error"],i),e}function LN(t,e){const n={},r=u(e,["contents"]);if(r!=null){let i=Jp(t,r);Array.isArray(i)&&(i=i.map(o=>o)),d(n,["requests[]","request","content"],i)}const s=u(e,["config"]);return s!=null&&(d(n,["_self"],VN(s,n)),Pk(n,{"requests[].*":"requests[].request.*"})),n}function VN(t,e){const n={},r=u(t,["taskType"]);e!==void 0&&r!=null&&d(e,["requests[]","taskType"],r);const s=u(t,["title"]);e!==void 0&&s!=null&&d(e,["requests[]","title"],s);const i=u(t,["outputDimensionality"]);if(e!==void 0&&i!=null&&d(e,["requests[]","outputDimensionality"],i),u(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function UN(t,e){const n={},r=u(e,["fileName"]);r!=null&&d(n,["file_name"],r);const s=u(e,["inlinedRequests"]);return s!=null&&d(n,["requests"],LN(t,s)),n}function FN(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const r=u(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function ON(t){const e={},n=u(t,["id"]);n!=null&&d(e,["id"],n);const r=u(t,["args"]);r!=null&&d(e,["args"],r);const s=u(t,["name"]);if(s!=null&&d(e,["name"],s),u(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function BN(t){const e={},n=u(t,["mode"]);n!=null&&d(e,["mode"],n);const r=u(t,["allowedFunctionNames"]);if(r!=null&&d(e,["allowedFunctionNames"],r),u(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function GN(t,e,n){const r={},s=u(e,["systemInstruction"]);n!==void 0&&s!=null&&d(n,["systemInstruction"],nT(xt(s)));const i=u(e,["temperature"]);i!=null&&d(r,["temperature"],i);const o=u(e,["topP"]);o!=null&&d(r,["topP"],o);const a=u(e,["topK"]);a!=null&&d(r,["topK"],a);const l=u(e,["candidateCount"]);l!=null&&d(r,["candidateCount"],l);const c=u(e,["maxOutputTokens"]);c!=null&&d(r,["maxOutputTokens"],c);const h=u(e,["stopSequences"]);h!=null&&d(r,["stopSequences"],h);const m=u(e,["responseLogprobs"]);m!=null&&d(r,["responseLogprobs"],m);const g=u(e,["logprobs"]);g!=null&&d(r,["logprobs"],g);const v=u(e,["presencePenalty"]);v!=null&&d(r,["presencePenalty"],v);const x=u(e,["frequencyPenalty"]);x!=null&&d(r,["frequencyPenalty"],x);const I=u(e,["seed"]);I!=null&&d(r,["seed"],I);const P=u(e,["responseMimeType"]);P!=null&&d(r,["responseMimeType"],P);const A=u(e,["responseSchema"]);A!=null&&d(r,["responseSchema"],Yp(A));const E=u(e,["responseJsonSchema"]);if(E!=null&&d(r,["responseJsonSchema"],E),u(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const k=u(e,["safetySettings"]);if(n!==void 0&&k!=null){let M=k;Array.isArray(M)&&(M=M.map(b=>rb(b))),d(n,["safetySettings"],M)}const D=u(e,["tools"]);if(n!==void 0&&D!=null){let M=Gi(D);Array.isArray(M)&&(M=M.map(b=>ib(Bi(b)))),d(n,["tools"],M)}const U=u(e,["toolConfig"]);if(n!==void 0&&U!=null&&d(n,["toolConfig"],sb(U)),u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const L=u(e,["cachedContent"]);n!==void 0&&L!=null&&d(n,["cachedContent"],tr(t,L));const T=u(e,["responseModalities"]);T!=null&&d(r,["responseModalities"],T);const w=u(e,["mediaResolution"]);w!=null&&d(r,["mediaResolution"],w);const C=u(e,["speechConfig"]);if(C!=null&&d(r,["speechConfig"],Qp(C)),u(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const R=u(e,["thinkingConfig"]);R!=null&&d(r,["thinkingConfig"],R);const N=u(e,["imageConfig"]);return N!=null&&d(r,["imageConfig"],WN(N)),r}function qN(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=u(t,["candidates"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>CN(c))),d(e,["candidates"],l)}const s=u(t,["modelVersion"]);s!=null&&d(e,["modelVersion"],s);const i=u(t,["promptFeedback"]);i!=null&&d(e,["promptFeedback"],i);const o=u(t,["responseId"]);o!=null&&d(e,["responseId"],o);const a=u(t,["usageMetadata"]);return a!=null&&d(e,["usageMetadata"],a),e}function HN(t,e){const n={},r=u(e,["name"]);return r!=null&&d(n,["_url","name"],qi(t,r)),n}function jN(t,e){const n={},r=u(e,["name"]);return r!=null&&d(n,["_url","name"],qi(t,r)),n}function zN(t){const e={};if(u(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=u(t,["enableWidget"]);return n!=null&&d(e,["enableWidget"],n),e}function $N(t){const e={};if(u(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=u(t,["timeRangeFilter"]);return n!=null&&d(e,["timeRangeFilter"],n),e}function WN(t){const e={},n=u(t,["aspectRatio"]);n!=null&&d(e,["aspectRatio"],n);const r=u(t,["imageSize"]);if(r!=null&&d(e,["imageSize"],r),u(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(u(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function KN(t,e){const n={},r=u(e,["model"]);r!=null&&d(n,["request","model"],ve(t,r));const s=u(e,["contents"]);if(s!=null){let a=en(s);Array.isArray(a)&&(a=a.map(l=>nT(l))),d(n,["request","contents"],a)}const i=u(e,["metadata"]);i!=null&&d(n,["metadata"],i);const o=u(e,["config"]);return o!=null&&d(n,["request","generationConfig"],GN(t,o,u(n,["request"],{}))),n}function JN(t){const e={},n=u(t,["response"]);n!=null&&d(e,["response"],qN(n));const r=u(t,["error"]);return r!=null&&d(e,["error"],r),e}function YN(t,e){const n={},r=u(t,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);const s=u(t,["pageToken"]);if(e!==void 0&&s!=null&&d(e,["_query","pageToken"],s),u(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function QN(t,e){const n={},r=u(t,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);const s=u(t,["pageToken"]);e!==void 0&&s!=null&&d(e,["_query","pageToken"],s);const i=u(t,["filter"]);return e!==void 0&&i!=null&&d(e,["_query","filter"],i),n}function XN(t){const e={},n=u(t,["config"]);return n!=null&&YN(n,e),e}function ZN(t){const e={},n=u(t,["config"]);return n!=null&&QN(n,e),e}function eb(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=u(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);const s=u(t,["operations"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>Yl(o))),d(e,["batchJobs"],i)}return e}function tb(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=u(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);const s=u(t,["batchPredictionJobs"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>lh(o))),d(e,["batchJobs"],i)}return e}function nb(t){const e={},n=u(t,["mediaResolution"]);n!=null&&d(e,["mediaResolution"],n);const r=u(t,["codeExecutionResult"]);r!=null&&d(e,["codeExecutionResult"],r);const s=u(t,["executableCode"]);s!=null&&d(e,["executableCode"],s);const i=u(t,["fileData"]);i!=null&&d(e,["fileData"],FN(i));const o=u(t,["functionCall"]);o!=null&&d(e,["functionCall"],ON(o));const a=u(t,["functionResponse"]);a!=null&&d(e,["functionResponse"],a);const l=u(t,["inlineData"]);l!=null&&d(e,["inlineData"],wN(l));const c=u(t,["text"]);c!=null&&d(e,["text"],c);const h=u(t,["thought"]);h!=null&&d(e,["thought"],h);const m=u(t,["thoughtSignature"]);m!=null&&d(e,["thoughtSignature"],m);const g=u(t,["videoMetadata"]);return g!=null&&d(e,["videoMetadata"],g),e}function rb(t){const e={},n=u(t,["category"]);if(n!=null&&d(e,["category"],n),u(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=u(t,["threshold"]);return r!=null&&d(e,["threshold"],r),e}function sb(t){const e={},n=u(t,["functionCallingConfig"]);n!=null&&d(e,["functionCallingConfig"],BN(n));const r=u(t,["retrievalConfig"]);return r!=null&&d(e,["retrievalConfig"],r),e}function ib(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(m=>m)),d(e,["functionDeclarations"],h)}if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=u(t,["googleSearchRetrieval"]);r!=null&&d(e,["googleSearchRetrieval"],r);const s=u(t,["computerUse"]);s!=null&&d(e,["computerUse"],s);const i=u(t,["fileSearch"]);i!=null&&d(e,["fileSearch"],i);const o=u(t,["codeExecution"]);if(o!=null&&d(e,["codeExecution"],o),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=u(t,["googleMaps"]);a!=null&&d(e,["googleMaps"],zN(a));const l=u(t,["googleSearch"]);l!=null&&d(e,["googleSearch"],$N(l));const c=u(t,["urlContext"]);return c!=null&&d(e,["urlContext"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Wn;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Wn||(Wn={}));class bs{constructor(e,n,r,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,s)}init(e,n,r){var s,i;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let o={config:{}};!r||Object.keys(r).length===0?o={config:{}}:typeof r=="object"?o=Object.assign({},r):o=r,o.config&&(o.config.pageToken=n.nextPageToken),this.paramsInternal=o,this.pageInternalSize=(i=(s=o.config)===null||s===void 0?void 0:s.pageSize)!==null&&i!==void 0?i:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ob extends er{constructor(e){super(),this.apiClient=e,this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)},this.list=async(n={})=>new bs(Wn.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n)}createInlinedGenerateContentRequest(e){const n=gv(this.apiClient,e),r=n._url,s=K("{model}:batchGenerateContent",r),a=n.batch.inputConfig.requests,l=a.requests,c=[];for(const h of l){const m=Object.assign({},h);if(m.systemInstruction){const g=m.systemInstruction;delete m.systemInstruction;const v=m.request;v.systemInstruction=g,m.request=v}c.push(m)}return a.requests=c,delete n.config,delete n._url,delete n._query,{path:s,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const r=n?Object.assign({},n):{},s=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${s}`),r.dest===void 0){const i=this.getGcsUri(e),o=this.getBigqueryUri(e);if(i)i.endsWith(".jsonl")?r.dest=`${i.slice(0,-6)}/dest`:r.dest=`${i}_dest_${s}`;else if(o)r.dest=`${o}_dest_${s}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=kN(this.apiClient,e);return a=K("batchPredictionJobs",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>lh(h))}else{const c=gv(this.apiClient,e);return a=K("{model}:batchGenerateContent",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>Yl(h))}}async createEmbeddingsInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=bN(this.apiClient,e);return i=K("{model}:asyncBatchEmbedContent",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>Yl(l))}}async get(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=jN(this.apiClient,e);return a=K("batchPredictionJobs/{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>lh(h))}else{const c=HN(this.apiClient,e);return a=K("batches/{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>Yl(h))}}async cancel(e){var n,r,s,i;let o="",a={};if(this.apiClient.isVertexAI()){const l=TN(this.apiClient,e);o=K("batchPredictionJobs/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const l=EN(this.apiClient,e);o=K("batches/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=ZN(e);return a=K("batchPredictionJobs",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=tb(h),g=new fv;return Object.assign(g,m),g})}else{const c=XN(e);return a=K("batches",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=eb(h),g=new fv;return Object.assign(g,m),g})}}async delete(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=PN(this.apiClient,e);return a=K("batchPredictionJobs/{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>DN(h))}else{const c=RN(this.apiClient,e);return a=K("batches/{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>MN(h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ab(t){const e={},n=u(t,["data"]);if(n!=null&&d(e,["data"],n),u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=u(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function yv(t){const e={},n=u(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>bb(i))),d(e,["parts"],s)}const r=u(t,["role"]);return r!=null&&d(e,["role"],r),e}function lb(t,e){const n={},r=u(t,["ttl"]);e!==void 0&&r!=null&&d(e,["ttl"],r);const s=u(t,["expireTime"]);e!==void 0&&s!=null&&d(e,["expireTime"],s);const i=u(t,["displayName"]);e!==void 0&&i!=null&&d(e,["displayName"],i);const o=u(t,["contents"]);if(e!==void 0&&o!=null){let h=en(o);Array.isArray(h)&&(h=h.map(m=>yv(m))),d(e,["contents"],h)}const a=u(t,["systemInstruction"]);e!==void 0&&a!=null&&d(e,["systemInstruction"],yv(xt(a)));const l=u(t,["tools"]);if(e!==void 0&&l!=null){let h=l;Array.isArray(h)&&(h=h.map(m=>Pb(m))),d(e,["tools"],h)}const c=u(t,["toolConfig"]);if(e!==void 0&&c!=null&&d(e,["toolConfig"],Rb(c)),u(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function ub(t,e){const n={},r=u(t,["ttl"]);e!==void 0&&r!=null&&d(e,["ttl"],r);const s=u(t,["expireTime"]);e!==void 0&&s!=null&&d(e,["expireTime"],s);const i=u(t,["displayName"]);e!==void 0&&i!=null&&d(e,["displayName"],i);const o=u(t,["contents"]);if(e!==void 0&&o!=null){let m=en(o);Array.isArray(m)&&(m=m.map(g=>g)),d(e,["contents"],m)}const a=u(t,["systemInstruction"]);e!==void 0&&a!=null&&d(e,["systemInstruction"],xt(a));const l=u(t,["tools"]);if(e!==void 0&&l!=null){let m=l;Array.isArray(m)&&(m=m.map(g=>Mb(g))),d(e,["tools"],m)}const c=u(t,["toolConfig"]);e!==void 0&&c!=null&&d(e,["toolConfig"],c);const h=u(t,["kmsKeyName"]);return e!==void 0&&h!=null&&d(e,["encryption_spec","kmsKeyName"],h),n}function cb(t,e){const n={},r=u(e,["model"]);r!=null&&d(n,["model"],jE(t,r));const s=u(e,["config"]);return s!=null&&lb(s,n),n}function db(t,e){const n={},r=u(e,["model"]);r!=null&&d(n,["model"],jE(t,r));const s=u(e,["config"]);return s!=null&&ub(s,n),n}function fb(t,e){const n={},r=u(e,["name"]);return r!=null&&d(n,["_url","name"],tr(t,r)),n}function hb(t,e){const n={},r=u(e,["name"]);return r!=null&&d(n,["_url","name"],tr(t,r)),n}function pb(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function mb(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function gb(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const r=u(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function yb(t){const e={},n=u(t,["id"]);n!=null&&d(e,["id"],n);const r=u(t,["args"]);r!=null&&d(e,["args"],r);const s=u(t,["name"]);if(s!=null&&d(e,["name"],s),u(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function vb(t){const e={},n=u(t,["mode"]);n!=null&&d(e,["mode"],n);const r=u(t,["allowedFunctionNames"]);if(r!=null&&d(e,["allowedFunctionNames"],r),u(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function _b(t){const e={};if(u(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=u(t,["description"]);n!=null&&d(e,["description"],n);const r=u(t,["name"]);r!=null&&d(e,["name"],r);const s=u(t,["parameters"]);s!=null&&d(e,["parameters"],s);const i=u(t,["parametersJsonSchema"]);i!=null&&d(e,["parametersJsonSchema"],i);const o=u(t,["response"]);o!=null&&d(e,["response"],o);const a=u(t,["responseJsonSchema"]);return a!=null&&d(e,["responseJsonSchema"],a),e}function xb(t,e){const n={},r=u(e,["name"]);return r!=null&&d(n,["_url","name"],tr(t,r)),n}function wb(t,e){const n={},r=u(e,["name"]);return r!=null&&d(n,["_url","name"],tr(t,r)),n}function Eb(t){const e={};if(u(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=u(t,["enableWidget"]);return n!=null&&d(e,["enableWidget"],n),e}function Tb(t){const e={};if(u(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=u(t,["timeRangeFilter"]);return n!=null&&d(e,["timeRangeFilter"],n),e}function Cb(t,e){const n={},r=u(t,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);const s=u(t,["pageToken"]);return e!==void 0&&s!=null&&d(e,["_query","pageToken"],s),n}function Sb(t,e){const n={},r=u(t,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);const s=u(t,["pageToken"]);return e!==void 0&&s!=null&&d(e,["_query","pageToken"],s),n}function Ib(t){const e={},n=u(t,["config"]);return n!=null&&Cb(n,e),e}function Ab(t){const e={},n=u(t,["config"]);return n!=null&&Sb(n,e),e}function kb(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=u(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);const s=u(t,["cachedContents"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>o)),d(e,["cachedContents"],i)}return e}function Nb(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=u(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);const s=u(t,["cachedContents"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>o)),d(e,["cachedContents"],i)}return e}function bb(t){const e={},n=u(t,["mediaResolution"]);n!=null&&d(e,["mediaResolution"],n);const r=u(t,["codeExecutionResult"]);r!=null&&d(e,["codeExecutionResult"],r);const s=u(t,["executableCode"]);s!=null&&d(e,["executableCode"],s);const i=u(t,["fileData"]);i!=null&&d(e,["fileData"],gb(i));const o=u(t,["functionCall"]);o!=null&&d(e,["functionCall"],yb(o));const a=u(t,["functionResponse"]);a!=null&&d(e,["functionResponse"],a);const l=u(t,["inlineData"]);l!=null&&d(e,["inlineData"],ab(l));const c=u(t,["text"]);c!=null&&d(e,["text"],c);const h=u(t,["thought"]);h!=null&&d(e,["thought"],h);const m=u(t,["thoughtSignature"]);m!=null&&d(e,["thoughtSignature"],m);const g=u(t,["videoMetadata"]);return g!=null&&d(e,["videoMetadata"],g),e}function Rb(t){const e={},n=u(t,["functionCallingConfig"]);n!=null&&d(e,["functionCallingConfig"],vb(n));const r=u(t,["retrievalConfig"]);return r!=null&&d(e,["retrievalConfig"],r),e}function Pb(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(m=>m)),d(e,["functionDeclarations"],h)}if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=u(t,["googleSearchRetrieval"]);r!=null&&d(e,["googleSearchRetrieval"],r);const s=u(t,["computerUse"]);s!=null&&d(e,["computerUse"],s);const i=u(t,["fileSearch"]);i!=null&&d(e,["fileSearch"],i);const o=u(t,["codeExecution"]);if(o!=null&&d(e,["codeExecution"],o),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=u(t,["googleMaps"]);a!=null&&d(e,["googleMaps"],Eb(a));const l=u(t,["googleSearch"]);l!=null&&d(e,["googleSearch"],Tb(l));const c=u(t,["urlContext"]);return c!=null&&d(e,["urlContext"],c),e}function Mb(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(g=>_b(g))),d(e,["functionDeclarations"],m)}const r=u(t,["retrieval"]);r!=null&&d(e,["retrieval"],r);const s=u(t,["googleSearchRetrieval"]);s!=null&&d(e,["googleSearchRetrieval"],s);const i=u(t,["computerUse"]);if(i!=null&&d(e,["computerUse"],i),u(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=u(t,["codeExecution"]);o!=null&&d(e,["codeExecution"],o);const a=u(t,["enterpriseWebSearch"]);a!=null&&d(e,["enterpriseWebSearch"],a);const l=u(t,["googleMaps"]);l!=null&&d(e,["googleMaps"],l);const c=u(t,["googleSearch"]);c!=null&&d(e,["googleSearch"],c);const h=u(t,["urlContext"]);return h!=null&&d(e,["urlContext"],h),e}function Db(t,e){const n={},r=u(t,["ttl"]);e!==void 0&&r!=null&&d(e,["ttl"],r);const s=u(t,["expireTime"]);return e!==void 0&&s!=null&&d(e,["expireTime"],s),n}function Lb(t,e){const n={},r=u(t,["ttl"]);e!==void 0&&r!=null&&d(e,["ttl"],r);const s=u(t,["expireTime"]);return e!==void 0&&s!=null&&d(e,["expireTime"],s),n}function Vb(t,e){const n={},r=u(e,["name"]);r!=null&&d(n,["_url","name"],tr(t,r));const s=u(e,["config"]);return s!=null&&Db(s,n),n}function Ub(t,e){const n={},r=u(e,["name"]);r!=null&&d(n,["_url","name"],tr(t,r));const s=u(e,["config"]);return s!=null&&Lb(s,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fb extends er{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new bs(Wn.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=db(this.apiClient,e);return a=K("cachedContents",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>h)}else{const c=cb(this.apiClient,e);return a=K("cachedContents",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>h)}}async get(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=wb(this.apiClient,e);return a=K("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>h)}else{const c=xb(this.apiClient,e);return a=K("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>h)}}async delete(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=hb(this.apiClient,e);return a=K("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=mb(h),g=new cv;return Object.assign(g,m),g})}else{const c=fb(this.apiClient,e);return a=K("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=pb(h),g=new cv;return Object.assign(g,m),g})}}async update(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Ub(this.apiClient,e);return a=K("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>h)}else{const c=Vb(this.apiClient,e);return a=K("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>h)}}async listInternal(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Ab(e);return a=K("cachedContents",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=Nb(h),g=new dv;return Object.assign(g,m),g})}else{const c=Ib(e);return a=K("cachedContents",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=kb(h),g=new dv;return Object.assign(g,m),g})}}}function vv(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ne(t){return this instanceof Ne?(this.v=t,this):new Ne(t)}function fi(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(v){return function(x){return Promise.resolve(x).then(v,m)}}function a(v,x){r[v]&&(s[v]=function(I){return new Promise(function(P,A){i.push([v,I,P,A])>1||l(v,I)})},x&&(s[v]=x(s[v])))}function l(v,x){try{c(r[v](x))}catch(I){g(i[0][3],I)}}function c(v){v.value instanceof Ne?Promise.resolve(v.value.v).then(h,m):g(i[0][2],v)}function h(v){l("next",v)}function m(v){l("throw",v)}function g(v,x){v(x),i.shift(),i.length&&l(i[0][0],i[0][1])}}function Ho(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof vv=="function"?vv(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,l){o=t[i](o),s(a,l,o.done,o.value)})}}function s(i,o,a,l){Promise.resolve(l).then(function(c){i({value:c,done:a})},o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ob(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:rT(n)}function rT(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function Bb(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function _v(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const s=[];let i=!0;for(;r<n&&t[r].role==="model";)s.push(t[r]),i&&!rT(t[r])&&(i=!1),r++;i?e.push(...s):e.pop()}return e}class Gb{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new qb(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class qb{constructor(e,n,r,s={},i=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=s,this.history=i,this.sendPromise=Promise.resolve(),Bb(i)}async sendMessage(e){var n;await this.sendPromise;const r=xt(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var i,o,a;const l=await s,c=(o=(i=l.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content,h=l.automaticFunctionCallingHistory,m=this.getHistory(!0).length;let g=[];h!=null&&(g=(a=h.slice(m))!==null&&a!==void 0?a:[]);const v=c?[c]:[];this.recordHistory(r,v,g)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var n;await this.sendPromise;const r=xt(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const i=await s;return this.processStreamResponse(i,r)}getHistory(e=!1){const n=e?_v(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var r,s;return fi(this,arguments,function*(){var o,a,l,c;const h=[];try{for(var m=!0,g=Ho(e),v;v=yield Ne(g.next()),o=v.done,!o;m=!0){c=v.value,m=!1;const x=c;if(Ob(x)){const I=(s=(r=x.candidates)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.content;I!==void 0&&h.push(I)}yield yield Ne(x)}}catch(x){a={error:x}}finally{try{!m&&!o&&(l=g.return)&&(yield Ne(l.call(g)))}finally{if(a)throw a.error}}this.recordHistory(n,h)})}recordHistory(e,n,r){let s=[];n.length>0&&n.every(i=>i.role!==void 0)?s=n:s.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(..._v(r)):this.history.push(e),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Cc extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Cc.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Hb(t){const e={},n=u(t,["file"]);return n!=null&&d(e,["file"],n),e}function jb(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function zb(t){const e={},n=u(t,["name"]);return n!=null&&d(e,["_url","file"],YE(n)),e}function $b(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function Wb(t){const e={},n=u(t,["name"]);return n!=null&&d(e,["_url","file"],YE(n)),e}function Kb(t,e){const n={},r=u(t,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);const s=u(t,["pageToken"]);return e!==void 0&&s!=null&&d(e,["_query","pageToken"],s),n}function Jb(t){const e={},n=u(t,["config"]);return n!=null&&Kb(n,e),e}function Yb(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=u(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);const s=u(t,["files"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>o)),d(e,["files"],i)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Qb extends er{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new bs(Wn.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Jb(e);return i=K("files",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const h=c;return h.sdkHttpResponse={headers:l.headers},h})),s.then(l=>{const c=Yb(l),h=new tN;return Object.assign(h,c),h})}}async createInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Hb(e);return i=K("upload/v1beta/files",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>{const c=jb(l),h=new nN;return Object.assign(h,c),h})}}async get(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Wb(e);return i=K("files/{file}",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>l)}}async delete(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=zb(e);return i=K("files/{file}",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const h=c;return h.sdkHttpResponse={headers:l.headers},h})),s.then(l=>{const c=$b(l),h=new rN;return Object.assign(h,c),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ql(t){const e={},n=u(t,["data"]);if(n!=null&&d(e,["data"],n),u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=u(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function Xb(t){const e={},n=u(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>pR(i))),d(e,["parts"],s)}const r=u(t,["role"]);return r!=null&&d(e,["role"],r),e}function Zb(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const r=u(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function eR(t){const e={},n=u(t,["id"]);n!=null&&d(e,["id"],n);const r=u(t,["args"]);r!=null&&d(e,["args"],r);const s=u(t,["name"]);if(s!=null&&d(e,["name"],s),u(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function tR(t){const e={};if(u(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=u(t,["description"]);n!=null&&d(e,["description"],n);const r=u(t,["name"]);r!=null&&d(e,["name"],r);const s=u(t,["parameters"]);s!=null&&d(e,["parameters"],s);const i=u(t,["parametersJsonSchema"]);i!=null&&d(e,["parametersJsonSchema"],i);const o=u(t,["response"]);o!=null&&d(e,["response"],o);const a=u(t,["responseJsonSchema"]);return a!=null&&d(e,["responseJsonSchema"],a),e}function nR(t){const e={},n=u(t,["modelSelectionConfig"]);n!=null&&d(e,["modelConfig"],n);const r=u(t,["responseJsonSchema"]);r!=null&&d(e,["responseJsonSchema"],r);const s=u(t,["audioTimestamp"]);s!=null&&d(e,["audioTimestamp"],s);const i=u(t,["candidateCount"]);i!=null&&d(e,["candidateCount"],i);const o=u(t,["enableAffectiveDialog"]);o!=null&&d(e,["enableAffectiveDialog"],o);const a=u(t,["frequencyPenalty"]);a!=null&&d(e,["frequencyPenalty"],a);const l=u(t,["logprobs"]);l!=null&&d(e,["logprobs"],l);const c=u(t,["maxOutputTokens"]);c!=null&&d(e,["maxOutputTokens"],c);const h=u(t,["mediaResolution"]);h!=null&&d(e,["mediaResolution"],h);const m=u(t,["presencePenalty"]);m!=null&&d(e,["presencePenalty"],m);const g=u(t,["responseLogprobs"]);g!=null&&d(e,["responseLogprobs"],g);const v=u(t,["responseMimeType"]);v!=null&&d(e,["responseMimeType"],v);const x=u(t,["responseModalities"]);x!=null&&d(e,["responseModalities"],x);const I=u(t,["responseSchema"]);I!=null&&d(e,["responseSchema"],I);const P=u(t,["routingConfig"]);P!=null&&d(e,["routingConfig"],P);const A=u(t,["seed"]);A!=null&&d(e,["seed"],A);const E=u(t,["speechConfig"]);E!=null&&d(e,["speechConfig"],sT(E));const k=u(t,["stopSequences"]);k!=null&&d(e,["stopSequences"],k);const D=u(t,["temperature"]);D!=null&&d(e,["temperature"],D);const U=u(t,["thinkingConfig"]);U!=null&&d(e,["thinkingConfig"],U);const L=u(t,["topK"]);L!=null&&d(e,["topK"],L);const T=u(t,["topP"]);if(T!=null&&d(e,["topP"],T),u(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function rR(t){const e={};if(u(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=u(t,["enableWidget"]);return n!=null&&d(e,["enableWidget"],n),e}function sR(t){const e={};if(u(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=u(t,["timeRangeFilter"]);return n!=null&&d(e,["timeRangeFilter"],n),e}function iR(t,e){const n={},r=u(t,["generationConfig"]);e!==void 0&&r!=null&&d(e,["setup","generationConfig"],r);const s=u(t,["responseModalities"]);e!==void 0&&s!=null&&d(e,["setup","generationConfig","responseModalities"],s);const i=u(t,["temperature"]);e!==void 0&&i!=null&&d(e,["setup","generationConfig","temperature"],i);const o=u(t,["topP"]);e!==void 0&&o!=null&&d(e,["setup","generationConfig","topP"],o);const a=u(t,["topK"]);e!==void 0&&a!=null&&d(e,["setup","generationConfig","topK"],a);const l=u(t,["maxOutputTokens"]);e!==void 0&&l!=null&&d(e,["setup","generationConfig","maxOutputTokens"],l);const c=u(t,["mediaResolution"]);e!==void 0&&c!=null&&d(e,["setup","generationConfig","mediaResolution"],c);const h=u(t,["seed"]);e!==void 0&&h!=null&&d(e,["setup","generationConfig","seed"],h);const m=u(t,["speechConfig"]);e!==void 0&&m!=null&&d(e,["setup","generationConfig","speechConfig"],Xp(m));const g=u(t,["thinkingConfig"]);e!==void 0&&g!=null&&d(e,["setup","generationConfig","thinkingConfig"],g);const v=u(t,["enableAffectiveDialog"]);e!==void 0&&v!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],v);const x=u(t,["systemInstruction"]);e!==void 0&&x!=null&&d(e,["setup","systemInstruction"],Xb(xt(x)));const I=u(t,["tools"]);if(e!==void 0&&I!=null){let L=Gi(I);Array.isArray(L)&&(L=L.map(T=>gR(Bi(T)))),d(e,["setup","tools"],L)}const P=u(t,["sessionResumption"]);e!==void 0&&P!=null&&d(e,["setup","sessionResumption"],mR(P));const A=u(t,["inputAudioTranscription"]);e!==void 0&&A!=null&&d(e,["setup","inputAudioTranscription"],A);const E=u(t,["outputAudioTranscription"]);e!==void 0&&E!=null&&d(e,["setup","outputAudioTranscription"],E);const k=u(t,["realtimeInputConfig"]);e!==void 0&&k!=null&&d(e,["setup","realtimeInputConfig"],k);const D=u(t,["contextWindowCompression"]);e!==void 0&&D!=null&&d(e,["setup","contextWindowCompression"],D);const U=u(t,["proactivity"]);return e!==void 0&&U!=null&&d(e,["setup","proactivity"],U),n}function oR(t,e){const n={},r=u(t,["generationConfig"]);e!==void 0&&r!=null&&d(e,["setup","generationConfig"],nR(r));const s=u(t,["responseModalities"]);e!==void 0&&s!=null&&d(e,["setup","generationConfig","responseModalities"],s);const i=u(t,["temperature"]);e!==void 0&&i!=null&&d(e,["setup","generationConfig","temperature"],i);const o=u(t,["topP"]);e!==void 0&&o!=null&&d(e,["setup","generationConfig","topP"],o);const a=u(t,["topK"]);e!==void 0&&a!=null&&d(e,["setup","generationConfig","topK"],a);const l=u(t,["maxOutputTokens"]);e!==void 0&&l!=null&&d(e,["setup","generationConfig","maxOutputTokens"],l);const c=u(t,["mediaResolution"]);e!==void 0&&c!=null&&d(e,["setup","generationConfig","mediaResolution"],c);const h=u(t,["seed"]);e!==void 0&&h!=null&&d(e,["setup","generationConfig","seed"],h);const m=u(t,["speechConfig"]);e!==void 0&&m!=null&&d(e,["setup","generationConfig","speechConfig"],sT(Xp(m)));const g=u(t,["thinkingConfig"]);e!==void 0&&g!=null&&d(e,["setup","generationConfig","thinkingConfig"],g);const v=u(t,["enableAffectiveDialog"]);e!==void 0&&v!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],v);const x=u(t,["systemInstruction"]);e!==void 0&&x!=null&&d(e,["setup","systemInstruction"],xt(x));const I=u(t,["tools"]);if(e!==void 0&&I!=null){let L=Gi(I);Array.isArray(L)&&(L=L.map(T=>yR(Bi(T)))),d(e,["setup","tools"],L)}const P=u(t,["sessionResumption"]);e!==void 0&&P!=null&&d(e,["setup","sessionResumption"],P);const A=u(t,["inputAudioTranscription"]);e!==void 0&&A!=null&&d(e,["setup","inputAudioTranscription"],A);const E=u(t,["outputAudioTranscription"]);e!==void 0&&E!=null&&d(e,["setup","outputAudioTranscription"],E);const k=u(t,["realtimeInputConfig"]);e!==void 0&&k!=null&&d(e,["setup","realtimeInputConfig"],k);const D=u(t,["contextWindowCompression"]);e!==void 0&&D!=null&&d(e,["setup","contextWindowCompression"],D);const U=u(t,["proactivity"]);return e!==void 0&&U!=null&&d(e,["setup","proactivity"],U),n}function aR(t,e){const n={},r=u(e,["model"]);r!=null&&d(n,["setup","model"],ve(t,r));const s=u(e,["config"]);return s!=null&&d(n,["config"],iR(s,n)),n}function lR(t,e){const n={},r=u(e,["model"]);r!=null&&d(n,["setup","model"],ve(t,r));const s=u(e,["config"]);return s!=null&&d(n,["config"],oR(s,n)),n}function uR(t){const e={},n=u(t,["musicGenerationConfig"]);return n!=null&&d(e,["musicGenerationConfig"],n),e}function cR(t){const e={},n=u(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>s)),d(e,["weightedPrompts"],r)}return e}function dR(t){const e={},n=u(t,["media"]);if(n!=null){let c=zE(n);Array.isArray(c)&&(c=c.map(h=>Ql(h))),d(e,["mediaChunks"],c)}const r=u(t,["audio"]);r!=null&&d(e,["audio"],Ql(WE(r)));const s=u(t,["audioStreamEnd"]);s!=null&&d(e,["audioStreamEnd"],s);const i=u(t,["video"]);i!=null&&d(e,["video"],Ql($E(i)));const o=u(t,["text"]);o!=null&&d(e,["text"],o);const a=u(t,["activityStart"]);a!=null&&d(e,["activityStart"],a);const l=u(t,["activityEnd"]);return l!=null&&d(e,["activityEnd"],l),e}function fR(t){const e={},n=u(t,["media"]);if(n!=null){let c=zE(n);Array.isArray(c)&&(c=c.map(h=>h)),d(e,["mediaChunks"],c)}const r=u(t,["audio"]);r!=null&&d(e,["audio"],WE(r));const s=u(t,["audioStreamEnd"]);s!=null&&d(e,["audioStreamEnd"],s);const i=u(t,["video"]);i!=null&&d(e,["video"],$E(i));const o=u(t,["text"]);o!=null&&d(e,["text"],o);const a=u(t,["activityStart"]);a!=null&&d(e,["activityStart"],a);const l=u(t,["activityEnd"]);return l!=null&&d(e,["activityEnd"],l),e}function hR(t){const e={},n=u(t,["setupComplete"]);n!=null&&d(e,["setupComplete"],n);const r=u(t,["serverContent"]);r!=null&&d(e,["serverContent"],r);const s=u(t,["toolCall"]);s!=null&&d(e,["toolCall"],s);const i=u(t,["toolCallCancellation"]);i!=null&&d(e,["toolCallCancellation"],i);const o=u(t,["usageMetadata"]);o!=null&&d(e,["usageMetadata"],vR(o));const a=u(t,["goAway"]);a!=null&&d(e,["goAway"],a);const l=u(t,["sessionResumptionUpdate"]);return l!=null&&d(e,["sessionResumptionUpdate"],l),e}function pR(t){const e={},n=u(t,["mediaResolution"]);n!=null&&d(e,["mediaResolution"],n);const r=u(t,["codeExecutionResult"]);r!=null&&d(e,["codeExecutionResult"],r);const s=u(t,["executableCode"]);s!=null&&d(e,["executableCode"],s);const i=u(t,["fileData"]);i!=null&&d(e,["fileData"],Zb(i));const o=u(t,["functionCall"]);o!=null&&d(e,["functionCall"],eR(o));const a=u(t,["functionResponse"]);a!=null&&d(e,["functionResponse"],a);const l=u(t,["inlineData"]);l!=null&&d(e,["inlineData"],Ql(l));const c=u(t,["text"]);c!=null&&d(e,["text"],c);const h=u(t,["thought"]);h!=null&&d(e,["thought"],h);const m=u(t,["thoughtSignature"]);m!=null&&d(e,["thoughtSignature"],m);const g=u(t,["videoMetadata"]);return g!=null&&d(e,["videoMetadata"],g),e}function mR(t){const e={},n=u(t,["handle"]);if(n!=null&&d(e,["handle"],n),u(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function sT(t){const e={},n=u(t,["languageCode"]);n!=null&&d(e,["languageCode"],n);const r=u(t,["voiceConfig"]);if(r!=null&&d(e,["voiceConfig"],r),u(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function gR(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(m=>m)),d(e,["functionDeclarations"],h)}if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=u(t,["googleSearchRetrieval"]);r!=null&&d(e,["googleSearchRetrieval"],r);const s=u(t,["computerUse"]);s!=null&&d(e,["computerUse"],s);const i=u(t,["fileSearch"]);i!=null&&d(e,["fileSearch"],i);const o=u(t,["codeExecution"]);if(o!=null&&d(e,["codeExecution"],o),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=u(t,["googleMaps"]);a!=null&&d(e,["googleMaps"],rR(a));const l=u(t,["googleSearch"]);l!=null&&d(e,["googleSearch"],sR(l));const c=u(t,["urlContext"]);return c!=null&&d(e,["urlContext"],c),e}function yR(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(g=>tR(g))),d(e,["functionDeclarations"],m)}const r=u(t,["retrieval"]);r!=null&&d(e,["retrieval"],r);const s=u(t,["googleSearchRetrieval"]);s!=null&&d(e,["googleSearchRetrieval"],s);const i=u(t,["computerUse"]);if(i!=null&&d(e,["computerUse"],i),u(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=u(t,["codeExecution"]);o!=null&&d(e,["codeExecution"],o);const a=u(t,["enterpriseWebSearch"]);a!=null&&d(e,["enterpriseWebSearch"],a);const l=u(t,["googleMaps"]);l!=null&&d(e,["googleMaps"],l);const c=u(t,["googleSearch"]);c!=null&&d(e,["googleSearch"],c);const h=u(t,["urlContext"]);return h!=null&&d(e,["urlContext"],h),e}function vR(t){const e={},n=u(t,["promptTokenCount"]);n!=null&&d(e,["promptTokenCount"],n);const r=u(t,["cachedContentTokenCount"]);r!=null&&d(e,["cachedContentTokenCount"],r);const s=u(t,["candidatesTokenCount"]);s!=null&&d(e,["responseTokenCount"],s);const i=u(t,["toolUsePromptTokenCount"]);i!=null&&d(e,["toolUsePromptTokenCount"],i);const o=u(t,["thoughtsTokenCount"]);o!=null&&d(e,["thoughtsTokenCount"],o);const a=u(t,["totalTokenCount"]);a!=null&&d(e,["totalTokenCount"],a);const l=u(t,["promptTokensDetails"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(x=>x)),d(e,["promptTokensDetails"],v)}const c=u(t,["cacheTokensDetails"]);if(c!=null){let v=c;Array.isArray(v)&&(v=v.map(x=>x)),d(e,["cacheTokensDetails"],v)}const h=u(t,["candidatesTokensDetails"]);if(h!=null){let v=h;Array.isArray(v)&&(v=v.map(x=>x)),d(e,["responseTokensDetails"],v)}const m=u(t,["toolUsePromptTokensDetails"]);if(m!=null){let v=m;Array.isArray(v)&&(v=v.map(x=>x)),d(e,["toolUsePromptTokensDetails"],v)}const g=u(t,["trafficType"]);return g!=null&&d(e,["trafficType"],g),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _R(t){const e={},n=u(t,["data"]);if(n!=null&&d(e,["data"],n),u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=u(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function xR(t){const e={},n=u(t,["content"]);n!=null&&d(e,["content"],n);const r=u(t,["citationMetadata"]);r!=null&&d(e,["citationMetadata"],wR(r));const s=u(t,["tokenCount"]);s!=null&&d(e,["tokenCount"],s);const i=u(t,["finishReason"]);i!=null&&d(e,["finishReason"],i);const o=u(t,["avgLogprobs"]);o!=null&&d(e,["avgLogprobs"],o);const a=u(t,["groundingMetadata"]);a!=null&&d(e,["groundingMetadata"],a);const l=u(t,["index"]);l!=null&&d(e,["index"],l);const c=u(t,["logprobsResult"]);c!=null&&d(e,["logprobsResult"],c);const h=u(t,["safetyRatings"]);if(h!=null){let g=h;Array.isArray(g)&&(g=g.map(v=>v)),d(e,["safetyRatings"],g)}const m=u(t,["urlContextMetadata"]);return m!=null&&d(e,["urlContextMetadata"],m),e}function wR(t){const e={},n=u(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>s)),d(e,["citations"],r)}return e}function ER(t,e){const n={},r=u(e,["model"]);r!=null&&d(n,["_url","model"],ve(t,r));const s=u(e,["contents"]);if(s!=null){let i=en(s);Array.isArray(i)&&(i=i.map(o=>o)),d(n,["contents"],i)}return n}function TR(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=u(t,["tokensInfo"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>i)),d(e,["tokensInfo"],s)}return e}function CR(t){const e={},n=u(t,["values"]);n!=null&&d(e,["values"],n);const r=u(t,["statistics"]);return r!=null&&d(e,["statistics"],SR(r)),e}function SR(t){const e={},n=u(t,["truncated"]);n!=null&&d(e,["truncated"],n);const r=u(t,["token_count"]);return r!=null&&d(e,["tokenCount"],r),e}function Sc(t){const e={},n=u(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>DP(i))),d(e,["parts"],s)}const r=u(t,["role"]);return r!=null&&d(e,["role"],r),e}function IR(t){const e={},n=u(t,["controlType"]);n!=null&&d(e,["controlType"],n);const r=u(t,["enableControlImageComputation"]);return r!=null&&d(e,["computeControl"],r),e}function AR(t){const e={};if(u(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(u(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(u(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function kR(t,e){const n={},r=u(t,["systemInstruction"]);e!==void 0&&r!=null&&d(e,["systemInstruction"],xt(r));const s=u(t,["tools"]);if(e!==void 0&&s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>uT(a))),d(e,["tools"],o)}const i=u(t,["generationConfig"]);return e!==void 0&&i!=null&&d(e,["generationConfig"],_P(i)),n}function NR(t,e){const n={},r=u(e,["model"]);r!=null&&d(n,["_url","model"],ve(t,r));const s=u(e,["contents"]);if(s!=null){let o=en(s);Array.isArray(o)&&(o=o.map(a=>Sc(a))),d(n,["contents"],o)}const i=u(e,["config"]);return i!=null&&AR(i),n}function bR(t,e){const n={},r=u(e,["model"]);r!=null&&d(n,["_url","model"],ve(t,r));const s=u(e,["contents"]);if(s!=null){let o=en(s);Array.isArray(o)&&(o=o.map(a=>a)),d(n,["contents"],o)}const i=u(e,["config"]);return i!=null&&kR(i,n),n}function RR(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=u(t,["totalTokens"]);r!=null&&d(e,["totalTokens"],r);const s=u(t,["cachedContentTokenCount"]);return s!=null&&d(e,["cachedContentTokenCount"],s),e}function PR(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=u(t,["totalTokens"]);return r!=null&&d(e,["totalTokens"],r),e}function MR(t,e){const n={},r=u(e,["model"]);return r!=null&&d(n,["_url","name"],ve(t,r)),n}function DR(t,e){const n={},r=u(e,["model"]);return r!=null&&d(n,["_url","name"],ve(t,r)),n}function LR(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function VR(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function UR(t,e){const n={},r=u(t,["outputGcsUri"]);e!==void 0&&r!=null&&d(e,["parameters","storageUri"],r);const s=u(t,["negativePrompt"]);e!==void 0&&s!=null&&d(e,["parameters","negativePrompt"],s);const i=u(t,["numberOfImages"]);e!==void 0&&i!=null&&d(e,["parameters","sampleCount"],i);const o=u(t,["aspectRatio"]);e!==void 0&&o!=null&&d(e,["parameters","aspectRatio"],o);const a=u(t,["guidanceScale"]);e!==void 0&&a!=null&&d(e,["parameters","guidanceScale"],a);const l=u(t,["seed"]);e!==void 0&&l!=null&&d(e,["parameters","seed"],l);const c=u(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&d(e,["parameters","safetySetting"],c);const h=u(t,["personGeneration"]);e!==void 0&&h!=null&&d(e,["parameters","personGeneration"],h);const m=u(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&d(e,["parameters","includeSafetyAttributes"],m);const g=u(t,["includeRaiReason"]);e!==void 0&&g!=null&&d(e,["parameters","includeRaiReason"],g);const v=u(t,["language"]);e!==void 0&&v!=null&&d(e,["parameters","language"],v);const x=u(t,["outputMimeType"]);e!==void 0&&x!=null&&d(e,["parameters","outputOptions","mimeType"],x);const I=u(t,["outputCompressionQuality"]);e!==void 0&&I!=null&&d(e,["parameters","outputOptions","compressionQuality"],I);const P=u(t,["addWatermark"]);e!==void 0&&P!=null&&d(e,["parameters","addWatermark"],P);const A=u(t,["labels"]);e!==void 0&&A!=null&&d(e,["labels"],A);const E=u(t,["editMode"]);e!==void 0&&E!=null&&d(e,["parameters","editMode"],E);const k=u(t,["baseSteps"]);return e!==void 0&&k!=null&&d(e,["parameters","editConfig","baseSteps"],k),n}function FR(t,e){const n={},r=u(e,["model"]);r!=null&&d(n,["_url","model"],ve(t,r));const s=u(e,["prompt"]);s!=null&&d(n,["instances[0]","prompt"],s);const i=u(e,["referenceImages"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>BP(l))),d(n,["instances[0]","referenceImages"],a)}const o=u(e,["config"]);return o!=null&&UR(o,n),n}function OR(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=u(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>Ic(i))),d(e,["generatedImages"],s)}return e}function BR(t,e){const n={},r=u(t,["taskType"]);e!==void 0&&r!=null&&d(e,["requests[]","taskType"],r);const s=u(t,["title"]);e!==void 0&&s!=null&&d(e,["requests[]","title"],s);const i=u(t,["outputDimensionality"]);if(e!==void 0&&i!=null&&d(e,["requests[]","outputDimensionality"],i),u(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function GR(t,e){const n={},r=u(t,["taskType"]);e!==void 0&&r!=null&&d(e,["instances[]","task_type"],r);const s=u(t,["title"]);e!==void 0&&s!=null&&d(e,["instances[]","title"],s);const i=u(t,["outputDimensionality"]);e!==void 0&&i!=null&&d(e,["parameters","outputDimensionality"],i);const o=u(t,["mimeType"]);e!==void 0&&o!=null&&d(e,["instances[]","mimeType"],o);const a=u(t,["autoTruncate"]);return e!==void 0&&a!=null&&d(e,["parameters","autoTruncate"],a),n}function qR(t,e){const n={},r=u(e,["model"]);r!=null&&d(n,["_url","model"],ve(t,r));const s=u(e,["contents"]);if(s!=null){let a=Jp(t,s);Array.isArray(a)&&(a=a.map(l=>l)),d(n,["requests[]","content"],a)}const i=u(e,["config"]);i!=null&&BR(i,n);const o=u(e,["model"]);return o!==void 0&&d(n,["requests[]","model"],ve(t,o)),n}function HR(t,e){const n={},r=u(e,["model"]);r!=null&&d(n,["_url","model"],ve(t,r));const s=u(e,["contents"]);if(s!=null){let o=Jp(t,s);Array.isArray(o)&&(o=o.map(a=>a)),d(n,["instances[]","content"],o)}const i=u(e,["config"]);return i!=null&&GR(i,n),n}function jR(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=u(t,["embeddings"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),d(e,["embeddings"],i)}const s=u(t,["metadata"]);return s!=null&&d(e,["metadata"],s),e}function zR(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=u(t,["predictions[]","embeddings"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>CR(o))),d(e,["embeddings"],i)}const s=u(t,["metadata"]);return s!=null&&d(e,["metadata"],s),e}function $R(t){const e={},n=u(t,["endpoint"]);n!=null&&d(e,["name"],n);const r=u(t,["deployedModelId"]);return r!=null&&d(e,["deployedModelId"],r),e}function WR(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const r=u(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function KR(t){const e={},n=u(t,["id"]);n!=null&&d(e,["id"],n);const r=u(t,["args"]);r!=null&&d(e,["args"],r);const s=u(t,["name"]);if(s!=null&&d(e,["name"],s),u(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function JR(t){const e={},n=u(t,["mode"]);n!=null&&d(e,["mode"],n);const r=u(t,["allowedFunctionNames"]);if(r!=null&&d(e,["allowedFunctionNames"],r),u(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function YR(t){const e={};if(u(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=u(t,["description"]);n!=null&&d(e,["description"],n);const r=u(t,["name"]);r!=null&&d(e,["name"],r);const s=u(t,["parameters"]);s!=null&&d(e,["parameters"],s);const i=u(t,["parametersJsonSchema"]);i!=null&&d(e,["parametersJsonSchema"],i);const o=u(t,["response"]);o!=null&&d(e,["response"],o);const a=u(t,["responseJsonSchema"]);return a!=null&&d(e,["responseJsonSchema"],a),e}function QR(t,e,n){const r={},s=u(e,["systemInstruction"]);n!==void 0&&s!=null&&d(n,["systemInstruction"],Sc(xt(s)));const i=u(e,["temperature"]);i!=null&&d(r,["temperature"],i);const o=u(e,["topP"]);o!=null&&d(r,["topP"],o);const a=u(e,["topK"]);a!=null&&d(r,["topK"],a);const l=u(e,["candidateCount"]);l!=null&&d(r,["candidateCount"],l);const c=u(e,["maxOutputTokens"]);c!=null&&d(r,["maxOutputTokens"],c);const h=u(e,["stopSequences"]);h!=null&&d(r,["stopSequences"],h);const m=u(e,["responseLogprobs"]);m!=null&&d(r,["responseLogprobs"],m);const g=u(e,["logprobs"]);g!=null&&d(r,["logprobs"],g);const v=u(e,["presencePenalty"]);v!=null&&d(r,["presencePenalty"],v);const x=u(e,["frequencyPenalty"]);x!=null&&d(r,["frequencyPenalty"],x);const I=u(e,["seed"]);I!=null&&d(r,["seed"],I);const P=u(e,["responseMimeType"]);P!=null&&d(r,["responseMimeType"],P);const A=u(e,["responseSchema"]);A!=null&&d(r,["responseSchema"],Yp(A));const E=u(e,["responseJsonSchema"]);if(E!=null&&d(r,["responseJsonSchema"],E),u(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const k=u(e,["safetySettings"]);if(n!==void 0&&k!=null){let M=k;Array.isArray(M)&&(M=M.map(b=>GP(b))),d(n,["safetySettings"],M)}const D=u(e,["tools"]);if(n!==void 0&&D!=null){let M=Gi(D);Array.isArray(M)&&(M=M.map(b=>KP(Bi(b)))),d(n,["tools"],M)}const U=u(e,["toolConfig"]);if(n!==void 0&&U!=null&&d(n,["toolConfig"],WP(U)),u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const L=u(e,["cachedContent"]);n!==void 0&&L!=null&&d(n,["cachedContent"],tr(t,L));const T=u(e,["responseModalities"]);T!=null&&d(r,["responseModalities"],T);const w=u(e,["mediaResolution"]);w!=null&&d(r,["mediaResolution"],w);const C=u(e,["speechConfig"]);if(C!=null&&d(r,["speechConfig"],Qp(C)),u(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const R=u(e,["thinkingConfig"]);R!=null&&d(r,["thinkingConfig"],R);const N=u(e,["imageConfig"]);return N!=null&&d(r,["imageConfig"],CP(N)),r}function XR(t,e,n){const r={},s=u(e,["systemInstruction"]);n!==void 0&&s!=null&&d(n,["systemInstruction"],xt(s));const i=u(e,["temperature"]);i!=null&&d(r,["temperature"],i);const o=u(e,["topP"]);o!=null&&d(r,["topP"],o);const a=u(e,["topK"]);a!=null&&d(r,["topK"],a);const l=u(e,["candidateCount"]);l!=null&&d(r,["candidateCount"],l);const c=u(e,["maxOutputTokens"]);c!=null&&d(r,["maxOutputTokens"],c);const h=u(e,["stopSequences"]);h!=null&&d(r,["stopSequences"],h);const m=u(e,["responseLogprobs"]);m!=null&&d(r,["responseLogprobs"],m);const g=u(e,["logprobs"]);g!=null&&d(r,["logprobs"],g);const v=u(e,["presencePenalty"]);v!=null&&d(r,["presencePenalty"],v);const x=u(e,["frequencyPenalty"]);x!=null&&d(r,["frequencyPenalty"],x);const I=u(e,["seed"]);I!=null&&d(r,["seed"],I);const P=u(e,["responseMimeType"]);P!=null&&d(r,["responseMimeType"],P);const A=u(e,["responseSchema"]);A!=null&&d(r,["responseSchema"],Yp(A));const E=u(e,["responseJsonSchema"]);E!=null&&d(r,["responseJsonSchema"],E);const k=u(e,["routingConfig"]);k!=null&&d(r,["routingConfig"],k);const D=u(e,["modelSelectionConfig"]);D!=null&&d(r,["modelConfig"],D);const U=u(e,["safetySettings"]);if(n!==void 0&&U!=null){let pe=U;Array.isArray(pe)&&(pe=pe.map(ye=>ye)),d(n,["safetySettings"],pe)}const L=u(e,["tools"]);if(n!==void 0&&L!=null){let pe=Gi(L);Array.isArray(pe)&&(pe=pe.map(ye=>uT(Bi(ye)))),d(n,["tools"],pe)}const T=u(e,["toolConfig"]);n!==void 0&&T!=null&&d(n,["toolConfig"],T);const w=u(e,["labels"]);n!==void 0&&w!=null&&d(n,["labels"],w);const C=u(e,["cachedContent"]);n!==void 0&&C!=null&&d(n,["cachedContent"],tr(t,C));const R=u(e,["responseModalities"]);R!=null&&d(r,["responseModalities"],R);const N=u(e,["mediaResolution"]);N!=null&&d(r,["mediaResolution"],N);const M=u(e,["speechConfig"]);M!=null&&d(r,["speechConfig"],lT(Qp(M)));const b=u(e,["audioTimestamp"]);b!=null&&d(r,["audioTimestamp"],b);const X=u(e,["thinkingConfig"]);X!=null&&d(r,["thinkingConfig"],X);const _e=u(e,["imageConfig"]);return _e!=null&&d(r,["imageConfig"],SP(_e)),r}function xv(t,e){const n={},r=u(e,["model"]);r!=null&&d(n,["_url","model"],ve(t,r));const s=u(e,["contents"]);if(s!=null){let o=en(s);Array.isArray(o)&&(o=o.map(a=>Sc(a))),d(n,["contents"],o)}const i=u(e,["config"]);return i!=null&&d(n,["generationConfig"],QR(t,i,n)),n}function wv(t,e){const n={},r=u(e,["model"]);r!=null&&d(n,["_url","model"],ve(t,r));const s=u(e,["contents"]);if(s!=null){let o=en(s);Array.isArray(o)&&(o=o.map(a=>a)),d(n,["contents"],o)}const i=u(e,["config"]);return i!=null&&d(n,["generationConfig"],XR(t,i,n)),n}function Ev(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=u(t,["candidates"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>xR(c))),d(e,["candidates"],l)}const s=u(t,["modelVersion"]);s!=null&&d(e,["modelVersion"],s);const i=u(t,["promptFeedback"]);i!=null&&d(e,["promptFeedback"],i);const o=u(t,["responseId"]);o!=null&&d(e,["responseId"],o);const a=u(t,["usageMetadata"]);return a!=null&&d(e,["usageMetadata"],a),e}function Tv(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=u(t,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(h=>h)),d(e,["candidates"],c)}const s=u(t,["createTime"]);s!=null&&d(e,["createTime"],s);const i=u(t,["modelVersion"]);i!=null&&d(e,["modelVersion"],i);const o=u(t,["promptFeedback"]);o!=null&&d(e,["promptFeedback"],o);const a=u(t,["responseId"]);a!=null&&d(e,["responseId"],a);const l=u(t,["usageMetadata"]);return l!=null&&d(e,["usageMetadata"],l),e}function ZR(t,e){const n={};if(u(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=u(t,["numberOfImages"]);e!==void 0&&r!=null&&d(e,["parameters","sampleCount"],r);const s=u(t,["aspectRatio"]);e!==void 0&&s!=null&&d(e,["parameters","aspectRatio"],s);const i=u(t,["guidanceScale"]);if(e!==void 0&&i!=null&&d(e,["parameters","guidanceScale"],i),u(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=u(t,["safetyFilterLevel"]);e!==void 0&&o!=null&&d(e,["parameters","safetySetting"],o);const a=u(t,["personGeneration"]);e!==void 0&&a!=null&&d(e,["parameters","personGeneration"],a);const l=u(t,["includeSafetyAttributes"]);e!==void 0&&l!=null&&d(e,["parameters","includeSafetyAttributes"],l);const c=u(t,["includeRaiReason"]);e!==void 0&&c!=null&&d(e,["parameters","includeRaiReason"],c);const h=u(t,["language"]);e!==void 0&&h!=null&&d(e,["parameters","language"],h);const m=u(t,["outputMimeType"]);e!==void 0&&m!=null&&d(e,["parameters","outputOptions","mimeType"],m);const g=u(t,["outputCompressionQuality"]);if(e!==void 0&&g!=null&&d(e,["parameters","outputOptions","compressionQuality"],g),u(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(u(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const v=u(t,["imageSize"]);if(e!==void 0&&v!=null&&d(e,["parameters","sampleImageSize"],v),u(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function eP(t,e){const n={},r=u(t,["outputGcsUri"]);e!==void 0&&r!=null&&d(e,["parameters","storageUri"],r);const s=u(t,["negativePrompt"]);e!==void 0&&s!=null&&d(e,["parameters","negativePrompt"],s);const i=u(t,["numberOfImages"]);e!==void 0&&i!=null&&d(e,["parameters","sampleCount"],i);const o=u(t,["aspectRatio"]);e!==void 0&&o!=null&&d(e,["parameters","aspectRatio"],o);const a=u(t,["guidanceScale"]);e!==void 0&&a!=null&&d(e,["parameters","guidanceScale"],a);const l=u(t,["seed"]);e!==void 0&&l!=null&&d(e,["parameters","seed"],l);const c=u(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&d(e,["parameters","safetySetting"],c);const h=u(t,["personGeneration"]);e!==void 0&&h!=null&&d(e,["parameters","personGeneration"],h);const m=u(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&d(e,["parameters","includeSafetyAttributes"],m);const g=u(t,["includeRaiReason"]);e!==void 0&&g!=null&&d(e,["parameters","includeRaiReason"],g);const v=u(t,["language"]);e!==void 0&&v!=null&&d(e,["parameters","language"],v);const x=u(t,["outputMimeType"]);e!==void 0&&x!=null&&d(e,["parameters","outputOptions","mimeType"],x);const I=u(t,["outputCompressionQuality"]);e!==void 0&&I!=null&&d(e,["parameters","outputOptions","compressionQuality"],I);const P=u(t,["addWatermark"]);e!==void 0&&P!=null&&d(e,["parameters","addWatermark"],P);const A=u(t,["labels"]);e!==void 0&&A!=null&&d(e,["labels"],A);const E=u(t,["imageSize"]);e!==void 0&&E!=null&&d(e,["parameters","sampleImageSize"],E);const k=u(t,["enhancePrompt"]);return e!==void 0&&k!=null&&d(e,["parameters","enhancePrompt"],k),n}function tP(t,e){const n={},r=u(e,["model"]);r!=null&&d(n,["_url","model"],ve(t,r));const s=u(e,["prompt"]);s!=null&&d(n,["instances[0]","prompt"],s);const i=u(e,["config"]);return i!=null&&ZR(i,n),n}function nP(t,e){const n={},r=u(e,["model"]);r!=null&&d(n,["_url","model"],ve(t,r));const s=u(e,["prompt"]);s!=null&&d(n,["instances[0]","prompt"],s);const i=u(e,["config"]);return i!=null&&eP(i,n),n}function rP(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=u(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>mP(o))),d(e,["generatedImages"],i)}const s=u(t,["positivePromptSafetyAttributes"]);return s!=null&&d(e,["positivePromptSafetyAttributes"],oT(s)),e}function sP(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=u(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>Ic(o))),d(e,["generatedImages"],i)}const s=u(t,["positivePromptSafetyAttributes"]);return s!=null&&d(e,["positivePromptSafetyAttributes"],aT(s)),e}function iP(t,e){const n={},r=u(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&d(e,["parameters","sampleCount"],r),u(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=u(t,["durationSeconds"]);if(e!==void 0&&s!=null&&d(e,["parameters","durationSeconds"],s),u(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const i=u(t,["aspectRatio"]);e!==void 0&&i!=null&&d(e,["parameters","aspectRatio"],i);const o=u(t,["resolution"]);e!==void 0&&o!=null&&d(e,["parameters","resolution"],o);const a=u(t,["personGeneration"]);if(e!==void 0&&a!=null&&d(e,["parameters","personGeneration"],a),u(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const l=u(t,["negativePrompt"]);e!==void 0&&l!=null&&d(e,["parameters","negativePrompt"],l);const c=u(t,["enhancePrompt"]);if(e!==void 0&&c!=null&&d(e,["parameters","enhancePrompt"],c),u(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const h=u(t,["lastFrame"]);e!==void 0&&h!=null&&d(e,["instances[0]","lastFrame"],Ac(h));const m=u(t,["referenceImages"]);if(e!==void 0&&m!=null){let g=m;Array.isArray(g)&&(g=g.map(v=>a2(v))),d(e,["instances[0]","referenceImages"],g)}if(u(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(u(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function oP(t,e){const n={},r=u(t,["numberOfVideos"]);e!==void 0&&r!=null&&d(e,["parameters","sampleCount"],r);const s=u(t,["outputGcsUri"]);e!==void 0&&s!=null&&d(e,["parameters","storageUri"],s);const i=u(t,["fps"]);e!==void 0&&i!=null&&d(e,["parameters","fps"],i);const o=u(t,["durationSeconds"]);e!==void 0&&o!=null&&d(e,["parameters","durationSeconds"],o);const a=u(t,["seed"]);e!==void 0&&a!=null&&d(e,["parameters","seed"],a);const l=u(t,["aspectRatio"]);e!==void 0&&l!=null&&d(e,["parameters","aspectRatio"],l);const c=u(t,["resolution"]);e!==void 0&&c!=null&&d(e,["parameters","resolution"],c);const h=u(t,["personGeneration"]);e!==void 0&&h!=null&&d(e,["parameters","personGeneration"],h);const m=u(t,["pubsubTopic"]);e!==void 0&&m!=null&&d(e,["parameters","pubsubTopic"],m);const g=u(t,["negativePrompt"]);e!==void 0&&g!=null&&d(e,["parameters","negativePrompt"],g);const v=u(t,["enhancePrompt"]);e!==void 0&&v!=null&&d(e,["parameters","enhancePrompt"],v);const x=u(t,["generateAudio"]);e!==void 0&&x!=null&&d(e,["parameters","generateAudio"],x);const I=u(t,["lastFrame"]);e!==void 0&&I!=null&&d(e,["instances[0]","lastFrame"],hn(I));const P=u(t,["referenceImages"]);if(e!==void 0&&P!=null){let k=P;Array.isArray(k)&&(k=k.map(D=>l2(D))),d(e,["instances[0]","referenceImages"],k)}const A=u(t,["mask"]);e!==void 0&&A!=null&&d(e,["instances[0]","mask"],o2(A));const E=u(t,["compressionQuality"]);return e!==void 0&&E!=null&&d(e,["parameters","compressionQuality"],E),n}function aP(t){const e={},n=u(t,["name"]);n!=null&&d(e,["name"],n);const r=u(t,["metadata"]);r!=null&&d(e,["metadata"],r);const s=u(t,["done"]);s!=null&&d(e,["done"],s);const i=u(t,["error"]);i!=null&&d(e,["error"],i);const o=u(t,["response","generateVideoResponse"]);return o!=null&&d(e,["response"],dP(o)),e}function lP(t){const e={},n=u(t,["name"]);n!=null&&d(e,["name"],n);const r=u(t,["metadata"]);r!=null&&d(e,["metadata"],r);const s=u(t,["done"]);s!=null&&d(e,["done"],s);const i=u(t,["error"]);i!=null&&d(e,["error"],i);const o=u(t,["response"]);return o!=null&&d(e,["response"],fP(o)),e}function uP(t,e){const n={},r=u(e,["model"]);r!=null&&d(n,["_url","model"],ve(t,r));const s=u(e,["prompt"]);s!=null&&d(n,["instances[0]","prompt"],s);const i=u(e,["image"]);i!=null&&d(n,["instances[0]","image"],Ac(i));const o=u(e,["video"]);o!=null&&d(n,["instances[0]","video"],cT(o));const a=u(e,["source"]);a!=null&&hP(a,n);const l=u(e,["config"]);return l!=null&&iP(l,n),n}function cP(t,e){const n={},r=u(e,["model"]);r!=null&&d(n,["_url","model"],ve(t,r));const s=u(e,["prompt"]);s!=null&&d(n,["instances[0]","prompt"],s);const i=u(e,["image"]);i!=null&&d(n,["instances[0]","image"],hn(i));const o=u(e,["video"]);o!=null&&d(n,["instances[0]","video"],dT(o));const a=u(e,["source"]);a!=null&&pP(a,n);const l=u(e,["config"]);return l!=null&&oP(l,n),n}function dP(t){const e={},n=u(t,["generatedSamples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>yP(o))),d(e,["generatedVideos"],i)}const r=u(t,["raiMediaFilteredCount"]);r!=null&&d(e,["raiMediaFilteredCount"],r);const s=u(t,["raiMediaFilteredReasons"]);return s!=null&&d(e,["raiMediaFilteredReasons"],s),e}function fP(t){const e={},n=u(t,["videos"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>vP(o))),d(e,["generatedVideos"],i)}const r=u(t,["raiMediaFilteredCount"]);r!=null&&d(e,["raiMediaFilteredCount"],r);const s=u(t,["raiMediaFilteredReasons"]);return s!=null&&d(e,["raiMediaFilteredReasons"],s),e}function hP(t,e){const n={},r=u(t,["prompt"]);e!==void 0&&r!=null&&d(e,["instances[0]","prompt"],r);const s=u(t,["image"]);e!==void 0&&s!=null&&d(e,["instances[0]","image"],Ac(s));const i=u(t,["video"]);return e!==void 0&&i!=null&&d(e,["instances[0]","video"],cT(i)),n}function pP(t,e){const n={},r=u(t,["prompt"]);e!==void 0&&r!=null&&d(e,["instances[0]","prompt"],r);const s=u(t,["image"]);e!==void 0&&s!=null&&d(e,["instances[0]","image"],hn(s));const i=u(t,["video"]);return e!==void 0&&i!=null&&d(e,["instances[0]","video"],dT(i)),n}function mP(t){const e={},n=u(t,["_self"]);n!=null&&d(e,["image"],IP(n));const r=u(t,["raiFilteredReason"]);r!=null&&d(e,["raiFilteredReason"],r);const s=u(t,["_self"]);return s!=null&&d(e,["safetyAttributes"],oT(s)),e}function Ic(t){const e={},n=u(t,["_self"]);n!=null&&d(e,["image"],iT(n));const r=u(t,["raiFilteredReason"]);r!=null&&d(e,["raiFilteredReason"],r);const s=u(t,["_self"]);s!=null&&d(e,["safetyAttributes"],aT(s));const i=u(t,["prompt"]);return i!=null&&d(e,["enhancedPrompt"],i),e}function gP(t){const e={},n=u(t,["_self"]);n!=null&&d(e,["mask"],iT(n));const r=u(t,["labels"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>i)),d(e,["labels"],s)}return e}function yP(t){const e={},n=u(t,["video"]);return n!=null&&d(e,["video"],s2(n)),e}function vP(t){const e={},n=u(t,["_self"]);return n!=null&&d(e,["video"],i2(n)),e}function _P(t){const e={},n=u(t,["modelSelectionConfig"]);n!=null&&d(e,["modelConfig"],n);const r=u(t,["responseJsonSchema"]);r!=null&&d(e,["responseJsonSchema"],r);const s=u(t,["audioTimestamp"]);s!=null&&d(e,["audioTimestamp"],s);const i=u(t,["candidateCount"]);i!=null&&d(e,["candidateCount"],i);const o=u(t,["enableAffectiveDialog"]);o!=null&&d(e,["enableAffectiveDialog"],o);const a=u(t,["frequencyPenalty"]);a!=null&&d(e,["frequencyPenalty"],a);const l=u(t,["logprobs"]);l!=null&&d(e,["logprobs"],l);const c=u(t,["maxOutputTokens"]);c!=null&&d(e,["maxOutputTokens"],c);const h=u(t,["mediaResolution"]);h!=null&&d(e,["mediaResolution"],h);const m=u(t,["presencePenalty"]);m!=null&&d(e,["presencePenalty"],m);const g=u(t,["responseLogprobs"]);g!=null&&d(e,["responseLogprobs"],g);const v=u(t,["responseMimeType"]);v!=null&&d(e,["responseMimeType"],v);const x=u(t,["responseModalities"]);x!=null&&d(e,["responseModalities"],x);const I=u(t,["responseSchema"]);I!=null&&d(e,["responseSchema"],I);const P=u(t,["routingConfig"]);P!=null&&d(e,["routingConfig"],P);const A=u(t,["seed"]);A!=null&&d(e,["seed"],A);const E=u(t,["speechConfig"]);E!=null&&d(e,["speechConfig"],lT(E));const k=u(t,["stopSequences"]);k!=null&&d(e,["stopSequences"],k);const D=u(t,["temperature"]);D!=null&&d(e,["temperature"],D);const U=u(t,["thinkingConfig"]);U!=null&&d(e,["thinkingConfig"],U);const L=u(t,["topK"]);L!=null&&d(e,["topK"],L);const T=u(t,["topP"]);if(T!=null&&d(e,["topP"],T),u(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function xP(t,e){const n={},r=u(e,["model"]);return r!=null&&d(n,["_url","name"],ve(t,r)),n}function wP(t,e){const n={},r=u(e,["model"]);return r!=null&&d(n,["_url","name"],ve(t,r)),n}function EP(t){const e={};if(u(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=u(t,["enableWidget"]);return n!=null&&d(e,["enableWidget"],n),e}function TP(t){const e={};if(u(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=u(t,["timeRangeFilter"]);return n!=null&&d(e,["timeRangeFilter"],n),e}function CP(t){const e={},n=u(t,["aspectRatio"]);n!=null&&d(e,["aspectRatio"],n);const r=u(t,["imageSize"]);if(r!=null&&d(e,["imageSize"],r),u(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(u(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function SP(t){const e={},n=u(t,["aspectRatio"]);n!=null&&d(e,["aspectRatio"],n);const r=u(t,["imageSize"]);r!=null&&d(e,["imageSize"],r);const s=u(t,["outputMimeType"]);s!=null&&d(e,["imageOutputOptions","mimeType"],s);const i=u(t,["outputCompressionQuality"]);return i!=null&&d(e,["imageOutputOptions","compressionQuality"],i),e}function IP(t){const e={},n=u(t,["bytesBase64Encoded"]);n!=null&&d(e,["imageBytes"],Kr(n));const r=u(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function iT(t){const e={},n=u(t,["gcsUri"]);n!=null&&d(e,["gcsUri"],n);const r=u(t,["bytesBase64Encoded"]);r!=null&&d(e,["imageBytes"],Kr(r));const s=u(t,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function Ac(t){const e={};if(u(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=u(t,["imageBytes"]);n!=null&&d(e,["bytesBase64Encoded"],Kr(n));const r=u(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function hn(t){const e={},n=u(t,["gcsUri"]);n!=null&&d(e,["gcsUri"],n);const r=u(t,["imageBytes"]);r!=null&&d(e,["bytesBase64Encoded"],Kr(r));const s=u(t,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function AP(t,e,n){const r={},s=u(e,["pageSize"]);n!==void 0&&s!=null&&d(n,["_query","pageSize"],s);const i=u(e,["pageToken"]);n!==void 0&&i!=null&&d(n,["_query","pageToken"],i);const o=u(e,["filter"]);n!==void 0&&o!=null&&d(n,["_query","filter"],o);const a=u(e,["queryBase"]);return n!==void 0&&a!=null&&d(n,["_url","models_url"],QE(t,a)),r}function kP(t,e,n){const r={},s=u(e,["pageSize"]);n!==void 0&&s!=null&&d(n,["_query","pageSize"],s);const i=u(e,["pageToken"]);n!==void 0&&i!=null&&d(n,["_query","pageToken"],i);const o=u(e,["filter"]);n!==void 0&&o!=null&&d(n,["_query","filter"],o);const a=u(e,["queryBase"]);return n!==void 0&&a!=null&&d(n,["_url","models_url"],QE(t,a)),r}function NP(t,e){const n={},r=u(e,["config"]);return r!=null&&AP(t,r,n),n}function bP(t,e){const n={},r=u(e,["config"]);return r!=null&&kP(t,r,n),n}function RP(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=u(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);const s=u(t,["_self"]);if(s!=null){let i=XE(s);Array.isArray(i)&&(i=i.map(o=>uh(o))),d(e,["models"],i)}return e}function PP(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=u(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);const s=u(t,["_self"]);if(s!=null){let i=XE(s);Array.isArray(i)&&(i=i.map(o=>ch(o))),d(e,["models"],i)}return e}function MP(t){const e={},n=u(t,["maskMode"]);n!=null&&d(e,["maskMode"],n);const r=u(t,["segmentationClasses"]);r!=null&&d(e,["maskClasses"],r);const s=u(t,["maskDilation"]);return s!=null&&d(e,["dilation"],s),e}function uh(t){const e={},n=u(t,["name"]);n!=null&&d(e,["name"],n);const r=u(t,["displayName"]);r!=null&&d(e,["displayName"],r);const s=u(t,["description"]);s!=null&&d(e,["description"],s);const i=u(t,["version"]);i!=null&&d(e,["version"],i);const o=u(t,["_self"]);o!=null&&d(e,["tunedModelInfo"],JP(o));const a=u(t,["inputTokenLimit"]);a!=null&&d(e,["inputTokenLimit"],a);const l=u(t,["outputTokenLimit"]);l!=null&&d(e,["outputTokenLimit"],l);const c=u(t,["supportedGenerationMethods"]);c!=null&&d(e,["supportedActions"],c);const h=u(t,["temperature"]);h!=null&&d(e,["temperature"],h);const m=u(t,["maxTemperature"]);m!=null&&d(e,["maxTemperature"],m);const g=u(t,["topP"]);g!=null&&d(e,["topP"],g);const v=u(t,["topK"]);v!=null&&d(e,["topK"],v);const x=u(t,["thinking"]);return x!=null&&d(e,["thinking"],x),e}function ch(t){const e={},n=u(t,["name"]);n!=null&&d(e,["name"],n);const r=u(t,["displayName"]);r!=null&&d(e,["displayName"],r);const s=u(t,["description"]);s!=null&&d(e,["description"],s);const i=u(t,["versionId"]);i!=null&&d(e,["version"],i);const o=u(t,["deployedModels"]);if(o!=null){let m=o;Array.isArray(m)&&(m=m.map(g=>$R(g))),d(e,["endpoints"],m)}const a=u(t,["labels"]);a!=null&&d(e,["labels"],a);const l=u(t,["_self"]);l!=null&&d(e,["tunedModelInfo"],YP(l));const c=u(t,["defaultCheckpointId"]);c!=null&&d(e,["defaultCheckpointId"],c);const h=u(t,["checkpoints"]);if(h!=null){let m=h;Array.isArray(m)&&(m=m.map(g=>g)),d(e,["checkpoints"],m)}return e}function DP(t){const e={},n=u(t,["mediaResolution"]);n!=null&&d(e,["mediaResolution"],n);const r=u(t,["codeExecutionResult"]);r!=null&&d(e,["codeExecutionResult"],r);const s=u(t,["executableCode"]);s!=null&&d(e,["executableCode"],s);const i=u(t,["fileData"]);i!=null&&d(e,["fileData"],WR(i));const o=u(t,["functionCall"]);o!=null&&d(e,["functionCall"],KR(o));const a=u(t,["functionResponse"]);a!=null&&d(e,["functionResponse"],a);const l=u(t,["inlineData"]);l!=null&&d(e,["inlineData"],_R(l));const c=u(t,["text"]);c!=null&&d(e,["text"],c);const h=u(t,["thought"]);h!=null&&d(e,["thought"],h);const m=u(t,["thoughtSignature"]);m!=null&&d(e,["thoughtSignature"],m);const g=u(t,["videoMetadata"]);return g!=null&&d(e,["videoMetadata"],g),e}function LP(t){const e={},n=u(t,["productImage"]);return n!=null&&d(e,["image"],hn(n)),e}function VP(t,e){const n={},r=u(t,["numberOfImages"]);e!==void 0&&r!=null&&d(e,["parameters","sampleCount"],r);const s=u(t,["baseSteps"]);e!==void 0&&s!=null&&d(e,["parameters","baseSteps"],s);const i=u(t,["outputGcsUri"]);e!==void 0&&i!=null&&d(e,["parameters","storageUri"],i);const o=u(t,["seed"]);e!==void 0&&o!=null&&d(e,["parameters","seed"],o);const a=u(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&d(e,["parameters","safetySetting"],a);const l=u(t,["personGeneration"]);e!==void 0&&l!=null&&d(e,["parameters","personGeneration"],l);const c=u(t,["addWatermark"]);e!==void 0&&c!=null&&d(e,["parameters","addWatermark"],c);const h=u(t,["outputMimeType"]);e!==void 0&&h!=null&&d(e,["parameters","outputOptions","mimeType"],h);const m=u(t,["outputCompressionQuality"]);e!==void 0&&m!=null&&d(e,["parameters","outputOptions","compressionQuality"],m);const g=u(t,["enhancePrompt"]);e!==void 0&&g!=null&&d(e,["parameters","enhancePrompt"],g);const v=u(t,["labels"]);return e!==void 0&&v!=null&&d(e,["labels"],v),n}function UP(t,e){const n={},r=u(e,["model"]);r!=null&&d(n,["_url","model"],ve(t,r));const s=u(e,["source"]);s!=null&&OP(s,n);const i=u(e,["config"]);return i!=null&&VP(i,n),n}function FP(t){const e={},n=u(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>Ic(s))),d(e,["generatedImages"],r)}return e}function OP(t,e){const n={},r=u(t,["prompt"]);e!==void 0&&r!=null&&d(e,["instances[0]","prompt"],r);const s=u(t,["personImage"]);e!==void 0&&s!=null&&d(e,["instances[0]","personImage","image"],hn(s));const i=u(t,["productImages"]);if(e!==void 0&&i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>LP(a))),d(e,["instances[0]","productImages"],o)}return n}function BP(t){const e={},n=u(t,["referenceImage"]);n!=null&&d(e,["referenceImage"],hn(n));const r=u(t,["referenceId"]);r!=null&&d(e,["referenceId"],r);const s=u(t,["referenceType"]);s!=null&&d(e,["referenceType"],s);const i=u(t,["maskImageConfig"]);i!=null&&d(e,["maskImageConfig"],MP(i));const o=u(t,["controlImageConfig"]);o!=null&&d(e,["controlImageConfig"],IR(o));const a=u(t,["styleImageConfig"]);a!=null&&d(e,["styleImageConfig"],a);const l=u(t,["subjectImageConfig"]);return l!=null&&d(e,["subjectImageConfig"],l),e}function oT(t){const e={},n=u(t,["safetyAttributes","categories"]);n!=null&&d(e,["categories"],n);const r=u(t,["safetyAttributes","scores"]);r!=null&&d(e,["scores"],r);const s=u(t,["contentType"]);return s!=null&&d(e,["contentType"],s),e}function aT(t){const e={},n=u(t,["safetyAttributes","categories"]);n!=null&&d(e,["categories"],n);const r=u(t,["safetyAttributes","scores"]);r!=null&&d(e,["scores"],r);const s=u(t,["contentType"]);return s!=null&&d(e,["contentType"],s),e}function GP(t){const e={},n=u(t,["category"]);if(n!=null&&d(e,["category"],n),u(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=u(t,["threshold"]);return r!=null&&d(e,["threshold"],r),e}function qP(t){const e={},n=u(t,["image"]);return n!=null&&d(e,["image"],hn(n)),e}function HP(t,e){const n={},r=u(t,["mode"]);e!==void 0&&r!=null&&d(e,["parameters","mode"],r);const s=u(t,["maxPredictions"]);e!==void 0&&s!=null&&d(e,["parameters","maxPredictions"],s);const i=u(t,["confidenceThreshold"]);e!==void 0&&i!=null&&d(e,["parameters","confidenceThreshold"],i);const o=u(t,["maskDilation"]);e!==void 0&&o!=null&&d(e,["parameters","maskDilation"],o);const a=u(t,["binaryColorThreshold"]);e!==void 0&&a!=null&&d(e,["parameters","binaryColorThreshold"],a);const l=u(t,["labels"]);return e!==void 0&&l!=null&&d(e,["labels"],l),n}function jP(t,e){const n={},r=u(e,["model"]);r!=null&&d(n,["_url","model"],ve(t,r));const s=u(e,["source"]);s!=null&&$P(s,n);const i=u(e,["config"]);return i!=null&&HP(i,n),n}function zP(t){const e={},n=u(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>gP(s))),d(e,["generatedMasks"],r)}return e}function $P(t,e){const n={},r=u(t,["prompt"]);e!==void 0&&r!=null&&d(e,["instances[0]","prompt"],r);const s=u(t,["image"]);e!==void 0&&s!=null&&d(e,["instances[0]","image"],hn(s));const i=u(t,["scribbleImage"]);return e!==void 0&&i!=null&&d(e,["instances[0]","scribble"],qP(i)),n}function lT(t){const e={},n=u(t,["languageCode"]);n!=null&&d(e,["languageCode"],n);const r=u(t,["voiceConfig"]);if(r!=null&&d(e,["voiceConfig"],r),u(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function WP(t){const e={},n=u(t,["functionCallingConfig"]);n!=null&&d(e,["functionCallingConfig"],JR(n));const r=u(t,["retrievalConfig"]);return r!=null&&d(e,["retrievalConfig"],r),e}function KP(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(m=>m)),d(e,["functionDeclarations"],h)}if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=u(t,["googleSearchRetrieval"]);r!=null&&d(e,["googleSearchRetrieval"],r);const s=u(t,["computerUse"]);s!=null&&d(e,["computerUse"],s);const i=u(t,["fileSearch"]);i!=null&&d(e,["fileSearch"],i);const o=u(t,["codeExecution"]);if(o!=null&&d(e,["codeExecution"],o),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=u(t,["googleMaps"]);a!=null&&d(e,["googleMaps"],EP(a));const l=u(t,["googleSearch"]);l!=null&&d(e,["googleSearch"],TP(l));const c=u(t,["urlContext"]);return c!=null&&d(e,["urlContext"],c),e}function uT(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(g=>YR(g))),d(e,["functionDeclarations"],m)}const r=u(t,["retrieval"]);r!=null&&d(e,["retrieval"],r);const s=u(t,["googleSearchRetrieval"]);s!=null&&d(e,["googleSearchRetrieval"],s);const i=u(t,["computerUse"]);if(i!=null&&d(e,["computerUse"],i),u(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=u(t,["codeExecution"]);o!=null&&d(e,["codeExecution"],o);const a=u(t,["enterpriseWebSearch"]);a!=null&&d(e,["enterpriseWebSearch"],a);const l=u(t,["googleMaps"]);l!=null&&d(e,["googleMaps"],l);const c=u(t,["googleSearch"]);c!=null&&d(e,["googleSearch"],c);const h=u(t,["urlContext"]);return h!=null&&d(e,["urlContext"],h),e}function JP(t){const e={},n=u(t,["baseModel"]);n!=null&&d(e,["baseModel"],n);const r=u(t,["createTime"]);r!=null&&d(e,["createTime"],r);const s=u(t,["updateTime"]);return s!=null&&d(e,["updateTime"],s),e}function YP(t){const e={},n=u(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&d(e,["baseModel"],n);const r=u(t,["createTime"]);r!=null&&d(e,["createTime"],r);const s=u(t,["updateTime"]);return s!=null&&d(e,["updateTime"],s),e}function QP(t,e){const n={},r=u(t,["displayName"]);e!==void 0&&r!=null&&d(e,["displayName"],r);const s=u(t,["description"]);e!==void 0&&s!=null&&d(e,["description"],s);const i=u(t,["defaultCheckpointId"]);return e!==void 0&&i!=null&&d(e,["defaultCheckpointId"],i),n}function XP(t,e){const n={},r=u(t,["displayName"]);e!==void 0&&r!=null&&d(e,["displayName"],r);const s=u(t,["description"]);e!==void 0&&s!=null&&d(e,["description"],s);const i=u(t,["defaultCheckpointId"]);return e!==void 0&&i!=null&&d(e,["defaultCheckpointId"],i),n}function ZP(t,e){const n={},r=u(e,["model"]);r!=null&&d(n,["_url","name"],ve(t,r));const s=u(e,["config"]);return s!=null&&QP(s,n),n}function e2(t,e){const n={},r=u(e,["model"]);r!=null&&d(n,["_url","model"],ve(t,r));const s=u(e,["config"]);return s!=null&&XP(s,n),n}function t2(t,e){const n={},r=u(t,["outputGcsUri"]);e!==void 0&&r!=null&&d(e,["parameters","storageUri"],r);const s=u(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&d(e,["parameters","safetySetting"],s);const i=u(t,["personGeneration"]);e!==void 0&&i!=null&&d(e,["parameters","personGeneration"],i);const o=u(t,["includeRaiReason"]);e!==void 0&&o!=null&&d(e,["parameters","includeRaiReason"],o);const a=u(t,["outputMimeType"]);e!==void 0&&a!=null&&d(e,["parameters","outputOptions","mimeType"],a);const l=u(t,["outputCompressionQuality"]);e!==void 0&&l!=null&&d(e,["parameters","outputOptions","compressionQuality"],l);const c=u(t,["enhanceInputImage"]);e!==void 0&&c!=null&&d(e,["parameters","upscaleConfig","enhanceInputImage"],c);const h=u(t,["imagePreservationFactor"]);e!==void 0&&h!=null&&d(e,["parameters","upscaleConfig","imagePreservationFactor"],h);const m=u(t,["labels"]);e!==void 0&&m!=null&&d(e,["labels"],m);const g=u(t,["numberOfImages"]);e!==void 0&&g!=null&&d(e,["parameters","sampleCount"],g);const v=u(t,["mode"]);return e!==void 0&&v!=null&&d(e,["parameters","mode"],v),n}function n2(t,e){const n={},r=u(e,["model"]);r!=null&&d(n,["_url","model"],ve(t,r));const s=u(e,["image"]);s!=null&&d(n,["instances[0]","image"],hn(s));const i=u(e,["upscaleFactor"]);i!=null&&d(n,["parameters","upscaleConfig","upscaleFactor"],i);const o=u(e,["config"]);return o!=null&&t2(o,n),n}function r2(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=u(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>Ic(i))),d(e,["generatedImages"],s)}return e}function s2(t){const e={},n=u(t,["uri"]);n!=null&&d(e,["uri"],n);const r=u(t,["encodedVideo"]);r!=null&&d(e,["videoBytes"],Kr(r));const s=u(t,["encoding"]);return s!=null&&d(e,["mimeType"],s),e}function i2(t){const e={},n=u(t,["gcsUri"]);n!=null&&d(e,["uri"],n);const r=u(t,["bytesBase64Encoded"]);r!=null&&d(e,["videoBytes"],Kr(r));const s=u(t,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function o2(t){const e={},n=u(t,["image"]);n!=null&&d(e,["_self"],hn(n));const r=u(t,["maskMode"]);return r!=null&&d(e,["maskMode"],r),e}function a2(t){const e={},n=u(t,["image"]);n!=null&&d(e,["image"],Ac(n));const r=u(t,["referenceType"]);return r!=null&&d(e,["referenceType"],r),e}function l2(t){const e={},n=u(t,["image"]);n!=null&&d(e,["image"],hn(n));const r=u(t,["referenceType"]);return r!=null&&d(e,["referenceType"],r),e}function cT(t){const e={},n=u(t,["uri"]);n!=null&&d(e,["uri"],n);const r=u(t,["videoBytes"]);r!=null&&d(e,["encodedVideo"],Kr(r));const s=u(t,["mimeType"]);return s!=null&&d(e,["encoding"],s),e}function dT(t){const e={},n=u(t,["uri"]);n!=null&&d(e,["gcsUri"],n);const r=u(t,["videoBytes"]);r!=null&&d(e,["bytesBase64Encoded"],Kr(r));const s=u(t,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const u2="Content-Type",c2="X-Server-Timeout",d2="User-Agent",dh="x-goog-api-client",f2="1.30.0",h2=`google-genai-sdk/${f2}`,p2="v1beta1",m2="v1beta",Cv=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class g2{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:p2,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:m2,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const s=[this.getRequestUrlInternal(n)];return r&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[o,a]of Object.entries(e.queryParams))s.searchParams.append(o,String(a));let i={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else i.body=e.body;return i=await this.includeExtraHttpOptionsToRequestInit(i,n,s.toString(),e.abortSignal),this.unaryApiCall(s,i,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[s,i]of Object.entries(n))typeof i=="object"?r[s]=Object.assign(Object.assign({},r[s]),i):i!==void 0&&(r[s]=i);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,r);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let i={};return i.body=e.body,i=await this.includeExtraHttpOptionsToRequestInit(i,n,s.toString(),e.abortSignal),this.streamApiCall(s,i,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r,s){if(n&&n.timeout||s){const i=new AbortController,o=i.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const a=setTimeout(()=>i.abort(),n.timeout);a&&typeof a.unref=="function"&&a.unref()}s&&s.addEventListener("abort",()=>{i.abort()}),e.signal=o}return n&&n.extraBody!==null&&y2(e,n.extraBody),e.headers=await this.getHeadersInternal(n,r),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async s=>(await Sv(s),new oh(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async s=>(await Sv(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){var n;return fi(this,arguments,function*(){const s=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),i=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let o="";for(;;){const{done:a,value:l}=yield Ne(s.read());if(a){if(o.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const c=i.decode(l,{stream:!0});try{const m=JSON.parse(c);if("error"in m){const g=JSON.parse(JSON.stringify(m.error)),v=g.status,x=g.code,I=`got status: ${v}. ${JSON.stringify(m)}`;if(x>=400&&x<600)throw new Cc({message:I,status:x})}}catch(m){if(m.name==="ApiError")throw m}o+=c;let h=o.match(Cv);for(;h;){const m=h[1];try{const g=new Response(m,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Ne(new oh(g)),o=o.slice(h[0].length),h=o.match(Cv)}catch(g){throw new Error(`exception parsing stream chunk ${m}. ${g}`)}}}}finally{s.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=h2+" "+this.clientOptions.userAgentExtra;return e[d2]=n,e[dh]=n,e[u2]="application/json",e}async getHeadersInternal(e,n){const r=new Headers;if(e&&e.headers){for(const[s,i]of Object.entries(e.headers))r.append(s,i);e.timeout&&e.timeout>0&&r.append(c2,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(e){var n;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(e,n){var r;const s={};n!=null&&(s.mimeType=n.mimeType,s.name=n.name,s.displayName=n.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const i=this.clientOptions.uploader,o=await i.stat(e);s.sizeBytes=String(o.size);const a=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:o.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=a;const l={file:s},c=this.getFileName(e),h=K("upload/v1beta/files",l._url),m=await this.fetchUploadUrl(h,s.sizeBytes,s.mimeType,c,l,n==null?void 0:n.httpOptions);return i.upload(e,m,this)}async uploadFileToFileSearchStore(e,n,r){var s;const i=this.clientOptions.uploader,o=await i.stat(n),a=String(o.size),l=(s=r==null?void 0:r.mimeType)!==null&&s!==void 0?s:o.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const c=`upload/v1beta/${e}:uploadToFileSearchStore`,h=this.getFileName(n),m={};r!=null&&r.customMetadata&&(m.customMetadata=r.customMetadata),r!=null&&r.chunkingConfig&&(m.chunkingConfig=r.chunkingConfig);const g=await this.fetchUploadUrl(c,a,l,h,m,r==null?void 0:r.httpOptions);return i.uploadToFileSearchStore(n,g,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,r,s,i,o){var a;let l={};o?l=o:l={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},s?{"X-Goog-Upload-File-Name":s}:{})};const c=await this.request({path:e,body:JSON.stringify(i),httpMethod:"POST",httpOptions:l});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const h=(a=c==null?void 0:c.headers)===null||a===void 0?void 0:a["x-goog-upload-url"];if(h===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return h}}async function Sv(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const s=JSON.stringify(r);throw n>=400&&n<600?new Cc({message:s,status:n}):new Error(s)}}function y2(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const i=JSON.parse(t.body);if(typeof i=="object"&&i!==null&&!Array.isArray(i))n=i;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(i,o){const a=Object.assign({},i);for(const l in o)if(Object.prototype.hasOwnProperty.call(o,l)){const c=o[l],h=a[l];c&&typeof c=="object"&&!Array.isArray(c)&&h&&typeof h=="object"&&!Array.isArray(h)?a[l]=r(h,c):(h&&c&&typeof h!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof h}, New type: ${typeof c}. Overwriting.`),a[l]=c)}return a}const s=r(n,e);t.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const v2="mcp_used/unknown";let _2=!1;function fT(t){for(const e of t)if(x2(e)||typeof e=="object"&&"inputSchema"in e)return!0;return _2}function hT(t){var e;const n=(e=t[dh])!==null&&e!==void 0?e:"";t[dh]=(n+` ${v2}`).trimStart()}function x2(t){return t!==null&&typeof t=="object"&&t instanceof Zp}function w2(t,e=100){return fi(this,arguments,function*(){let r,s=0;for(;s<e;){const i=yield Ne(t.listTools({cursor:r}));for(const o of i.tools)yield yield Ne(o),s++;if(!i.nextCursor)break;r=i.nextCursor}})}class Zp{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Zp(e,n)}async initialize(){var e,n,r,s;if(this.mcpTools.length>0)return;const i={},o=[];for(const h of this.mcpClients)try{for(var a=!0,l=(n=void 0,Ho(w2(h))),c;c=await l.next(),e=c.done,!e;a=!0){s=c.value,a=!1;const m=s;o.push(m);const g=m.name;if(i[g])throw new Error(`Duplicate function name ${g} found in MCP tools. Please ensure function names are unique.`);i[g]=h}}catch(m){n={error:m}}finally{try{!a&&!e&&(r=l.return)&&await r.call(l)}finally{if(n)throw n.error}}this.mcpTools=o,this.functionNameToMcpClient=i}async tool(){return await this.initialize(),hN(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[r.name];let i;this.config.timeout&&(i={timeout:this.config.timeout});const o=await s.callTool({name:r.name,arguments:r.args},void 0,i);n.push({functionResponse:{name:r.name,response:o.isError?{error:o}:o}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function E2(t,e,n){const r=new iN;let s;n.data instanceof Blob?s=JSON.parse(await n.data.text()):s=JSON.parse(n.data),Object.assign(r,s),e(r)}class T2{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),i=this.apiClient.getApiVersion(),o=I2(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),l=`${s}/ws/google.ai.generativelanguage.${i}.GenerativeService.BidiGenerateMusic?key=${a}`;let c=()=>{};const h=new Promise(k=>{c=k}),m=e.callbacks,g=function(){c({})},v=this.apiClient,x={onopen:g,onmessage:k=>{E2(v,m.onmessage,k)},onerror:(n=m==null?void 0:m.onerror)!==null&&n!==void 0?n:function(k){},onclose:(r=m==null?void 0:m.onclose)!==null&&r!==void 0?r:function(k){}},I=this.webSocketFactory.create(l,S2(o),x);I.connect(),await h;const E={setup:{model:ve(this.apiClient,e.model)}};return I.send(JSON.stringify(E)),new C2(I,this.apiClient)}}class C2{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=cR(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=uR(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(ri.PLAY)}pause(){this.sendPlaybackControl(ri.PAUSE)}stop(){this.sendPlaybackControl(ri.STOP)}resetContext(){this.sendPlaybackControl(ri.RESET_CONTEXT)}close(){this.conn.close()}}function S2(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function I2(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const A2="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function k2(t,e,n){const r=new sN;let s;n.data instanceof Blob?s=await n.data.text():n.data instanceof ArrayBuffer?s=new TextDecoder().decode(n.data):s=n.data;const i=JSON.parse(s);if(t.isVertexAI()){const o=hR(i);Object.assign(r,o)}else Object.assign(r,i);e(r)}class N2{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new T2(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,s,i,o,a;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const l=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let h;const m=this.apiClient.getHeaders();e.config&&e.config.tools&&fT(e.config.tools)&&hT(m);const g=M2(m);if(this.apiClient.isVertexAI())h=`${l}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(g,h);else{const C=this.apiClient.getApiKey();let R="BidiGenerateContent",N="key";C!=null&&C.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),c!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),R="BidiGenerateContentConstrained",N="access_token"),h=`${l}/ws/google.ai.generativelanguage.${c}.GenerativeService.${R}?${N}=${C}`}let v=()=>{};const x=new Promise(C=>{v=C}),I=e.callbacks,P=function(){var C;(C=I==null?void 0:I.onopen)===null||C===void 0||C.call(I),v({})},A=this.apiClient,E={onopen:P,onmessage:C=>{k2(A,I.onmessage,C)},onerror:(n=I==null?void 0:I.onerror)!==null&&n!==void 0?n:function(C){},onclose:(r=I==null?void 0:I.onclose)!==null&&r!==void 0?r:function(C){}},k=this.webSocketFactory.create(h,P2(g),E);k.connect(),await x;let D=ve(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&D.startsWith("publishers/")){const C=this.apiClient.getProject(),R=this.apiClient.getLocation();D=`projects/${C}/locations/${R}/`+D}let U={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Vu.AUDIO]}:e.config.responseModalities=[Vu.AUDIO]),!((i=e.config)===null||i===void 0)&&i.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const L=(a=(o=e.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[],T=[];for(const C of L)if(this.isCallableTool(C)){const R=C;T.push(await R.tool())}else T.push(C);T.length>0&&(e.config.tools=T);const w={model:D,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?U=lR(this.apiClient,w):U=aR(this.apiClient,w),delete U.config,k.send(JSON.stringify(U)),new R2(k,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const b2={turnComplete:!0};class R2{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=en(n.turns),e.isVertexAI()||(r=r.map(s=>Sc(s)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const i of r){if(typeof i!="object"||i===null||!("name"in i)||!("response"in i))throw new Error(`Could not parse function response, type '${typeof i}'.`);if(!e.isVertexAI()&&!("id"in i))throw new Error(A2)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},b2),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:fR(e)}:n={realtimeInput:dR(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function P2(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function M2(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Iv=10;function Av(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const o of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(hi(o)){s=!0;break}if(!s)return!0;const i=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return i&&(i<0||!Number.isInteger(i))||i==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",i),!0):!1}function hi(t){return"callTool"in t&&typeof t.callTool=="function"}function D2(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(s=>hi(s)))!==null&&r!==void 0?r:!1}function kv(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((r,s)=>{if(hi(r))return;const i=r;i.functionDeclarations&&i.functionDeclarations.length>0&&n.push(s)}),n}function Nv(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class L2 extends er{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,s,i,o,a;const l=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!D2(n)||Av(n.config))return await this.generateContentInternal(l);const c=kv(n);if(c.length>0){const I=c.map(P=>`tools[${P}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${I}.`)}let h,m;const g=en(l.contents),v=(i=(s=(r=l.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&i!==void 0?i:Iv;let x=0;for(;x<v&&(h=await this.generateContentInternal(l),!(!h.functionCalls||h.functionCalls.length===0));){const I=h.candidates[0].content,P=[];for(const A of(a=(o=n.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[])if(hi(A)){const k=await A.callTool(h.functionCalls);P.push(...k)}x++,m={role:"user",parts:P},l.contents=en(l.contents),l.contents.push(I),l.contents.push(m),Nv(l.config)&&(g.push(I),g.push(m))}return Nv(l.config)&&(h.automaticFunctionCallingHistory=g),h},this.generateContentStream=async n=>{var r,s,i,o,a;if(this.maybeMoveToResponseJsonSchem(n),Av(n.config)){const m=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(m)}const l=kv(n);if(l.length>0){const m=l.map(g=>`tools[${g}]`).join(", ");throw new Error(`Incompatible tools found at ${m}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const c=(i=(s=(r=n==null?void 0:n.config)===null||r===void 0?void 0:r.toolConfig)===null||s===void 0?void 0:s.functionCallingConfig)===null||i===void 0?void 0:i.streamFunctionCallArguments,h=(a=(o=n==null?void 0:n.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||a===void 0?void 0:a.disable;if(c&&!h)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var s;let i;const o=[];if(r!=null&&r.generatedImages)for(const l of r.generatedImages)l&&(l!=null&&l.safetyAttributes)&&((s=l==null?void 0:l.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?i=l==null?void 0:l.safetyAttributes:o.push(l);let a;return i?a={generatedImages:o,positivePromptSafetyAttributes:i,sdkHttpResponse:r.sdkHttpResponse}:a={generatedImages:o,sdkHttpResponse:r.sdkHttpResponse},a}),this.list=async n=>{var r;const o={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!o.config.queryBase){if(!((r=o.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");o.config.filter="labels.tune-type:*"}return new bs(Wn.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(o),o)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const s={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(s)},this.generateVideos=async n=>{var r,s,i,o,a,l;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((s=n.video)===null||s===void 0)&&s.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((o=(i=n.source)===null||i===void 0?void 0:i.video)===null||o===void 0)&&o.uri&&(!((l=(a=n.source)===null||a===void 0?void 0:a.video)===null||l===void 0)&&l.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,s;const i=(n=e.config)===null||n===void 0?void 0:n.tools;if(!i)return e;const o=await Promise.all(i.map(async l=>hi(l)?await l.tool():l)),a={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:o})};if(a.config.tools=o,e.config&&e.config.tools&&fT(e.config.tools)){const l=(s=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&s!==void 0?s:{};let c=Object.assign({},l);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),hT(c),a.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:c})}return a}async initAfcToolsMap(e){var n,r,s;const i=new Map;for(const o of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(hi(o)){const a=o,l=await a.tool();for(const c of(s=l.functionDeclarations)!==null&&s!==void 0?s:[]){if(!c.name)throw new Error("Function declaration name is required.");if(i.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);i.set(c.name,a)}}return i}async processAfcStream(e){var n,r,s;const i=(s=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&s!==void 0?s:Iv;let o=!1,a=0;const l=await this.initAfcToolsMap(e);return function(c,h,m){var g,v;return fi(this,arguments,function*(){for(var x,I,P,A;a<i;){o&&(a++,o=!1);const U=yield Ne(c.processParamsMaybeAddMcpUsage(m)),L=yield Ne(c.generateContentStreamInternal(U)),T=[],w=[];try{for(var E=!0,k=(I=void 0,Ho(L)),D;D=yield Ne(k.next()),x=D.done,!x;E=!0){A=D.value,E=!1;const C=A;if(yield yield Ne(C),C.candidates&&(!((g=C.candidates[0])===null||g===void 0)&&g.content)){w.push(C.candidates[0].content);for(const R of(v=C.candidates[0].content.parts)!==null&&v!==void 0?v:[])if(a<i&&R.functionCall){if(!R.functionCall.name)throw new Error("Function call name was not returned by the model.");if(h.has(R.functionCall.name)){const N=yield Ne(h.get(R.functionCall.name).callTool([R.functionCall]));T.push(...N)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${h.keys()}, mising tool: ${R.functionCall.name}`)}}}}catch(C){I={error:C}}finally{try{!E&&!x&&(P=k.return)&&(yield Ne(P.call(k)))}finally{if(I)throw I.error}}if(T.length>0){o=!0;const C=new Co;C.candidates=[{content:{role:"user",parts:T}}],yield yield Ne(C);const R=[];R.push(...w),R.push({role:"user",parts:T});const N=en(m.contents).concat(R);m.contents=N}else break}})}(this,l,e)}async generateContentInternal(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=wv(this.apiClient,e);return a=K("{model}:generateContent",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=Tv(h),g=new Co;return Object.assign(g,m),g})}else{const c=xv(this.apiClient,e);return a=K("{model}:generateContent",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=Ev(h),g=new Co;return Object.assign(g,m),g})}}async generateContentStreamInternal(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=wv(this.apiClient,e);return a=K("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),o.then(function(m){return fi(this,arguments,function*(){var g,v,x,I;try{for(var P=!0,A=Ho(m),E;E=yield Ne(A.next()),g=E.done,!g;P=!0){I=E.value,P=!1;const k=I,D=Tv(yield Ne(k.json()));D.sdkHttpResponse={headers:k.headers};const U=new Co;Object.assign(U,D),yield yield Ne(U)}}catch(k){v={error:k}}finally{try{!P&&!g&&(x=A.return)&&(yield Ne(x.call(A)))}finally{if(v)throw v.error}}})})}else{const c=xv(this.apiClient,e);return a=K("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),o.then(function(m){return fi(this,arguments,function*(){var g,v,x,I;try{for(var P=!0,A=Ho(m),E;E=yield Ne(A.next()),g=E.done,!g;P=!0){I=E.value,P=!1;const k=I,D=Ev(yield Ne(k.json()));D.sdkHttpResponse={headers:k.headers};const U=new Co;Object.assign(U,D),yield yield Ne(U)}}catch(k){v={error:k}}finally{try{!P&&!g&&(x=A.return)&&(yield Ne(x.call(A)))}finally{if(v)throw v.error}}})})}}async embedContent(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=HR(this.apiClient,e);return a=K("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=zR(h),g=new sv;return Object.assign(g,m),g})}else{const c=qR(this.apiClient,e);return a=K("{model}:batchEmbedContents",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=jR(h),g=new sv;return Object.assign(g,m),g})}}async generateImagesInternal(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=nP(this.apiClient,e);return a=K("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=sP(h),g=new iv;return Object.assign(g,m),g})}else{const c=tP(this.apiClient,e);return a=K("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=rP(h),g=new iv;return Object.assign(g,m),g})}}async editImageInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI()){const a=FR(this.apiClient,e);return i=K("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const h=c;return h.sdkHttpResponse={headers:l.headers},h})),s.then(l=>{const c=OR(l),h=new Wk;return Object.assign(h,c),h})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI()){const a=n2(this.apiClient,e);return i=K("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const h=c;return h.sdkHttpResponse={headers:l.headers},h})),s.then(l=>{const c=r2(l),h=new Kk;return Object.assign(h,c),h})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI()){const a=UP(this.apiClient,e);return i=K("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>{const c=FP(l),h=new Jk;return Object.assign(h,c),h})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI()){const a=jP(this.apiClient,e);return i=K("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>{const c=zP(l),h=new Yk;return Object.assign(h,c),h})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=wP(this.apiClient,e);return a=K("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>ch(h))}else{const c=xP(this.apiClient,e);return a=K("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>uh(h))}}async listInternal(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=bP(this.apiClient,e);return a=K("{models_url}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=PP(h),g=new ov;return Object.assign(g,m),g})}else{const c=NP(this.apiClient,e);return a=K("{models_url}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=RP(h),g=new ov;return Object.assign(g,m),g})}}async update(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=e2(this.apiClient,e);return a=K("{model}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>ch(h))}else{const c=ZP(this.apiClient,e);return a=K("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>uh(h))}}async delete(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=DR(this.apiClient,e);return a=K("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=VR(h),g=new av;return Object.assign(g,m),g})}else{const c=MR(this.apiClient,e);return a=K("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=LR(h),g=new av;return Object.assign(g,m),g})}}async countTokens(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=bR(this.apiClient,e);return a=K("{model}:countTokens",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=PR(h),g=new lv;return Object.assign(g,m),g})}else{const c=NR(this.apiClient,e);return a=K("{model}:countTokens",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=RR(h),g=new lv;return Object.assign(g,m),g})}}async computeTokens(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI()){const a=ER(this.apiClient,e);return i=K("{model}:computeTokens",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const h=c;return h.sdkHttpResponse={headers:l.headers},h})),s.then(l=>{const c=TR(l),h=new Qk;return Object.assign(h,c),h})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=cP(this.apiClient,e);return a=K("{model}:predictLongRunning",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>{const m=lP(h),g=new Uu;return Object.assign(g,m),g})}else{const c=uP(this.apiClient,e);return a=K("{model}:predictLongRunning",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>{const m=aP(h),g=new Uu;return Object.assign(g,m),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class V2 extends er{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let i;r&&"httpOptions"in r&&(i=r.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let i;r&&"httpOptions"in r&&(i=r.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Gk(e);return a=K("{operationName}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o}else{const c=Bk(e);return a=K("{operationName}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o}}async fetchPredictVideosOperationInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI()){const a=Mk(e);return i=K("{resourceName}:fetchPredictOperation",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function U2(t){const e={},n=u(t,["data"]);if(n!=null&&d(e,["data"],n),u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=u(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function F2(t){const e={},n=u(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>W2(i))),d(e,["parts"],s)}const r=u(t,["role"]);return r!=null&&d(e,["role"],r),e}function O2(t,e,n){const r={},s=u(e,["expireTime"]);n!==void 0&&s!=null&&d(n,["expireTime"],s);const i=u(e,["newSessionExpireTime"]);n!==void 0&&i!=null&&d(n,["newSessionExpireTime"],i);const o=u(e,["uses"]);n!==void 0&&o!=null&&d(n,["uses"],o);const a=u(e,["liveConnectConstraints"]);n!==void 0&&a!=null&&d(n,["bidiGenerateContentSetup"],$2(t,a));const l=u(e,["lockAdditionalFields"]);return n!==void 0&&l!=null&&d(n,["fieldMask"],l),r}function B2(t,e){const n={},r=u(e,["config"]);return r!=null&&d(n,["config"],O2(t,r,n)),n}function G2(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const r=u(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function q2(t){const e={},n=u(t,["id"]);n!=null&&d(e,["id"],n);const r=u(t,["args"]);r!=null&&d(e,["args"],r);const s=u(t,["name"]);if(s!=null&&d(e,["name"],s),u(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function H2(t){const e={};if(u(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=u(t,["enableWidget"]);return n!=null&&d(e,["enableWidget"],n),e}function j2(t){const e={};if(u(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=u(t,["timeRangeFilter"]);return n!=null&&d(e,["timeRangeFilter"],n),e}function z2(t,e){const n={},r=u(t,["generationConfig"]);e!==void 0&&r!=null&&d(e,["setup","generationConfig"],r);const s=u(t,["responseModalities"]);e!==void 0&&s!=null&&d(e,["setup","generationConfig","responseModalities"],s);const i=u(t,["temperature"]);e!==void 0&&i!=null&&d(e,["setup","generationConfig","temperature"],i);const o=u(t,["topP"]);e!==void 0&&o!=null&&d(e,["setup","generationConfig","topP"],o);const a=u(t,["topK"]);e!==void 0&&a!=null&&d(e,["setup","generationConfig","topK"],a);const l=u(t,["maxOutputTokens"]);e!==void 0&&l!=null&&d(e,["setup","generationConfig","maxOutputTokens"],l);const c=u(t,["mediaResolution"]);e!==void 0&&c!=null&&d(e,["setup","generationConfig","mediaResolution"],c);const h=u(t,["seed"]);e!==void 0&&h!=null&&d(e,["setup","generationConfig","seed"],h);const m=u(t,["speechConfig"]);e!==void 0&&m!=null&&d(e,["setup","generationConfig","speechConfig"],Xp(m));const g=u(t,["thinkingConfig"]);e!==void 0&&g!=null&&d(e,["setup","generationConfig","thinkingConfig"],g);const v=u(t,["enableAffectiveDialog"]);e!==void 0&&v!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],v);const x=u(t,["systemInstruction"]);e!==void 0&&x!=null&&d(e,["setup","systemInstruction"],F2(xt(x)));const I=u(t,["tools"]);if(e!==void 0&&I!=null){let L=Gi(I);Array.isArray(L)&&(L=L.map(T=>J2(Bi(T)))),d(e,["setup","tools"],L)}const P=u(t,["sessionResumption"]);e!==void 0&&P!=null&&d(e,["setup","sessionResumption"],K2(P));const A=u(t,["inputAudioTranscription"]);e!==void 0&&A!=null&&d(e,["setup","inputAudioTranscription"],A);const E=u(t,["outputAudioTranscription"]);e!==void 0&&E!=null&&d(e,["setup","outputAudioTranscription"],E);const k=u(t,["realtimeInputConfig"]);e!==void 0&&k!=null&&d(e,["setup","realtimeInputConfig"],k);const D=u(t,["contextWindowCompression"]);e!==void 0&&D!=null&&d(e,["setup","contextWindowCompression"],D);const U=u(t,["proactivity"]);return e!==void 0&&U!=null&&d(e,["setup","proactivity"],U),n}function $2(t,e){const n={},r=u(e,["model"]);r!=null&&d(n,["setup","model"],ve(t,r));const s=u(e,["config"]);return s!=null&&d(n,["config"],z2(s,n)),n}function W2(t){const e={},n=u(t,["mediaResolution"]);n!=null&&d(e,["mediaResolution"],n);const r=u(t,["codeExecutionResult"]);r!=null&&d(e,["codeExecutionResult"],r);const s=u(t,["executableCode"]);s!=null&&d(e,["executableCode"],s);const i=u(t,["fileData"]);i!=null&&d(e,["fileData"],G2(i));const o=u(t,["functionCall"]);o!=null&&d(e,["functionCall"],q2(o));const a=u(t,["functionResponse"]);a!=null&&d(e,["functionResponse"],a);const l=u(t,["inlineData"]);l!=null&&d(e,["inlineData"],U2(l));const c=u(t,["text"]);c!=null&&d(e,["text"],c);const h=u(t,["thought"]);h!=null&&d(e,["thought"],h);const m=u(t,["thoughtSignature"]);m!=null&&d(e,["thoughtSignature"],m);const g=u(t,["videoMetadata"]);return g!=null&&d(e,["videoMetadata"],g),e}function K2(t){const e={},n=u(t,["handle"]);if(n!=null&&d(e,["handle"],n),u(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function J2(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(m=>m)),d(e,["functionDeclarations"],h)}if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=u(t,["googleSearchRetrieval"]);r!=null&&d(e,["googleSearchRetrieval"],r);const s=u(t,["computerUse"]);s!=null&&d(e,["computerUse"],s);const i=u(t,["fileSearch"]);i!=null&&d(e,["fileSearch"],i);const o=u(t,["codeExecution"]);if(o!=null&&d(e,["codeExecution"],o),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=u(t,["googleMaps"]);a!=null&&d(e,["googleMaps"],H2(a));const l=u(t,["googleSearch"]);l!=null&&d(e,["googleSearch"],j2(l));const c=u(t,["urlContext"]);return c!=null&&d(e,["urlContext"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Y2(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const s=Object.keys(r).map(i=>`${n}.${i}`);e.push(...s)}else e.push(n)}return e.join(",")}function Q2(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const i=r.setup;typeof i=="object"&&i!==null?(t.bidiGenerateContentSetup=i,n=i):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const s=t.fieldMask;if(n){const i=Y2(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)i?t.fieldMask=i:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const o=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let a=[];s.length>0&&(a=s.map(c=>o.includes(c)?`generationConfig.${c}`:c));const l=[];i&&l.push(i),a.length>0&&l.push(...a),l.length>0?t.fieldMask=l.join(","):delete t.fieldMask}else delete t.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?t.fieldMask=s.join(","):delete t.fieldMask;return t}class X2 extends er{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const a=B2(this.apiClient,e);i=K("auth_tokens",a._url),o=a._query,delete a.config,delete a._url,delete a._query;const l=Q2(a,e.config);return s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),s.then(c=>c)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Z2(t,e){const n={},r=u(t,["displayName"]);return e!==void 0&&r!=null&&d(e,["displayName"],r),n}function eM(t){const e={},n=u(t,["config"]);return n!=null&&Z2(n,e),e}function tM(t,e){const n={},r=u(t,["force"]);return e!==void 0&&r!=null&&d(e,["_query","force"],r),n}function nM(t){const e={},n=u(t,["name"]);n!=null&&d(e,["_url","name"],n);const r=u(t,["config"]);return r!=null&&tM(r,e),e}function rM(t){const e={},n=u(t,["name"]);return n!=null&&d(e,["_url","name"],n),e}function sM(t,e){const n={},r=u(t,["customMetadata"]);if(e!==void 0&&r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),d(e,["customMetadata"],i)}const s=u(t,["chunkingConfig"]);return e!==void 0&&s!=null&&d(e,["chunkingConfig"],s),n}function iM(t){const e={},n=u(t,["name"]);n!=null&&d(e,["name"],n);const r=u(t,["metadata"]);r!=null&&d(e,["metadata"],r);const s=u(t,["done"]);s!=null&&d(e,["done"],s);const i=u(t,["error"]);i!=null&&d(e,["error"],i);const o=u(t,["response"]);return o!=null&&d(e,["response"],aM(o)),e}function oM(t){const e={},n=u(t,["fileSearchStoreName"]);n!=null&&d(e,["_url","file_search_store_name"],n);const r=u(t,["fileName"]);r!=null&&d(e,["fileName"],r);const s=u(t,["config"]);return s!=null&&sM(s,e),e}function aM(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=u(t,["parent"]);r!=null&&d(e,["parent"],r);const s=u(t,["documentName"]);return s!=null&&d(e,["documentName"],s),e}function lM(t,e){const n={},r=u(t,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);const s=u(t,["pageToken"]);return e!==void 0&&s!=null&&d(e,["_query","pageToken"],s),n}function uM(t){const e={},n=u(t,["config"]);return n!=null&&lM(n,e),e}function cM(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=u(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);const s=u(t,["fileSearchStores"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>o)),d(e,["fileSearchStores"],i)}return e}function dM(t,e){const n={},r=u(t,["mimeType"]);e!==void 0&&r!=null&&d(e,["mimeType"],r);const s=u(t,["displayName"]);e!==void 0&&s!=null&&d(e,["displayName"],s);const i=u(t,["customMetadata"]);if(e!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>l)),d(e,["customMetadata"],a)}const o=u(t,["chunkingConfig"]);return e!==void 0&&o!=null&&d(e,["chunkingConfig"],o),n}function fM(t){const e={},n=u(t,["fileSearchStoreName"]);n!=null&&d(e,["_url","file_search_store_name"],n);const r=u(t,["config"]);return r!=null&&dM(r,e),e}function hM(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pM(t,e){const n={},r=u(t,["force"]);return e!==void 0&&r!=null&&d(e,["_query","force"],r),n}function mM(t){const e={},n=u(t,["name"]);n!=null&&d(e,["_url","name"],n);const r=u(t,["config"]);return r!=null&&pM(r,e),e}function gM(t){const e={},n=u(t,["name"]);return n!=null&&d(e,["_url","name"],n),e}function yM(t,e){const n={},r=u(t,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);const s=u(t,["pageToken"]);return e!==void 0&&s!=null&&d(e,["_query","pageToken"],s),n}function vM(t){const e={},n=u(t,["parent"]);n!=null&&d(e,["_url","parent"],n);const r=u(t,["config"]);return r!=null&&yM(r,e),e}function _M(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=u(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);const s=u(t,["documents"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>o)),d(e,["documents"],i)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xM extends er{constructor(e){super(),this.apiClient=e,this.list=async n=>new bs(Wn.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=gM(e);return i=K("{name}",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>l)}}async delete(e){var n,r;let s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=mM(e);s=K("{name}",o._url),i=o._query,delete o._url,delete o._query,await this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=vM(e);return i=K("{parent}/documents",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>{const c=_M(l),h=new Xk;return Object.assign(h,c),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wM extends er{constructor(e,n=new xM(e)){super(),this.apiClient=e,this.documents=n,this.list=async(r={})=>new bs(Wn.PAGED_ITEM_FILE_SEARCH_STORES,s=>this.listInternal(s),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=eM(e);return i=K("fileSearchStores",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>l)}}async get(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=rM(e);return i=K("{name}",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>l)}}async delete(e){var n,r;let s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=nM(e);s=K("{name}",o._url),i=o._query,delete o._url,delete o._query,await this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=uM(e);return i=K("fileSearchStores",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>{const c=cM(l),h=new Zk;return Object.assign(h,c),h})}}async uploadToFileSearchStoreInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=fM(e);return i=K("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>{const c=hM(l),h=new eN;return Object.assign(h,c),h})}}async importFile(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=oM(e);return i=K("{file_search_store_name}:importFile",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>{const c=iM(l),h=new Wp;return Object.assign(h,c),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function EM(t,e){const n={},r=u(t,["name"]);return r!=null&&d(n,["_url","name"],r),n}function TM(t,e){const n={},r=u(t,["name"]);return r!=null&&d(n,["_url","name"],r),n}function CM(t,e,n){const r={};if(u(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=u(t,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&d(e,["displayName"],s),u(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const i=u(t,["epochCount"]);e!==void 0&&i!=null&&d(e,["tuningTask","hyperparameters","epochCount"],i);const o=u(t,["learningRateMultiplier"]);if(o!=null&&d(r,["tuningTask","hyperparameters","learningRateMultiplier"],o),u(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(u(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(u(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const a=u(t,["batchSize"]);e!==void 0&&a!=null&&d(e,["tuningTask","hyperparameters","batchSize"],a);const l=u(t,["learningRate"]);if(e!==void 0&&l!=null&&d(e,["tuningTask","hyperparameters","learningRate"],l),u(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(u(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function SM(t,e,n){const r={};let s=u(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const v=u(t,["validationDataset"]);e!==void 0&&v!=null&&d(e,["supervisedTuningSpec"],bv(v))}else if(s==="PREFERENCE_TUNING"){const v=u(t,["validationDataset"]);e!==void 0&&v!=null&&d(e,["preferenceOptimizationSpec"],bv(v))}const i=u(t,["tunedModelDisplayName"]);e!==void 0&&i!=null&&d(e,["tunedModelDisplayName"],i);const o=u(t,["description"]);e!==void 0&&o!=null&&d(e,["description"],o);let a=u(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const v=u(t,["epochCount"]);e!==void 0&&v!=null&&d(e,["supervisedTuningSpec","hyperParameters","epochCount"],v)}else if(a==="PREFERENCE_TUNING"){const v=u(t,["epochCount"]);e!==void 0&&v!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],v)}let l=u(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const v=u(t,["learningRateMultiplier"]);e!==void 0&&v!=null&&d(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],v)}else if(l==="PREFERENCE_TUNING"){const v=u(t,["learningRateMultiplier"]);e!==void 0&&v!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],v)}let c=u(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const v=u(t,["exportLastCheckpointOnly"]);e!==void 0&&v!=null&&d(e,["supervisedTuningSpec","exportLastCheckpointOnly"],v)}else if(c==="PREFERENCE_TUNING"){const v=u(t,["exportLastCheckpointOnly"]);e!==void 0&&v!=null&&d(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],v)}let h=u(n,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const v=u(t,["adapterSize"]);e!==void 0&&v!=null&&d(e,["supervisedTuningSpec","hyperParameters","adapterSize"],v)}else if(h==="PREFERENCE_TUNING"){const v=u(t,["adapterSize"]);e!==void 0&&v!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],v)}if(u(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(u(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const m=u(t,["labels"]);e!==void 0&&m!=null&&d(e,["labels"],m);const g=u(t,["beta"]);return e!==void 0&&g!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","beta"],g),r}function IM(t,e){const n={},r=u(t,["baseModel"]);r!=null&&d(n,["baseModel"],r);const s=u(t,["preTunedModel"]);s!=null&&d(n,["preTunedModel"],s);const i=u(t,["trainingDataset"]);i!=null&&UM(i);const o=u(t,["config"]);return o!=null&&CM(o,n),n}function AM(t,e){const n={},r=u(t,["baseModel"]);r!=null&&d(n,["baseModel"],r);const s=u(t,["preTunedModel"]);s!=null&&d(n,["preTunedModel"],s);const i=u(t,["trainingDataset"]);i!=null&&FM(i,n,e);const o=u(t,["config"]);return o!=null&&SM(o,n,e),n}function kM(t,e){const n={},r=u(t,["name"]);return r!=null&&d(n,["_url","name"],r),n}function NM(t,e){const n={},r=u(t,["name"]);return r!=null&&d(n,["_url","name"],r),n}function bM(t,e,n){const r={},s=u(t,["pageSize"]);e!==void 0&&s!=null&&d(e,["_query","pageSize"],s);const i=u(t,["pageToken"]);e!==void 0&&i!=null&&d(e,["_query","pageToken"],i);const o=u(t,["filter"]);return e!==void 0&&o!=null&&d(e,["_query","filter"],o),r}function RM(t,e,n){const r={},s=u(t,["pageSize"]);e!==void 0&&s!=null&&d(e,["_query","pageSize"],s);const i=u(t,["pageToken"]);e!==void 0&&i!=null&&d(e,["_query","pageToken"],i);const o=u(t,["filter"]);return e!==void 0&&o!=null&&d(e,["_query","filter"],o),r}function PM(t,e){const n={},r=u(t,["config"]);return r!=null&&bM(r,n),n}function MM(t,e){const n={},r=u(t,["config"]);return r!=null&&RM(r,n),n}function DM(t,e){const n={},r=u(t,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);const s=u(t,["nextPageToken"]);s!=null&&d(n,["nextPageToken"],s);const i=u(t,["tunedModels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>pT(a))),d(n,["tuningJobs"],o)}return n}function LM(t,e){const n={},r=u(t,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);const s=u(t,["nextPageToken"]);s!=null&&d(n,["nextPageToken"],s);const i=u(t,["tuningJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>fh(a))),d(n,["tuningJobs"],o)}return n}function VM(t,e){const n={},r=u(t,["name"]);r!=null&&d(n,["model"],r);const s=u(t,["name"]);return s!=null&&d(n,["endpoint"],s),n}function UM(t,e){const n={};if(u(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=u(t,["examples"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>i)),d(n,["examples","examples"],s)}return n}function FM(t,e,n){const r={};let s=u(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const o=u(t,["gcsUri"]);e!==void 0&&o!=null&&d(e,["supervisedTuningSpec","trainingDatasetUri"],o)}else if(s==="PREFERENCE_TUNING"){const o=u(t,["gcsUri"]);e!==void 0&&o!=null&&d(e,["preferenceOptimizationSpec","trainingDatasetUri"],o)}let i=u(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const o=u(t,["vertexDatasetResource"]);e!==void 0&&o!=null&&d(e,["supervisedTuningSpec","trainingDatasetUri"],o)}else if(i==="PREFERENCE_TUNING"){const o=u(t,["vertexDatasetResource"]);e!==void 0&&o!=null&&d(e,["preferenceOptimizationSpec","trainingDatasetUri"],o)}if(u(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function pT(t,e){const n={},r=u(t,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);const s=u(t,["name"]);s!=null&&d(n,["name"],s);const i=u(t,["state"]);i!=null&&d(n,["state"],JE(i));const o=u(t,["createTime"]);o!=null&&d(n,["createTime"],o);const a=u(t,["tuningTask","startTime"]);a!=null&&d(n,["startTime"],a);const l=u(t,["tuningTask","completeTime"]);l!=null&&d(n,["endTime"],l);const c=u(t,["updateTime"]);c!=null&&d(n,["updateTime"],c);const h=u(t,["description"]);h!=null&&d(n,["description"],h);const m=u(t,["baseModel"]);m!=null&&d(n,["baseModel"],m);const g=u(t,["_self"]);return g!=null&&d(n,["tunedModel"],VM(g)),n}function fh(t,e){const n={},r=u(t,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);const s=u(t,["name"]);s!=null&&d(n,["name"],s);const i=u(t,["state"]);i!=null&&d(n,["state"],JE(i));const o=u(t,["createTime"]);o!=null&&d(n,["createTime"],o);const a=u(t,["startTime"]);a!=null&&d(n,["startTime"],a);const l=u(t,["endTime"]);l!=null&&d(n,["endTime"],l);const c=u(t,["updateTime"]);c!=null&&d(n,["updateTime"],c);const h=u(t,["error"]);h!=null&&d(n,["error"],h);const m=u(t,["description"]);m!=null&&d(n,["description"],m);const g=u(t,["baseModel"]);g!=null&&d(n,["baseModel"],g);const v=u(t,["tunedModel"]);v!=null&&d(n,["tunedModel"],v);const x=u(t,["preTunedModel"]);x!=null&&d(n,["preTunedModel"],x);const I=u(t,["supervisedTuningSpec"]);I!=null&&d(n,["supervisedTuningSpec"],I);const P=u(t,["preferenceOptimizationSpec"]);P!=null&&d(n,["preferenceOptimizationSpec"],P);const A=u(t,["tuningDataStats"]);A!=null&&d(n,["tuningDataStats"],A);const E=u(t,["encryptionSpec"]);E!=null&&d(n,["encryptionSpec"],E);const k=u(t,["partnerModelTuningSpec"]);k!=null&&d(n,["partnerModelTuningSpec"],k);const D=u(t,["customBaseModel"]);D!=null&&d(n,["customBaseModel"],D);const U=u(t,["experiment"]);U!=null&&d(n,["experiment"],U);const L=u(t,["labels"]);L!=null&&d(n,["labels"],L);const T=u(t,["outputUri"]);T!=null&&d(n,["outputUri"],T);const w=u(t,["pipelineJob"]);w!=null&&d(n,["pipelineJob"],w);const C=u(t,["serviceAccount"]);C!=null&&d(n,["serviceAccount"],C);const R=u(t,["tunedModelDisplayName"]);R!=null&&d(n,["tunedModelDisplayName"],R);const N=u(t,["veoTuningSpec"]);return N!=null&&d(n,["veoTuningSpec"],N),n}function OM(t,e){const n={},r=u(t,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);const s=u(t,["name"]);s!=null&&d(n,["name"],s);const i=u(t,["metadata"]);i!=null&&d(n,["metadata"],i);const o=u(t,["done"]);o!=null&&d(n,["done"],o);const a=u(t,["error"]);return a!=null&&d(n,["error"],a),n}function bv(t,e){const n={},r=u(t,["gcsUri"]);r!=null&&d(n,["validationDatasetUri"],r);const s=u(t,["vertexDatasetResource"]);return s!=null&&d(n,["validationDatasetUri"],s),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class BM extends er{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new bs(Wn.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const s={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(s.checkpointId=n.config.preTunedModelCheckpointId);const i=Object.assign(Object.assign({},n),{preTunedModel:s});return i.baseModel=void 0,await this.tuneInternal(i)}else{const s=Object.assign({},n);return await this.tuneInternal(s)}else{const s=Object.assign({},n),i=await this.tuneMldevInternal(s);let o="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?o=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(o=i.name.split("/operations/")[0]),{name:o,state:ih.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=NM(e);return a=K("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>fh(h))}else{const c=kM(e);return a=K("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>pT(h))}}async listInternal(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=MM(e);return a=K("tuningJobs",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=LM(h),g=new uv;return Object.assign(g,m),g})}else{const c=PM(e);return a=K("tunedModels",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=DM(h),g=new uv;return Object.assign(g,m),g})}}async cancel(e){var n,r,s,i;let o="",a={};if(this.apiClient.isVertexAI()){const l=TM(e);o=K("{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const l=EM(e);o=K("{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async tuneInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI()){const a=AM(e,e);return i=K("tuningJobs",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const h=c;return h.sdkHttpResponse={headers:l.headers},h})),s.then(l=>fh(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=IM(e);return i=K("tunedModels",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const h=c;return h.sdkHttpResponse={headers:l.headers},h})),s.then(l=>OM(l))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class GM{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const qM=1024*1024*8,HM=3,jM=1e3,zM=2,Ou="x-goog-upload-status";async function $M(t,e,n){var r;const s=await mT(t,e,n),i=await(s==null?void 0:s.json());if(((r=s==null?void 0:s.headers)===null||r===void 0?void 0:r[Ou])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return i.file}async function WM(t,e,n){var r;const s=await mT(t,e,n),i=await(s==null?void 0:s.json());if(((r=s==null?void 0:s.headers)===null||r===void 0?void 0:r[Ou])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const o=HE(i),a=new Kp;return Object.assign(a,o),a}async function mT(t,e,n){var r,s;let i=0,o=0,a=new oh(new Response),l="upload";for(i=t.size;o<i;){const c=Math.min(qM,i-o),h=t.slice(o,o+c);o+c>=i&&(l+=", finalize");let m=0,g=jM;for(;m<HM&&(a=await n.request({path:"",body:h,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":l,"X-Goog-Upload-Offset":String(o),"Content-Length":String(c)}}}),!(!((r=a==null?void 0:a.headers)===null||r===void 0)&&r[Ou]));)m++,await JM(g),g=g*zM;if(o+=c,((s=a==null?void 0:a.headers)===null||s===void 0?void 0:s[Ou])!=="active")break;if(i<=o)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return a}async function KM(t){return{size:t.size,type:t.type}}function JM(t){return new Promise(e=>setTimeout(e,t))}class YM{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await $M(e,n,r)}async uploadToFileSearchStore(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await WM(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await KM(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class QM{create(e,n,r){return new XM(e,n,r)}}class XM{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Rv="x-goog-api-key";class ZM{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(Rv)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Rv,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const eD="gl-node/";class tD{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=Rk(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion;const s=new ZM(this.apiKey);this.apiClient=new g2({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:eD+"web",uploader:new YM,downloader:new GM}),this.models=new L2(this.apiClient),this.live=new N2(this.apiClient,s,new QM),this.batches=new ob(this.apiClient),this.chats=new Gb(this.models,this.apiClient),this.caches=new Fb(this.apiClient),this.files=new Qb(this.apiClient),this.operations=new V2(this.apiClient),this.authTokens=new X2(this.apiClient),this.tunings=new BM(this.apiClient),this.fileSearchStores=new wM(this.apiClient)}}const Rs=()=>{const t="AIzaSyCDqgY7dR_dDcY_UpFUh3rPrxk6v50sd1k";return new tD({apiKey:t})},em=()=>new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),gT=()=>new Date().getFullYear(),Mn={Ireland:["irishimmigration.ie","justice.ie","visa.vfsglobal.com/ind/en/irl"],"United Kingdom":["gov.uk","visa.vfsglobal.com/ind/en/gbr"],"United States":["travel.state.gov","ustraveldocs.com","ceac.state.gov","dhs.gov"],Canada:["canada.ca","ircc.canada.ca","visa.vfsglobal.com/ind/en/can"],Australia:["immi.homeaffairs.gov.au","india.highcommission.gov.au"],"New Zealand":["immigration.govt.nz","visa.vfsglobal.com/ind/en/nzl"],Germany:["india.diplo.de","make-it-in-germany.com","visa.vfsglobal.com/ind/en/deu"],France:["france-visas.gouv.fr","in.ambafrance.org","visa.vfsglobal.com/ind/en/fra"],Netherlands:["netherlandsworldwide.nl","ind.nl","visa.vfsglobal.com/ind/en/nld"],Italy:["vistoperitalia.esteri.it","ambnewdelhi.esteri.it","visa.vfsglobal.com/ind/en/ita"],Spain:["exteriores.gob.es","india.blsspainvisa.com"],Switzerland:["sem.admin.ch","eda.admin.ch","visa.vfsglobal.com/ind/en/che"],Austria:["bmeia.gv.at","migration.gv.at","visa.vfsglobal.com/ind/en/aut"],Malta:["identita.gov.mt","foreign.gov.mt","visa.vfsglobal.com/ind/en/mlt"],Finland:["migri.fi","finlandabroad.fi","visa.vfsglobal.com/ind/en/fin"],Sweden:["migrationsverket.se","swedenabroad.se","visa.vfsglobal.com/ind/en/swe"],Denmark:["nyidanmark.dk","um.dk","applyvisa.um.dk","visa.vfsglobal.com/ind/en/dnk"],Latvia:["pmlp.gov.lv","mfa.gov.lv","visa.vfsglobal.com/ind/en/lva"],Hungary:["oif.gov.hu","konzuliszolgalat.kormany.hu","visa.vfsglobal.com/ind/en/hun"],Portugal:["vistos.mne.gov.pt","visa.vfsglobal.com/ind/en/prt"],Belgium:["dofi.ibz.be","visa.vfsglobal.com/ind/en/bel","diplomatie.belgium.be"],Poland:["gov.pl","visa.vfsglobal.com/ind/en/pol"],"United Arab Emirates":["u.ae","icp.gov.ae","gdrfad.gov.ae"],Singapore:["ica.gov.sg","mfa.gov.sg"],"Schengen Area":["ec.europa.eu"]},hh=(t,e)=>{if(!t)return!1;const n=(e||"").toLowerCase().trim(),r=String(t).toLowerCase();if(["atlys","ivisa","wikipedia","quora","reddit","tripadvisor","makemytrip","cleartrip","goibibo","easemytrip","handyvisas","skyscanner","kayak","booking.com","agoda","travel.usnews","visaguide.world","thomascook","akbartravels","schengenvisainfo"].some(o=>r.includes(o)))return!1;const i=Object.keys(Mn).find(o=>n.includes(o.toLowerCase()));return!!(i&&Mn[i].some(a=>r.includes(a))||r.includes(".gov")||r.includes("gov.")||r.includes(".go.")||r.includes(".gc.ca")||r.includes(".europa.eu")||r.includes(".mil")||r.includes(".nic.in")||r.includes(".gouv")||r.includes(".gob")||r.includes(".diplo")||r.includes("mfa.")||r.includes(".int")||r.includes("vfsglobal")||r.includes("blsinternational")||r.includes("tlscontact")||r.includes("ustraveldocs")||r.includes("ceac.state.gov")||r.includes("gvcworld"))},nD=(t,e)=>{let n=50,r=[];const s=(e||"").toLowerCase().trim(),o=(t.officialSources||[]).filter(v=>hh(v.url,s)),a=Object.keys(Mn).find(v=>s.includes(v.toLowerCase())),l=a?Mn[a]:[];(l.length>0?o.some(v=>l.some(x=>(v.url||"").toLowerCase().includes(x))):!1)?(n+=35,r.push("Verified against official Government allow-list.")):o.length>0?(n+=25,r.push(a?"Sourced from partner domains.":"Verified via official Government TLDs.")):(n-=30,r.push(" No official government sources verified."));const h=String(t.cost||"").toLowerCase();h&&/\d/.test(h)&&!h.includes("vary")&&(n+=5);const m=String(t.processingTime||"");m&&/\d/.test(m)&&(n+=5);const g=String(t.notes||"").toLowerCase();return(g.includes("vfs")||g.includes("bls"))&&(n+=5),n=Math.min(Math.max(n,10),99),{score:n,analysis:r.join(" ")}},Pv=(t,e)=>{const n=(e||"").toLowerCase(),r=Object.keys(Mn).find(s=>n.includes(s.toLowerCase()));return r&&Mn[r].some(i=>String(t).toLowerCase().includes(i))?"Gold":t.includes(".gov")||t.includes(".europa.eu")?"Silver":"Bronze"},Be=(t,e="")=>t==null?e:String(t).trim(),rD=async(t,e,n,r)=>{var P,A,E,k,D,U;const s=Rs(),i=(n||"").trim(),o=em(),a=gT(),l=Object.keys(Mn).find(L=>i.toLowerCase().includes(L.toLowerCase())),c=l?Mn[l].join(", "):"Official government websites, embassies, or consulates",h=`
    You are the "EEC Chief Immigration Officer", a specialized AI for Indian citizens.
    Current Date: ${o}.
    
    CRITICAL E-E-A-T MANDATE:
    1.  LEGAL CITATIONS: You MUST cite specific immigration acts where possible (e.g. "Section 214(b) of INA" for USA, "Immigration Rules Appendix V" for UK).
    2.  SOURCE TRUTH: Prioritize specific government sources if available. For ${i}, look for: ${c}.
    3.  IGNORE AGGREGATORS: Do not look at Atlys, iVisa, Wikipedia.
    4.  CONTEXT: User is an Indian Citizen from ${e}.
    5.  OUTPUT: Return raw JSON ONLY matching the provided structure.
  `,m=`
    Report on ${r} visa for ${i} (Indian Passport).
    Context: Today is ${o}. Ensure all data (fees, processing times) is current as of ${a}.
    Search Query: "Official ${i} visa requirements for Indian citizens ${e} government consulate ${a}"
    Search Query: "Official visa fees ${i} India ${a}"
    Search Query: "${i} visa rejection reasons for Indian students ${a}"

    Return the response as a VALID JSON Object with the following structure:
    {
        "visaName": "string",
        "status": "string",
        "duration": "string",
        "validity": "string",
        "cost": "string",
        "processingTime": "string",
        "summary": "string",
        "documents": ["string", "string"],
        "processSteps": ["string", "string"],
        "difficulty": "Easy" | "Medium" | "Hard",
        "financialReqs": "string",
        "photoReqs": "string",
        "insuranceReqs": "string",
        "accommodationReqs": "string",
        "notes": "string",
        "embassyContact": "string",
        "officialSources": [{ "title": "string", "url": "string" }],
        "lastUpdate": "string",
        "confidenceScore": number,
        "aiAnalysis": "string",
        "legalCitations": ["string"],
        "rejectionRisk": {
            "probability": "Low" | "Moderate" | "High",
            "primaryReason": "string",
            "mitigationTip": "string"
        }
    }
  `;let g;try{g=await s.models.generateContent({model:"gemini-2.5-flash",contents:m,config:{systemInstruction:h,tools:[{googleSearch:{}}]}})}catch(L){throw console.error("API Error during fetch:",L),new Error("Unable to connect to visa intelligence service.")}let v={visaName:`${r} Visa for ${i}`,status:"Manual Verification Required",summary:"We could not automatically verify requirements for this specific destination at this time. Please check official embassy sources directly.",documents:[],processSteps:[],officialSources:[],difficulty:"Medium",confidenceScore:0,aiAnalysis:"Data generation failed or was incomplete.",cost:"Check Embassy",validity:"Check Embassy",processingTime:"Check Embassy",duration:"Check Embassy",financialReqs:"",photoReqs:"",insuranceReqs:"",accommodationReqs:"",notes:"Automated verification failed."};try{let L="";if(g&&g.candidates&&g.candidates.length>0)try{L=(g.text||"{}").trim()}catch{L=((E=(A=(P=g.candidates[0].content)==null?void 0:P.parts)==null?void 0:A[0])==null?void 0:E.text)||"{}"}else L="{}";const T=L.match(/```json([\s\S]*?)```/)||L.match(/```([\s\S]*?)```/);if(T)L=T[1];else{const C=L.indexOf("{"),R=L.lastIndexOf("}");C!==-1&&R!==-1&&(L=L.substring(C,R+1))}const w=JSON.parse(L);w&&typeof w=="object"&&!Array.isArray(w)&&(v={...v,...w})}catch(L){console.warn("Gemini returned invalid JSON. Using partial fallback.",L)}v.documents=Array.isArray(v.documents)?v.documents.filter(L=>L!=null).map(String):[],v.processSteps=Array.isArray(v.processSteps)?v.processSteps.filter(L=>L!=null).map(String):[],v.legalCitations=Array.isArray(v.legalCitations)?v.legalCitations.filter(L=>L!=null).map(String):[],Array.isArray(v.officialSources)?v.officialSources=v.officialSources.filter(L=>L&&typeof L=="object").map(L=>({title:Be(L.title,"Official Source"),url:Be(L.url,""),authorityLevel:L.authorityLevel})):v.officialSources=[],v.processingTime=Be(v.processingTime,"Check Embassy"),v.cost=Be(v.cost,"Check Embassy"),v.validity=Be(v.validity,"Check Embassy"),v.duration=Be(v.duration,"Check Embassy"),v.status=Be(v.status,"Check Embassy"),v.visaName=Be(v.visaName,`${r} Visa`),v.notes=Be(v.notes),v.embassyContact=Be(v.embassyContact),v.summary=Be(v.summary,"Details unavailable."),v.financialReqs=Be(v.financialReqs),v.photoReqs=Be(v.photoReqs),v.insuranceReqs=Be(v.insuranceReqs),v.accommodationReqs=Be(v.accommodationReqs),v.aiAnalysis=Be(v.aiAnalysis),v.difficulty=["Easy","Medium","Hard"].includes(v.difficulty)?v.difficulty:"Medium",v.confidenceScore=typeof v.confidenceScore=="number"?v.confidenceScore:50,!v.rejectionRisk||typeof v.rejectionRisk!="object"?v.rejectionRisk={probability:"Moderate",primaryReason:"Generic Documentation Errors",mitigationTip:"Ensure all documents are original and verifiable."}:(v.rejectionRisk.probability=Be(v.rejectionRisk.probability,"Moderate"),v.rejectionRisk.primaryReason=Be(v.rejectionRisk.primaryReason,"Standard Scrutiny"),v.rejectionRisk.mitigationTip=Be(v.rejectionRisk.mitigationTip,"Check official guidelines."));let x=[];g&&((U=(D=(k=g.candidates)==null?void 0:k[0])==null?void 0:D.groundingMetadata)!=null&&U.groundingChunks)&&(x=(g.candidates[0].groundingMetadata.groundingChunks||[]).filter(T=>{var w,C;return((w=T.web)==null?void 0:w.uri)&&((C=T.web)==null?void 0:C.title)}).map(T=>({title:String(T.web.title),url:String(T.web.uri),authorityLevel:Pv(String(T.web.uri),i)})).filter(T=>hh(T.url,i))),v.officialSources&&v.officialSources.filter(T=>hh(T.url,i)).forEach(T=>{x.some(w=>w.url===T.url)||x.push({...T,authorityLevel:Pv(T.url,i)})}),v.officialSources=x;const I=nD(v,i);return v.confidenceScore=I.score,v.aiAnalysis=I.analysis,v},sD=async(t,e)=>{const n=Rs(),r=`Identify the Indian State for these coordinates: Latitude ${t}, Longitude ${e}. Return ONLY the state name.`,s=await n.models.generateContent({model:"gemini-2.5-flash",contents:r});return Be(s.text).replace(/['".]/g,"")||""},iD=async(t,e)=>{const n=Rs(),r=`Translate values to ${e}. Keep keys English. Object: ${JSON.stringify(t)}`,s=await n.models.generateContent({model:"gemini-2.5-flash",contents:r,config:{responseMimeType:"application/json"}});let i={};try{i=JSON.parse(s.text||"{}")}catch{i={}}const o={...t,...i};return o.documents=Array.isArray(o.documents)?o.documents.map(String):t.documents,o.processSteps=Array.isArray(o.processSteps)?o.processSteps.map(String):t.processSteps,o},oD=async(t,e,n,r)=>{const s=Rs(),i=`Create a strict "Forensic Document Checklist" for ${r} visa to ${n} for a resident of ${e}, ${t}. Focus on rejection reasons.`,o=await s.models.generateContent({model:"gemini-2.5-flash",contents:i,config:{responseMimeType:"application/json",responseSchema:{type:mt.ARRAY,items:{type:mt.OBJECT,properties:{categoryName:{type:mt.STRING},items:{type:mt.ARRAY,items:{type:mt.OBJECT,properties:{item:{type:mt.STRING},description:{type:mt.STRING},isCritical:{type:mt.BOOLEAN}}}}}}}}});try{const a=JSON.parse(o.text||"[]");return Array.isArray(a)?a:[]}catch{return[]}},aD=async(t,e,n,r,s)=>{const i=Rs(),o=Be(s).toLowerCase(),a=em(),l=Object.keys(Mn).find(x=>o.includes(x.toLowerCase())),c=l?Mn[l]:[];let h="";c.length>0?h=`
        STRICT GROUNDING RULE:
        You must prioritize and verify information against these OFFICIAL domains: ${c.join(", ")}.
        If you need to search for new information, REJECT any source that is not a government (.gov) site or one of the listed domains.
        `:h=`
        STRICT GROUNDING RULE:
        As specific URL rules are not pre-configured for ${s}, you must strictly adhere to this heuristic:
        1. TRUST ONLY: Websites ending in .gov, .gob, .gouv, .mil, .int, or official VFS/BLS/TLS partner sites.
        2. REJECT: Blogs, News sites, Wikipedia, iVisa, Atlys, and other aggregators.
        3. TRANSPARENCY: If you cannot find the answer on an official government site, explicitly state: "I cannot verify this with an official government source."
        `;const m=`
    You are the **EEC Expert Visa Consultant** from **Enbee Education Center (EEC)**, Gujarat's premier study abroad consultancy (Est. 1997).
    Current Date: ${a}.
    
    Context Data: ${JSON.stringify(n)}.
    User Language: ${r}.
    Destination: ${s}.
    
    ${h}

    BEHAVIOR:
    1. BRAND AUTHORITY: Always speak with the senior authority of EEC. You are NOT a generic AI. You are a consultant with 27 years of legacy.
    2. FORENSIC TONE: Use terms like "Consular Protocol", "Risk Assessment", "Financial Forensics", and "Documentation Integrity".
    3. SOURCE CITATION: When providing facts (fees, documents), cite the source domain in brackets e.g. [travel.state.gov].
    4. JURISDICTION AWARENESS: Always check the user's state (${n.embassyContact}) before advising on where to apply.
    5. If the user asks a NEW question, use the Google Search tool.
    6. ALWAYS apply the STRICT GROUNDING RULE to search results.
    `;return(await i.chats.create({model:"gemini-2.5-flash",config:{systemInstruction:m,tools:[{googleSearch:{}}]},history:t}).sendMessage({message:e})).text||"No response generated."},lD=async(t,e)=>{const n=Rs();if(e==="English")return t;const r=`Translate to ${e}: ${t}`;return(await n.models.generateContent({model:"gemini-2.5-flash",contents:r})).text||t},uD=async(t,e)=>{const n=Rs(),r=em(),s=gT(),i=`
    Act as the Chief Consular Officer for Enbee Education Center (Est 1997).
    Generate a strict "Internal Visa Bulletin" for ${t} ${e} Visa for Indian applicants.
    Context: Today is ${r}.
    
    Return VALID JSON ONLY:
    {
      "bulletinId": "EEC-${s}-[RANDOM_4_DIGIT]",
      "riskLevel": "Low" | "Medium" | "High",
      "economicTiesAnalysis": "2 sentences on what proves 'Economic Ties' specifically for ${t}.",
      "consularPsychology": "2 sentences on what the Visa Officer is subconsciously looking for in the interview.",
      "documentForensics": {
          "document": "Name of 1 specific sensitive document (e.g. Bank Statement)",
          "forgeryErrorReason": "1 common forensic error or forgery reason to avoid"
      },
      "recentPolicyShift": "Mention 1 recent or upcoming policy change/trend for ${s}."
    }
    `;try{const o=await n.models.generateContent({model:"gemini-2.5-flash",contents:i,config:{responseMimeType:"application/json"}}),a=JSON.parse(o.text||"{}");return a.riskLevel&&!["Low","Medium","High"].includes(a.riskLevel)&&(a.riskLevel="Medium"),a}catch(o){return console.error("Bulletin Gen Error",o),{bulletinId:"EEC-AUTO-FAIL",riskLevel:"Medium",economicTiesAnalysis:"Standard financial proof required.",consularPsychology:"Confidence and clarity are key.",documentForensics:"Ensure all bank statements are original.",recentPolicyShift:"Standard scrutiny applies."}}},ws=[{"@type":"EducationalOrganization",name:"EEC Alkapuri",address:{"@type":"PostalAddress",streetAddress:"3rd Floor, B-Wing, Windsor Plaza, RC Dutt Rd, Alkapuri, Vadodara",addressLocality:"Vadodara",addressRegion:"Gujarat",addressCountry:"India"},geo:{"@type":"GeoCoordinates",latitude:"22.3115",longitude:"73.1666"},timings:{coachingCounseling:"10:00 AM to 07:00 PM",demoClass:"08:00 AM to 09:00 PM",visaCounseling:"10:00 AM to 07:00 PM",workingDays:"Monday to Saturday",closedOn:"Sunday"},contactPoint:[{"@type":"ContactPoint",contactType:"Coaching Information",telephone:"+91 8000506539",url:"https://Wa.Me/918000506539"},{"@type":"ContactPoint",contactType:"Admission and Visa Information",telephone:"+91 8758750036",url:"https://Wa.Me/918758750036"}],counselors:[{name:"",phone:"8758750036",email:"eeccouns009@gmail.com"},{name:"",phone:"8758880430",email:"eeccouns60@gmail.com"}],googleReviews:{rating:4.7,reviewCount:1113,reviews:[{text:"Excellent service provided by staff and tutors of the institution.",rating:5},{text:"They patiently addressed all my queries and made the entire process a breeze.",rating:5},{text:"Teachers are supportive and reception people as well.",rating:5}],lastUpdated:"2025-12-19"},hasMap:"https://maps.app.goo.gl/2Fw9ZqQ2cxPnc7oG7",identifier:"1"},{"@type":"EducationalOrganization",name:"EEC Nizampura",address:{"@type":"PostalAddress",streetAddress:"2nd Floor, Procube Complex, Nizampura Rd, Above GSRTC Bus Station, Nizampura Main Road, Vadodara",addressLocality:"Vadodara",addressRegion:"Gujarat",addressCountry:"India"},geo:{"@type":"GeoCoordinates",latitude:"22.3364",longitude:"73.1729"},timings:{coachingCounseling:"10:00 AM to 07:00 PM",demoClass:"08:00 AM to 09:00 PM",visaCounseling:"10:00 AM to 07:00 PM",workingDays:"Monday to Saturday",closedOn:"Sunday"},contactPoint:[{"@type":"ContactPoint",contactType:"Coaching Information",telephone:"+91 8758753333",url:"https://Wa.Me/918758753333"},{"@type":"ContactPoint",contactType:"Admission and Visa Information",telephone:"+91 9375974748",url:"https://Wa.Me/919375974748"}],counselors:[{name:"",phone:"8758880045",email:"eecapply15@gmail.com"},{name:"",phone:"8758880590",email:"eeccouns57@gmail.com"},{name:"",phone:"8758880073",email:"eeccouns58@gmail.com"},{name:"",phone:"",email:"eecapply14@gmail.com"}],googleReviews:{rating:4.7,reviewCount:2104,reviews:[{text:"Reception staff gave very good service.",rating:5},{text:"Excellent work. Good tutor, help desk, and classroom facilities.",rating:5},{text:"Very Good Facility, Experienced Teachers & Other Staffs, Good Atmosphere.",rating:5}],lastUpdated:"2025-12-19"},hasMap:"https://maps.app.goo.gl/YdvZNZxtHWd2yc8c6",identifier:"2"},{"@type":"EducationalOrganization",name:"EEC Manjalpur",address:{"@type":"PostalAddress",streetAddress:"2nd Floor, Infinity Arcade, Opposite Pratapnagar Police HQ, ONGC Dairy Road, Manjalpur, Vadodara",addressLocality:"Vadodara",addressRegion:"Gujarat",addressCountry:"India"},geo:{"@type":"GeoCoordinates",latitude:"22.2723",longitude:"73.1931"},timings:{coachingCounseling:"10:00 AM to 07:00 PM",demoClass:"08:00 AM to 09:00 PM",visaCounseling:"10:00 AM to 07:00 PM",workingDays:"Monday to Saturday",closedOn:"Sunday"},contactPoint:[{"@type":"ContactPoint",contactType:"Coaching Information",telephone:"+91 8758750037",url:"https://Wa.Me/918758750037"},{"@type":"ContactPoint",contactType:"Admission and Visa Information",telephone:"+91 8758884882",url:"https://Wa.Me/918758884882"}],counselors:[{name:"",phone:"8758884882",email:"eeccouns026@gmail.com"}],googleReviews:{rating:4.8,reviewCount:495,reviews:[{text:"Excellent service and staff good experience",rating:5},{text:"Tutors have very supportive behaviour and always tries to solve the queries.",rating:5},{text:"Good environment and facilities, easy and hassle free booking experience",rating:5}],lastUpdated:"2025-12-19"},hasMap:"https://maps.app.goo.gl/UnPqodGxMcrEo3Fz5",identifier:"11"},{"@type":"EducationalOrganization",name:"EEC New Vip Road",address:{"@type":"PostalAddress",streetAddress:"2nd Floor, Shree Siddheshwar Plaza, New Vip Rd, Sheshnarayan Society, Sardar Estate, Sayaji Park Society, Vadodara",addressLocality:"Vadodara",addressRegion:"Gujarat",addressCountry:"India"},geo:{"@type":"GeoCoordinates",latitude:"22.3129",longitude:"73.2205"},timings:{coachingCounseling:"10:00 AM to 07:00 PM",demoClass:"08:00 AM to 09:00 PM",visaCounseling:"10:00 AM to 07:00 PM",workingDays:"Monday to Saturday",closedOn:"Sunday"},contactPoint:[{"@type":"ContactPoint",contactType:"Coaching Information",telephone:"+91 8758750040",url:"https://Wa.Me/918758750040"},{"@type":"ContactPoint",contactType:"Admission and Visa Information",telephone:"+91 8758880034",url:"https://Wa.Me/918758880034"}],counselors:[{name:"",phone:"8758880034",email:"eeccouns005@gmail.com"}],googleReviews:{rating:4.8,reviewCount:528,reviews:[{text:"Management faculties and teachers are super supportive regarding queries.",rating:5},{text:"Good response from staff very good explanation for ielts",rating:5},{text:"Best facilities with knowledgeable teacher Overall great experience",rating:5}],lastUpdated:"2025-12-19"},hasMap:"https://maps.app.goo.gl/KuJKjF8j3HPnjaDf6",identifier:"4"},{"@type":"EducationalOrganization",name:"EEC Nadiad",address:{"@type":"PostalAddress",streetAddress:"4th Floor, Nexus 2, College Rd, Opposite McDonalds, Nadiad",addressLocality:"Nadiad",addressRegion:"Gujarat",addressCountry:"India"},geo:{"@type":"GeoCoordinates",latitude:"22.6916",longitude:"72.8634"},timings:{coachingCounseling:"10:00 AM to 07:00 PM",demoClass:"08:00 AM to 09:00 PM",visaCounseling:"10:00 AM to 07:00 PM",workingDays:"Monday to Saturday",closedOn:"Sunday"},contactPoint:[{"@type":"ContactPoint",contactType:"Coaching Information",telephone:"+91 8758880010",url:"https://Wa.Me/918758880010"},{"@type":"ContactPoint",contactType:"Admission and Visa Information",telephone:"+91 8758880670",url:"https://Wa.Me/918758880670"}],counselors:[{name:"",phone:"8758880010",email:"eeccouns34@gmail.com"},{name:"",phone:"8758880670",email:"eecaustralia01@gmail.com"}],googleReviews:{rating:4.6,reviewCount:253,reviews:[{text:"Eec offers best facilities like tutor desk, free visa services which are awesome",rating:5},{text:"Got overall 7 bands, great experience, great faculties and great infrastructure",rating:5},{text:"Great place for students, very good ambience and staff",rating:5}],lastUpdated:"2025-12-19"},hasMap:"https://maps.app.goo.gl/RTNfRzf4G8Tdejrz5",identifier:"5"},{"@type":"EducationalOrganization",name:"EEC Vallabh Vidyanagar Anand",address:{"@type":"PostalAddress",streetAddress:"1st Floor, Sigma Prime Complex, Above Royal Enfield, Sardar Patel Statue Circle, Janta Road, Vallabh Vidyanagar, Anand",addressLocality:"Anand",addressRegion:"Gujarat",addressCountry:"India"},geo:{"@type":"GeoCoordinates",latitude:"22.5526",longitude:"72.9238"},timings:{coachingCounseling:"10:00 AM to 07:00 PM",demoClass:"08:00 AM to 09:00 PM",visaCounseling:"10:00 AM to 07:00 PM",workingDays:"Monday to Saturday",closedOn:"Sunday"},contactPoint:[{"@type":"ContactPoint",contactType:"Coaching Information",telephone:"+91 8758882884",url:"https://Wa.Me/918758882884"},{"@type":"ContactPoint",contactType:"Admission and Visa Information",telephone:"+91 8758882884",url:"https://Wa.Me/918758882884"}],counselors:[{name:"",phone:"8758750014",email:"eecvvnusa@gmail.com"},{name:"",phone:"8758882884",email:"eeccouns35@gmail.com"}],googleReviews:{rating:4.7,reviewCount:1784,reviews:[{text:"Good service and staff behaviour is extraordinary..love the experience",rating:5},{text:"Also, tutor desk is the most helpful place for improving the skills.",rating:5},{text:"Good tutors at the tutor help desk with great learning environment",rating:5}],lastUpdated:"2025-12-19"},hasMap:"https://maps.app.goo.gl/DQ6cuxAXGSncLrYbA",identifier:"6"},{"@type":"EducationalOrganization",name:"EEC Parvat Patia (Dumbhal)",address:{"@type":"PostalAddress",streetAddress:"UG-10, AMS, Shri Vardhan Textile Market, Above Zudio & Opp. Samrat International School, Dumbhal, Surat",addressLocality:"Surat",addressRegion:"Gujarat",addressCountry:"India"},geo:{"@type":"GeoCoordinates",latitude:"21.1959",longitude:"72.8634"},timings:{coachingCounseling:"10:00 AM to 07:00 PM",demoClass:"08:00 AM to 09:00 PM",visaCounseling:"10:00 AM to 07:00 PM",workingDays:"Monday to Saturday",closedOn:"Sunday"},contactPoint:[{"@type":"ContactPoint",contactType:"Coaching Information",telephone:"+91 8758880210",url:"https://Wa.Me/918758880210"},{"@type":"ContactPoint",contactType:"Admission and Visa Information",telephone:"+91 8758880210",url:"https://Wa.Me/918758880210"}],counselors:[{name:"",phone:"8758880210",email:"eecparvatpatiya@gmail.com"}],googleReviews:{rating:4.6,reviewCount:66,reviews:[{text:"Good teaching experience and bless with better surrounding and atmosphere.",rating:5},{text:"The experience was fabulous and facilities are also up to mark.",rating:5}],lastUpdated:"2025-12-19"},hasMap:"https://maps.app.goo.gl/v4X4Xn9drJngRj2h9",identifier:"7"},{"@type":"EducationalOrganization",name:"EEC Mota Varachha",address:{"@type":"PostalAddress",streetAddress:"4th Floor, Opera Business Hub, Lajamni Chowk, Mota Varachha, Surat",addressLocality:"Surat",addressRegion:"Gujarat",addressCountry:"India"},geo:{"@type":"GeoCoordinates",latitude:"21.2384",longitude:"72.8942"},timings:{coachingCounseling:"10:00 AM to 07:00 PM",demoClass:"08:00 AM to 09:00 PM",visaCounseling:"10:00 AM to 07:00 PM",workingDays:"Monday to Saturday",closedOn:"Sunday"},contactPoint:[{"@type":"ContactPoint",contactType:"Coaching Information",telephone:"+91 8758750018",url:"https://Wa.Me/918758750018"},{"@type":"ContactPoint",contactType:"Admission and Visa Information",telephone:"+91 8758880035",url:"https://Wa.Me/918758880035"}],counselors:[{name:"",phone:"8758880035",email:"eecvarachacanada@gmail.com"}],googleReviews:{rating:4.5,reviewCount:602,reviews:[{text:"Management system is well maintained and staff is very helpful !",rating:5},{text:"EEC is best place to prepare for IELTS exam and tutor desk is so helpful.",rating:5},{text:"My experience was goood in EEC and tutors were very helpful and friendly.",rating:5}],lastUpdated:"2025-12-19"},hasMap:"https://maps.app.goo.gl/zhgM8HA2CjJu8c6m9",identifier:"8"},{"@type":"EducationalOrganization",name:"EEC Katargam",address:{"@type":"PostalAddress",streetAddress:"2nd Floor, Neeru Farms, Rajhans Flamingo, Gajera Rd, Priya Park Society, Surat",addressLocality:"Surat",addressRegion:"Gujarat",addressCountry:"India"},geo:{"@type":"GeoCoordinates",latitude:"21.2291",longitude:"72.8286"},timings:{coachingCounseling:"10:00 AM to 07:00 PM",demoClass:"08:00 AM to 09:00 PM",visaCounseling:"10:00 AM to 07:00 PM",workingDays:"Monday to Saturday",closedOn:"Sunday"},contactPoint:[{"@type":"ContactPoint",contactType:"Coaching Information",telephone:"+91 8758880160",url:"https://Wa.Me/918758880160"},{"@type":"ContactPoint",contactType:"Admission and Visa Information",telephone:"+91 8758880630",url:"https://Wa.Me/918758880630"}],counselors:[{name:"",phone:"8758880630",email:"eeccouns49@gmail.com"}],googleReviews:{rating:4.9,reviewCount:152,reviews:[{text:"The environment is motivating, and the staff truly care about students' success.",rating:5},{text:"It's good place for all service and i am happy to take education from their",rating:5},{text:"Very nice experience and good facilities with that experience tutor too!",rating:5}],lastUpdated:"2025-12-19"},hasMap:"https://maps.app.goo.gl/6NfEPdx7ThDbkjtm8",identifier:"9"},{"@type":"EducationalOrganization",name:"EEC Ghod Dod Road",address:{"@type":"PostalAddress",streetAddress:"3rd Floor, Jade Blue Union Square, Ghod Dod Rd, Surat",addressLocality:"Surat",addressRegion:"Gujarat",addressCountry:"India"},geo:{"@type":"GeoCoordinates",latitude:"21.1764",longitude:"72.8066"},timings:{coachingCounseling:"10:00 AM to 07:00 PM",demoClass:"08:00 AM to 09:00 PM",visaCounseling:"10:00 AM to 07:00 PM",workingDays:"Monday to Saturday",closedOn:"Sunday"},contactPoint:[{"@type":"ContactPoint",contactType:"Coaching Information",telephone:"+91 8758757777",url:"https://Wa.Me/918758757777"},{"@type":"ContactPoint",contactType:"Admission and Visa Information",telephone:"+91 8758880170",url:"https://Wa.Me/918758880170"}],counselors:[{name:"",phone:"9227112456",email:"eeccouns59@gmail.com"},{name:"",phone:"8758880170",email:"eeccouns017@gmail.com"}],googleReviews:{rating:4.6,reviewCount:1136,reviews:[{text:"EEC is best coaching institution with tutor desk and staff",rating:5},{text:"Service of this institute is quite good and great place that i ever visited.",rating:5},{text:"It has amazing environment along with fantastic staffs and also the tutors.",rating:5}],lastUpdated:"2025-12-19"},hasMap:"https://maps.app.goo.gl/C3wzygXWeAHW6b8t5",identifier:"10"},{"@type":"EducationalOrganization",name:"EEC Vesu",address:{"@type":"PostalAddress",streetAddress:"1st Floor, International Finance Centre, IFC, Vip Rd, Vesu, Surat",addressLocality:"Surat",addressRegion:"Gujarat",addressCountry:"India"},geo:{"@type":"GeoCoordinates",latitude:"21.1517",longitude:"72.7752"},timings:{coachingCounseling:"10:00 AM to 07:00 PM",demoClass:"08:00 AM to 09:00 PM",visaCounseling:"10:00 AM to 07:00 PM",workingDays:"Monday to Saturday",closedOn:"Sunday"},contactPoint:[{"@type":"ContactPoint",contactType:"Coaching Information",telephone:"+91 8758750029",url:"https://Wa.Me/918758750029"},{"@type":"ContactPoint",contactType:"Admission and Visa Information",telephone:"+91 8758750029",url:"https://Wa.Me/918758750029"}],counselors:[{name:"",phone:"8758750029",email:"eecvesu@gmail.com"}],googleReviews:{rating:5,reviewCount:22,reviews:[{text:"For the best IELTS coaching and hassle-free visa filing, I highly recommend EEC.",rating:5},{text:"The staff is friendly and helpful, which makes the experience even better.",rating:5},{text:"The atmosphere is friendly, and they pay attention to every student's progress.",rating:5}],lastUpdated:"2025-12-19"},hasMap:"https://maps.app.goo.gl/dNUVu7cD7nE4mbcBA",identifier:"11"},{"@type":"EducationalOrganization",name:"EEC Vapi",address:{"@type":"PostalAddress",streetAddress:"3rd Floor, EEC, ISquare Building, Daman Rd, Opposite Axis Bank, Daulat Nagar, Vapi",addressLocality:"Vapi",addressRegion:"Gujarat",addressCountry:"India"},geo:{"@type":"GeoCoordinates",latitude:"20.3893",longitude:"72.9106"},timings:{coachingCounseling:"10:00 AM to 07:00 PM",demoClass:"08:00 AM to 09:00 PM",visaCounseling:"10:00 AM to 07:00 PM",workingDays:"Monday to Saturday",closedOn:"Sunday"},contactPoint:[{"@type":"ContactPoint",contactType:"Coaching Information",telephone:"+91 8758880040",url:"https://Wa.Me/918758880040"},{"@type":"ContactPoint",contactType:"Admission and Visa Information",telephone:"+91 8758880040",url:"https://Wa.Me/918758880040"}],counselors:[{name:"",phone:"8758880040",email:"eecvisavapi@gmail.com"}],googleReviews:{rating:4.8,reviewCount:340,reviews:[{text:"I had a very excellent experience in terms of behaviour by the EEC staff.",rating:5},{text:"I'm sure you will really like the atmosphere and the service provided here.",rating:5},{text:"Good faculties, better ambience and helpful tutors",rating:5}],lastUpdated:"2025-12-19"},hasMap:"https://maps.app.goo.gl/YiLTBLZhCm6rBdnD8",identifier:"12"},{"@type":"EducationalOrganization",name:"EEC Navsari",address:{"@type":"PostalAddress",streetAddress:"4th Floor, Sachi Arcade, Opp. Prajapati Ashram, Khumbharwad, Navsari",addressLocality:"Navsari",addressRegion:"Gujarat",addressCountry:"India"},geo:{"@type":"GeoCoordinates",latitude:"20.9467",longitude:"72.9520"},timings:{coachingCounseling:"10:00 AM to 07:00 PM",demoClass:"08:00 AM to 09:00 PM",visaCounseling:"10:00 AM to 07:00 PM",workingDays:"Monday to Saturday",closedOn:"Sunday"},contactPoint:[{"@type":"ContactPoint",contactType:"Coaching Information",telephone:"+91 8758880055",url:"https://Wa.Me/918758880055"},{"@type":"ContactPoint",contactType:"Admission and Visa Information",telephone:"+91 8758880055",url:"https://Wa.Me/918758880055"}],counselors:[{name:"",phone:"8758880055",email:"eeccouns48@gmail.com"},{name:"",phone:"",email:"eecnavsarivisa@gmail.com"},{name:"",phone:"6355511406",email:"eeccouns42@gmail.com"}],googleReviews:{rating:4.8,reviewCount:302,reviews:[{text:"Polite nd helping staff Fastest response nd genuine center I've ever seen!!",rating:5},{text:"Good institution where people learn IELTS and supportive instructor",rating:5},{text:"Great environment for studying as well as all faculties are very helpful",rating:5}],lastUpdated:"2025-12-19"},hasMap:"https://maps.app.goo.gl/MS9E6Rc53e8LA9Ly7",identifier:"13"},{"@type":"EducationalOrganization",name:"EEC Bharuch",address:{"@type":"PostalAddress",streetAddress:"3rd Floor, Shalimar Complex, Above Reliance Mart, Station Road, Bharuch",addressLocality:"Bharuch",addressRegion:"Gujarat",addressCountry:"India"},geo:{"@type":"GeoCoordinates",latitude:"21.7051",longitude:"72.9959"},timings:{coachingCounseling:"10:00 AM to 07:00 PM",demoClass:"08:00 AM to 09:00 PM",visaCounseling:"10:00 AM to 07:00 PM",workingDays:"Monday to Saturday",closedOn:"Sunday"},contactPoint:[{"@type":"ContactPoint",contactType:"Coaching Information",telephone:"+91 8758884889",url:"https://Wa.Me/918758884889"},{"@type":"ContactPoint",contactType:"Admission and Visa Information",telephone:"+91 8758884889",url:"https://Wa.Me/918758884889"}],counselors:[{name:"",phone:"8758884889",email:"eecbharuchvisa@gmail.com"}],googleReviews:{rating:4.8,reviewCount:699,reviews:[{text:"Excellent service provided by staff and tutors of the institution.",rating:5},{text:"Best place to grow your skills, best faculties...",rating:5},{text:"It was the great experience with good environment and fabulous teachers.",rating:5}],lastUpdated:"2025-12-19"},hasMap:"https://maps.app.goo.gl/VBAtqRoL3PiH4oBL9",identifier:"14"},{"@type":"EducationalOrganization",name:"EEC Memnagar",address:{"@type":"PostalAddress",streetAddress:"2nd Floor, Satya One, Opp. Manav Mandir, Helmet Circle, Memnagar, Ahmedabad",addressLocality:"Ahmedabad",addressRegion:"Gujarat",addressCountry:"India"},geo:{"@type":"GeoCoordinates",latitude:"23.0504",longitude:"72.5356"},timings:{coachingCounseling:"10:00 AM to 07:00 PM",demoClass:"08:00 AM to 09:00 PM",visaCounseling:"10:00 AM to 07:00 PM",workingDays:"Monday to Saturday",closedOn:"Sunday"},contactPoint:[{"@type":"ContactPoint",contactType:"Coaching Information",telephone:"+91 8758883889",url:"https://Wa.Me/918758883889"},{"@type":"ContactPoint",contactType:"Admission and Visa Information",telephone:"+91 8758880310",url:"https://Wa.Me/918758880310"}],counselors:[{name:"",phone:"8758880100",email:"eecukahmvisa@gmail.com"},{name:"",phone:"8758880490",email:"eeccouns54@gmail.com"},{name:"",phone:"8758880310",email:"eeccouns032@gmail.com"},{name:"",phone:"8758880510",email:"eecghatlodiyavisa01@gmail.com"}],googleReviews:{rating:4.6,reviewCount:936,reviews:[{text:"Had a great experience and a great staff and faculties and tutors.",rating:5},{text:"Excellent service and very helping tutor and teaching staff for all the modules.",rating:5},{text:"I have received visa and I'm extremely happy with the entire team and services.",rating:5}],lastUpdated:"2025-12-19"},hasMap:"https://maps.app.goo.gl/HabxCB5xTpg2CDwg6",identifier:"15"},{"@type":"EducationalOrganization",name:"EEC Ghatlodiya",address:{"@type":"PostalAddress",streetAddress:"3rd Floor, Shayona Sarvopari, Shayona City, RC Technical Road, Ghatlodiya, Chanakyapuri, Ahmedabad",addressLocality:"Ahmedabad",addressRegion:"Gujarat",addressCountry:"India"},geo:{"@type":"GeoCoordinates",latitude:"23.0710",longitude:"72.5356"},timings:{coachingCounseling:"10:00 AM to 07:00 PM",demoClass:"08:00 AM to 09:00 PM",visaCounseling:"10:00 AM to 07:00 PM",workingDays:"Monday to Saturday",closedOn:"Sunday"},contactPoint:[{"@type":"ContactPoint",contactType:"Coaching Information",telephone:"+91 8758880710",url:"https://Wa.Me/918758880710"},{"@type":"ContactPoint",contactType:"Admission and Visa Information",telephone:"+91 8758880018",url:"https://Wa.Me/918758880018"}],counselors:[{name:"",phone:"8758880018",email:"eecghatlodiyavisa@gmail.com"}],googleReviews:{rating:5,reviewCount:59,reviews:[{text:"The teaching staff, admin staff is very supportive.",rating:5},{text:"I definately recommend this place for spoken english.",rating:5},{text:"Overall experience was quite good and it enhanced my vocabulary skills.",rating:5}],lastUpdated:"2025-12-19"},hasMap:"https://maps.app.goo.gl/svz3SdkthSb6k1Kd6",identifier:"16"},{"@type":"EducationalOrganization",name:"EEC Chandkheda",address:{"@type":"PostalAddress",streetAddress:"4th Floor, Sigma Arcade, Above Vijay Sales, Near Visat Circle, Chandkheda, Ahmedabad",addressLocality:"Ahmedabad",addressRegion:"Gujarat",addressCountry:"India"},geo:{"@type":"GeoCoordinates",latitude:"23.1116",longitude:"72.5727"},timings:{coachingCounseling:"10:00 AM to 07:00 PM",demoClass:"08:00 AM to 09:00 PM",visaCounseling:"10:00 AM to 07:00 PM",workingDays:"Monday to Saturday",closedOn:"Sunday"},contactPoint:[{"@type":"ContactPoint",contactType:"Coaching Information",telephone:"+91 8758750010",url:"https://Wa.Me/918758750010"},{"@type":"ContactPoint",contactType:"Admission and Visa Information",telephone:"+91 8758750010",url:"https://Wa.Me/918758750010"}],counselors:[{name:"",phone:"8758750010",email:"eecchandkheda@gmail.com"}],googleReviews:{rating:4.7,reviewCount:144,reviews:[{text:"Enjoyed learning, fantastic job experience, worthy visa filing work.",rating:5},{text:"They solved all my queries as well as responded really politely and quickly.",rating:5},{text:"I got 7 bands today .. really appreciate all the efforts by the staff",rating:5}],lastUpdated:"2025-12-19"},hasMap:"https://maps.app.goo.gl/y1ARGMfmyjMxun728",identifier:"17"},{"@type":"EducationalOrganization",name:"EEC Maninagar",address:{"@type":"PostalAddress",streetAddress:"4th Floor, Prism Building, Below Apple Cinema, Shah Alam Tolnaka, Kankaria, Ahmedabad",addressLocality:"Ahmedabad",addressRegion:"Gujarat",addressCountry:"India"},geo:{"@type":"GeoCoordinates",latitude:"22.9972",longitude:"72.6033"},timings:{coachingCounseling:"10:00 AM to 07:00 PM",demoClass:"08:00 AM to 09:00 PM",visaCounseling:"10:00 AM to 07:00 PM",workingDays:"Monday to Saturday",closedOn:"Sunday"},contactPoint:[{"@type":"ContactPoint",contactType:"Coaching Information",telephone:"+91 7096083333",url:"https://Wa.Me/917096083333"},{"@type":"ContactPoint",contactType:"Admission and Visa Information",telephone:"+91 8758880015",url:"https://Wa.Me/918758880015"}],counselors:[{name:"",phone:"8758880015",email:"eeccouns39@gmail.com"}],googleReviews:{rating:4.6,reviewCount:533,reviews:[{text:"From applying for offer letter to Filing visa, my experience here was great.",rating:5},{text:"Loved the service of tutor desk",rating:5},{text:"Great place to study, good ambience and professional staff.",rating:5}],lastUpdated:"2025-12-19"},hasMap:"https://maps.app.goo.gl/zHAm836PeUWRQDDh7",identifier:"18"},{"@type":"EducationalOrganization",name:"EEC Odhav",address:{"@type":"PostalAddress",streetAddress:"2nd Floor, Kahan Commercial Complex, Sardar Patel Ring Rd, Above Vijay Sales, Gokul Nagar, Adinath Nagar, Odhav, Ahmedabad",addressLocality:"Ahmedabad",addressRegion:"Gujarat",addressCountry:"India"},geo:{"@type":"GeoCoordinates",latitude:"23.0249",longitude:"72.6657"},timings:{coachingCounseling:"10:00 AM to 07:00 PM",demoClass:"08:00 AM to 09:00 PM",visaCounseling:"10:00 AM to 07:00 PM",workingDays:"Monday to Saturday",closedOn:"Sunday"},contactPoint:[{"@type":"ContactPoint",contactType:"Coaching Information",telephone:"+91 8758881885",url:"https://Wa.Me/918758881885"},{"@type":"ContactPoint",contactType:"Admission and Visa Information",telephone:"+91 8758881885",url:"https://Wa.Me/918758881885"}],counselors:[{name:"",phone:"8758881885",email:"eeccouns55@gmail.com"},{name:"",phone:"8758880570",email:"eeccouns38@gmail.com"}],googleReviews:{rating:4.6,reviewCount:301,reviews:[{text:"They have a best supportive staff and gave the best service to students.",rating:5},{text:"I highly recommend it to my family and friends for every type of visa service.",rating:5},{text:"Prices of course are little bit more But they provied Quality Education.",rating:5}],lastUpdated:"2025-12-19"},hasMap:"https://maps.app.goo.gl/AM2hxunaJJw1mQes5",identifier:"19"},{"@type":"EducationalOrganization",name:"EEC Nikol",address:{"@type":"PostalAddress",streetAddress:"3rd Floor, Suvas Scala, Opp. Nikol Police Station, Nikol, Ahmedabad",addressLocality:"Ahmedabad",addressRegion:"Gujarat",addressCountry:"India"},geo:{"@type":"GeoCoordinates",latitude:"23.0451",longitude:"72.6657"},timings:{coachingCounseling:"10:00 AM to 07:00 PM",demoClass:"08:00 AM to 09:00 PM",visaCounseling:"10:00 AM to 07:00 PM",workingDays:"Monday to Saturday",closedOn:"Sunday"},contactPoint:[{"@type":"ContactPoint",contactType:"Coaching Information",telephone:"+91 8758880700",url:"https://Wa.Me/918758880700"},{"@type":"ContactPoint",contactType:"Admission and Visa Information",telephone:"+91 8758880700",url:"https://Wa.Me/918758880700"}],counselors:[{name:"",phone:"8758880700",email:"eecnikolvisa@gmail.com"}],googleReviews:{rating:4.9,reviewCount:402,reviews:[{text:"Best experience ever the staff and teachers are so friendly and kind.",rating:5},{text:"If you want quality IELTS prep with a smile, EEC is the place to be!",rating:5},{text:"The reading place and the area also hygienic and clean.",rating:5}],lastUpdated:"2025-12-19"},hasMap:"https://maps.app.goo.gl/wmFoU7EjVnZ6fUBU6",identifier:"20"},{"@type":"EducationalOrganization",name:"EEC Bapunagar",address:{"@type":"PostalAddress",streetAddress:"2nd Floor, White House, India Colony Road, Opposite Swaminarayan Mandir, Ahmedabad",addressLocality:"Ahmedabad",addressRegion:"Gujarat",addressCountry:"India"},geo:{"@type":"GeoCoordinates",latitude:"23.0427",longitude:"72.6289"},timings:{coachingCounseling:"10:00 AM to 07:00 PM",demoClass:"08:00 AM to 09:00 PM",visaCounseling:"10:00 AM to 07:00 PM",workingDays:"Monday to Saturday",closedOn:"Sunday"},contactPoint:[{"@type":"ContactPoint",contactType:"Coaching Information",telephone:"+91 8758880320",url:"https://Wa.Me/918758880320"},{"@type":"ContactPoint",contactType:"Admission and Visa Information",telephone:"+91 8758880390",url:"https://Wa.Me/918758880390"}],counselors:[{name:"",phone:"8758880390",email:"eecbapunagarvisa01@gmail.com"},{name:"",phone:"8758880390",email:"eecbapunagarvisa01@gmail.com"}],googleReviews:{rating:4.6,reviewCount:348,reviews:[{text:"Best place staff and atmosphere is awesome here",rating:5},{text:"I would like to thank all the respected teachers, tutors and staff members.",rating:5},{text:"Good ambience with supporting faculties Highly recommending for your IELTS",rating:5}],lastUpdated:"2025-12-19"},hasMap:"https://maps.app.goo.gl/TrwUQNXy2u2QA7vWA",identifier:"21"},{"@type":"EducationalOrganization",name:"EEC Naroda",address:{"@type":"PostalAddress",streetAddress:"2nd Floor, Sahitya Hills & Icon, Above Style Up Store, Muktidham Char Rasta, Vasant Vihar 2, Naroda, Ahmedabad",addressLocality:"Ahmedabad",addressRegion:"Gujarat",addressCountry:"India"},geo:{"@type":"GeoCoordinates",latitude:"23.0673",longitude:"72.6580"},timings:{coachingCounseling:"10:00 AM to 07:00 PM",demoClass:"08:00 AM to 09:00 PM",visaCounseling:"10:00 AM to 07:00 PM",workingDays:"Monday to Saturday",closedOn:"Sunday"},contactPoint:[{"@type":"ContactPoint",contactType:"Coaching Information",telephone:"+91 8758880730",url:"https://Wa.Me/918758880730"},{"@type":"ContactPoint",contactType:"Admission and Visa Information",telephone:"+91 8758880730",url:"https://Wa.Me/918758880730"}],counselors:[{name:"",phone:"8758880032",email:"eecnarodavisa@gmail.com"}],googleReviews:{rating:4.6,reviewCount:129,reviews:[{text:"Great teachers as well as tutors, great atmosphere for learning.",rating:5},{text:"I deeply appreciate the exemplary work and dedication of the EEC staff.",rating:5},{text:"Experience is very good, All teaching staff are very supportive.",rating:5}],lastUpdated:"2025-12-19"},hasMap:"https://maps.app.goo.gl/Ec65JHFzi4cy1e459",identifier:"22"},{"@type":"EducationalOrganization",name:"EEC Kalol",address:{"@type":"PostalAddress",streetAddress:"2nd Floor, Above Raymond, Near HDFC Bank, Navjivan Mill Compound, Memon Market, Kalol",addressLocality:"Kalol",addressRegion:"Gujarat",addressCountry:"India"},geo:{"@type":"GeoCoordinates",latitude:"23.2393",longitude:"72.4991"},timings:{coachingCounseling:"10:00 AM to 07:00 PM",demoClass:"08:00 AM to 09:00 PM",visaCounseling:"10:00 AM to 07:00 PM",workingDays:"Monday to Saturday",closedOn:"Sunday"},contactPoint:[{"@type":"ContactPoint",contactType:"Coaching Information",telephone:"+91 8758750090",url:"https://Wa.Me/918758750090"},{"@type":"ContactPoint",contactType:"Admission and Visa Information",telephone:"+91 8758750090",url:"https://Wa.Me/918758750090"}],counselors:[{name:"",phone:"8758750090",email:"eeckalol@gmail.com"}],googleReviews:{rating:4.8,reviewCount:283,reviews:[{text:"They provide good learning experience with the help of their tutors and staff.",rating:5},{text:"The teachers are very supportive, and the environment is motivating.",rating:5},{text:"The head manager and tutor are very supportive and have excellent experience.",rating:5}],lastUpdated:"2025-12-19"},hasMap:"https://maps.app.goo.gl/J7JbtSYwE9rRkXbi9",identifier:"23"},{"@type":"EducationalOrganization",name:"EEC Himatnagar",address:{"@type":"PostalAddress",streetAddress:"2nd Floor, Platinum Square Building, Opposite Post Office, Himatnagar",addressLocality:"Himatnagar",addressRegion:"Gujarat",addressCountry:"India"},geo:{"@type":"GeoCoordinates",latitude:"23.5977",longitude:"72.9698"},timings:{general:"09:00 AM to 06:00 PM",workingDays:"Monday to Saturday",closedOn:"Sunday"},contactPoint:[{"@type":"ContactPoint",contactType:"Coaching Information",telephone:"+91 8758750080",url:"https://Wa.Me/918758750080"},{"@type":"ContactPoint",contactType:"Admission and Visa Information",telephone:"+91 8758880080",url:"https://Wa.Me/918758880080"}],counselors:[{name:"",phone:"8758750080",email:"eechimatnagar@gmail.com"}],googleReviews:{rating:4.2,reviewCount:304,reviews:[{text:"Good quality teaching, infrastructure, communication so i give 10/10.",rating:5},{text:"Also Tutor desk is the best place to improve speaking and writing.",rating:5}],lastUpdated:"2025-12-19"},hasMap:"https://maps.app.goo.gl/KcBi8DfDZ4mzsnnu5",identifier:"24"},{"@type":"EducationalOrganization",name:"EEC Mehsana",address:{"@type":"PostalAddress",streetAddress:"2nd Floor, Perfect Plaza, Near Aayush Hospital, Radhanpur Road, Mehsana",addressLocality:"Mehsana",addressRegion:"Gujarat",addressCountry:"India"},geo:{"@type":"GeoCoordinates",latitude:"23.6000",longitude:"72.4000"},timings:{general:"09:00 AM to 06:00 PM",workingDays:"Monday to Saturday",closedOn:"Sunday"},contactPoint:[{"@type":"ContactPoint",contactType:"Coaching Information",telephone:"+91 8758880886",url:"https://Wa.Me/918758880886"},{"@type":"ContactPoint",contactType:"Admission and Visa Information",telephone:"+91 8758880069",url:"https://Wa.Me/918758880069"}],counselors:[{name:"",phone:"8758880069",email:"eecahmusa@gmail.com"}],googleReviews:{rating:4.5,reviewCount:195,reviews:[{text:"Good infrastructure and attractive interiors with a decent and calm environment.",rating:5},{text:"Tutor desk facility is very impressive for ielts practice",rating:5}],lastUpdated:"2025-12-19"},hasMap:"https://maps.app.goo.gl/HACNeuMnYg56HdTf6",identifier:"25"},{"@type":"EducationalOrganization",name:"EEC Visnagar",address:{"@type":"PostalAddress",streetAddress:"2nd Floor, Above Shukan Restaurant, Visnagar Kheralu Road, Visnagar",addressLocality:"Visnagar",addressRegion:"Gujarat",addressCountry:"India"},geo:{"@type":"GeoCoordinates",latitude:"23.7000",longitude:"72.5500"},timings:{general:"09:00 AM to 06:00 PM",workingDays:"Monday to Saturday",closedOn:"Sunday"},contactPoint:[{"@type":"ContactPoint",contactType:"Coaching Information",telephone:"+91 8758750086",url:"https://Wa.Me/918758750086"},{"@type":"ContactPoint",contactType:"Admission and Visa Information",telephone:"+91 8758750086",url:"https://Wa.Me/918758750086"}],counselors:[{name:"",phone:"8758750086",email:""}],googleReviews:{rating:4.7,reviewCount:141,reviews:[{text:"Had amazing experience with fantastic facilities as well as tutor.",rating:5},{text:"All the staff, teaching facilities and library are good.",rating:5},{text:"I would give full positive review to this place.",rating:5}],lastUpdated:"2025-12-19"},hasMap:"https://maps.app.goo.gl/WYhAJgDMYTwbLHUY6",identifier:"26"}],cD=()=>{};var Mv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yT=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},dD=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},vT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,h=i>>2,m=(i&3)<<4|a>>4;let g=(a&15)<<2|c>>6,v=c&63;l||(v=64,o||(g=64)),r.push(n[h],n[m],n[g],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(yT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):dD(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||m==null)throw new fD;const g=i<<2|a>>4;if(r.push(g),c!==64){const v=a<<4&240|c>>2;if(r.push(v),m!==64){const x=c<<6&192|m;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class fD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const hD=function(t){const e=yT(t);return vT.encodeByteArray(e,!0)},Bu=function(t){return hD(t).replace(/\./g,"")},_T=function(t){try{return vT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mD=()=>pD().__FIREBASE_DEFAULTS__,gD=()=>{if(typeof process>"u"||typeof Mv>"u")return;const t=Mv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},yD=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&_T(t[1]);return e&&JSON.parse(e)},kc=()=>{try{return cD()||mD()||gD()||yD()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},xT=t=>{var e,n;return(n=(e=kc())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},vD=t=>{const e=xT(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},wT=()=>{var t;return(t=kc())==null?void 0:t.config},ET=t=>{var e;return(e=kc())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hi(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function TT(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xD(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Bu(JSON.stringify(n)),Bu(JSON.stringify(o)),""].join(".")}const jo={};function wD(){const t={prod:[],emulator:[]};for(const e of Object.keys(jo))jo[e]?t.emulator.push(e):t.prod.push(e);return t}function ED(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Dv=!1;function CT(t,e){if(typeof window>"u"||typeof document>"u"||!Hi(window.location.host)||jo[t]===e||jo[t]||Dv)return;jo[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",i=wD().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function a(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function l(g,v){g.setAttribute("width","24"),g.setAttribute("id",v),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function c(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{Dv=!0,o()},g}function h(g,v){g.setAttribute("id",v),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function m(){const g=ED(r),v=n("text"),x=document.getElementById(v)||document.createElement("span"),I=n("learnmore"),P=document.getElementById(I)||document.createElement("a"),A=n("preprendIcon"),E=document.getElementById(A)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const k=g.element;a(k),h(P,I);const D=c();l(E,A),k.append(E,x,P,D),document.body.appendChild(k)}i?(x.innerText="Preview backend disconnected.",E.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(E.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function TD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Et())}function CD(){var e;const t=(e=kc())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function SD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ID(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function AD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function kD(){const t=Et();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function ND(){return!CD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function bD(){try{return typeof indexedDB=="object"}catch{return!1}}function RD(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PD="FirebaseError";class nr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=PD,Object.setPrototypeOf(this,nr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ua.prototype.create)}}class Ua{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?MD(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new nr(s,a,r)}}function MD(t,e){return t.replace(DD,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const DD=/\{\$([^}]+)}/g;function LD(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Es(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Lv(i)&&Lv(o)){if(!Es(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Lv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fa(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function VD(t,e){const n=new UD(t,e);return n.subscribe.bind(n)}class UD{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");FD(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Wd),s.error===void 0&&(s.error=Wd),s.complete===void 0&&(s.complete=Wd);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function FD(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Wd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(t){return t&&t._delegate?t._delegate:t}class Ts{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const os="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new _D;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(GD(e))try{this.getOrInitializeService({instanceIdentifier:os})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=os){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=os){return this.instances.has(e)}getOptions(e=os){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:BD(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=os){return this.component?this.component.multipleInstances?e:os:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function BD(t){return t===os?void 0:t}function GD(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new OD(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var de;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(de||(de={}));const HD={debug:de.DEBUG,verbose:de.VERBOSE,info:de.INFO,warn:de.WARN,error:de.ERROR,silent:de.SILENT},jD=de.INFO,zD={[de.DEBUG]:"log",[de.VERBOSE]:"log",[de.INFO]:"info",[de.WARN]:"warn",[de.ERROR]:"error"},$D=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=zD[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class tm{constructor(e){this.name=e,this._logLevel=jD,this._logHandler=$D,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in de))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?HD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,de.DEBUG,...e),this._logHandler(this,de.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,de.VERBOSE,...e),this._logHandler(this,de.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,de.INFO,...e),this._logHandler(this,de.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,de.WARN,...e),this._logHandler(this,de.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,de.ERROR,...e),this._logHandler(this,de.ERROR,...e)}}const WD=(t,e)=>e.some(n=>t instanceof n);let Vv,Uv;function KD(){return Vv||(Vv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function JD(){return Uv||(Uv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ST=new WeakMap,ph=new WeakMap,IT=new WeakMap,Kd=new WeakMap,nm=new WeakMap;function YD(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(br(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&ST.set(n,t)}).catch(()=>{}),nm.set(e,t),e}function QD(t){if(ph.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});ph.set(t,e)}let mh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ph.get(t);if(e==="objectStoreNames")return t.objectStoreNames||IT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return br(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function XD(t){mh=t(mh)}function ZD(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Jd(this),e,...n);return IT.set(r,e.sort?e.sort():[e]),br(r)}:JD().includes(t)?function(...e){return t.apply(Jd(this),e),br(ST.get(this))}:function(...e){return br(t.apply(Jd(this),e))}}function e4(t){return typeof t=="function"?ZD(t):(t instanceof IDBTransaction&&QD(t),WD(t,KD())?new Proxy(t,mh):t)}function br(t){if(t instanceof IDBRequest)return YD(t);if(Kd.has(t))return Kd.get(t);const e=e4(t);return e!==t&&(Kd.set(t,e),nm.set(e,t)),e}const Jd=t=>nm.get(t);function t4(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=br(o);return r&&o.addEventListener("upgradeneeded",l=>{r(br(o.result),l.oldVersion,l.newVersion,br(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const n4=["get","getKey","getAll","getAllKeys","count"],r4=["put","add","delete","clear"],Yd=new Map;function Fv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Yd.get(e))return Yd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=r4.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||n4.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return Yd.set(e,i),i}XD(t=>({...t,get:(e,n,r)=>Fv(e,n)||t.get(e,n,r),has:(e,n)=>!!Fv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(i4(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function i4(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const gh="@firebase/app",Ov="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kn=new tm("@firebase/app"),o4="@firebase/app-compat",a4="@firebase/analytics-compat",l4="@firebase/analytics",u4="@firebase/app-check-compat",c4="@firebase/app-check",d4="@firebase/auth",f4="@firebase/auth-compat",h4="@firebase/database",p4="@firebase/data-connect",m4="@firebase/database-compat",g4="@firebase/functions",y4="@firebase/functions-compat",v4="@firebase/installations",_4="@firebase/installations-compat",x4="@firebase/messaging",w4="@firebase/messaging-compat",E4="@firebase/performance",T4="@firebase/performance-compat",C4="@firebase/remote-config",S4="@firebase/remote-config-compat",I4="@firebase/storage",A4="@firebase/storage-compat",k4="@firebase/firestore",N4="@firebase/ai",b4="@firebase/firestore-compat",R4="firebase",P4="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yh="[DEFAULT]",M4={[gh]:"fire-core",[o4]:"fire-core-compat",[l4]:"fire-analytics",[a4]:"fire-analytics-compat",[c4]:"fire-app-check",[u4]:"fire-app-check-compat",[d4]:"fire-auth",[f4]:"fire-auth-compat",[h4]:"fire-rtdb",[p4]:"fire-data-connect",[m4]:"fire-rtdb-compat",[g4]:"fire-fn",[y4]:"fire-fn-compat",[v4]:"fire-iid",[_4]:"fire-iid-compat",[x4]:"fire-fcm",[w4]:"fire-fcm-compat",[E4]:"fire-perf",[T4]:"fire-perf-compat",[C4]:"fire-rc",[S4]:"fire-rc-compat",[I4]:"fire-gcs",[A4]:"fire-gcs-compat",[k4]:"fire-fst",[b4]:"fire-fst-compat",[N4]:"fire-vertex","fire-js":"fire-js",[R4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gu=new Map,D4=new Map,vh=new Map;function Bv(t,e){try{t.container.addComponent(e)}catch(n){Kn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ai(t){const e=t.name;if(vh.has(e))return Kn.debug(`There were multiple attempts to register component ${e}.`),!1;vh.set(e,t);for(const n of Gu.values())Bv(n,t);for(const n of D4.values())Bv(n,t);return!0}function rm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function En(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Rr=new Ua("app","Firebase",L4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ts("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Rr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ji=P4;function AT(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:yh,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Rr.create("bad-app-name",{appName:String(s)});if(n||(n=wT()),!n)throw Rr.create("no-options");const i=Gu.get(s);if(i){if(Es(n,i.options)&&Es(r,i.config))return i;throw Rr.create("duplicate-app",{appName:s})}const o=new qD(s);for(const l of vh.values())o.addComponent(l);const a=new V4(n,r,o);return Gu.set(s,a),a}function kT(t=yh){const e=Gu.get(t);if(!e&&t===yh&&wT())return AT();if(!e)throw Rr.create("no-app",{appName:t});return e}function Pr(t,e,n){let r=M4[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Kn.warn(o.join(" "));return}Ai(new Ts(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U4="firebase-heartbeat-database",F4=1,ga="firebase-heartbeat-store";let Qd=null;function NT(){return Qd||(Qd=t4(U4,F4,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ga)}catch(n){console.warn(n)}}}}).catch(t=>{throw Rr.create("idb-open",{originalErrorMessage:t.message})})),Qd}async function O4(t){try{const n=(await NT()).transaction(ga),r=await n.objectStore(ga).get(bT(t));return await n.done,r}catch(e){if(e instanceof nr)Kn.warn(e.message);else{const n=Rr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Kn.warn(n.message)}}}async function Gv(t,e){try{const r=(await NT()).transaction(ga,"readwrite");await r.objectStore(ga).put(e,bT(t)),await r.done}catch(n){if(n instanceof nr)Kn.warn(n.message);else{const r=Rr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Kn.warn(r.message)}}}function bT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B4=1024,G4=30;class q4{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new j4(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=qv();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>G4){const o=z4(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Kn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=qv(),{heartbeatsToSend:r,unsentEntries:s}=H4(this._heartbeatsCache.heartbeats),i=Bu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Kn.warn(n),""}}}function qv(){return new Date().toISOString().substring(0,10)}function H4(t,e=B4){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Hv(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Hv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class j4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return bD()?RD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await O4(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Gv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Gv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Hv(t){return Bu(JSON.stringify({version:2,heartbeats:t})).length}function z4(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $4(t){Ai(new Ts("platform-logger",e=>new s4(e),"PRIVATE")),Ai(new Ts("heartbeat",e=>new q4(e),"PRIVATE")),Pr(gh,Ov,t),Pr(gh,Ov,"esm2020"),Pr("fire-js","")}$4("");var W4="firebase",K4="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pr(W4,K4,"app");var jv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Mr,RT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,w){function C(){}C.prototype=w.prototype,T.F=w.prototype,T.prototype=new C,T.prototype.constructor=T,T.D=function(R,N,M){for(var b=Array(arguments.length-2),X=2;X<arguments.length;X++)b[X-2]=arguments[X];return w.prototype[N].apply(R,b)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,w,C){C||(C=0);const R=Array(16);if(typeof w=="string")for(var N=0;N<16;++N)R[N]=w.charCodeAt(C++)|w.charCodeAt(C++)<<8|w.charCodeAt(C++)<<16|w.charCodeAt(C++)<<24;else for(N=0;N<16;++N)R[N]=w[C++]|w[C++]<<8|w[C++]<<16|w[C++]<<24;w=T.g[0],C=T.g[1],N=T.g[2];let M=T.g[3],b;b=w+(M^C&(N^M))+R[0]+3614090360&4294967295,w=C+(b<<7&4294967295|b>>>25),b=M+(N^w&(C^N))+R[1]+3905402710&4294967295,M=w+(b<<12&4294967295|b>>>20),b=N+(C^M&(w^C))+R[2]+606105819&4294967295,N=M+(b<<17&4294967295|b>>>15),b=C+(w^N&(M^w))+R[3]+3250441966&4294967295,C=N+(b<<22&4294967295|b>>>10),b=w+(M^C&(N^M))+R[4]+4118548399&4294967295,w=C+(b<<7&4294967295|b>>>25),b=M+(N^w&(C^N))+R[5]+1200080426&4294967295,M=w+(b<<12&4294967295|b>>>20),b=N+(C^M&(w^C))+R[6]+2821735955&4294967295,N=M+(b<<17&4294967295|b>>>15),b=C+(w^N&(M^w))+R[7]+4249261313&4294967295,C=N+(b<<22&4294967295|b>>>10),b=w+(M^C&(N^M))+R[8]+1770035416&4294967295,w=C+(b<<7&4294967295|b>>>25),b=M+(N^w&(C^N))+R[9]+2336552879&4294967295,M=w+(b<<12&4294967295|b>>>20),b=N+(C^M&(w^C))+R[10]+4294925233&4294967295,N=M+(b<<17&4294967295|b>>>15),b=C+(w^N&(M^w))+R[11]+2304563134&4294967295,C=N+(b<<22&4294967295|b>>>10),b=w+(M^C&(N^M))+R[12]+1804603682&4294967295,w=C+(b<<7&4294967295|b>>>25),b=M+(N^w&(C^N))+R[13]+4254626195&4294967295,M=w+(b<<12&4294967295|b>>>20),b=N+(C^M&(w^C))+R[14]+2792965006&4294967295,N=M+(b<<17&4294967295|b>>>15),b=C+(w^N&(M^w))+R[15]+1236535329&4294967295,C=N+(b<<22&4294967295|b>>>10),b=w+(N^M&(C^N))+R[1]+4129170786&4294967295,w=C+(b<<5&4294967295|b>>>27),b=M+(C^N&(w^C))+R[6]+3225465664&4294967295,M=w+(b<<9&4294967295|b>>>23),b=N+(w^C&(M^w))+R[11]+643717713&4294967295,N=M+(b<<14&4294967295|b>>>18),b=C+(M^w&(N^M))+R[0]+3921069994&4294967295,C=N+(b<<20&4294967295|b>>>12),b=w+(N^M&(C^N))+R[5]+3593408605&4294967295,w=C+(b<<5&4294967295|b>>>27),b=M+(C^N&(w^C))+R[10]+38016083&4294967295,M=w+(b<<9&4294967295|b>>>23),b=N+(w^C&(M^w))+R[15]+3634488961&4294967295,N=M+(b<<14&4294967295|b>>>18),b=C+(M^w&(N^M))+R[4]+3889429448&4294967295,C=N+(b<<20&4294967295|b>>>12),b=w+(N^M&(C^N))+R[9]+568446438&4294967295,w=C+(b<<5&4294967295|b>>>27),b=M+(C^N&(w^C))+R[14]+3275163606&4294967295,M=w+(b<<9&4294967295|b>>>23),b=N+(w^C&(M^w))+R[3]+4107603335&4294967295,N=M+(b<<14&4294967295|b>>>18),b=C+(M^w&(N^M))+R[8]+1163531501&4294967295,C=N+(b<<20&4294967295|b>>>12),b=w+(N^M&(C^N))+R[13]+2850285829&4294967295,w=C+(b<<5&4294967295|b>>>27),b=M+(C^N&(w^C))+R[2]+4243563512&4294967295,M=w+(b<<9&4294967295|b>>>23),b=N+(w^C&(M^w))+R[7]+1735328473&4294967295,N=M+(b<<14&4294967295|b>>>18),b=C+(M^w&(N^M))+R[12]+2368359562&4294967295,C=N+(b<<20&4294967295|b>>>12),b=w+(C^N^M)+R[5]+4294588738&4294967295,w=C+(b<<4&4294967295|b>>>28),b=M+(w^C^N)+R[8]+2272392833&4294967295,M=w+(b<<11&4294967295|b>>>21),b=N+(M^w^C)+R[11]+1839030562&4294967295,N=M+(b<<16&4294967295|b>>>16),b=C+(N^M^w)+R[14]+4259657740&4294967295,C=N+(b<<23&4294967295|b>>>9),b=w+(C^N^M)+R[1]+2763975236&4294967295,w=C+(b<<4&4294967295|b>>>28),b=M+(w^C^N)+R[4]+1272893353&4294967295,M=w+(b<<11&4294967295|b>>>21),b=N+(M^w^C)+R[7]+4139469664&4294967295,N=M+(b<<16&4294967295|b>>>16),b=C+(N^M^w)+R[10]+3200236656&4294967295,C=N+(b<<23&4294967295|b>>>9),b=w+(C^N^M)+R[13]+681279174&4294967295,w=C+(b<<4&4294967295|b>>>28),b=M+(w^C^N)+R[0]+3936430074&4294967295,M=w+(b<<11&4294967295|b>>>21),b=N+(M^w^C)+R[3]+3572445317&4294967295,N=M+(b<<16&4294967295|b>>>16),b=C+(N^M^w)+R[6]+76029189&4294967295,C=N+(b<<23&4294967295|b>>>9),b=w+(C^N^M)+R[9]+3654602809&4294967295,w=C+(b<<4&4294967295|b>>>28),b=M+(w^C^N)+R[12]+3873151461&4294967295,M=w+(b<<11&4294967295|b>>>21),b=N+(M^w^C)+R[15]+530742520&4294967295,N=M+(b<<16&4294967295|b>>>16),b=C+(N^M^w)+R[2]+3299628645&4294967295,C=N+(b<<23&4294967295|b>>>9),b=w+(N^(C|~M))+R[0]+4096336452&4294967295,w=C+(b<<6&4294967295|b>>>26),b=M+(C^(w|~N))+R[7]+1126891415&4294967295,M=w+(b<<10&4294967295|b>>>22),b=N+(w^(M|~C))+R[14]+2878612391&4294967295,N=M+(b<<15&4294967295|b>>>17),b=C+(M^(N|~w))+R[5]+4237533241&4294967295,C=N+(b<<21&4294967295|b>>>11),b=w+(N^(C|~M))+R[12]+1700485571&4294967295,w=C+(b<<6&4294967295|b>>>26),b=M+(C^(w|~N))+R[3]+2399980690&4294967295,M=w+(b<<10&4294967295|b>>>22),b=N+(w^(M|~C))+R[10]+4293915773&4294967295,N=M+(b<<15&4294967295|b>>>17),b=C+(M^(N|~w))+R[1]+2240044497&4294967295,C=N+(b<<21&4294967295|b>>>11),b=w+(N^(C|~M))+R[8]+1873313359&4294967295,w=C+(b<<6&4294967295|b>>>26),b=M+(C^(w|~N))+R[15]+4264355552&4294967295,M=w+(b<<10&4294967295|b>>>22),b=N+(w^(M|~C))+R[6]+2734768916&4294967295,N=M+(b<<15&4294967295|b>>>17),b=C+(M^(N|~w))+R[13]+1309151649&4294967295,C=N+(b<<21&4294967295|b>>>11),b=w+(N^(C|~M))+R[4]+4149444226&4294967295,w=C+(b<<6&4294967295|b>>>26),b=M+(C^(w|~N))+R[11]+3174756917&4294967295,M=w+(b<<10&4294967295|b>>>22),b=N+(w^(M|~C))+R[2]+718787259&4294967295,N=M+(b<<15&4294967295|b>>>17),b=C+(M^(N|~w))+R[9]+3951481745&4294967295,T.g[0]=T.g[0]+w&4294967295,T.g[1]=T.g[1]+(N+(b<<21&4294967295|b>>>11))&4294967295,T.g[2]=T.g[2]+N&4294967295,T.g[3]=T.g[3]+M&4294967295}r.prototype.v=function(T,w){w===void 0&&(w=T.length);const C=w-this.blockSize,R=this.C;let N=this.h,M=0;for(;M<w;){if(N==0)for(;M<=C;)s(this,T,M),M+=this.blockSize;if(typeof T=="string"){for(;M<w;)if(R[N++]=T.charCodeAt(M++),N==this.blockSize){s(this,R),N=0;break}}else for(;M<w;)if(R[N++]=T[M++],N==this.blockSize){s(this,R),N=0;break}}this.h=N,this.o+=w},r.prototype.A=function(){var T=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);T[0]=128;for(var w=1;w<T.length-8;++w)T[w]=0;w=this.o*8;for(var C=T.length-8;C<T.length;++C)T[C]=w&255,w/=256;for(this.v(T),T=Array(16),w=0,C=0;C<4;++C)for(let R=0;R<32;R+=8)T[w++]=this.g[C]>>>R&255;return T};function i(T,w){var C=a;return Object.prototype.hasOwnProperty.call(C,T)?C[T]:C[T]=w(T)}function o(T,w){this.h=w;const C=[];let R=!0;for(let N=T.length-1;N>=0;N--){const M=T[N]|0;R&&M==w||(C[N]=M,R=!1)}this.g=C}var a={};function l(T){return-128<=T&&T<128?i(T,function(w){return new o([w|0],w<0?-1:0)}):new o([T|0],T<0?-1:0)}function c(T){if(isNaN(T)||!isFinite(T))return m;if(T<0)return P(c(-T));const w=[];let C=1;for(let R=0;T>=C;R++)w[R]=T/C|0,C*=4294967296;return new o(w,0)}function h(T,w){if(T.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(T.charAt(0)=="-")return P(h(T.substring(1),w));if(T.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=c(Math.pow(w,8));let R=m;for(let M=0;M<T.length;M+=8){var N=Math.min(8,T.length-M);const b=parseInt(T.substring(M,M+N),w);N<8?(N=c(Math.pow(w,N)),R=R.j(N).add(c(b))):(R=R.j(C),R=R.add(c(b)))}return R}var m=l(0),g=l(1),v=l(16777216);t=o.prototype,t.m=function(){if(I(this))return-P(this).m();let T=0,w=1;for(let C=0;C<this.g.length;C++){const R=this.i(C);T+=(R>=0?R:4294967296+R)*w,w*=4294967296}return T},t.toString=function(T){if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(x(this))return"0";if(I(this))return"-"+P(this).toString(T);const w=c(Math.pow(T,6));var C=this;let R="";for(;;){const N=D(C,w).g;C=A(C,N.j(w));let M=((C.g.length>0?C.g[0]:C.h)>>>0).toString(T);if(C=N,x(C))return M+R;for(;M.length<6;)M="0"+M;R=M+R}},t.i=function(T){return T<0?0:T<this.g.length?this.g[T]:this.h};function x(T){if(T.h!=0)return!1;for(let w=0;w<T.g.length;w++)if(T.g[w]!=0)return!1;return!0}function I(T){return T.h==-1}t.l=function(T){return T=A(this,T),I(T)?-1:x(T)?0:1};function P(T){const w=T.g.length,C=[];for(let R=0;R<w;R++)C[R]=~T.g[R];return new o(C,~T.h).add(g)}t.abs=function(){return I(this)?P(this):this},t.add=function(T){const w=Math.max(this.g.length,T.g.length),C=[];let R=0;for(let N=0;N<=w;N++){let M=R+(this.i(N)&65535)+(T.i(N)&65535),b=(M>>>16)+(this.i(N)>>>16)+(T.i(N)>>>16);R=b>>>16,M&=65535,b&=65535,C[N]=b<<16|M}return new o(C,C[C.length-1]&-2147483648?-1:0)};function A(T,w){return T.add(P(w))}t.j=function(T){if(x(this)||x(T))return m;if(I(this))return I(T)?P(this).j(P(T)):P(P(this).j(T));if(I(T))return P(this.j(P(T)));if(this.l(v)<0&&T.l(v)<0)return c(this.m()*T.m());const w=this.g.length+T.g.length,C=[];for(var R=0;R<2*w;R++)C[R]=0;for(R=0;R<this.g.length;R++)for(let N=0;N<T.g.length;N++){const M=this.i(R)>>>16,b=this.i(R)&65535,X=T.i(N)>>>16,_e=T.i(N)&65535;C[2*R+2*N]+=b*_e,E(C,2*R+2*N),C[2*R+2*N+1]+=M*_e,E(C,2*R+2*N+1),C[2*R+2*N+1]+=b*X,E(C,2*R+2*N+1),C[2*R+2*N+2]+=M*X,E(C,2*R+2*N+2)}for(T=0;T<w;T++)C[T]=C[2*T+1]<<16|C[2*T];for(T=w;T<2*w;T++)C[T]=0;return new o(C,0)};function E(T,w){for(;(T[w]&65535)!=T[w];)T[w+1]+=T[w]>>>16,T[w]&=65535,w++}function k(T,w){this.g=T,this.h=w}function D(T,w){if(x(w))throw Error("division by zero");if(x(T))return new k(m,m);if(I(T))return w=D(P(T),w),new k(P(w.g),P(w.h));if(I(w))return w=D(T,P(w)),new k(P(w.g),w.h);if(T.g.length>30){if(I(T)||I(w))throw Error("slowDivide_ only works with positive integers.");for(var C=g,R=w;R.l(T)<=0;)C=U(C),R=U(R);var N=L(C,1),M=L(R,1);for(R=L(R,2),C=L(C,2);!x(R);){var b=M.add(R);b.l(T)<=0&&(N=N.add(C),M=b),R=L(R,1),C=L(C,1)}return w=A(T,N.j(w)),new k(N,w)}for(N=m;T.l(w)>=0;){for(C=Math.max(1,Math.floor(T.m()/w.m())),R=Math.ceil(Math.log(C)/Math.LN2),R=R<=48?1:Math.pow(2,R-48),M=c(C),b=M.j(w);I(b)||b.l(T)>0;)C-=R,M=c(C),b=M.j(w);x(M)&&(M=g),N=N.add(M),T=A(T,b)}return new k(N,T)}t.B=function(T){return D(this,T).h},t.and=function(T){const w=Math.max(this.g.length,T.g.length),C=[];for(let R=0;R<w;R++)C[R]=this.i(R)&T.i(R);return new o(C,this.h&T.h)},t.or=function(T){const w=Math.max(this.g.length,T.g.length),C=[];for(let R=0;R<w;R++)C[R]=this.i(R)|T.i(R);return new o(C,this.h|T.h)},t.xor=function(T){const w=Math.max(this.g.length,T.g.length),C=[];for(let R=0;R<w;R++)C[R]=this.i(R)^T.i(R);return new o(C,this.h^T.h)};function U(T){const w=T.g.length+1,C=[];for(let R=0;R<w;R++)C[R]=T.i(R)<<1|T.i(R-1)>>>31;return new o(C,T.h)}function L(T,w){const C=w>>5;w%=32;const R=T.g.length-C,N=[];for(let M=0;M<R;M++)N[M]=w>0?T.i(M+C)>>>w|T.i(M+C+1)<<32-w:T.i(M+C);return new o(N,T.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,RT=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,Mr=o}).apply(typeof jv<"u"?jv:typeof self<"u"?self:typeof window<"u"?window:{});var Nl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var PT,bo,MT,Xl,_h,DT,LT,VT;(function(){var t,e=Object.defineProperty;function n(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof Nl=="object"&&Nl];for(var y=0;y<f.length;++y){var _=f[y];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=n(this);function s(f,y){if(y)e:{var _=r;f=f.split(".");for(var S=0;S<f.length-1;S++){var V=f[S];if(!(V in _))break e;_=_[V]}f=f[f.length-1],S=_[f],y=y(S),y!=S&&y!=null&&e(_,f,{configurable:!0,writable:!0,value:y})}}s("Symbol.dispose",function(f){return f||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(f){return f||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(f){return f||function(y){var _=[],S;for(S in y)Object.prototype.hasOwnProperty.call(y,S)&&_.push([S,y[S]]);return _}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function a(f){var y=typeof f;return y=="object"&&f!=null||y=="function"}function l(f,y,_){return f.call.apply(f.bind,arguments)}function c(f,y,_){return c=l,c.apply(null,arguments)}function h(f,y){var _=Array.prototype.slice.call(arguments,1);return function(){var S=_.slice();return S.push.apply(S,arguments),f.apply(this,S)}}function m(f,y){function _(){}_.prototype=y.prototype,f.Z=y.prototype,f.prototype=new _,f.prototype.constructor=f,f.Ob=function(S,V,O){for(var W=Array(arguments.length-2),ue=2;ue<arguments.length;ue++)W[ue-2]=arguments[ue];return y.prototype[V].apply(S,W)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?f=>f&&AsyncContext.Snapshot.wrap(f):f=>f;function v(f){const y=f.length;if(y>0){const _=Array(y);for(let S=0;S<y;S++)_[S]=f[S];return _}return[]}function x(f,y){for(let S=1;S<arguments.length;S++){const V=arguments[S];var _=typeof V;if(_=_!="object"?_:V?Array.isArray(V)?"array":_:"null",_=="array"||_=="object"&&typeof V.length=="number"){_=f.length||0;const O=V.length||0;f.length=_+O;for(let W=0;W<O;W++)f[_+W]=V[W]}else f.push(V)}}class I{constructor(y,_){this.i=y,this.j=_,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function P(f){o.setTimeout(()=>{throw f},0)}function A(){var f=T;let y=null;return f.g&&(y=f.g,f.g=f.g.next,f.g||(f.h=null),y.next=null),y}class E{constructor(){this.h=this.g=null}add(y,_){const S=k.get();S.set(y,_),this.h?this.h.next=S:this.g=S,this.h=S}}var k=new I(()=>new D,f=>f.reset());class D{constructor(){this.next=this.g=this.h=null}set(y,_){this.h=y,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let U,L=!1,T=new E,w=()=>{const f=Promise.resolve(void 0);U=()=>{f.then(C)}};function C(){for(var f;f=A();){try{f.h.call(f.g)}catch(_){P(_)}var y=k;y.j(f),y.h<100&&(y.h++,f.next=y.g,y.g=f)}L=!1}function R(){this.u=this.u,this.C=this.C}R.prototype.u=!1,R.prototype.dispose=function(){this.u||(this.u=!0,this.N())},R.prototype[Symbol.dispose]=function(){this.dispose()},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(f,y){this.type=f,this.g=this.target=y,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var M=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var f=!1,y=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const _=()=>{};o.addEventListener("test",_,y),o.removeEventListener("test",_,y)}catch{}return f}();function b(f){return/^[\s\xa0]*$/.test(f)}function X(f,y){N.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f&&this.init(f,y)}m(X,N),X.prototype.init=function(f,y){const _=this.type=f.type,S=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;this.target=f.target||f.srcElement,this.g=y,y=f.relatedTarget,y||(_=="mouseover"?y=f.fromElement:_=="mouseout"&&(y=f.toElement)),this.relatedTarget=y,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=f.pointerType,this.state=f.state,this.i=f,f.defaultPrevented&&X.Z.h.call(this)},X.prototype.h=function(){X.Z.h.call(this);const f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var _e="closure_listenable_"+(Math.random()*1e6|0),pe=0;function ye(f,y,_,S,V){this.listener=f,this.proxy=null,this.src=y,this.type=_,this.capture=!!S,this.ha=V,this.key=++pe,this.da=this.fa=!1}function B(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function j(f,y,_){for(const S in f)y.call(_,f[S],S,f)}function z(f,y){for(const _ in f)y.call(void 0,f[_],_,f)}function ee(f){const y={};for(const _ in f)y[_]=f[_];return y}const le="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function bt(f,y){let _,S;for(let V=1;V<arguments.length;V++){S=arguments[V];for(_ in S)f[_]=S[_];for(let O=0;O<le.length;O++)_=le[O],Object.prototype.hasOwnProperty.call(S,_)&&(f[_]=S[_])}}function Ee(f){this.src=f,this.g={},this.h=0}Ee.prototype.add=function(f,y,_,S,V){const O=f.toString();f=this.g[O],f||(f=this.g[O]=[],this.h++);const W=ie(f,y,S,V);return W>-1?(y=f[W],_||(y.fa=!1)):(y=new ye(y,this.src,O,!!S,V),y.fa=_,f.push(y)),y};function Xe(f,y){const _=y.type;if(_ in f.g){var S=f.g[_],V=Array.prototype.indexOf.call(S,y,void 0),O;(O=V>=0)&&Array.prototype.splice.call(S,V,1),O&&(B(y),f.g[_].length==0&&(delete f.g[_],f.h--))}}function ie(f,y,_,S){for(let V=0;V<f.length;++V){const O=f[V];if(!O.da&&O.listener==y&&O.capture==!!_&&O.ha==S)return V}return-1}var Ce="closure_lm_"+(Math.random()*1e6|0),rt={};function ct(f,y,_,S,V){if(Array.isArray(y)){for(let O=0;O<y.length;O++)ct(f,y[O],_,S,V);return null}return _=ng(_),f&&f[_e]?f.J(y,_,a(S)?!!S.capture:!1,V):ed(f,y,_,!1,S,V)}function ed(f,y,_,S,V,O){if(!y)throw Error("Invalid event type");const W=a(V)?!!V.capture:!!V;let ue=nd(f);if(ue||(f[Ce]=ue=new Ee(f)),_=ue.add(y,_,S,W,O),_.proxy)return _;if(S=II(),_.proxy=S,S.src=f,S.listener=_,f.addEventListener)M||(V=W),V===void 0&&(V=!1),f.addEventListener(y.toString(),S,V);else if(f.attachEvent)f.attachEvent(tg(y.toString()),S);else if(f.addListener&&f.removeListener)f.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return _}function II(){function f(_){return y.call(f.src,f.listener,_)}const y=AI;return f}function eg(f,y,_,S,V){if(Array.isArray(y))for(var O=0;O<y.length;O++)eg(f,y[O],_,S,V);else S=a(S)?!!S.capture:!!S,_=ng(_),f&&f[_e]?(f=f.i,O=String(y).toString(),O in f.g&&(y=f.g[O],_=ie(y,_,S,V),_>-1&&(B(y[_]),Array.prototype.splice.call(y,_,1),y.length==0&&(delete f.g[O],f.h--)))):f&&(f=nd(f))&&(y=f.g[y.toString()],f=-1,y&&(f=ie(y,_,S,V)),(_=f>-1?y[f]:null)&&td(_))}function td(f){if(typeof f!="number"&&f&&!f.da){var y=f.src;if(y&&y[_e])Xe(y.i,f);else{var _=f.type,S=f.proxy;y.removeEventListener?y.removeEventListener(_,S,f.capture):y.detachEvent?y.detachEvent(tg(_),S):y.addListener&&y.removeListener&&y.removeListener(S),(_=nd(y))?(Xe(_,f),_.h==0&&(_.src=null,y[Ce]=null)):B(f)}}}function tg(f){return f in rt?rt[f]:rt[f]="on"+f}function AI(f,y){if(f.da)f=!0;else{y=new X(y,this);const _=f.listener,S=f.ha||f.src;f.fa&&td(f),f=_.call(S,y)}return f}function nd(f){return f=f[Ce],f instanceof Ee?f:null}var rd="__closure_events_fn_"+(Math.random()*1e9>>>0);function ng(f){return typeof f=="function"?f:(f[rd]||(f[rd]=function(y){return f.handleEvent(y)}),f[rd])}function dt(){R.call(this),this.i=new Ee(this),this.M=this,this.G=null}m(dt,R),dt.prototype[_e]=!0,dt.prototype.removeEventListener=function(f,y,_,S){eg(this,f,y,_,S)};function Tt(f,y){var _,S=f.G;if(S)for(_=[];S;S=S.G)_.push(S);if(f=f.M,S=y.type||y,typeof y=="string")y=new N(y,f);else if(y instanceof N)y.target=y.target||f;else{var V=y;y=new N(S,f),bt(y,V)}V=!0;let O,W;if(_)for(W=_.length-1;W>=0;W--)O=y.g=_[W],V=el(O,S,!0,y)&&V;if(O=y.g=f,V=el(O,S,!0,y)&&V,V=el(O,S,!1,y)&&V,_)for(W=0;W<_.length;W++)O=y.g=_[W],V=el(O,S,!1,y)&&V}dt.prototype.N=function(){if(dt.Z.N.call(this),this.i){var f=this.i;for(const y in f.g){const _=f.g[y];for(let S=0;S<_.length;S++)B(_[S]);delete f.g[y],f.h--}}this.G=null},dt.prototype.J=function(f,y,_,S){return this.i.add(String(f),y,!1,_,S)},dt.prototype.K=function(f,y,_,S){return this.i.add(String(f),y,!0,_,S)};function el(f,y,_,S){if(y=f.i.g[String(y)],!y)return!0;y=y.concat();let V=!0;for(let O=0;O<y.length;++O){const W=y[O];if(W&&!W.da&&W.capture==_){const ue=W.listener,We=W.ha||W.src;W.fa&&Xe(f.i,W),V=ue.call(We,S)!==!1&&V}}return V&&!S.defaultPrevented}function kI(f,y){if(typeof f!="function")if(f&&typeof f.handleEvent=="function")f=c(f.handleEvent,f);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:o.setTimeout(f,y||0)}function rg(f){f.g=kI(()=>{f.g=null,f.i&&(f.i=!1,rg(f))},f.l);const y=f.h;f.h=null,f.m.apply(null,y)}class NI extends R{constructor(y,_){super(),this.m=y,this.l=_,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:rg(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Zi(f){R.call(this),this.h=f,this.g={}}m(Zi,R);var sg=[];function ig(f){j(f.g,function(y,_){this.g.hasOwnProperty(_)&&td(y)},f),f.g={}}Zi.prototype.N=function(){Zi.Z.N.call(this),ig(this)},Zi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var sd=o.JSON.stringify,bI=o.JSON.parse,RI=class{stringify(f){return o.JSON.stringify(f,void 0)}parse(f){return o.JSON.parse(f,void 0)}};function og(){}function ag(){}var eo={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function id(){N.call(this,"d")}m(id,N);function od(){N.call(this,"c")}m(od,N);var Xr={},lg=null;function tl(){return lg=lg||new dt}Xr.Ia="serverreachability";function ug(f){N.call(this,Xr.Ia,f)}m(ug,N);function to(f){const y=tl();Tt(y,new ug(y))}Xr.STAT_EVENT="statevent";function cg(f,y){N.call(this,Xr.STAT_EVENT,f),this.stat=y}m(cg,N);function Ct(f){const y=tl();Tt(y,new cg(y,f))}Xr.Ja="timingevent";function dg(f,y){N.call(this,Xr.Ja,f),this.size=y}m(dg,N);function no(f,y){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){f()},y)}function ro(){this.g=!0}ro.prototype.ua=function(){this.g=!1};function PI(f,y,_,S,V,O){f.info(function(){if(f.g)if(O){var W="",ue=O.split("&");for(let Te=0;Te<ue.length;Te++){var We=ue[Te].split("=");if(We.length>1){const Ze=We[0];We=We[1];const gn=Ze.split("_");W=gn.length>=2&&gn[1]=="type"?W+(Ze+"="+We+"&"):W+(Ze+"=redacted&")}}}else W=null;else W=O;return"XMLHTTP REQ ("+S+") [attempt "+V+"]: "+y+`
`+_+`
`+W})}function MI(f,y,_,S,V,O,W){f.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+V+"]: "+y+`
`+_+`
`+O+" "+W})}function Us(f,y,_,S){f.info(function(){return"XMLHTTP TEXT ("+y+"): "+LI(f,_)+(S?" "+S:"")})}function DI(f,y){f.info(function(){return"TIMEOUT: "+y})}ro.prototype.info=function(){};function LI(f,y){if(!f.g)return y;if(!y)return null;try{const O=JSON.parse(y);if(O){for(f=0;f<O.length;f++)if(Array.isArray(O[f])){var _=O[f];if(!(_.length<2)){var S=_[1];if(Array.isArray(S)&&!(S.length<1)){var V=S[0];if(V!="noop"&&V!="stop"&&V!="close")for(let W=1;W<S.length;W++)S[W]=""}}}}return sd(O)}catch{return y}}var nl={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},fg={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},hg;function ad(){}m(ad,og),ad.prototype.g=function(){return new XMLHttpRequest},hg=new ad;function so(f){return encodeURIComponent(String(f))}function VI(f){var y=1;f=f.split(":");const _=[];for(;y>0&&f.length;)_.push(f.shift()),y--;return f.length&&_.push(f.join(":")),_}function rr(f,y,_,S){this.j=f,this.i=y,this.l=_,this.S=S||1,this.V=new Zi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new pg}function pg(){this.i=null,this.g="",this.h=!1}var mg={},ld={};function ud(f,y,_){f.M=1,f.A=sl(mn(y)),f.u=_,f.R=!0,gg(f,null)}function gg(f,y){f.F=Date.now(),rl(f),f.B=mn(f.A);var _=f.B,S=f.S;Array.isArray(S)||(S=[String(S)]),Ng(_.i,"t",S),f.C=0,_=f.j.L,f.h=new pg,f.g=Wg(f.j,_?y:null,!f.u),f.P>0&&(f.O=new NI(c(f.Y,f,f.g),f.P)),y=f.V,_=f.g,S=f.ba;var V="readystatechange";Array.isArray(V)||(V&&(sg[0]=V.toString()),V=sg);for(let O=0;O<V.length;O++){const W=ct(_,V[O],S||y.handleEvent,!1,y.h||y);if(!W)break;y.g[W.key]=W}y=f.J?ee(f.J):{},f.u?(f.v||(f.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.B,f.v,f.u,y)):(f.v="GET",f.g.ea(f.B,f.v,null,y)),to(),PI(f.i,f.v,f.B,f.l,f.S,f.u)}rr.prototype.ba=function(f){f=f.target;const y=this.O;y&&or(f)==3?y.j():this.Y(f)},rr.prototype.Y=function(f){try{if(f==this.g)e:{const ue=or(this.g),We=this.g.ya(),Te=this.g.ca();if(!(ue<3)&&(ue!=3||this.g&&(this.h.h||this.g.la()||Vg(this.g)))){this.K||ue!=4||We==7||(We==8||Te<=0?to(3):to(2)),cd(this);var y=this.g.ca();this.X=y;var _=UI(this);if(this.o=y==200,MI(this.i,this.v,this.B,this.l,this.S,ue,y),this.o){if(this.U&&!this.L){t:{if(this.g){var S,V=this.g;if((S=V.g?V.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(S)){var O=S;break t}}O=null}if(f=O)Us(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,dd(this,f);else{this.o=!1,this.m=3,Ct(12),Zr(this),io(this);break e}}if(this.R){f=!0;let Ze;for(;!this.K&&this.C<_.length;)if(Ze=FI(this,_),Ze==ld){ue==4&&(this.m=4,Ct(14),f=!1),Us(this.i,this.l,null,"[Incomplete Response]");break}else if(Ze==mg){this.m=4,Ct(15),Us(this.i,this.l,_,"[Invalid Chunk]"),f=!1;break}else Us(this.i,this.l,Ze,null),dd(this,Ze);if(yg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ue!=4||_.length!=0||this.h.h||(this.m=1,Ct(16),f=!1),this.o=this.o&&f,!f)Us(this.i,this.l,_,"[Invalid Chunked Response]"),Zr(this),io(this);else if(_.length>0&&!this.W){this.W=!0;var W=this.j;W.g==this&&W.aa&&!W.P&&(W.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),_d(W),W.P=!0,Ct(11))}}else Us(this.i,this.l,_,null),dd(this,_);ue==4&&Zr(this),this.o&&!this.K&&(ue==4?Hg(this.j,this):(this.o=!1,rl(this)))}else XI(this.g),y==400&&_.indexOf("Unknown SID")>0?(this.m=3,Ct(12)):(this.m=0,Ct(13)),Zr(this),io(this)}}}catch{}finally{}};function UI(f){if(!yg(f))return f.g.la();const y=Vg(f.g);if(y==="")return"";let _="";const S=y.length,V=or(f.g)==4;if(!f.h.i){if(typeof TextDecoder>"u")return Zr(f),io(f),"";f.h.i=new o.TextDecoder}for(let O=0;O<S;O++)f.h.h=!0,_+=f.h.i.decode(y[O],{stream:!(V&&O==S-1)});return y.length=0,f.h.g+=_,f.C=0,f.h.g}function yg(f){return f.g?f.v=="GET"&&f.M!=2&&f.j.Aa:!1}function FI(f,y){var _=f.C,S=y.indexOf(`
`,_);return S==-1?ld:(_=Number(y.substring(_,S)),isNaN(_)?mg:(S+=1,S+_>y.length?ld:(y=y.slice(S,S+_),f.C=S+_,y)))}rr.prototype.cancel=function(){this.K=!0,Zr(this)};function rl(f){f.T=Date.now()+f.H,vg(f,f.H)}function vg(f,y){if(f.D!=null)throw Error("WatchDog timer not null");f.D=no(c(f.aa,f),y)}function cd(f){f.D&&(o.clearTimeout(f.D),f.D=null)}rr.prototype.aa=function(){this.D=null;const f=Date.now();f-this.T>=0?(DI(this.i,this.B),this.M!=2&&(to(),Ct(17)),Zr(this),this.m=2,io(this)):vg(this,this.T-f)};function io(f){f.j.I==0||f.K||Hg(f.j,f)}function Zr(f){cd(f);var y=f.O;y&&typeof y.dispose=="function"&&y.dispose(),f.O=null,ig(f.V),f.g&&(y=f.g,f.g=null,y.abort(),y.dispose())}function dd(f,y){try{var _=f.j;if(_.I!=0&&(_.g==f||fd(_.h,f))){if(!f.L&&fd(_.h,f)&&_.I==3){try{var S=_.Ba.g.parse(y)}catch{S=null}if(Array.isArray(S)&&S.length==3){var V=S;if(V[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<f.F)ul(_),al(_);else break e;vd(_),Ct(18)}}else _.xa=V[1],0<_.xa-_.K&&V[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=no(c(_.Va,_),6e3));wg(_.h)<=1&&_.ta&&(_.ta=void 0)}else ts(_,11)}else if((f.L||_.g==f)&&ul(_),!b(y))for(V=_.Ba.g.parse(y),y=0;y<V.length;y++){let Te=V[y];const Ze=Te[0];if(!(Ze<=_.K))if(_.K=Ze,Te=Te[1],_.I==2)if(Te[0]=="c"){_.M=Te[1],_.ba=Te[2];const gn=Te[3];gn!=null&&(_.ka=gn,_.j.info("VER="+_.ka));const ns=Te[4];ns!=null&&(_.za=ns,_.j.info("SVER="+_.za));const ar=Te[5];ar!=null&&typeof ar=="number"&&ar>0&&(S=1.5*ar,_.O=S,_.j.info("backChannelRequestTimeoutMs_="+S)),S=_;const lr=f.g;if(lr){const dl=lr.g?lr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(dl){var O=S.h;O.g||dl.indexOf("spdy")==-1&&dl.indexOf("quic")==-1&&dl.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(hd(O,O.h),O.h=null))}if(S.G){const xd=lr.g?lr.g.getResponseHeader("X-HTTP-Session-Id"):null;xd&&(S.wa=xd,Ae(S.J,S.G,xd))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-f.F,_.j.info("Handshake RTT: "+_.T+"ms")),S=_;var W=f;if(S.na=$g(S,S.L?S.ba:null,S.W),W.L){Eg(S.h,W);var ue=W,We=S.O;We&&(ue.H=We),ue.D&&(cd(ue),rl(ue)),S.g=W}else Gg(S);_.i.length>0&&ll(_)}else Te[0]!="stop"&&Te[0]!="close"||ts(_,7);else _.I==3&&(Te[0]=="stop"||Te[0]=="close"?Te[0]=="stop"?ts(_,7):yd(_):Te[0]!="noop"&&_.l&&_.l.qa(Te),_.A=0)}}to(4)}catch{}}var OI=class{constructor(f,y){this.g=f,this.map=y}};function _g(f){this.l=f||10,o.PerformanceNavigationTiming?(f=o.performance.getEntriesByType("navigation"),f=f.length>0&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function xg(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function wg(f){return f.h?1:f.g?f.g.size:0}function fd(f,y){return f.h?f.h==y:f.g?f.g.has(y):!1}function hd(f,y){f.g?f.g.add(y):f.h=y}function Eg(f,y){f.h&&f.h==y?f.h=null:f.g&&f.g.has(y)&&f.g.delete(y)}_g.prototype.cancel=function(){if(this.i=Tg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function Tg(f){if(f.h!=null)return f.i.concat(f.h.G);if(f.g!=null&&f.g.size!==0){let y=f.i;for(const _ of f.g.values())y=y.concat(_.G);return y}return v(f.i)}var Cg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function BI(f,y){if(f){f=f.split("&");for(let _=0;_<f.length;_++){const S=f[_].indexOf("=");let V,O=null;S>=0?(V=f[_].substring(0,S),O=f[_].substring(S+1)):V=f[_],y(V,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function sr(f){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;f instanceof sr?(this.l=f.l,oo(this,f.j),this.o=f.o,this.g=f.g,ao(this,f.u),this.h=f.h,pd(this,bg(f.i)),this.m=f.m):f&&(y=String(f).match(Cg))?(this.l=!1,oo(this,y[1]||"",!0),this.o=lo(y[2]||""),this.g=lo(y[3]||"",!0),ao(this,y[4]),this.h=lo(y[5]||"",!0),pd(this,y[6]||"",!0),this.m=lo(y[7]||"")):(this.l=!1,this.i=new co(null,this.l))}sr.prototype.toString=function(){const f=[];var y=this.j;y&&f.push(uo(y,Sg,!0),":");var _=this.g;return(_||y=="file")&&(f.push("//"),(y=this.o)&&f.push(uo(y,Sg,!0),"@"),f.push(so(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&f.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&f.push("/"),f.push(uo(_,_.charAt(0)=="/"?HI:qI,!0))),(_=this.i.toString())&&f.push("?",_),(_=this.m)&&f.push("#",uo(_,zI)),f.join("")},sr.prototype.resolve=function(f){const y=mn(this);let _=!!f.j;_?oo(y,f.j):_=!!f.o,_?y.o=f.o:_=!!f.g,_?y.g=f.g:_=f.u!=null;var S=f.h;if(_)ao(y,f.u);else if(_=!!f.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var V=y.h.lastIndexOf("/");V!=-1&&(S=y.h.slice(0,V+1)+S)}if(V=S,V==".."||V==".")S="";else if(V.indexOf("./")!=-1||V.indexOf("/.")!=-1){S=V.lastIndexOf("/",0)==0,V=V.split("/");const O=[];for(let W=0;W<V.length;){const ue=V[W++];ue=="."?S&&W==V.length&&O.push(""):ue==".."?((O.length>1||O.length==1&&O[0]!="")&&O.pop(),S&&W==V.length&&O.push("")):(O.push(ue),S=!0)}S=O.join("/")}else S=V}return _?y.h=S:_=f.i.toString()!=="",_?pd(y,bg(f.i)):_=!!f.m,_&&(y.m=f.m),y};function mn(f){return new sr(f)}function oo(f,y,_){f.j=_?lo(y,!0):y,f.j&&(f.j=f.j.replace(/:$/,""))}function ao(f,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);f.u=y}else f.u=null}function pd(f,y,_){y instanceof co?(f.i=y,$I(f.i,f.l)):(_||(y=uo(y,jI)),f.i=new co(y,f.l))}function Ae(f,y,_){f.i.set(y,_)}function sl(f){return Ae(f,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),f}function lo(f,y){return f?y?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function uo(f,y,_){return typeof f=="string"?(f=encodeURI(f).replace(y,GI),_&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function GI(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var Sg=/[#\/\?@]/g,qI=/[#\?:]/g,HI=/[#\?]/g,jI=/[#\?@]/g,zI=/#/g;function co(f,y){this.h=this.g=null,this.i=f||null,this.j=!!y}function es(f){f.g||(f.g=new Map,f.h=0,f.i&&BI(f.i,function(y,_){f.add(decodeURIComponent(y.replace(/\+/g," ")),_)}))}t=co.prototype,t.add=function(f,y){es(this),this.i=null,f=Fs(this,f);let _=this.g.get(f);return _||this.g.set(f,_=[]),_.push(y),this.h+=1,this};function Ig(f,y){es(f),y=Fs(f,y),f.g.has(y)&&(f.i=null,f.h-=f.g.get(y).length,f.g.delete(y))}function Ag(f,y){return es(f),y=Fs(f,y),f.g.has(y)}t.forEach=function(f,y){es(this),this.g.forEach(function(_,S){_.forEach(function(V){f.call(y,V,S,this)},this)},this)};function kg(f,y){es(f);let _=[];if(typeof y=="string")Ag(f,y)&&(_=_.concat(f.g.get(Fs(f,y))));else for(f=Array.from(f.g.values()),y=0;y<f.length;y++)_=_.concat(f[y]);return _}t.set=function(f,y){return es(this),this.i=null,f=Fs(this,f),Ag(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[y]),this.h+=1,this},t.get=function(f,y){return f?(f=kg(this,f),f.length>0?String(f[0]):y):y};function Ng(f,y,_){Ig(f,y),_.length>0&&(f.i=null,f.g.set(Fs(f,y),v(_)),f.h+=_.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],y=Array.from(this.g.keys());for(let S=0;S<y.length;S++){var _=y[S];const V=so(_);_=kg(this,_);for(let O=0;O<_.length;O++){let W=V;_[O]!==""&&(W+="="+so(_[O])),f.push(W)}}return this.i=f.join("&")};function bg(f){const y=new co;return y.i=f.i,f.g&&(y.g=new Map(f.g),y.h=f.h),y}function Fs(f,y){return y=String(y),f.j&&(y=y.toLowerCase()),y}function $I(f,y){y&&!f.j&&(es(f),f.i=null,f.g.forEach(function(_,S){const V=S.toLowerCase();S!=V&&(Ig(this,S),Ng(this,V,_))},f)),f.j=y}function WI(f,y){const _=new ro;if(o.Image){const S=new Image;S.onload=h(ir,_,"TestLoadImage: loaded",!0,y,S),S.onerror=h(ir,_,"TestLoadImage: error",!1,y,S),S.onabort=h(ir,_,"TestLoadImage: abort",!1,y,S),S.ontimeout=h(ir,_,"TestLoadImage: timeout",!1,y,S),o.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=f}else y(!1)}function KI(f,y){const _=new ro,S=new AbortController,V=setTimeout(()=>{S.abort(),ir(_,"TestPingServer: timeout",!1,y)},1e4);fetch(f,{signal:S.signal}).then(O=>{clearTimeout(V),O.ok?ir(_,"TestPingServer: ok",!0,y):ir(_,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(V),ir(_,"TestPingServer: error",!1,y)})}function ir(f,y,_,S,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),S(_)}catch{}}function JI(){this.g=new RI}function md(f){this.i=f.Sb||null,this.h=f.ab||!1}m(md,og),md.prototype.g=function(){return new il(this.i,this.h)};function il(f,y){dt.call(this),this.H=f,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(il,dt),t=il.prototype,t.open=function(f,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=f,this.D=y,this.readyState=1,ho(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};f&&(y.body=f),(this.H||o).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,fo(this)),this.readyState=0},t.Pa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,ho(this)),this.g&&(this.readyState=3,ho(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Rg(this)}else f.text().then(this.Oa.bind(this),this.ga.bind(this))};function Rg(f){f.j.read().then(f.Ma.bind(f)).catch(f.ga.bind(f))}t.Ma=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var y=f.value?f.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!f.done}))&&(this.response=this.responseText+=y)}f.done?fo(this):ho(this),this.readyState==3&&Rg(this)}},t.Oa=function(f){this.g&&(this.response=this.responseText=f,fo(this))},t.Na=function(f){this.g&&(this.response=f,fo(this))},t.ga=function(){this.g&&fo(this)};function fo(f){f.readyState=4,f.l=null,f.j=null,f.B=null,ho(f)}t.setRequestHeader=function(f,y){this.A.append(f,y)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],y=this.h.entries();for(var _=y.next();!_.done;)_=_.value,f.push(_[0]+": "+_[1]),_=y.next();return f.join(`\r
`)};function ho(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(il.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function Pg(f){let y="";return j(f,function(_,S){y+=S,y+=":",y+=_,y+=`\r
`}),y}function gd(f,y,_){e:{for(S in _){var S=!1;break e}S=!0}S||(_=Pg(_),typeof f=="string"?_!=null&&so(_):Ae(f,y,_))}function Ue(f){dt.call(this),this.headers=new Map,this.L=f||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m(Ue,dt);var YI=/^https?$/i,QI=["POST","PUT"];t=Ue.prototype,t.Fa=function(f){this.H=f},t.ea=function(f,y,_,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);y=y?y.toUpperCase():"GET",this.D=f,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():hg.g(),this.g.onreadystatechange=g(c(this.Ca,this));try{this.B=!0,this.g.open(y,String(f),!0),this.B=!1}catch(O){Mg(this,O);return}if(f=_||"",_=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var V in S)_.set(V,S[V]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const O of S.keys())_.set(O,S.get(O));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(_.keys()).find(O=>O.toLowerCase()=="content-type"),V=o.FormData&&f instanceof o.FormData,!(Array.prototype.indexOf.call(QI,y,void 0)>=0)||S||V||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,W]of _)this.g.setRequestHeader(O,W);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(f),this.v=!1}catch(O){Mg(this,O)}};function Mg(f,y){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=y,f.o=5,Dg(f),ol(f)}function Dg(f){f.A||(f.A=!0,Tt(f,"complete"),Tt(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=f||7,Tt(this,"complete"),Tt(this,"abort"),ol(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ol(this,!0)),Ue.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Lg(this):this.Xa())},t.Xa=function(){Lg(this)};function Lg(f){if(f.h&&typeof i<"u"){if(f.v&&or(f)==4)setTimeout(f.Ca.bind(f),0);else if(Tt(f,"readystatechange"),or(f)==4){f.h=!1;try{const O=f.ca();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var _;if(!(_=y)){var S;if(S=O===0){let W=String(f.D).match(Cg)[1]||null;!W&&o.self&&o.self.location&&(W=o.self.location.protocol.slice(0,-1)),S=!YI.test(W?W.toLowerCase():"")}_=S}if(_)Tt(f,"complete"),Tt(f,"success");else{f.o=6;try{var V=or(f)>2?f.g.statusText:""}catch{V=""}f.l=V+" ["+f.ca()+"]",Dg(f)}}finally{ol(f)}}}}function ol(f,y){if(f.g){f.m&&(clearTimeout(f.m),f.m=null);const _=f.g;f.g=null,y||Tt(f,"ready");try{_.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function or(f){return f.g?f.g.readyState:0}t.ca=function(){try{return or(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(f){if(this.g){var y=this.g.responseText;return f&&y.indexOf(f)==0&&(y=y.substring(f.length)),bI(y)}};function Vg(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.F){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function XI(f){const y={};f=(f.g&&or(f)>=2&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<f.length;S++){if(b(f[S]))continue;var _=VI(f[S]);const V=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const O=y[V]||[];y[V]=O,O.push(_)}z(y,function(S){return S.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function po(f,y,_){return _&&_.internalChannelParams&&_.internalChannelParams[f]||y}function Ug(f){this.za=0,this.i=[],this.j=new ro,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=po("failFast",!1,f),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=po("baseRetryDelayMs",5e3,f),this.Za=po("retryDelaySeedMs",1e4,f),this.Ta=po("forwardChannelMaxRetries",2,f),this.va=po("forwardChannelRequestTimeoutMs",2e4,f),this.ma=f&&f.xmlHttpFactory||void 0,this.Ua=f&&f.Rb||void 0,this.Aa=f&&f.useFetchStreams||!1,this.O=void 0,this.L=f&&f.supportsCrossDomainXhr||!1,this.M="",this.h=new _g(f&&f.concurrentRequestLimit),this.Ba=new JI,this.S=f&&f.fastHandshake||!1,this.R=f&&f.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=f&&f.Pb||!1,f&&f.ua&&this.j.ua(),f&&f.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&f&&f.detectBufferingProxy||!1,this.ia=void 0,f&&f.longPollingTimeout&&f.longPollingTimeout>0&&(this.ia=f.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Ug.prototype,t.ka=8,t.I=1,t.connect=function(f,y,_,S){Ct(0),this.W=f,this.H=y||{},_&&S!==void 0&&(this.H.OSID=_,this.H.OAID=S),this.F=this.X,this.J=$g(this,null,this.W),ll(this)};function yd(f){if(Fg(f),f.I==3){var y=f.V++,_=mn(f.J);if(Ae(_,"SID",f.M),Ae(_,"RID",y),Ae(_,"TYPE","terminate"),mo(f,_),y=new rr(f,f.j,y),y.M=2,y.A=sl(mn(_)),_=!1,o.navigator&&o.navigator.sendBeacon)try{_=o.navigator.sendBeacon(y.A.toString(),"")}catch{}!_&&o.Image&&(new Image().src=y.A,_=!0),_||(y.g=Wg(y.j,null),y.g.ea(y.A)),y.F=Date.now(),rl(y)}zg(f)}function al(f){f.g&&(_d(f),f.g.cancel(),f.g=null)}function Fg(f){al(f),f.v&&(o.clearTimeout(f.v),f.v=null),ul(f),f.h.cancel(),f.m&&(typeof f.m=="number"&&o.clearTimeout(f.m),f.m=null)}function ll(f){if(!xg(f.h)&&!f.m){f.m=!0;var y=f.Ea;U||w(),L||(U(),L=!0),T.add(y,f),f.D=0}}function ZI(f,y){return wg(f.h)>=f.h.j-(f.m?1:0)?!1:f.m?(f.i=y.G.concat(f.i),!0):f.I==1||f.I==2||f.D>=(f.Sa?0:f.Ta)?!1:(f.m=no(c(f.Ea,f,y),jg(f,f.D)),f.D++,!0)}t.Ea=function(f){if(this.m)if(this.m=null,this.I==1){if(!f){this.V=Math.floor(Math.random()*1e5),f=this.V++;const V=new rr(this,this.j,f);let O=this.o;if(this.U&&(O?(O=ee(O),bt(O,this.U)):O=this.U),this.u!==null||this.R||(V.J=O,O=null),this.S)e:{for(var y=0,_=0;_<this.i.length;_++){t:{var S=this.i[_];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(y+=S,y>4096){y=_;break e}if(y===4096||_===this.i.length-1){y=_+1;break e}}y=1e3}else y=1e3;y=Bg(this,V,y),_=mn(this.J),Ae(_,"RID",f),Ae(_,"CVER",22),this.G&&Ae(_,"X-HTTP-Session-Id",this.G),mo(this,_),O&&(this.R?y="headers="+so(Pg(O))+"&"+y:this.u&&gd(_,this.u,O)),hd(this.h,V),this.Ra&&Ae(_,"TYPE","init"),this.S?(Ae(_,"$req",y),Ae(_,"SID","null"),V.U=!0,ud(V,_,null)):ud(V,_,y),this.I=2}}else this.I==3&&(f?Og(this,f):this.i.length==0||xg(this.h)||Og(this))};function Og(f,y){var _;y?_=y.l:_=f.V++;const S=mn(f.J);Ae(S,"SID",f.M),Ae(S,"RID",_),Ae(S,"AID",f.K),mo(f,S),f.u&&f.o&&gd(S,f.u,f.o),_=new rr(f,f.j,_,f.D+1),f.u===null&&(_.J=f.o),y&&(f.i=y.G.concat(f.i)),y=Bg(f,_,1e3),_.H=Math.round(f.va*.5)+Math.round(f.va*.5*Math.random()),hd(f.h,_),ud(_,S,y)}function mo(f,y){f.H&&j(f.H,function(_,S){Ae(y,S,_)}),f.l&&j({},function(_,S){Ae(y,S,_)})}function Bg(f,y,_){_=Math.min(f.i.length,_);const S=f.l?c(f.l.Ka,f.l,f):null;e:{var V=f.i;let ue=-1;for(;;){const We=["count="+_];ue==-1?_>0?(ue=V[0].g,We.push("ofs="+ue)):ue=0:We.push("ofs="+ue);let Te=!0;for(let Ze=0;Ze<_;Ze++){var O=V[Ze].g;const gn=V[Ze].map;if(O-=ue,O<0)ue=Math.max(0,V[Ze].g-100),Te=!1;else try{O="req"+O+"_"||"";try{var W=gn instanceof Map?gn:Object.entries(gn);for(const[ns,ar]of W){let lr=ar;a(ar)&&(lr=sd(ar)),We.push(O+ns+"="+encodeURIComponent(lr))}}catch(ns){throw We.push(O+"type="+encodeURIComponent("_badmap")),ns}}catch{S&&S(gn)}}if(Te){W=We.join("&");break e}}W=void 0}return f=f.i.splice(0,_),y.G=f,W}function Gg(f){if(!f.g&&!f.v){f.Y=1;var y=f.Da;U||w(),L||(U(),L=!0),T.add(y,f),f.A=0}}function vd(f){return f.g||f.v||f.A>=3?!1:(f.Y++,f.v=no(c(f.Da,f),jg(f,f.A)),f.A++,!0)}t.Da=function(){if(this.v=null,qg(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var f=4*this.T;this.j.info("BP detection timer enabled: "+f),this.B=no(c(this.Wa,this),f)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ct(10),al(this),qg(this))};function _d(f){f.B!=null&&(o.clearTimeout(f.B),f.B=null)}function qg(f){f.g=new rr(f,f.j,"rpc",f.Y),f.u===null&&(f.g.J=f.o),f.g.P=0;var y=mn(f.na);Ae(y,"RID","rpc"),Ae(y,"SID",f.M),Ae(y,"AID",f.K),Ae(y,"CI",f.F?"0":"1"),!f.F&&f.ia&&Ae(y,"TO",f.ia),Ae(y,"TYPE","xmlhttp"),mo(f,y),f.u&&f.o&&gd(y,f.u,f.o),f.O&&(f.g.H=f.O);var _=f.g;f=f.ba,_.M=1,_.A=sl(mn(y)),_.u=null,_.R=!0,gg(_,f)}t.Va=function(){this.C!=null&&(this.C=null,al(this),vd(this),Ct(19))};function ul(f){f.C!=null&&(o.clearTimeout(f.C),f.C=null)}function Hg(f,y){var _=null;if(f.g==y){ul(f),_d(f),f.g=null;var S=2}else if(fd(f.h,y))_=y.G,Eg(f.h,y),S=1;else return;if(f.I!=0){if(y.o)if(S==1){_=y.u?y.u.length:0,y=Date.now()-y.F;var V=f.D;S=tl(),Tt(S,new dg(S,_)),ll(f)}else Gg(f);else if(V=y.m,V==3||V==0&&y.X>0||!(S==1&&ZI(f,y)||S==2&&vd(f)))switch(_&&_.length>0&&(y=f.h,y.i=y.i.concat(_)),V){case 1:ts(f,5);break;case 4:ts(f,10);break;case 3:ts(f,6);break;default:ts(f,2)}}}function jg(f,y){let _=f.Qa+Math.floor(Math.random()*f.Za);return f.isActive()||(_*=2),_*y}function ts(f,y){if(f.j.info("Error code "+y),y==2){var _=c(f.bb,f),S=f.Ua;const V=!S;S=new sr(S||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||oo(S,"https"),sl(S),V?WI(S.toString(),_):KI(S.toString(),_)}else Ct(2);f.I=0,f.l&&f.l.pa(y),zg(f),Fg(f)}t.bb=function(f){f?(this.j.info("Successfully pinged google.com"),Ct(2)):(this.j.info("Failed to ping google.com"),Ct(1))};function zg(f){if(f.I=0,f.ja=[],f.l){const y=Tg(f.h);(y.length!=0||f.i.length!=0)&&(x(f.ja,y),x(f.ja,f.i),f.h.i.length=0,v(f.i),f.i.length=0),f.l.oa()}}function $g(f,y,_){var S=_ instanceof sr?mn(_):new sr(_);if(S.g!="")y&&(S.g=y+"."+S.g),ao(S,S.u);else{var V=o.location;S=V.protocol,y=y?y+"."+V.hostname:V.hostname,V=+V.port;const O=new sr(null);S&&oo(O,S),y&&(O.g=y),V&&ao(O,V),_&&(O.h=_),S=O}return _=f.G,y=f.wa,_&&y&&Ae(S,_,y),Ae(S,"VER",f.ka),mo(f,S),S}function Wg(f,y,_){if(y&&!f.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=f.Aa&&!f.ma?new Ue(new md({ab:_})):new Ue(f.ma),y.Fa(f.L),y}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Kg(){}t=Kg.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function cl(){}cl.prototype.g=function(f,y){return new Bt(f,y)};function Bt(f,y){dt.call(this),this.g=new Ug(y),this.l=f,this.h=y&&y.messageUrlParams||null,f=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(f?f["X-WebChannel-Content-Type"]=y.messageContentType:f={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(f?f["X-WebChannel-Client-Profile"]=y.sa:f={"X-WebChannel-Client-Profile":y.sa}),this.g.U=f,(f=y&&y.Qb)&&!b(f)&&(this.g.u=f),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!b(y)&&(this.g.G=y,f=this.h,f!==null&&y in f&&(f=this.h,y in f&&delete f[y])),this.j=new Os(this)}m(Bt,dt),Bt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Bt.prototype.close=function(){yd(this.g)},Bt.prototype.o=function(f){var y=this.g;if(typeof f=="string"){var _={};_.__data__=f,f=_}else this.v&&(_={},_.__data__=sd(f),f=_);y.i.push(new OI(y.Ya++,f)),y.I==3&&ll(y)},Bt.prototype.N=function(){this.g.l=null,delete this.j,yd(this.g),delete this.g,Bt.Z.N.call(this)};function Jg(f){id.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var y=f.__sm__;if(y){e:{for(const _ in y){f=_;break e}f=void 0}(this.i=f)&&(f=this.i,y=y!==null&&f in y?y[f]:void 0),this.data=y}else this.data=f}m(Jg,id);function Yg(){od.call(this),this.status=1}m(Yg,od);function Os(f){this.g=f}m(Os,Kg),Os.prototype.ra=function(){Tt(this.g,"a")},Os.prototype.qa=function(f){Tt(this.g,new Jg(f))},Os.prototype.pa=function(f){Tt(this.g,new Yg)},Os.prototype.oa=function(){Tt(this.g,"b")},cl.prototype.createWebChannel=cl.prototype.g,Bt.prototype.send=Bt.prototype.o,Bt.prototype.open=Bt.prototype.m,Bt.prototype.close=Bt.prototype.close,VT=function(){return new cl},LT=function(){return tl()},DT=Xr,_h={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},nl.NO_ERROR=0,nl.TIMEOUT=8,nl.HTTP_ERROR=6,Xl=nl,fg.COMPLETE="complete",MT=fg,ag.EventType=eo,eo.OPEN="a",eo.CLOSE="b",eo.ERROR="c",eo.MESSAGE="d",dt.prototype.listen=dt.prototype.J,bo=ag,Ue.prototype.listenOnce=Ue.prototype.K,Ue.prototype.getLastError=Ue.prototype.Ha,Ue.prototype.getLastErrorCode=Ue.prototype.ya,Ue.prototype.getStatus=Ue.prototype.ca,Ue.prototype.getResponseJson=Ue.prototype.La,Ue.prototype.getResponseText=Ue.prototype.la,Ue.prototype.send=Ue.prototype.ea,Ue.prototype.setWithCredentials=Ue.prototype.Fa,PT=Ue}).apply(typeof Nl<"u"?Nl:typeof self<"u"?self:typeof window<"u"?window:{});const zv="@firebase/firestore",$v="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};gt.UNAUTHENTICATED=new gt(null),gt.GOOGLE_CREDENTIALS=new gt("google-credentials-uid"),gt.FIRST_PARTY=new gt("first-party-uid"),gt.MOCK_USER=new gt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zi="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cs=new tm("@firebase/firestore");function Gs(){return Cs.logLevel}function Y(t,...e){if(Cs.logLevel<=de.DEBUG){const n=e.map(sm);Cs.debug(`Firestore (${zi}): ${t}`,...n)}}function Jn(t,...e){if(Cs.logLevel<=de.ERROR){const n=e.map(sm);Cs.error(`Firestore (${zi}): ${t}`,...n)}}function ki(t,...e){if(Cs.logLevel<=de.WARN){const n=e.map(sm);Cs.warn(`Firestore (${zi}): ${t}`,...n)}}function sm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,UT(t,r,n)}function UT(t,e,n){let r=`FIRESTORE (${zi}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Jn(r),new Error(r)}function xe(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||UT(e,s,r)}function oe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class J extends nr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class J4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(gt.UNAUTHENTICATED))}shutdown(){}}class Y4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Q4{constructor(e){this.t=e,this.currentUser=gt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){xe(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new Dr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Dr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{Y("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Y("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Dr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Y("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(xe(typeof r.accessToken=="string",31837,{l:r}),new FT(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return xe(e===null||typeof e=="string",2055,{h:e}),new gt(e)}}class X4{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=gt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Z4{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new X4(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(gt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Wv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class e5{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,En(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){xe(this.o===void 0,3512);const r=i=>{i.error!=null&&Y("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,Y("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{Y("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):Y("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Wv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(xe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Wv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t5(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=t5(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function fe(t,e){return t<e?-1:t>e?1:0}function xh(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return Xd(s)===Xd(i)?fe(s,i):Xd(s)?1:-1}return fe(t.length,e.length)}const n5=55296,r5=57343;function Xd(t){const e=t.charCodeAt(0);return e>=n5&&e<=r5}function Ni(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kv="__name__";class xn{constructor(e,n,r){n===void 0?n=0:n>e.length&&ne(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ne(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return xn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof xn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=xn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return fe(e.length,n.length)}static compareSegments(e,n){const r=xn.isNumericId(e),s=xn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?xn.extractNumericId(e).compare(xn.extractNumericId(n)):xh(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Mr.fromString(e.substring(4,e.length-2))}}class Se extends xn{construct(e,n,r){return new Se(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new J(G.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Se(n)}static emptyPath(){return new Se([])}}const s5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ot extends xn{construct(e,n,r){return new ot(e,n,r)}static isValidIdentifier(e){return s5.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ot.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Kv}static keyField(){return new ot([Kv])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new J(G.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new J(G.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new J(G.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new J(G.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ot(n)}static emptyPath(){return new ot([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.path=e}static fromPath(e){return new Z(Se.fromString(e))}static fromName(e){return new Z(Se.fromString(e).popFirst(5))}static empty(){return new Z(Se.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Se.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Se.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Z(new Se(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OT(t,e,n){if(!n)throw new J(G.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function i5(t,e,n,r){if(e===!0&&r===!0)throw new J(G.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Jv(t){if(!Z.isDocumentKey(t))throw new J(G.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Yv(t){if(Z.isDocumentKey(t))throw new J(G.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function BT(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Nc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ne(12329,{type:typeof t})}function bi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new J(G.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Nc(t);throw new J(G.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $e(t,e){const n={typeString:t};return e&&(n.value=e),n}function Oa(t,e){if(!BT(t))throw new J(G.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new J(G.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qv=-62135596800,Xv=1e6;class be{static now(){return be.fromMillis(Date.now())}static fromDate(e){return be.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Xv);return new be(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new J(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new J(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Qv)throw new J(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new J(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Xv}_compareTo(e){return this.seconds===e.seconds?fe(this.nanoseconds,e.nanoseconds):fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:be._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Oa(e,be._jsonSchema))return new be(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Qv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}be._jsonSchemaVersion="firestore/timestamp/1.0",be._jsonSchema={type:$e("string",be._jsonSchemaVersion),seconds:$e("number"),nanoseconds:$e("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{static fromTimestamp(e){return new se(e)}static min(){return new se(new be(0,0))}static max(){return new se(new be(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ya=-1;function o5(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=se.fromTimestamp(r===1e9?new be(n+1,0):new be(n,r));return new Or(s,Z.empty(),e)}function a5(t){return new Or(t.readTime,t.key,ya)}class Or{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Or(se.min(),Z.empty(),ya)}static max(){return new Or(se.max(),Z.empty(),ya)}}function l5(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Z.comparator(t.documentKey,e.documentKey),n!==0?n:fe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class c5{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $i(t){if(t.code!==G.FAILED_PRECONDITION||t.message!==u5)throw t;Y("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ne(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new q((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof q?n:q.resolve(n)}catch(n){return q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):q.reject(n)}static resolve(e){return new q((n,r)=>{n(e)})}static reject(e){return new q((n,r)=>{r(e)})}static waitFor(e){return new q((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=q.resolve(!1);for(const r of e)n=n.next(s=>s?q.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new q((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(h=>{o[c]=h,++a,a===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new q((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function d5(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Wi(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}bc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const om=-1;function Rc(t){return t==null}function qu(t){return t===0&&1/t==-1/0}function f5(t){return typeof t=="number"&&Number.isInteger(t)&&!qu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GT="";function h5(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Zv(e)),e=p5(t.get(n),e);return Zv(e)}function p5(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case GT:n+="";break;default:n+=i}}return n}function Zv(t){return t+GT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Jr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function qT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e,n){this.comparator=e,this.root=n||it.EMPTY}insert(e,n){return new Ve(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,it.BLACK,null,null))}remove(e){return new Ve(this.comparator,this.root.remove(e,this.comparator).copy(null,null,it.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new bl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new bl(this.root,e,this.comparator,!1)}getReverseIterator(){return new bl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new bl(this.root,e,this.comparator,!0)}}class bl{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class it{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??it.RED,this.left=s??it.EMPTY,this.right=i??it.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new it(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return it.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return it.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,it.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,it.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ne(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ne(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ne(27949);return e+(this.isRed()?0:1)}}it.EMPTY=null,it.RED=!0,it.BLACK=!1;it.EMPTY=new class{constructor(){this.size=0}get key(){throw ne(57766)}get value(){throw ne(16141)}get color(){throw ne(16727)}get left(){throw ne(29726)}get right(){throw ne(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new it(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e){this.comparator=e,this.data=new Ve(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new t_(this.data.getIterator())}getIteratorFrom(e){return new t_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Qe)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Qe(this.comparator);return n.data=e,n}}class t_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.fields=e,e.sort(ot.comparator)}static empty(){return new jt([])}unionWith(e){let n=new Qe(ot.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new jt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ni(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new HT("Invalid base64 string: "+i):i}}(e);return new ut(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new ut(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ut.EMPTY_BYTE_STRING=new ut("");const m5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Br(t){if(xe(!!t,39018),typeof t=="string"){let e=0;const n=m5.exec(t);if(xe(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ge(t.seconds),nanos:Ge(t.nanos)}}function Ge(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Gr(t){return typeof t=="string"?ut.fromBase64String(t):ut.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jT="server_timestamp",zT="__type__",$T="__previous_value__",WT="__local_write_time__";function am(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[zT])==null?void 0:r.stringValue)===jT}function Pc(t){const e=t.mapValue.fields[$T];return am(e)?Pc(e):e}function va(t){const e=Br(t.mapValue.fields[WT].timestampValue);return new be(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g5{constructor(e,n,r,s,i,o,a,l,c,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=h}}const Hu="(default)";class _a{constructor(e,n){this.projectId=e,this.database=n||Hu}static empty(){return new _a("","")}get isDefaultDatabase(){return this.database===Hu}isEqual(e){return e instanceof _a&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KT="__type__",y5="__max__",Rl={mapValue:{}},JT="__vector__",ju="value";function qr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?am(t)?4:_5(t)?9007199254740991:v5(t)?10:11:ne(28295,{value:t})}function Dn(t,e){if(t===e)return!0;const n=qr(t);if(n!==qr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return va(t).isEqual(va(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Br(s.timestampValue),a=Br(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Gr(s.bytesValue).isEqual(Gr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Ge(s.geoPointValue.latitude)===Ge(i.geoPointValue.latitude)&&Ge(s.geoPointValue.longitude)===Ge(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ge(s.integerValue)===Ge(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Ge(s.doubleValue),a=Ge(i.doubleValue);return o===a?qu(o)===qu(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Ni(t.arrayValue.values||[],e.arrayValue.values||[],Dn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(e_(o)!==e_(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Dn(o[l],a[l])))return!1;return!0}(t,e);default:return ne(52216,{left:t})}}function xa(t,e){return(t.values||[]).find(n=>Dn(n,e))!==void 0}function Ri(t,e){if(t===e)return 0;const n=qr(t),r=qr(e);if(n!==r)return fe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return fe(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=Ge(i.integerValue||i.doubleValue),l=Ge(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return n_(t.timestampValue,e.timestampValue);case 4:return n_(va(t),va(e));case 5:return xh(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Gr(i),l=Gr(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=fe(a[c],l[c]);if(h!==0)return h}return fe(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=fe(Ge(i.latitude),Ge(o.latitude));return a!==0?a:fe(Ge(i.longitude),Ge(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return r_(t.arrayValue,e.arrayValue);case 10:return function(i,o){var g,v,x,I;const a=i.fields||{},l=o.fields||{},c=(g=a[ju])==null?void 0:g.arrayValue,h=(v=l[ju])==null?void 0:v.arrayValue,m=fe(((x=c==null?void 0:c.values)==null?void 0:x.length)||0,((I=h==null?void 0:h.values)==null?void 0:I.length)||0);return m!==0?m:r_(c,h)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Rl.mapValue&&o===Rl.mapValue)return 0;if(i===Rl.mapValue)return 1;if(o===Rl.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let m=0;m<l.length&&m<h.length;++m){const g=xh(l[m],h[m]);if(g!==0)return g;const v=Ri(a[l[m]],c[h[m]]);if(v!==0)return v}return fe(l.length,h.length)}(t.mapValue,e.mapValue);default:throw ne(23264,{he:n})}}function n_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return fe(t,e);const n=Br(t),r=Br(e),s=fe(n.seconds,r.seconds);return s!==0?s:fe(n.nanos,r.nanos)}function r_(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Ri(n[s],r[s]);if(i)return i}return fe(n.length,r.length)}function Pi(t){return wh(t)}function wh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Br(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Gr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Z.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=wh(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${wh(n.fields[o])}`;return s+"}"}(t.mapValue):ne(61005,{value:t})}function Zl(t){switch(qr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Pc(t);return e?16+Zl(e):16;case 5:return 2*t.stringValue.length;case 6:return Gr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Zl(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Jr(r.fields,(i,o)=>{s+=i.length+Zl(o)}),s}(t.mapValue);default:throw ne(13486,{value:t})}}function s_(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Eh(t){return!!t&&"integerValue"in t}function lm(t){return!!t&&"arrayValue"in t}function i_(t){return!!t&&"nullValue"in t}function o_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function eu(t){return!!t&&"mapValue"in t}function v5(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[KT])==null?void 0:r.stringValue)===JT}function zo(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Jr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=zo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=zo(t.arrayValue.values[n]);return e}return{...t}}function _5(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===y5}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.value=e}static empty(){return new Mt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!eu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=zo(n)}setAll(e){let n=ot.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=zo(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());eu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Dn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];eu(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Jr(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Mt(zo(this.value))}}function YT(t){const e=[];return Jr(t.fields,(n,r)=>{const s=new ot([n]);if(eu(r)){const i=YT(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new jt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new vt(e,0,se.min(),se.min(),se.min(),Mt.empty(),0)}static newFoundDocument(e,n,r,s){return new vt(e,1,n,se.min(),r,s,0)}static newNoDocument(e,n){return new vt(e,2,n,se.min(),se.min(),Mt.empty(),0)}static newUnknownDocument(e,n){return new vt(e,3,n,se.min(),se.min(),Mt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Mt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Mt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof vt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new vt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(e,n){this.position=e,this.inclusive=n}}function a_(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=Z.comparator(Z.fromName(o.referenceValue),n.key):r=Ri(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function l_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Dn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(e,n="asc"){this.field=e,this.dir=n}}function x5(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{}class ze extends QT{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new E5(e,n,r):n==="array-contains"?new S5(e,r):n==="in"?new I5(e,r):n==="not-in"?new A5(e,r):n==="array-contains-any"?new k5(e,r):new ze(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new T5(e,r):new C5(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ri(n,this.value)):n!==null&&qr(this.value)===qr(n)&&this.matchesComparison(Ri(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ne(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fn extends QT{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new fn(e,n)}matches(e){return XT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function XT(t){return t.op==="and"}function ZT(t){return w5(t)&&XT(t)}function w5(t){for(const e of t.filters)if(e instanceof fn)return!1;return!0}function Th(t){if(t instanceof ze)return t.field.canonicalString()+t.op.toString()+Pi(t.value);if(ZT(t))return t.filters.map(e=>Th(e)).join(",");{const e=t.filters.map(n=>Th(n)).join(",");return`${t.op}(${e})`}}function eC(t,e){return t instanceof ze?function(r,s){return s instanceof ze&&r.op===s.op&&r.field.isEqual(s.field)&&Dn(r.value,s.value)}(t,e):t instanceof fn?function(r,s){return s instanceof fn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&eC(o,s.filters[a]),!0):!1}(t,e):void ne(19439)}function tC(t){return t instanceof ze?function(n){return`${n.field.canonicalString()} ${n.op} ${Pi(n.value)}`}(t):t instanceof fn?function(n){return n.op.toString()+" {"+n.getFilters().map(tC).join(" ,")+"}"}(t):"Filter"}class E5 extends ze{constructor(e,n,r){super(e,n,r),this.key=Z.fromName(r.referenceValue)}matches(e){const n=Z.comparator(e.key,this.key);return this.matchesComparison(n)}}class T5 extends ze{constructor(e,n){super(e,"in",n),this.keys=nC("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class C5 extends ze{constructor(e,n){super(e,"not-in",n),this.keys=nC("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function nC(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>Z.fromName(r.referenceValue))}class S5 extends ze{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return lm(n)&&xa(n.arrayValue,this.value)}}class I5 extends ze{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&xa(this.value.arrayValue,n)}}class A5 extends ze{constructor(e,n){super(e,"not-in",n)}matches(e){if(xa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!xa(this.value.arrayValue,n)}}class k5 extends ze{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!lm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>xa(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N5{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function u_(t,e=null,n=[],r=[],s=null,i=null,o=null){return new N5(t,e,n,r,s,i,o)}function um(t){const e=oe(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Th(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Rc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Pi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Pi(r)).join(",")),e.Te=n}return e.Te}function cm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!x5(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!eC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!l_(t.startAt,e.startAt)&&l_(t.endAt,e.endAt)}function Ch(t){return Z.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function b5(t,e,n,r,s,i,o,a){return new Ba(t,e,n,r,s,i,o,a)}function rC(t){return new Ba(t)}function c_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function sC(t){return t.collectionGroup!==null}function $o(t){const e=oe(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Qe(ot.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new $u(i,r))}),n.has(ot.keyField().canonicalString())||e.Ie.push(new $u(ot.keyField(),r))}return e.Ie}function In(t){const e=oe(t);return e.Ee||(e.Ee=R5(e,$o(t))),e.Ee}function R5(t,e){if(t.limitType==="F")return u_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new $u(s.field,i)});const n=t.endAt?new zu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new zu(t.startAt.position,t.startAt.inclusive):null;return u_(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Sh(t,e){const n=t.filters.concat([e]);return new Ba(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Ih(t,e,n){return new Ba(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Mc(t,e){return cm(In(t),In(e))&&t.limitType===e.limitType}function iC(t){return`${um(In(t))}|lt:${t.limitType}`}function qs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>tC(s)).join(", ")}]`),Rc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Pi(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Pi(s)).join(",")),`Target(${r})`}(In(t))}; limitType=${t.limitType})`}function Dc(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Z.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of $o(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=a_(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,$o(r),s)||r.endAt&&!function(o,a,l){const c=a_(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,$o(r),s))}(t,e)}function P5(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function oC(t){return(e,n)=>{let r=!1;for(const s of $o(t)){const i=M5(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function M5(t,e,n){const r=t.field.isKeyField()?Z.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?Ri(l,c):ne(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ne(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Jr(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return qT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D5=new Ve(Z.comparator);function Yn(){return D5}const aC=new Ve(Z.comparator);function Ro(...t){let e=aC;for(const n of t)e=e.insert(n.key,n);return e}function lC(t){let e=aC;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function cs(){return Wo()}function uC(){return Wo()}function Wo(){return new Ps(t=>t.toString(),(t,e)=>t.isEqual(e))}const L5=new Ve(Z.comparator),V5=new Qe(Z.comparator);function he(...t){let e=V5;for(const n of t)e=e.add(n);return e}const U5=new Qe(fe);function F5(){return U5}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qu(e)?"-0":e}}function cC(t){return{integerValue:""+t}}function dC(t,e){return f5(e)?cC(e):dm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(){this._=void 0}}function O5(t,e,n){return t instanceof wa?function(s,i){const o={fields:{[zT]:{stringValue:jT},[WT]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&am(i)&&(i=Pc(i)),i&&(o.fields[$T]=i),{mapValue:o}}(n,e):t instanceof Ea?hC(t,e):t instanceof Ta?pC(t,e):function(s,i){const o=fC(s,i),a=d_(o)+d_(s.Ae);return Eh(o)&&Eh(s.Ae)?cC(a):dm(s.serializer,a)}(t,e)}function B5(t,e,n){return t instanceof Ea?hC(t,e):t instanceof Ta?pC(t,e):n}function fC(t,e){return t instanceof Ca?function(r){return Eh(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class wa extends Lc{}class Ea extends Lc{constructor(e){super(),this.elements=e}}function hC(t,e){const n=mC(e);for(const r of t.elements)n.some(s=>Dn(s,r))||n.push(r);return{arrayValue:{values:n}}}class Ta extends Lc{constructor(e){super(),this.elements=e}}function pC(t,e){let n=mC(e);for(const r of t.elements)n=n.filter(s=>!Dn(s,r));return{arrayValue:{values:n}}}class Ca extends Lc{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function d_(t){return Ge(t.integerValue||t.doubleValue)}function mC(t){return lm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(e,n){this.field=e,this.transform=n}}function G5(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Ea&&s instanceof Ea||r instanceof Ta&&s instanceof Ta?Ni(r.elements,s.elements,Dn):r instanceof Ca&&s instanceof Ca?Dn(r.Ae,s.Ae):r instanceof wa&&s instanceof wa}(t.transform,e.transform)}class q5{constructor(e,n){this.version=e,this.transformResults=n}}class An{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new An}static exists(e){return new An(void 0,e)}static updateTime(e){return new An(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function tu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Vc{}function yC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new _C(t.key,An.none()):new Ga(t.key,t.data,An.none());{const n=t.data,r=Mt.empty();let s=new Qe(ot.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Yr(t.key,r,new jt(s.toArray()),An.none())}}function H5(t,e,n){t instanceof Ga?function(s,i,o){const a=s.value.clone(),l=h_(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Yr?function(s,i,o){if(!tu(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=h_(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(vC(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ko(t,e,n,r){return t instanceof Ga?function(i,o,a,l){if(!tu(i.precondition,o))return a;const c=i.value.clone(),h=p_(i.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Yr?function(i,o,a,l){if(!tu(i.precondition,o))return a;const c=p_(i.fieldTransforms,l,o),h=o.data;return h.setAll(vC(i)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,o,a){return tu(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function j5(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=fC(r.transform,s||null);i!=null&&(n===null&&(n=Mt.empty()),n.set(r.field,i))}return n||null}function f_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ni(r,s,(i,o)=>G5(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ga extends Vc{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Yr extends Vc{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function vC(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function h_(t,e,n){const r=new Map;xe(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,B5(o,a,n[s]))}return r}function p_(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,O5(i,o,e))}return r}class _C extends Vc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class z5 extends Vc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $5{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&H5(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ko(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ko(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=uC();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=yC(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(se.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),he())}isEqual(e){return this.batchId===e.batchId&&Ni(this.mutations,e.mutations,(n,r)=>f_(n,r))&&Ni(this.baseMutations,e.baseMutations,(n,r)=>f_(n,r))}}class fm{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){xe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return L5}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new fm(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W5{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K5{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var He,me;function J5(t){switch(t){case G.OK:return ne(64938);case G.CANCELLED:case G.UNKNOWN:case G.DEADLINE_EXCEEDED:case G.RESOURCE_EXHAUSTED:case G.INTERNAL:case G.UNAVAILABLE:case G.UNAUTHENTICATED:return!1;case G.INVALID_ARGUMENT:case G.NOT_FOUND:case G.ALREADY_EXISTS:case G.PERMISSION_DENIED:case G.FAILED_PRECONDITION:case G.ABORTED:case G.OUT_OF_RANGE:case G.UNIMPLEMENTED:case G.DATA_LOSS:return!0;default:return ne(15467,{code:t})}}function xC(t){if(t===void 0)return Jn("GRPC error has no .code"),G.UNKNOWN;switch(t){case He.OK:return G.OK;case He.CANCELLED:return G.CANCELLED;case He.UNKNOWN:return G.UNKNOWN;case He.DEADLINE_EXCEEDED:return G.DEADLINE_EXCEEDED;case He.RESOURCE_EXHAUSTED:return G.RESOURCE_EXHAUSTED;case He.INTERNAL:return G.INTERNAL;case He.UNAVAILABLE:return G.UNAVAILABLE;case He.UNAUTHENTICATED:return G.UNAUTHENTICATED;case He.INVALID_ARGUMENT:return G.INVALID_ARGUMENT;case He.NOT_FOUND:return G.NOT_FOUND;case He.ALREADY_EXISTS:return G.ALREADY_EXISTS;case He.PERMISSION_DENIED:return G.PERMISSION_DENIED;case He.FAILED_PRECONDITION:return G.FAILED_PRECONDITION;case He.ABORTED:return G.ABORTED;case He.OUT_OF_RANGE:return G.OUT_OF_RANGE;case He.UNIMPLEMENTED:return G.UNIMPLEMENTED;case He.DATA_LOSS:return G.DATA_LOSS;default:return ne(39323,{code:t})}}(me=He||(He={}))[me.OK=0]="OK",me[me.CANCELLED=1]="CANCELLED",me[me.UNKNOWN=2]="UNKNOWN",me[me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",me[me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",me[me.NOT_FOUND=5]="NOT_FOUND",me[me.ALREADY_EXISTS=6]="ALREADY_EXISTS",me[me.PERMISSION_DENIED=7]="PERMISSION_DENIED",me[me.UNAUTHENTICATED=16]="UNAUTHENTICATED",me[me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",me[me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",me[me.ABORTED=10]="ABORTED",me[me.OUT_OF_RANGE=11]="OUT_OF_RANGE",me[me.UNIMPLEMENTED=12]="UNIMPLEMENTED",me[me.INTERNAL=13]="INTERNAL",me[me.UNAVAILABLE=14]="UNAVAILABLE",me[me.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y5(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q5=new Mr([4294967295,4294967295],0);function m_(t){const e=Y5().encode(t),n=new RT;return n.update(e),new Uint8Array(n.digest())}function g_(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Mr([n,r],0),new Mr([s,i],0)]}class hm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Po(`Invalid padding: ${n}`);if(r<0)throw new Po(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Po(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Po(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Mr.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Mr.fromNumber(r)));return s.compare(Q5)===1&&(s=new Mr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=m_(e),[r,s]=g_(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new hm(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=m_(e),[r,s]=g_(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Po extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,qa.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Uc(se.min(),s,new Ve(fe),Yn(),he())}}class qa{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new qa(r,n,he(),he(),he())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class wC{constructor(e,n){this.targetId=e,this.Ce=n}}class EC{constructor(e,n,r=ut.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class y_{constructor(){this.ve=0,this.Fe=v_(),this.Me=ut.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=he(),n=he(),r=he();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ne(38017,{changeType:i})}}),new qa(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=v_()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,xe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class X5{constructor(e){this.Ge=e,this.ze=new Map,this.je=Yn(),this.Je=Pl(),this.He=Pl(),this.Ye=new Ve(fe)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ne(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(Ch(i))if(r===0){const o=new Z(i.path);this.et(n,o,vt.newNoDocument(o,se.min()))}else xe(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,c)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Gr(r).toUint8Array()}catch(l){if(l instanceof HT)return ki("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new hm(o,s,i)}catch(l){return ki(l instanceof Po?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const a=this.ot(o);if(a){if(i.current&&Ch(a.target)){const l=new Z(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,vt.newNoDocument(l,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let r=he();this.He.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.ot(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new Uc(e,n,this.Ye,this.je,r);return this.je=Yn(),this.Je=Pl(),this.He=Pl(),this.Ye=new Ve(fe),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new y_,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Qe(fe),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Qe(fe),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Y("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new y_),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Pl(){return new Ve(Z.comparator)}function v_(){return new Ve(Z.comparator)}const Z5={asc:"ASCENDING",desc:"DESCENDING"},eL={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tL={and:"AND",or:"OR"};class nL{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ah(t,e){return t.useProto3Json||Rc(e)?e:{value:e}}function Wu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function TC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function rL(t,e){return Wu(t,e.toTimestamp())}function kn(t){return xe(!!t,49232),se.fromTimestamp(function(n){const r=Br(n);return new be(r.seconds,r.nanos)}(t))}function pm(t,e){return kh(t,e).canonicalString()}function kh(t,e){const n=function(s){return new Se(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function CC(t){const e=Se.fromString(t);return xe(NC(e),10190,{key:e.toString()}),e}function Nh(t,e){return pm(t.databaseId,e.path)}function Zd(t,e){const n=CC(e);if(n.get(1)!==t.databaseId.projectId)throw new J(G.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new J(G.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Z(IC(n))}function SC(t,e){return pm(t.databaseId,e)}function sL(t){const e=CC(t);return e.length===4?Se.emptyPath():IC(e)}function bh(t){return new Se(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function IC(t){return xe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function __(t,e,n){return{name:Nh(t,e),fields:n.value.mapValue.fields}}function iL(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ne(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,h){return c.useProto3Json?(xe(h===void 0||typeof h=="string",58123),ut.fromBase64String(h||"")):(xe(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),ut.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?G.UNKNOWN:xC(c.code);return new J(h,c.message||"")}(o);n=new EC(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Zd(t,r.document.name),i=kn(r.document.updateTime),o=r.document.createTime?kn(r.document.createTime):se.min(),a=new Mt({mapValue:{fields:r.document.fields}}),l=vt.newFoundDocument(s,i,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new nu(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Zd(t,r.document),i=r.readTime?kn(r.readTime):se.min(),o=vt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new nu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Zd(t,r.document),i=r.removedTargetIds||[];n=new nu([],i,s,null)}else{if(!("filter"in e))return ne(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new K5(s,i),a=r.targetId;n=new wC(a,o)}}return n}function oL(t,e){let n;if(e instanceof Ga)n={update:__(t,e.key,e.value)};else if(e instanceof _C)n={delete:Nh(t,e.key)};else if(e instanceof Yr)n={update:__(t,e.key,e.data),updateMask:mL(e.fieldMask)};else{if(!(e instanceof z5))return ne(16599,{Vt:e.type});n={verify:Nh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof wa)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ea)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ta)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ca)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw ne(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:rL(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ne(27497)}(t,e.precondition)),n}function aL(t,e){return t&&t.length>0?(xe(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?kn(s.updateTime):kn(i);return o.isEqual(se.min())&&(o=kn(i)),new q5(o,s.transformResults||[])}(n,e))):[]}function lL(t,e){return{documents:[SC(t,e.path)]}}function uL(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=SC(t,s);const i=function(c){if(c.length!==0)return kC(fn.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(h=>function(g){return{field:Hs(g.field),direction:fL(g.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Ah(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:n,parent:s}}function cL(t){let e=sL(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){xe(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(m){const g=AC(m);return g instanceof fn&&ZT(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(g=>function(x){return new $u(js(x.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(g))}(n.orderBy));let a=null;n.limit&&(a=function(m){let g;return g=typeof m=="object"?m.value:m,Rc(g)?null:g}(n.limit));let l=null;n.startAt&&(l=function(m){const g=!!m.before,v=m.values||[];return new zu(v,g)}(n.startAt));let c=null;return n.endAt&&(c=function(m){const g=!m.before,v=m.values||[];return new zu(v,g)}(n.endAt)),b5(e,s,o,i,a,"F",l,c)}function dL(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ne(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function AC(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=js(n.unaryFilter.field);return ze.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=js(n.unaryFilter.field);return ze.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=js(n.unaryFilter.field);return ze.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=js(n.unaryFilter.field);return ze.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ne(61313);default:return ne(60726)}}(t):t.fieldFilter!==void 0?function(n){return ze.create(js(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ne(58110);default:return ne(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return fn.create(n.compositeFilter.filters.map(r=>AC(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ne(1026)}}(n.compositeFilter.op))}(t):ne(30097,{filter:t})}function fL(t){return Z5[t]}function hL(t){return eL[t]}function pL(t){return tL[t]}function Hs(t){return{fieldPath:t.canonicalString()}}function js(t){return ot.fromServerFormat(t.fieldPath)}function kC(t){return t instanceof ze?function(n){if(n.op==="=="){if(o_(n.value))return{unaryFilter:{field:Hs(n.field),op:"IS_NAN"}};if(i_(n.value))return{unaryFilter:{field:Hs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(o_(n.value))return{unaryFilter:{field:Hs(n.field),op:"IS_NOT_NAN"}};if(i_(n.value))return{unaryFilter:{field:Hs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Hs(n.field),op:hL(n.op),value:n.value}}}(t):t instanceof fn?function(n){const r=n.getFilters().map(s=>kC(s));return r.length===1?r[0]:{compositeFilter:{op:pL(n.op),filters:r}}}(t):ne(54877,{filter:t})}function mL(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function NC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e,n,r,s,i=se.min(),o=se.min(),a=ut.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new wr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new wr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new wr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new wr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gL{constructor(e){this.yt=e}}function yL(t){const e=cL({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ih(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vL{constructor(){this.Cn=new _L}addToCollectionParentIndex(e,n){return this.Cn.add(n),q.resolve()}getCollectionParents(e,n){return q.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return q.resolve()}deleteFieldIndex(e,n){return q.resolve()}deleteAllFieldIndexes(e){return q.resolve()}createTargetIndexes(e,n){return q.resolve()}getDocumentsMatchingTarget(e,n){return q.resolve(null)}getIndexType(e,n){return q.resolve(0)}getFieldIndexes(e,n){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,n){return q.resolve(Or.min())}getMinOffsetFromCollectionGroup(e,n){return q.resolve(Or.min())}updateCollectionGroup(e,n,r){return q.resolve()}updateIndexEntries(e,n){return q.resolve()}}class _L{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Qe(Se.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Qe(Se.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},bC=41943040;class Rt{static withCacheSize(e){return new Rt(e,Rt.DEFAULT_COLLECTION_PERCENTILE,Rt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rt.DEFAULT_COLLECTION_PERCENTILE=10,Rt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Rt.DEFAULT=new Rt(bC,Rt.DEFAULT_COLLECTION_PERCENTILE,Rt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Rt.DISABLED=new Rt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Mi(0)}static cr(){return new Mi(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w_="LruGarbageCollector",xL=1048576;function E_([t,e],[n,r]){const s=fe(t,n);return s===0?fe(e,r):s}class wL{constructor(e){this.Ir=e,this.buffer=new Qe(E_),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();E_(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class EL{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Y(w_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Wi(n)?Y(w_,"Ignoring IndexedDB error during garbage collection: ",n):await $i(n)}await this.Vr(3e5)})}}class TL{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return q.resolve(bc.ce);const r=new wL(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Y("LruGarbageCollector","Garbage collection skipped; disabled"),q.resolve(x_)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Y("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),x_):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,a,l,c;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(Y("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),s=this.params.maximumSequenceNumbersToCollect):s=m,o=Date.now(),this.nthSequenceNumber(e,s))).next(m=>(r=m,a=Date.now(),this.removeTargets(e,r,n))).next(m=>(i=m,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(c=Date.now(),Gs()<=de.DEBUG&&Y("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${m} documents in `+(c-l)+`ms
Total Duration: ${c-h}ms`),q.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:m})))}}function CL(t,e){return new TL(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SL{constructor(){this.changes=new Ps(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,vt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?q.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IL{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AL{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Ko(r.mutation,s,jt.empty(),be.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,he()).next(()=>r))}getLocalViewOfDocuments(e,n,r=he()){const s=cs();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Ro();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=cs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,he()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Yn();const o=Wo(),a=function(){return Wo()}();return n.forEach((l,c)=>{const h=r.get(c.key);s.has(c.key)&&(h===void 0||h.mutation instanceof Yr)?i=i.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),Ko(h.mutation,c,h.mutation.getFieldMask(),be.now())):o.set(c.key,jt.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>a.set(c,new IL(h,o.get(c)??null))),a))}recalculateAndSaveOverlays(e,n){const r=Wo();let s=new Ve((o,a)=>o-a),i=he();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=r.get(l)||jt.empty();h=a.applyToLocalView(c,h),r.set(l,h);const m=(s.get(a.batchId)||he()).add(l);s=s.insert(a.batchId,m)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,m=uC();h.forEach(g=>{if(!i.has(g)){const v=yC(n.get(g),r.get(g));v!==null&&m.set(g,v),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,m))}return q.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return Z.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):sC(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):q.resolve(cs());let a=ya,l=i;return o.next(c=>q.forEach(c,(h,m)=>(a<m.largestBatchId&&(a=m.largestBatchId),i.get(h)?q.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{l=l.insert(h,g)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,he())).next(h=>({batchId:a,changes:lC(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Z(n)).next(r=>{let s=Ro();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Ro();return this.indexManager.getCollectionParents(e,i).next(a=>q.forEach(a,l=>{const c=function(m,g){return new Ba(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(h=>{h.forEach((m,g)=>{o=o.insert(m,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,vt.newInvalidDocument(h)))});let a=Ro();return o.forEach((l,c)=>{const h=i.get(l);h!==void 0&&Ko(h.mutation,c,jt.empty(),be.now()),Dc(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kL{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return q.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:kn(s.createTime)}}(n)),q.resolve()}getNamedQuery(e,n){return q.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:yL(s.bundledQuery),readTime:kn(s.readTime)}}(n)),q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NL{constructor(){this.overlays=new Ve(Z.comparator),this.qr=new Map}getOverlay(e,n){return q.resolve(this.overlays.get(n))}getOverlays(e,n){const r=cs();return q.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),q.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),q.resolve()}getOverlaysForCollection(e,n,r){const s=cs(),i=n.length+1,o=new Z(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return q.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ve((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=i.get(c.largestBatchId);h===null&&(h=cs(),i=i.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=cs(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=s)););return q.resolve(a)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new W5(n,r));let i=this.qr.get(n);i===void 0&&(i=he(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bL{constructor(){this.sessionToken=ut.EMPTY_BYTE_STRING}getSessionToken(e){return q.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(){this.Qr=new Qe(et.$r),this.Ur=new Qe(et.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new et(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new et(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new Z(new Se([])),r=new et(n,e),s=new et(n,e+1),i=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Z(new Se([])),r=new et(n,e),s=new et(n,e+1);let i=he();return this.Ur.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new et(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class et{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Z.comparator(e.key,n.key)||fe(e.Yr,n.Yr)}static Kr(e,n){return fe(e.Yr,n.Yr)||Z.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RL{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Qe(et.$r)}checkEmpty(e){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new $5(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.Zr=this.Zr.add(new et(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return q.resolve(o)}lookupMutationBatch(e,n){return q.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return q.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?om:this.tr-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new et(n,0),s=new et(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],o=>{const a=this.Xr(o.Yr);i.push(a)}),q.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Qe(fe);return n.forEach(s=>{const i=new et(s,0),o=new et(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],a=>{r=r.add(a.Yr)})}),q.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;Z.isDocumentKey(i)||(i=i.child(""));const o=new et(new Z(i),0);let a=new Qe(fe);return this.Zr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.Yr)),!0)},o),q.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){xe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return q.forEach(n.mutations,s=>{const i=new et(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new et(n,0),s=this.Zr.firstAfterOrEqual(r);return q.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,q.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PL{constructor(e){this.ri=e,this.docs=function(){return new Ve(Z.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return q.resolve(r?r.document.mutableCopy():vt.newInvalidDocument(n))}getEntries(e,n){let r=Yn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():vt.newInvalidDocument(s))}),q.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Yn();const o=n.path,a=new Z(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||l5(a5(h),r)<=0||(s.has(h.key)||Dc(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return q.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ne(9500)}ii(e,n){return q.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new ML(this)}getSize(e){return q.resolve(this.size)}}class ML extends SL{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),q.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DL{constructor(e){this.persistence=e,this.si=new Ps(n=>um(n),cm),this.lastRemoteSnapshotVersion=se.min(),this.highestTargetId=0,this.oi=0,this._i=new mm,this.targetCount=0,this.ai=Mi.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),q.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Mi(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,q.resolve()}updateTargetData(e,n){return this.Pr(n),q.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),q.waitFor(i).next(()=>s)}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return q.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),q.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),q.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),q.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return q.resolve(r)}containsKey(e,n){return q.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(e,n){this.ui={},this.overlays={},this.ci=new bc(0),this.li=!1,this.li=!0,this.hi=new bL,this.referenceDelegate=e(this),this.Pi=new DL(this),this.indexManager=new vL,this.remoteDocumentCache=function(s){return new PL(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new gL(n),this.Ii=new kL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new NL,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new RL(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){Y("MemoryPersistence","Starting transaction:",e);const s=new LL(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return q.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class LL extends c5{constructor(e){super(),this.currentSequenceNumber=e}}class gm{constructor(e){this.persistence=e,this.Ri=new mm,this.Vi=null}static mi(e){return new gm(e)}get fi(){if(this.Vi)return this.Vi;throw ne(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),q.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),q.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),q.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.fi,r=>{const s=Z.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,se.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return q.or([()=>q.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Ku{constructor(e,n){this.persistence=e,this.pi=new Ps(r=>h5(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=CL(this,n)}static mi(e,n){return new Ku(e,n)}Ei(){}di(e){return q.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return q.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?q.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(a=>{a||(r++,i.removeEntry(o,se.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),q.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),q.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),q.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),q.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Zl(e.data.value)),n}br(e,n,r){return q.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return q.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=he(),s=he();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new ym(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UL{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return ND()?8:d5(Et())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new VL;return this.Ss(e,n,o).next(a=>{if(i.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(Gs()<=de.DEBUG&&Y("QueryEngine","SDK will not create cache indexes for query:",qs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),q.resolve()):(Gs()<=de.DEBUG&&Y("QueryEngine","Query:",qs(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(Gs()<=de.DEBUG&&Y("QueryEngine","The SDK decides to create cache indexes for query:",qs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,In(n))):q.resolve())}ys(e,n){if(c_(n))return q.resolve(null);let r=In(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Ih(n,null,"F"),r=In(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=he(...i);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Ds(n,a);return this.Cs(n,c,o,l.readTime)?this.ys(e,Ih(n,null,"F")):this.vs(e,c,n,l)}))})))}ws(e,n,r,s){return c_(n)||s.isEqual(se.min())?q.resolve(null):this.ps.getDocuments(e,r).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?q.resolve(null):(Gs()<=de.DEBUG&&Y("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),qs(n)),this.vs(e,o,n,o5(s,ya)).next(a=>a))})}Ds(e,n){let r=new Qe(oC(e));return n.forEach((s,i)=>{Dc(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return Gs()<=de.DEBUG&&Y("QueryEngine","Using full collection scan to execute query:",qs(n)),this.ps.getDocumentsMatchingQuery(e,n,Or.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vm="LocalStore",FL=3e8;class OL{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Ve(fe),this.xs=new Ps(i=>um(i),cm),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new AL(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function BL(t,e,n,r){return new OL(t,e,n,r)}async function PC(t,e){const n=oe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=he();for(const c of s){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of i){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Ls:c,removedBatchIds:o,addedBatchIds:a}))})})}function GL(t,e){const n=oe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const m=c.batch,g=m.keys();let v=q.resolve();return g.forEach(x=>{v=v.next(()=>h.getEntry(l,x)).next(I=>{const P=c.docVersions.get(x);xe(P!==null,48541),I.version.compareTo(P)<0&&(m.applyToRemoteDocument(I,c),I.isValidDocument()&&(I.setReadTime(c.commitVersion),h.addEntry(I)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(l,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=he();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function MC(t){const e=oe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function qL(t,e){const n=oe(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const a=[];e.targetChanges.forEach((h,m)=>{const g=s.get(m);if(!g)return;a.push(n.Pi.removeMatchingKeys(i,h.removedDocuments,m).next(()=>n.Pi.addMatchingKeys(i,h.addedDocuments,m)));let v=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?v=v.withResumeToken(ut.EMPTY_BYTE_STRING,se.min()).withLastLimboFreeSnapshotVersion(se.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),s=s.insert(m,v),function(I,P,A){return I.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=FL?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(g,v,h)&&a.push(n.Pi.updateTargetData(i,v))});let l=Yn(),c=he();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),a.push(HL(i,o,e.documentUpdates).next(h=>{l=h.ks,c=h.qs})),!r.isEqual(se.min())){const h=n.Pi.getLastRemoteSnapshotVersion(i).next(m=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(h)}return q.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.Ms=s,i))}function HL(t,e,n){let r=he(),s=he();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Yn();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(se.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Y(vm,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{ks:o,qs:s}})}function jL(t,e){const n=oe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=om),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function zL(t,e){const n=oe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,q.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new wr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function Rh(t,e,n){const r=oe(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Wi(o))throw o;Y(vm,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function T_(t,e,n){const r=oe(t);let s=se.min(),i=he();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const m=oe(l),g=m.xs.get(h);return g!==void 0?q.resolve(m.Ms.get(g)):m.Pi.getTargetData(c,h)}(r,o,In(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:se.min(),n?i:he())).next(a=>($L(r,P5(e),a),{documents:a,Qs:i})))}function $L(t,e,n){let r=t.Os.get(e)||se.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class C_{constructor(){this.activeTargetIds=F5()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class WL{constructor(){this.Mo=new C_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new C_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KL{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S_="ConnectivityMonitor";class I_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Y(S_,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Y(S_,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ml=null;function Ph(){return Ml===null?Ml=function(){return 268435456+Math.round(2147483648*Math.random())}():Ml++,"0x"+Ml.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ef="RestConnection",JL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class YL{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Hu?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=Ph(),a=this.zo(e,n.toUriEncodedString());Y(ef,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,s,i);const{host:c}=new URL(a),h=Hi(c);return this.Jo(e,a,l,r,h).then(m=>(Y(ef,`Received RPC '${e}' ${o}: `,m),m),m=>{throw ki(ef,`RPC '${e}' ${o} failed with error: `,m,"url: ",a,"request:",r),m})}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+zi}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=JL[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QL{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pt="WebChannelConnection";class XL extends YL{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=Ph();return new Promise((a,l)=>{const c=new PT;c.setWithCredentials(!0),c.listenOnce(MT.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Xl.NO_ERROR:const m=c.getResponseJson();Y(pt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),a(m);break;case Xl.TIMEOUT:Y(pt,`RPC '${e}' ${o} timed out`),l(new J(G.DEADLINE_EXCEEDED,"Request time out"));break;case Xl.HTTP_ERROR:const g=c.getStatus();if(Y(pt,`RPC '${e}' ${o} failed with status:`,g,"response text:",c.getResponseText()),g>0){let v=c.getResponseJson();Array.isArray(v)&&(v=v[0]);const x=v==null?void 0:v.error;if(x&&x.status&&x.message){const I=function(A){const E=A.toLowerCase().replace(/_/g,"-");return Object.values(G).indexOf(E)>=0?E:G.UNKNOWN}(x.status);l(new J(I,x.message))}else l(new J(G.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new J(G.UNAVAILABLE,"Connection failed."));break;default:ne(9055,{l_:e,streamId:o,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{Y(pt,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(s);Y(pt,`RPC '${e}' ${o} sending request:`,s),c.send(n,"POST",h,r,15)})}T_(e,n,r){const s=Ph(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=VT(),a=LT(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=i.join("");Y(pt,`Creating RPC '${e}' stream ${s}: ${h}`,l);const m=o.createWebChannel(h,l);this.I_(m);let g=!1,v=!1;const x=new QL({Yo:P=>{v?Y(pt,`Not sending because RPC '${e}' stream ${s} is closed:`,P):(g||(Y(pt,`Opening RPC '${e}' stream ${s} transport.`),m.open(),g=!0),Y(pt,`RPC '${e}' stream ${s} sending:`,P),m.send(P))},Zo:()=>m.close()}),I=(P,A,E)=>{P.listen(A,k=>{try{E(k)}catch(D){setTimeout(()=>{throw D},0)}})};return I(m,bo.EventType.OPEN,()=>{v||(Y(pt,`RPC '${e}' stream ${s} transport opened.`),x.o_())}),I(m,bo.EventType.CLOSE,()=>{v||(v=!0,Y(pt,`RPC '${e}' stream ${s} transport closed`),x.a_(),this.E_(m))}),I(m,bo.EventType.ERROR,P=>{v||(v=!0,ki(pt,`RPC '${e}' stream ${s} transport errored. Name:`,P.name,"Message:",P.message),x.a_(new J(G.UNAVAILABLE,"The operation could not be completed")))}),I(m,bo.EventType.MESSAGE,P=>{var A;if(!v){const E=P.data[0];xe(!!E,16349);const k=E,D=(k==null?void 0:k.error)||((A=k[0])==null?void 0:A.error);if(D){Y(pt,`RPC '${e}' stream ${s} received error:`,D);const U=D.status;let L=function(C){const R=He[C];if(R!==void 0)return xC(R)}(U),T=D.message;L===void 0&&(L=G.INTERNAL,T="Unknown error status: "+U+" with message "+D.message),v=!0,x.a_(new J(L,T)),m.close()}else Y(pt,`RPC '${e}' stream ${s} received:`,E),x.u_(E)}}),I(a,DT.STAT_EVENT,P=>{P.stat===_h.PROXY?Y(pt,`RPC '${e}' stream ${s} detected buffering proxy`):P.stat===_h.NOPROXY&&Y(pt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{x.__()},0),x}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function tf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fc(t){return new nL(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&Y("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A_="PersistentStream";class LC{constructor(e,n,r,s,i,o,a,l){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new DC(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===G.RESOURCE_EXHAUSTED?(Jn(n.toString()),Jn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===G.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new J(G.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Y(A_,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(Y(A_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ZL extends LC{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=iL(this.serializer,e),r=function(i){if(!("targetChange"in i))return se.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?se.min():o.readTime?kn(o.readTime):se.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=bh(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=Ch(l)?{documents:lL(i,l)}:{query:uL(i,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=TC(i,o.resumeToken);const c=Ah(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(se.min())>0){a.readTime=Wu(i,o.snapshotVersion.toTimestamp());const c=Ah(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=dL(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=bh(this.serializer),n.removeTarget=e,this.q_(n)}}class eV extends LC{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return xe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,xe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){xe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=aL(e.writeResults,e.commitTime),r=kn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=bh(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>oL(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tV{}class nV extends tV{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new J(G.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,kh(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new J(G.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,kh(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new J(G.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class rV{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Jn(n),this.aa=!1):Y("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ss="RemoteStore";class sV{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{Ms(this)&&(Y(Ss,"Restarting streams for network reachability change."),await async function(l){const c=oe(l);c.Ea.add(4),await Ha(c),c.Ra.set("Unknown"),c.Ea.delete(4),await Oc(c)}(this))})}),this.Ra=new rV(r,s)}}async function Oc(t){if(Ms(t))for(const e of t.da)await e(!0)}async function Ha(t){for(const e of t.da)await e(!1)}function VC(t,e){const n=oe(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Em(n)?wm(n):Ki(n).O_()&&xm(n,e))}function _m(t,e){const n=oe(t),r=Ki(n);n.Ia.delete(e),r.O_()&&UC(n,e),n.Ia.size===0&&(r.O_()?r.L_():Ms(n)&&n.Ra.set("Unknown"))}function xm(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(se.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ki(t).Y_(e)}function UC(t,e){t.Va.Ue(e),Ki(t).Z_(e)}function wm(t){t.Va=new X5({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Ki(t).start(),t.Ra.ua()}function Em(t){return Ms(t)&&!Ki(t).x_()&&t.Ia.size>0}function Ms(t){return oe(t).Ea.size===0}function FC(t){t.Va=void 0}async function iV(t){t.Ra.set("Online")}async function oV(t){t.Ia.forEach((e,n)=>{xm(t,e)})}async function aV(t,e){FC(t),Em(t)?(t.Ra.ha(e),wm(t)):t.Ra.set("Unknown")}async function lV(t,e,n){if(t.Ra.set("Online"),e instanceof EC&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.Ia.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.Ia.delete(a),s.Va.removeTarget(a))}(t,e)}catch(r){Y(Ss,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ju(t,r)}else if(e instanceof nu?t.Va.Ze(e):e instanceof wC?t.Va.st(e):t.Va.tt(e),!n.isEqual(se.min()))try{const r=await MC(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Va.Tt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=i.Ia.get(c);h&&i.Ia.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=i.Ia.get(l);if(!h)return;i.Ia.set(l,h.withResumeToken(ut.EMPTY_BYTE_STRING,h.snapshotVersion)),UC(i,l);const m=new wr(h.target,l,c,h.sequenceNumber);xm(i,m)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){Y(Ss,"Failed to raise snapshot:",r),await Ju(t,r)}}async function Ju(t,e,n){if(!Wi(e))throw e;t.Ea.add(1),await Ha(t),t.Ra.set("Offline"),n||(n=()=>MC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Y(Ss,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Oc(t)})}function OC(t,e){return e().catch(n=>Ju(t,n,e))}async function Bc(t){const e=oe(t),n=Hr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:om;for(;uV(e);)try{const s=await jL(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,cV(e,s)}catch(s){await Ju(e,s)}BC(e)&&GC(e)}function uV(t){return Ms(t)&&t.Ta.length<10}function cV(t,e){t.Ta.push(e);const n=Hr(t);n.O_()&&n.X_&&n.ea(e.mutations)}function BC(t){return Ms(t)&&!Hr(t).x_()&&t.Ta.length>0}function GC(t){Hr(t).start()}async function dV(t){Hr(t).ra()}async function fV(t){const e=Hr(t);for(const n of t.Ta)e.ea(n.mutations)}async function hV(t,e,n){const r=t.Ta.shift(),s=fm.from(r,e,n);await OC(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Bc(t)}async function pV(t,e){e&&Hr(t).X_&&await async function(r,s){if(function(o){return J5(o)&&o!==G.ABORTED}(s.code)){const i=r.Ta.shift();Hr(r).B_(),await OC(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Bc(r)}}(t,e),BC(t)&&GC(t)}async function k_(t,e){const n=oe(t);n.asyncQueue.verifyOperationInProgress(),Y(Ss,"RemoteStore received new credentials");const r=Ms(n);n.Ea.add(3),await Ha(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Oc(n)}async function mV(t,e){const n=oe(t);e?(n.Ea.delete(2),await Oc(n)):e||(n.Ea.add(2),await Ha(n),n.Ra.set("Unknown"))}function Ki(t){return t.ma||(t.ma=function(n,r,s){const i=oe(n);return i.sa(),new ZL(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:iV.bind(null,t),t_:oV.bind(null,t),r_:aV.bind(null,t),H_:lV.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Em(t)?wm(t):t.Ra.set("Unknown")):(await t.ma.stop(),FC(t))})),t.ma}function Hr(t){return t.fa||(t.fa=function(n,r,s){const i=oe(n);return i.sa(),new eV(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:dV.bind(null,t),r_:pV.bind(null,t),ta:fV.bind(null,t),na:hV.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Bc(t)):(await t.fa.stop(),t.Ta.length>0&&(Y(Ss,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Dr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new Tm(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new J(G.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Cm(t,e){if(Jn("AsyncQueue",`${e}: ${t}`),Wi(t))return new J(G.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{static emptySet(e){return new pi(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Z.comparator(n.key,r.key):(n,r)=>Z.comparator(n.key,r.key),this.keyedMap=Ro(),this.sortedSet=new Ve(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof pi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new pi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N_{constructor(){this.ga=new Ve(Z.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ne(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Di{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Di(e,n,pi.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Mc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gV{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class yV{constructor(){this.queries=b_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=oe(n),i=s.queries;s.queries=b_(),i.forEach((o,a)=>{for(const l of a.Sa)l.onError(r)})})(this,new J(G.ABORTED,"Firestore shutting down"))}}function b_(){return new Ps(t=>iC(t),Mc)}async function vV(t,e){const n=oe(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new gV,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=Cm(o,`Initialization of query '${qs(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Sm(n)}async function _V(t,e){const n=oe(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function xV(t,e){const n=oe(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.Sa)a.Fa(s)&&(r=!0);o.wa=s}}r&&Sm(n)}function wV(t,e,n){const r=oe(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function Sm(t){t.Ca.forEach(e=>{e.next()})}var Mh,R_;(R_=Mh||(Mh={})).Ma="default",R_.Cache="cache";class EV{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Di(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Di.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Mh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(e){this.key=e}}class HC{constructor(e){this.key=e}}class TV{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=he(),this.mutatedKeys=he(),this.eu=oC(e),this.tu=new pi(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new N_,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,m)=>{const g=s.get(h),v=Dc(this.query,m)?m:null,x=!!g&&this.mutatedKeys.has(g.key),I=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let P=!1;g&&v?g.data.isEqual(v.data)?x!==I&&(r.track({type:3,doc:v}),P=!0):this.su(g,v)||(r.track({type:2,doc:v}),P=!0,(l&&this.eu(v,l)>0||c&&this.eu(v,c)<0)&&(a=!0)):!g&&v?(r.track({type:0,doc:v}),P=!0):g&&!v&&(r.track({type:1,doc:g}),P=!0,(l||c)&&(a=!0)),P&&(v?(o=o.add(v),i=I?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:a,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,m)=>function(v,x){const I=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ne(20277,{Rt:P})}};return I(v)-I(x)}(h.type,m.type)||this.eu(h.doc,m.doc)),this.ou(r),s=s??!1;const a=n&&!s?this._u():[],l=this.Xa.size===0&&this.current&&!s?1:0,c=l!==this.Za;return this.Za=l,o.length!==0||c?{snapshot:new Di(this.query,e.tu,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new N_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=he(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new HC(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new qC(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=he();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Di.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Im="SyncEngine";class CV{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class SV{constructor(e){this.key=e,this.hu=!1}}class IV{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Ps(a=>iC(a),Mc),this.Iu=new Map,this.Eu=new Set,this.du=new Ve(Z.comparator),this.Au=new Map,this.Ru=new mm,this.Vu={},this.mu=new Map,this.fu=Mi.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function AV(t,e,n=!0){const r=JC(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await jC(r,e,n,!0),s}async function kV(t,e){const n=JC(t);await jC(n,e,!0,!1)}async function jC(t,e,n,r){const s=await zL(t.localStore,In(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await NV(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&VC(t.remoteStore,s),a}async function NV(t,e,n,r,s){t.pu=(m,g,v)=>async function(I,P,A,E){let k=P.view.ru(A);k.Cs&&(k=await T_(I.localStore,P.query,!1).then(({documents:T})=>P.view.ru(T,k)));const D=E&&E.targetChanges.get(P.targetId),U=E&&E.targetMismatches.get(P.targetId)!=null,L=P.view.applyChanges(k,I.isPrimaryClient,D,U);return M_(I,P.targetId,L.au),L.snapshot}(t,m,g,v);const i=await T_(t.localStore,e,!0),o=new TV(e,i.Qs),a=o.ru(i.documents),l=qa.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);M_(t,n,c.au);const h=new CV(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function bV(t,e,n){const r=oe(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!Mc(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Rh(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&_m(r.remoteStore,s.targetId),Dh(r,s.targetId)}).catch($i)):(Dh(r,s.targetId),await Rh(r.localStore,s.targetId,!0))}async function RV(t,e){const n=oe(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),_m(n.remoteStore,r.targetId))}async function PV(t,e,n){const r=OV(t);try{const s=await function(o,a){const l=oe(o),c=be.now(),h=a.reduce((v,x)=>v.add(x.key),he());let m,g;return l.persistence.runTransaction("Locally write mutations","readwrite",v=>{let x=Yn(),I=he();return l.Ns.getEntries(v,h).next(P=>{x=P,x.forEach((A,E)=>{E.isValidDocument()||(I=I.add(A))})}).next(()=>l.localDocuments.getOverlayedDocuments(v,x)).next(P=>{m=P;const A=[];for(const E of a){const k=j5(E,m.get(E.key).overlayedDocument);k!=null&&A.push(new Yr(E.key,k,YT(k.value.mapValue),An.exists(!0)))}return l.mutationQueue.addMutationBatch(v,c,A,a)}).next(P=>{g=P;const A=P.applyToLocalDocumentSet(m,I);return l.documentOverlayCache.saveOverlays(v,P.batchId,A)})}).then(()=>({batchId:g.batchId,changes:lC(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Vu[o.currentUser.toKey()];c||(c=new Ve(fe)),c=c.insert(a,l),o.Vu[o.currentUser.toKey()]=c}(r,s.batchId,n),await ja(r,s.changes),await Bc(r.remoteStore)}catch(s){const i=Cm(s,"Failed to persist write");n.reject(i)}}async function zC(t,e){const n=oe(t);try{const r=await qL(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(xe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?xe(o.hu,14607):s.removedDocuments.size>0&&(xe(o.hu,42227),o.hu=!1))}),await ja(n,r,e)}catch(r){await $i(r)}}function P_(t,e,n){const r=oe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const a=o.view.va(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=oe(o);l.onlineState=a;let c=!1;l.queries.forEach((h,m)=>{for(const g of m.Sa)g.va(a)&&(c=!0)}),c&&Sm(l)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function MV(t,e,n){const r=oe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new Ve(Z.comparator);o=o.insert(i,vt.newNoDocument(i,se.min()));const a=he().add(i),l=new Uc(se.min(),new Map,new Ve(fe),o,a);await zC(r,l),r.du=r.du.remove(i),r.Au.delete(e),Am(r)}else await Rh(r.localStore,e,!1).then(()=>Dh(r,e,n)).catch($i)}async function DV(t,e){const n=oe(t),r=e.batch.batchId;try{const s=await GL(n.localStore,e);WC(n,r,null),$C(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ja(n,s)}catch(s){await $i(s)}}async function LV(t,e,n){const r=oe(t);try{const s=await function(o,a){const l=oe(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(m=>(xe(m!==null,37113),h=m.keys(),l.mutationQueue.removeMutationBatch(c,m))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(r.localStore,e);WC(r,e,n),$C(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ja(r,s)}catch(s){await $i(s)}}function $C(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function WC(t,e,n){const r=oe(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function Dh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||KC(t,r)})}function KC(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(_m(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Am(t))}function M_(t,e,n){for(const r of n)r instanceof qC?(t.Ru.addReference(r.key,e),VV(t,r)):r instanceof HC?(Y(Im,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||KC(t,r.key)):ne(19791,{wu:r})}function VV(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(Y(Im,"New document in limbo: "+n),t.Eu.add(r),Am(t))}function Am(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Z(Se.fromString(e)),r=t.fu.next();t.Au.set(r,new SV(n)),t.du=t.du.insert(n,r),VC(t.remoteStore,new wr(In(rC(n.path)),r,"TargetPurposeLimboResolution",bc.ce))}}async function ja(t,e,n){const r=oe(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,l)=>{o.push(r.pu(l,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const m=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,m?"current":"not-current")}if(c){s.push(c);const m=ym.As(l.targetId,c);i.push(m)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(l,c){const h=oe(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>q.forEach(c,g=>q.forEach(g.Es,v=>h.persistence.referenceDelegate.addReference(m,g.targetId,v)).next(()=>q.forEach(g.ds,v=>h.persistence.referenceDelegate.removeReference(m,g.targetId,v)))))}catch(m){if(!Wi(m))throw m;Y(vm,"Failed to update sequence numbers: "+m)}for(const m of c){const g=m.targetId;if(!m.fromCache){const v=h.Ms.get(g),x=v.snapshotVersion,I=v.withLastLimboFreeSnapshotVersion(x);h.Ms=h.Ms.insert(g,I)}}}(r.localStore,i))}async function UV(t,e){const n=oe(t);if(!n.currentUser.isEqual(e)){Y(Im,"User change. New user:",e.toKey());const r=await PC(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(a=>{a.forEach(l=>{l.reject(new J(G.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ja(n,r.Ls)}}function FV(t,e){const n=oe(t),r=n.Au.get(e);if(r&&r.hu)return he().add(r.key);{let s=he();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const a=n.Tu.get(o);s=s.unionWith(a.view.nu)}return s}}function JC(t){const e=oe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=zC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=FV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=MV.bind(null,e),e.Pu.H_=xV.bind(null,e.eventManager),e.Pu.yu=wV.bind(null,e.eventManager),e}function OV(t){const e=oe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=DV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=LV.bind(null,e),e}class Yu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Fc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return BL(this.persistence,new UL,e.initialUser,this.serializer)}Cu(e){return new RC(gm.mi,this.serializer)}Du(e){return new WL}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Yu.provider={build:()=>new Yu};class BV extends Yu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){xe(this.persistence.referenceDelegate instanceof Ku,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new EL(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Rt.withCacheSize(this.cacheSizeBytes):Rt.DEFAULT;return new RC(r=>Ku.mi(r,n),this.serializer)}}class Lh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>P_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=UV.bind(null,this.syncEngine),await mV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new yV}()}createDatastore(e){const n=Fc(e.databaseInfo.databaseId),r=function(i){return new XL(i)}(e.databaseInfo);return function(i,o,a,l){return new nV(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new sV(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>P_(this.syncEngine,n,0),function(){return I_.v()?new I_:new KL}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,h){const m=new IV(s,i,o,a,l,c);return h&&(m.gu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=oe(s);Y(Ss,"RemoteStore shutting down."),i.Ea.add(5),await Ha(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Lh.provider={build:()=>new Lh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GV{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Jn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jr="FirestoreClient";class qV{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=gt.UNAUTHENTICATED,this.clientId=im.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{Y(jr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Y(jr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Dr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Cm(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function nf(t,e){t.asyncQueue.verifyOperationInProgress(),Y(jr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await PC(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function D_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await HV(t);Y(jr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>k_(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>k_(e.remoteStore,s)),t._onlineComponents=e}async function HV(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Y(jr,"Using user provided OfflineComponentProvider");try{await nf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===G.FAILED_PRECONDITION||s.code===G.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;ki("Error using user provided cache. Falling back to memory cache: "+n),await nf(t,new Yu)}}else Y(jr,"Using default OfflineComponentProvider"),await nf(t,new BV(void 0));return t._offlineComponents}async function YC(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Y(jr,"Using user provided OnlineComponentProvider"),await D_(t,t._uninitializedComponentsProvider._online)):(Y(jr,"Using default OnlineComponentProvider"),await D_(t,new Lh))),t._onlineComponents}function jV(t){return YC(t).then(e=>e.syncEngine)}async function zV(t){const e=await YC(t),n=e.eventManager;return n.onListen=AV.bind(null,e.syncEngine),n.onUnlisten=bV.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=kV.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=RV.bind(null,e.syncEngine),n}function $V(t,e,n={}){const r=new Dr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const h=new GV({next:g=>{h.Nu(),o.enqueueAndForget(()=>_V(i,m)),g.fromCache&&l.source==="server"?c.reject(new J(G.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(g)},error:g=>c.reject(g)}),m=new EV(a,h,{includeMetadataChanges:!0,qa:!0});return vV(i,m)}(await zV(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QC(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC="firestore.googleapis.com",V_=!0;class U_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new J(G.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=XC,this.ssl=V_}else this.host=e.host,this.ssl=e.ssl??V_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=bC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<xL)throw new J(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}i5("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=QC(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new J(G.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new J(G.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new J(G.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Gc{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new U_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new J(G.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new J(G.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new U_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new J4;switch(r.type){case"firstParty":return new Z4(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new J(G.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=L_.get(n);r&&(Y("ComponentProvider","Removing Datastore"),L_.delete(n),r.terminate())}(this),Promise.resolve()}}function WV(t,e,n,r={}){var c;t=bi(t,Gc);const s=Hi(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;s&&(TT(`https://${a}`),CT("Firestore",!0)),i.host!==XC&&i.host!==a&&ki("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...i,host:a,ssl:s,emulatorOptions:r};if(!Es(l,o)&&(t._setSettings(l),r.mockUserToken)){let h,m;if(typeof r.mockUserToken=="string")h=r.mockUserToken,m=gt.MOCK_USER;else{h=xD(r.mockUserToken,(c=t._app)==null?void 0:c.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new J(G.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new gt(g)}t._authCredentials=new Y4(new FT(h,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ji(this.firestore,e,this._query)}}class Ye{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Lr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ye(this.firestore,e,this._key)}toJSON(){return{type:Ye._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Oa(n,Ye._jsonSchema))return new Ye(e,r||null,new Z(Se.fromString(n.referencePath)))}}Ye._jsonSchemaVersion="firestore/documentReference/1.0",Ye._jsonSchema={type:$e("string",Ye._jsonSchemaVersion),referencePath:$e("string")};class Lr extends Ji{constructor(e,n,r){super(e,n,rC(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ye(this.firestore,null,new Z(e))}withConverter(e){return new Lr(this.firestore,e,this._path)}}function Qr(t,e,...n){if(t=At(t),OT("collection","path",e),t instanceof Gc){const r=Se.fromString(e,...n);return Yv(r),new Lr(t,null,r)}{if(!(t instanceof Ye||t instanceof Lr))throw new J(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Se.fromString(e,...n));return Yv(r),new Lr(t.firestore,null,r)}}function km(t,e,...n){if(t=At(t),arguments.length===1&&(e=im.newId()),OT("doc","path",e),t instanceof Gc){const r=Se.fromString(e,...n);return Jv(r),new Ye(t,null,new Z(r))}{if(!(t instanceof Ye||t instanceof Lr))throw new J(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Se.fromString(e,...n));return Jv(r),new Ye(t.firestore,t instanceof Lr?t.converter:null,new Z(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F_="AsyncQueue";class O_{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new DC(this,"async_queue_retry"),this._c=()=>{const r=tf();r&&Y(F_,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=tf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=tf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Dr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Wi(e))throw e;Y(F_,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Jn("INTERNAL UNHANDLED ERROR: ",B_(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Tm.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&ne(47125,{Pc:B_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function B_(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class qc extends Gc{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new O_,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new O_(e),this._firestoreClient=void 0,await e}}}function KV(t,e){const n=typeof t=="object"?t:kT(),r=typeof t=="string"?t:Hu,s=rm(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=vD("firestore");i&&WV(s,...i)}return s}function ZC(t){if(t._terminated)throw new J(G.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||JV(t),t._firestoreClient}function JV(t){var r,s,i;const e=t._freezeSettings(),n=function(a,l,c,h){return new g5(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,QC(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new qV(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Qt(ut.fromBase64String(e))}catch(n){throw new J(G.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Qt(ut.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Qt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Oa(e,Qt._jsonSchema))return Qt.fromBase64String(e.bytes)}}Qt._jsonSchemaVersion="firestore/bytes/1.0",Qt._jsonSchema={type:$e("string",Qt._jsonSchemaVersion),bytes:$e("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new J(G.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ot(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new J(G.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new J(G.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return fe(this._lat,e._lat)||fe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Nn._jsonSchemaVersion}}static fromJSON(e){if(Oa(e,Nn._jsonSchema))return new Nn(e.latitude,e.longitude)}}Nn._jsonSchemaVersion="firestore/geoPoint/1.0",Nn._jsonSchema={type:$e("string",Nn._jsonSchemaVersion),latitude:$e("number"),longitude:$e("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:bn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Oa(e,bn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new bn(e.vectorValues);throw new J(G.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}bn._jsonSchemaVersion="firestore/vectorValue/1.0",bn._jsonSchema={type:$e("string",bn._jsonSchemaVersion),vectorValues:$e("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YV=/^__.*__$/;class QV{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Yr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ga(e,this.data,n,this.fieldTransforms)}}class eS{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Yr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function tS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ne(40011,{Ac:t})}}class Nm{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Nm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Qu(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(tS(this.Ac)&&YV.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class XV{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Fc(e)}Cc(e,n,r,s=!1){return new Nm({Ac:e,methodName:n,Dc:r,path:ot.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function bm(t){const e=t._freezeSettings(),n=Fc(t._databaseId);return new XV(t._databaseId,!!e.ignoreUndefinedProperties,n)}function ZV(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);Mm("Data must be an object, but it was:",o,r);const a=nS(r,o);let l,c;if(i.merge)l=new jt(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const m of i.mergeFields){const g=Vh(e,m,n);if(!o.contains(g))throw new J(G.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);sS(h,g)||h.push(g)}l=new jt(h),c=o.fieldTransforms.filter(m=>l.covers(m.field))}else l=null,c=o.fieldTransforms;return new QV(new Mt(a),l,c)}class jc extends za{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof jc}}class Rm extends za{_toFieldTransform(e){return new gC(e.path,new wa)}isEqual(e){return e instanceof Rm}}class Pm extends za{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new Ca(e.serializer,dC(e.serializer,this.Fc));return new gC(e.path,n)}isEqual(e){return e instanceof Pm&&this.Fc===e.Fc}}function eU(t,e,n,r){const s=t.Cc(1,e,n);Mm("Data must be an object, but it was:",s,r);const i=[],o=Mt.empty();Jr(r,(l,c)=>{const h=Dm(e,l,n);c=At(c);const m=s.yc(h);if(c instanceof jc)i.push(h);else{const g=$a(c,m);g!=null&&(i.push(h),o.set(h,g))}});const a=new jt(i);return new eS(o,a,s.fieldTransforms)}function tU(t,e,n,r,s,i){const o=t.Cc(1,e,n),a=[Vh(e,r,n)],l=[s];if(i.length%2!=0)throw new J(G.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)a.push(Vh(e,i[g])),l.push(i[g+1]);const c=[],h=Mt.empty();for(let g=a.length-1;g>=0;--g)if(!sS(c,a[g])){const v=a[g];let x=l[g];x=At(x);const I=o.yc(v);if(x instanceof jc)c.push(v);else{const P=$a(x,I);P!=null&&(c.push(v),h.set(v,P))}}const m=new jt(c);return new eS(h,m,o.fieldTransforms)}function nU(t,e,n,r=!1){return $a(n,t.Cc(r?4:3,e))}function $a(t,e){if(rS(t=At(t)))return Mm("Unsupported field value:",e,t),nS(t,e);if(t instanceof za)return function(r,s){if(!tS(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=$a(a,s.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=At(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return dC(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=be.fromDate(r);return{timestampValue:Wu(s.serializer,i)}}if(r instanceof be){const i=new be(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Wu(s.serializer,i)}}if(r instanceof Nn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Qt)return{bytesValue:TC(s.serializer,r._byteString)};if(r instanceof Ye){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:pm(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof bn)return function(o,a){return{mapValue:{fields:{[KT]:{stringValue:JT},[ju]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Sc("VectorValues must only contain numeric values.");return dm(a.serializer,c)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${Nc(r)}`)}(t,e)}function nS(t,e){const n={};return qT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Jr(t,(r,s)=>{const i=$a(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function rS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof be||t instanceof Nn||t instanceof Qt||t instanceof Ye||t instanceof za||t instanceof bn)}function Mm(t,e,n){if(!rS(n)||!BT(n)){const r=Nc(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Vh(t,e,n){if((e=At(e))instanceof Hc)return e._internalPath;if(typeof e=="string")return Dm(t,e);throw Qu("Field path arguments must be of type string or ",t,!1,void 0,n)}const rU=new RegExp("[~\\*/\\[\\]]");function Dm(t,e,n){if(e.search(rU)>=0)throw Qu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Hc(...e.split("."))._internalPath}catch{throw Qu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Qu(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new J(G.INVALID_ARGUMENT,a+t+l)}function sS(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ye(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new sU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Lm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class sU extends iS{data(){return super.data()}}function Lm(t,e){return typeof e=="string"?Dm(t,e):e instanceof Hc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iU(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new J(G.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Vm{}class oU extends Vm{}function Ds(t,e,...n){let r=[];e instanceof Vm&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof Um).length,a=i.filter(l=>l instanceof zc).length;if(o>1||o>0&&a>0)throw new J(G.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class zc extends oU{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new zc(e,n,r)}_apply(e){const n=this._parse(e);return oS(e._query,n),new Ji(e.firestore,e.converter,Sh(e._query,n))}_parse(e){const n=bm(e.firestore);return function(i,o,a,l,c,h,m){let g;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new J(G.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){q_(m,h);const x=[];for(const I of m)x.push(G_(l,i,I));g={arrayValue:{values:x}}}else g=G_(l,i,m)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||q_(m,h),g=nU(a,o,m,h==="in"||h==="not-in");return ze.create(c,h,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Ls(t,e,n){const r=e,s=Lm("where",t);return zc._create(s,r,n)}class Um extends Vm{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Um(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:fn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)oS(o,l),o=Sh(o,l)}(e._query,n),new Ji(e.firestore,e.converter,Sh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function G_(t,e,n){if(typeof(n=At(n))=="string"){if(n==="")throw new J(G.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!sC(e)&&n.indexOf("/")!==-1)throw new J(G.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Se.fromString(n));if(!Z.isDocumentKey(r))throw new J(G.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return s_(t,new Z(r))}if(n instanceof Ye)return s_(t,n._key);throw new J(G.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Nc(n)}.`)}function q_(t,e){if(!Array.isArray(t)||t.length===0)throw new J(G.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function oS(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new J(G.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new J(G.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class aU{convertValue(e,n="none"){switch(qr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ge(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Gr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ne(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Jr(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[ju].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>Ge(o.doubleValue));return new bn(n)}convertGeoPoint(e){return new Nn(Ge(e.latitude),Ge(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Pc(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(va(e));default:return null}}convertTimestamp(e){const n=Br(e);return new be(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Se.fromString(e);xe(NC(r),9688,{name:e});const s=new _a(r.get(1),r.get(3)),i=new Z(r.popFirst(5));return s.isEqual(n)||Jn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lU(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class Dl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class mi extends iS{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ru(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Lm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new J(G.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=mi._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}mi._jsonSchemaVersion="firestore/documentSnapshot/1.0",mi._jsonSchema={type:$e("string",mi._jsonSchemaVersion),bundleSource:$e("string","DocumentSnapshot"),bundleName:$e("string"),bundle:$e("string")};class ru extends mi{data(e={}){return super.data(e)}}class gi{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Dl(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ru(this._firestore,this._userDataWriter,r.key,r,new Dl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new J(G.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new ru(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Dl(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new ru(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Dl(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:uU(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new J(G.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=gi._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=im.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function uU(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ne(61501,{type:t})}}gi._jsonSchemaVersion="firestore/querySnapshot/1.0",gi._jsonSchema={type:$e("string",gi._jsonSchemaVersion),bundleSource:$e("string","QuerySnapshot"),bundleName:$e("string"),bundle:$e("string")};class cU extends aU{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ye(this.firestore,null,n)}}function Vs(t){t=bi(t,Ji);const e=bi(t.firestore,qc),n=ZC(e),r=new cU(e);return iU(t._query),$V(n,t._query).then(s=>new gi(e,r,t,s))}function aS(t,e,n,...r){t=bi(t,Ye);const s=bi(t.firestore,qc),i=bm(s);let o;return o=typeof(e=At(e))=="string"||e instanceof Hc?tU(i,"updateDoc",t._key,e,n,r):eU(i,"updateDoc",t._key,e),uS(s,[o.toMutation(t._key,An.exists(!0))])}function lS(t,e){const n=bi(t.firestore,qc),r=km(t),s=lU(t.converter,e);return uS(n,[ZV(bm(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,An.exists(!1))]).then(()=>r)}function uS(t,e){return function(r,s){const i=new Dr;return r.asyncQueue.enqueueAndForget(async()=>PV(await jV(r),s,i)),i.promise}(ZC(t),e)}function Sa(){return new Rm("serverTimestamp")}function dU(t){return new Pm("increment",t)}(function(e,n=!0){(function(s){zi=s})(ji),Ai(new Ts("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new qc(new Q4(r.getProvider("auth-internal")),new e5(o,r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new J(G.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _a(c.options.projectId,h)}(o,s),o);return i={useFetchStreams:n,...i},a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Pr(zv,$v,e),Pr(zv,$v,"esm2020")})();function cS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const fU=cS,dS=new Ua("auth","Firebase",cS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xu=new tm("@firebase/auth");function hU(t,...e){Xu.logLevel<=de.WARN&&Xu.warn(`Auth (${ji}): ${t}`,...e)}function su(t,...e){Xu.logLevel<=de.ERROR&&Xu.error(`Auth (${ji}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qn(t,...e){throw Fm(t,...e)}function Rn(t,...e){return Fm(t,...e)}function fS(t,e,n){const r={...fU(),[e]:n};return new Ua("auth","Firebase",r).create(e,{appName:t.name})}function ps(t){return fS(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Fm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return dS.create(t,...e)}function re(t,e,...n){if(!t)throw Fm(e,...n)}function Bn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw su(e),new Error(e)}function Xn(t,e){t||Bn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uh(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function pU(){return H_()==="http:"||H_()==="https:"}function H_(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(pU()||ID()||"connection"in navigator)?navigator.onLine:!0}function gU(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e,n){this.shortDelay=e,this.longDelay=n,Xn(n>e,"Short delay should be less than long delay!"),this.isMobile=TD()||AD()}get(){return mU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Om(t,e){Xn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Bn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Bn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Bn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vU=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],_U=new Wa(3e4,6e4);function Bm(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Yi(t,e,n,r,s={}){return pS(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=Fa({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:l,...i};return SD()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&Hi(t.emulatorConfig.host)&&(c.credentials="include"),hS.fetch()(await mS(t,t.config.apiHost,n,a),c)})}async function pS(t,e,n){t._canInitEmulator=!1;const r={...yU,...e};try{const s=new wU(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Ll(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ll(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Ll(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Ll(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw fS(t,h,c);Qn(t,h)}}catch(s){if(s instanceof nr)throw s;Qn(t,"network-request-failed",{message:String(s)})}}async function xU(t,e,n,r,s={}){const i=await Yi(t,e,n,r,s);return"mfaPendingCredential"in i&&Qn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function mS(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?Om(t.config,s):`${t.config.apiScheme}://${s}`;return vU.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class wU{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Rn(this.auth,"network-request-failed")),_U.get())})}}function Ll(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Rn(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EU(t,e){return Yi(t,"POST","/v1/accounts:delete",e)}async function Zu(t,e){return Yi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function TU(t,e=!1){const n=At(t),r=await n.getIdToken(e),s=Gm(r);re(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Jo(rf(s.auth_time)),issuedAtTime:Jo(rf(s.iat)),expirationTime:Jo(rf(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function rf(t){return Number(t)*1e3}function Gm(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return su("JWT malformed, contained fewer than 3 sections"),null;try{const s=_T(n);return s?JSON.parse(s):(su("Failed to decode base64 JWT payload"),null)}catch(s){return su("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function j_(t){const e=Gm(t);return re(e,"internal-error"),re(typeof e.exp<"u","internal-error"),re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ia(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof nr&&CU(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function CU({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Jo(this.lastLoginAt),this.creationTime=Jo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ec(t){var m;const e=t.auth,n=await t.getIdToken(),r=await Ia(t,Zu(e,{idToken:n}));re(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(m=s.providerUserInfo)!=null&&m.length?gS(s.providerUserInfo):[],o=AU(t.providerData,i),a=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),c=a?l:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Fh(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(t,h)}async function IU(t){const e=At(t);await ec(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function AU(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function gS(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kU(t,e){const n=await pS(t,{},async()=>{const r=Fa({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await mS(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&Hi(t.emulatorConfig.host)&&(l.credentials="include"),hS.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function NU(t,e){return Yi(t,"POST","/v2/accounts:revokeToken",Bm(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){re(e.idToken,"internal-error"),re(typeof e.idToken<"u","internal-error"),re(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):j_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){re(e.length!==0,"internal-error");const n=j_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await kU(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new yi;return r&&(re(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(re(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(re(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new yi,this.toJSON())}_performRefresh(){return Bn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cr(t,e){re(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ln{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new SU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Fh(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Ia(this,this.stsTokenManager.getToken(this.auth,e));return re(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return TU(this,e)}reload(){return IU(this)}_assign(e){this!==e&&(re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ln({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await ec(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(En(this.auth.app))return Promise.reject(ps(this.auth));const e=await this.getIdToken();return await Ia(this,EU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,c=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:m,emailVerified:g,isAnonymous:v,providerData:x,stsTokenManager:I}=n;re(m&&I,e,"internal-error");const P=yi.fromJSON(this.name,I);re(typeof m=="string",e,"internal-error"),cr(r,e.name),cr(s,e.name),re(typeof g=="boolean",e,"internal-error"),re(typeof v=="boolean",e,"internal-error"),cr(i,e.name),cr(o,e.name),cr(a,e.name),cr(l,e.name),cr(c,e.name),cr(h,e.name);const A=new ln({uid:m,auth:e,email:s,emailVerified:g,displayName:r,isAnonymous:v,photoURL:o,phoneNumber:i,tenantId:a,stsTokenManager:P,createdAt:c,lastLoginAt:h});return x&&Array.isArray(x)&&(A.providerData=x.map(E=>({...E}))),l&&(A._redirectEventId=l),A}static async _fromIdTokenResponse(e,n,r=!1){const s=new yi;s.updateFromServerResponse(n);const i=new ln({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await ec(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];re(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?gS(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new yi;a.updateFromIdToken(r);const l=new ln({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Fh(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z_=new Map;function Gn(t){Xn(t instanceof Function,"Expected a class definition");let e=z_.get(t);return e?(Xn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,z_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}yS.type="NONE";const $_=yS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iu(t,e,n){return`firebase:${t}:${e}:${n}`}class vi{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=iu(this.userKey,s.apiKey,i),this.fullPersistenceKey=iu("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Zu(this.auth,{idToken:e}).catch(()=>{});return n?ln._fromGetAccountInfoResponse(this.auth,n,e):null}return ln._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new vi(Gn($_),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||Gn($_);const o=iu(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){let m;if(typeof h=="string"){const g=await Zu(e,{idToken:h}).catch(()=>{});if(!g)break;m=await ln._fromGetAccountInfoResponse(e,g,h)}else m=ln._fromJSON(e,h);c!==i&&(a=m),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new vi(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new vi(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(wS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(vS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(TS(e))return"Blackberry";if(CS(e))return"Webos";if(_S(e))return"Safari";if((e.includes("chrome/")||xS(e))&&!e.includes("edge/"))return"Chrome";if(ES(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function vS(t=Et()){return/firefox\//i.test(t)}function _S(t=Et()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function xS(t=Et()){return/crios\//i.test(t)}function wS(t=Et()){return/iemobile/i.test(t)}function ES(t=Et()){return/android/i.test(t)}function TS(t=Et()){return/blackberry/i.test(t)}function CS(t=Et()){return/webos/i.test(t)}function qm(t=Et()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function bU(t=Et()){var e;return qm(t)&&!!((e=window.navigator)!=null&&e.standalone)}function RU(){return kD()&&document.documentMode===10}function SS(t=Et()){return qm(t)||ES(t)||CS(t)||TS(t)||/windows phone/i.test(t)||wS(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IS(t,e=[]){let n;switch(t){case"Browser":n=W_(Et());break;case"Worker":n=`${W_(Et())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ji}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MU(t,e={}){return Yi(t,"GET","/v2/passwordPolicy",Bm(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DU=6;class LU{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??DU,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VU{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new K_(this),this.idTokenSubscription=new K_(this),this.beforeStateQueue=new PU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=dS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Gn(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await vi.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Zu(this,{idToken:e}),r=await ln._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(En(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ec(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=gU()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(En(this.app))return Promise.reject(ps(this));const n=e?At(e):null;return n&&re(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return En(this.app)?Promise.reject(ps(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return En(this.app)?Promise.reject(ps(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Gn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await MU(this),n=new LU(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ua("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await NU(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Gn(e)||this._popupRedirectResolver;re(n,this,"argument-error"),this.redirectPersistenceManager=await vi.create(this,[Gn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(re(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=IS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(En(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&hU(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Hm(t){return At(t)}class K_{constructor(e){this.auth=e,this.observer=null,this.addObserver=VD(n=>this.observer=n)}get next(){return re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function UU(t){jm=t}function FU(t){return jm.loadJS(t)}function OU(){return jm.gapiScript}function BU(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GU(t,e){const n=rm(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Es(i,e??{}))return s;Qn(s,"already-initialized")}return n.initialize({options:e})}function qU(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Gn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function HU(t,e,n){const r=Hm(t);re(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=AS(e),{host:o,port:a}=jU(e),l=a===null?"":`:${a}`,c={url:`${i}//${o}${l}/`},h=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){re(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),re(Es(c,r.config.emulator)&&Es(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Hi(o)?(TT(`${i}//${o}${l}`),CT("Auth",!0)):zU()}function AS(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function jU(t){const e=AS(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:J_(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:J_(o)}}}function J_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function zU(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Bn("not implemented")}_getIdTokenResponse(e){return Bn("not implemented")}_linkToIdToken(e,n){return Bn("not implemented")}_getReauthenticationResolver(e){return Bn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _i(t,e){return xU(t,"POST","/v1/accounts:signInWithIdp",Bm(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $U="http://localhost";class Is extends kS{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Is(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Qn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new Is(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return _i(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,_i(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,_i(e,n)}buildRequest(){const e={requestUri:$U,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Fa(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka extends NS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr extends Ka{constructor(){super("facebook.com")}static credential(e){return Is._fromParams({providerId:mr.PROVIDER_ID,signInMethod:mr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mr.credentialFromTaggedObject(e)}static credentialFromError(e){return mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return mr.credential(e.oauthAccessToken)}catch{return null}}}mr.FACEBOOK_SIGN_IN_METHOD="facebook.com";mr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr extends Ka{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Is._fromParams({providerId:gr.PROVIDER_ID,signInMethod:gr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return gr.credentialFromTaggedObject(e)}static credentialFromError(e){return gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return gr.credential(n,r)}catch{return null}}}gr.GOOGLE_SIGN_IN_METHOD="google.com";gr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr extends Ka{constructor(){super("github.com")}static credential(e){return Is._fromParams({providerId:yr.PROVIDER_ID,signInMethod:yr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yr.credentialFromTaggedObject(e)}static credentialFromError(e){return yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return yr.credential(e.oauthAccessToken)}catch{return null}}}yr.GITHUB_SIGN_IN_METHOD="github.com";yr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr extends Ka{constructor(){super("twitter.com")}static credential(e,n){return Is._fromParams({providerId:vr.PROVIDER_ID,signInMethod:vr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return vr.credentialFromTaggedObject(e)}static credentialFromError(e){return vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return vr.credential(n,r)}catch{return null}}}vr.TWITTER_SIGN_IN_METHOD="twitter.com";vr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await ln._fromIdTokenResponse(e,r,s),o=Y_(r);return new Li({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Y_(r);return new Li({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Y_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc extends nr{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,tc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new tc(e,n,r,s)}}function bS(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?tc._fromErrorAndOperation(t,i,e,r):i})}async function WU(t,e,n=!1){const r=await Ia(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Li._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KU(t,e,n=!1){const{auth:r}=t;if(En(r.app))return Promise.reject(ps(r));const s="reauthenticate";try{const i=await Ia(t,bS(r,s,e,t),n);re(i.idToken,r,"internal-error");const o=Gm(i.idToken);re(o,r,"internal-error");const{sub:a}=o;return re(t.uid===a,r,"user-mismatch"),Li._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Qn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JU(t,e,n=!1){if(En(t.app))return Promise.reject(ps(t));const r="signIn",s=await bS(t,r,e),i=await Li._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function YU(t,e,n,r){return At(t).onIdTokenChanged(e,n,r)}function QU(t,e,n){return At(t).beforeAuthStateChanged(e,n)}const nc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(nc,"1"),this.storage.removeItem(nc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XU=1e3,ZU=10;class PS extends RS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=SS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);RU()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,ZU):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},XU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}PS.type="LOCAL";const e3=PS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS extends RS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}MS.type="SESSION";const DS=MS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t3(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new $c(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await t3(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}$c.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n3{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=zm("",20);s.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(m){const g=m;if(g.data.eventId===c)switch(g.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(g.data.response);break;default:clearTimeout(h),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pn(){return window}function r3(t){Pn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LS(){return typeof Pn().WorkerGlobalScope<"u"&&typeof Pn().importScripts=="function"}async function s3(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function i3(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function o3(){return LS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VS="firebaseLocalStorageDb",a3=1,rc="firebaseLocalStorage",US="fbase_key";class Ja{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Wc(t,e){return t.transaction([rc],e?"readwrite":"readonly").objectStore(rc)}function l3(){const t=indexedDB.deleteDatabase(VS);return new Ja(t).toPromise()}function Oh(){const t=indexedDB.open(VS,a3);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(rc,{keyPath:US})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(rc)?e(r):(r.close(),await l3(),e(await Oh()))})})}async function Q_(t,e,n){const r=Wc(t,!0).put({[US]:e,value:n});return new Ja(r).toPromise()}async function u3(t,e){const n=Wc(t,!1).get(e),r=await new Ja(n).toPromise();return r===void 0?null:r.value}function X_(t,e){const n=Wc(t,!0).delete(e);return new Ja(n).toPromise()}const c3=800,d3=3;class FS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Oh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>d3)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return LS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$c._getInstance(o3()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await s3(),!this.activeServiceWorker)return;this.sender=new n3(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||i3()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Oh();return await Q_(e,nc,"1"),await X_(e,nc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Q_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>u3(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>X_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Wc(s,!1).getAll();return new Ja(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),c3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}FS.type="LOCAL";const f3=FS;new Wa(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h3(t,e){return e?Gn(e):(re(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m extends kS{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return _i(e,this._buildIdpRequest())}_linkToIdToken(e,n){return _i(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return _i(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function p3(t){return JU(t.auth,new $m(t),t.bypassAuthState)}function m3(t){const{auth:e,user:n}=t;return re(n,e,"internal-error"),KU(n,new $m(t),t.bypassAuthState)}async function g3(t){const{auth:e,user:n}=t;return re(n,e,"internal-error"),WU(n,new $m(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return p3;case"linkViaPopup":case"linkViaRedirect":return g3;case"reauthViaPopup":case"reauthViaRedirect":return m3;default:Qn(this.auth,"internal-error")}}resolve(e){Xn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Xn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y3=new Wa(2e3,1e4);class si extends OS{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,si.currentPopupAction&&si.currentPopupAction.cancel(),si.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return re(e,this.auth,"internal-error"),e}async onExecution(){Xn(this.filter.length===1,"Popup operations only handle one event");const e=zm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Rn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Rn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,si.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Rn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,y3.get())};e()}}si.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v3="pendingRedirect",ou=new Map;class _3 extends OS{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ou.get(this.auth._key());if(!e){try{const r=await x3(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ou.set(this.auth._key(),e)}return this.bypassAuthState||ou.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function x3(t,e){const n=T3(e),r=E3(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function w3(t,e){ou.set(t._key(),e)}function E3(t){return Gn(t._redirectPersistence)}function T3(t){return iu(v3,t.config.apiKey,t.name)}async function C3(t,e,n=!1){if(En(t.app))return Promise.reject(ps(t));const r=Hm(t),s=h3(r,e),o=await new _3(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S3=10*60*1e3;class I3{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!A3(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!BS(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Rn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=S3&&this.cachedEventUids.clear(),this.cachedEventUids.has(Z_(e))}saveEventToCache(e){this.cachedEventUids.add(Z_(e)),this.lastProcessedEventTime=Date.now()}}function Z_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function BS({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function A3(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return BS(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k3(t,e={}){return Yi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N3=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,b3=/^https?/;async function R3(t){if(t.config.emulator)return;const{authorizedDomains:e}=await k3(t);for(const n of e)try{if(P3(n))return}catch{}Qn(t,"unauthorized-domain")}function P3(t){const e=Uh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!b3.test(n))return!1;if(N3.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M3=new Wa(3e4,6e4);function ex(){const t=Pn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function D3(t){return new Promise((e,n)=>{var s,i,o;function r(){ex(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ex(),n(Rn(t,"network-request-failed"))},timeout:M3.get()})}if((i=(s=Pn().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=Pn().gapi)!=null&&o.load)r();else{const a=BU("iframefcb");return Pn()[a]=()=>{gapi.load?r():n(Rn(t,"network-request-failed"))},FU(`${OU()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw au=null,e})}let au=null;function L3(t){return au=au||D3(t),au}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V3=new Wa(5e3,15e3),U3="__/auth/iframe",F3="emulator/auth/iframe",O3={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},B3=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function G3(t){const e=t.config;re(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Om(e,F3):`https://${t.config.authDomain}/${U3}`,r={apiKey:e.apiKey,appName:t.name,v:ji},s=B3.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Fa(r).slice(1)}`}async function q3(t){const e=await L3(t),n=Pn().gapi;return re(n,t,"internal-error"),e.open({where:document.body,url:G3(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:O3,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Rn(t,"network-request-failed"),a=Pn().setTimeout(()=>{i(o)},V3.get());function l(){Pn().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H3={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},j3=500,z3=600,$3="_blank",W3="http://localhost";class tx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function K3(t,e,n,r=j3,s=z3){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l={...H3,width:r.toString(),height:s.toString(),top:i,left:o},c=Et().toLowerCase();n&&(a=xS(c)?$3:n),vS(c)&&(e=e||W3,l.scrollbars="yes");const h=Object.entries(l).reduce((g,[v,x])=>`${g}${v}=${x},`,"");if(bU(c)&&a!=="_self")return J3(e||"",a),new tx(null);const m=window.open(e||"",a,h);re(m,t,"popup-blocked");try{m.focus()}catch{}return new tx(m)}function J3(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y3="__/auth/handler",Q3="emulator/auth/handler",X3=encodeURIComponent("fac");async function nx(t,e,n,r,s,i){re(t.config.authDomain,t,"auth-domain-config-required"),re(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ji,eventId:s};if(e instanceof NS){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",LD(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,m]of Object.entries({}))o[h]=m}if(e instanceof Ka){const h=e.getScopes().filter(m=>m!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),c=l?`#${X3}=${encodeURIComponent(l)}`:"";return`${Z3(t)}?${Fa(a).slice(1)}${c}`}function Z3({config:t}){return t.emulator?Om(t,Q3):`https://${t.authDomain}/${Y3}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sf="webStorageSupport";class eF{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=DS,this._completeRedirectFn=C3,this._overrideRedirectResult=w3}async _openPopup(e,n,r,s){var o;Xn((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await nx(e,n,r,Uh(),s);return K3(e,i,zm())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await nx(e,n,r,Uh(),s);return r3(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Xn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await q3(e),r=new I3(e);return n.register("authEvent",s=>(re(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(sf,{type:sf},s=>{var o;const i=(o=s==null?void 0:s[0])==null?void 0:o[sf];i!==void 0&&n(!!i),Qn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=R3(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return SS()||_S()||qm()}}const tF=eF;var rx="@firebase/auth",sx="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nF{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rF(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function sF(t){Ai(new Ts("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;re(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:IS(t)},c=new VU(r,s,i,l);return qU(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ai(new Ts("auth-internal",e=>{const n=Hm(e.getProvider("auth").getImmediate());return(r=>new nF(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Pr(rx,sx,rF(t)),Pr(rx,sx,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iF=5*60,oF=ET("authIdTokenMaxAge")||iF;let ix=null;const aF=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>oF)return;const s=n==null?void 0:n.token;ix!==s&&(ix=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function lF(t=kT()){const e=rm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=GU(t,{popupRedirectResolver:tF,persistence:[f3,e3,DS]}),r=ET("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=aF(i.toString());QU(n,o,()=>o(n.currentUser)),YU(n,a=>o(a))}}const s=xT("auth");return s&&HU(n,`http://${s}`),n}function uF(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}UU({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Rn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",uF().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});sF("Browser");const cF={apiKey:"AIzaSyCHr4OXY_EcKxApVH9nz3kbUQQhQCPGZfY",authDomain:"usa-visa-prep-c72f7.firebaseapp.com",databaseURL:"https://usa-visa-prep-c72f7-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"usa-visa-prep-c72f7",storageBucket:"usa-visa-prep-c72f7.firebasestorage.app",messagingSenderId:"777839011356",appId:"1:777839011356:web:125ba58cd0a86da0e561d9"},GS=AT(cF),Ln=KV(GS);lF(GS);const dF=[{name:"Andaman & Nicobar Islands",code:"AN"},{name:"Andhra Pradesh",code:"AP"},{name:"Arunachal Pradesh",code:"AR"},{name:"Assam",code:"AS"},{name:"Bihar",code:"BR"},{name:"Chandigarh",code:"CH"},{name:"Chhattisgarh",code:"CT"},{name:"Dadra & Nagar Haveli and Daman & Diu",code:"DD"},{name:"Delhi",code:"DL"},{name:"Goa",code:"GA"},{name:"Gujarat",code:"GJ"},{name:"Haryana",code:"HR"},{name:"Himachal Pradesh",code:"HP"},{name:"Jammu & Kashmir",code:"JK"},{name:"Jharkhand",code:"JH"},{name:"Karnataka",code:"KA"},{name:"Kerala",code:"KL"},{name:"Ladakh",code:"LA"},{name:"Lakshadweep",code:"LD"},{name:"Madhya Pradesh",code:"MP"},{name:"Maharashtra",code:"MH"},{name:"Manipur",code:"MN"},{name:"Meghalaya",code:"ML"},{name:"Mizoram",code:"MZ"},{name:"Nagaland",code:"NL"},{name:"Odisha",code:"OR"},{name:"Puducherry",code:"PY"},{name:"Punjab",code:"PB"},{name:"Rajasthan",code:"RJ"},{name:"Sikkim",code:"SK"},{name:"Tamil Nadu",code:"TN"},{name:"Telangana",code:"TG"},{name:"Tripura",code:"TR"},{name:"Uttar Pradesh",code:"UP"},{name:"Uttarakhand",code:"UT"},{name:"West Bengal",code:"WB"}],qS=async t=>{const e=Qr(Ln,"travel_agent"),n=Ds(e,Ls("phone","==",t));return!(await Vs(n)).empty},ox=async t=>{const e=Qr(Ln,"travel_agent"),n=Ds(e,Ls("email","==",t));return!(await Vs(n)).empty},fF=async t=>{const e=Qr(Ln,"travel_agent"),n=Ds(e,Ls("phone","==",t)),r=await Vs(n);if(!r.empty){const s=r.docs[0];return{id:s.id,...s.data()}}return null},Bh=async t=>{const e=Qr(Ln,"travel_agent"),n=Ds(e,Ls("email","==",t)),r=await Vs(n);if(!r.empty){const s=r.docs[0];return{id:s.id,...s.data()}}return null},hF=async t=>{try{const e=Qr(Ln,"travel_agent"),n=Ds(e,Ls("email","==",t.email));if(!(await Vs(n)).empty)return"EXISTS";let s="";if(t.isEECAgent==="Yes"&&t.branch){const o=ws.find(a=>a.identifier===t.branch);s=o?o.name:""}let i="";if(t.state){const o=dF.find(a=>a.code===t.state);i=o?o.name:t.state}return await lS(e,{...t,state:i,isEECAgent:t.isEECAgent||"",branch:s,isVerified:!0,count:0,createdAt:Sa()}),"CREATED"}catch{return"ERROR"}},ax=async t=>{try{const e=Qr(Ln,"travel_agent"),n=Ds(e,Ls("email","==",t)),r=await Vs(n);if(r.empty)return{success:!1,error:"User not found"};const s=r.docs[0],i=km(Ln,"travel_agent",s.id);return await aS(i,{count:dU(1),lastUpdated:Sa()}),{success:!0}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}},lx=async(t,e)=>{try{const n=Qr(Ln,"visa_searches");return await lS(n,{userEmail:t,origin:e.origin,originState:e.originState,destination:e.destination,visaType:e.visaType,userCity:e.userCity||"",userState:e.userState||"",createdAt:Sa()}),{success:!0}}catch(n){return console.error("Error saving visa search query:",n),{success:!1,error:n instanceof Error?n.message:"Unknown error"}}},ux=async(t,e)=>{try{const n=Qr(Ln,"travel_agent"),r=Ds(n,Ls("email","==",t)),s=await Vs(r);if(s.empty)return{success:!1,error:"User not found"};const i=s.docs[0],o=km(Ln,"travel_agent",i.id);return await aS(o,{lastDestination:e.destination,lastOriginState:e.originState,lastVisaType:e.visaType,lastOrigin:e.origin,lastSearchAt:Sa(),lastUpdated:Sa()}),{success:!0}}catch(n){return console.error("Error updating user last search:",n),{success:!1,error:n instanceof Error?n.message:"Unknown error"}}},pF="https://us-central1-usa-visa-prep-c72f7.cloudfunctions.net/sendEmailOtpUSA",mF="https://us-central1-usa-visa-prep-c72f7.cloudfunctions.net/verifyEmailOtpUSA",gF="https://us-central1-usa-visa-prep-c72f7.cloudfunctions.net/sendRegistrationEmailsUniversal",yF=async t=>{try{return(await(await fetch(pF,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,targetCountry:"Travel Agent"})})).json()).success===!0}catch(e){return console.error("Error sending email OTP:",e),!1}},vF=async(t,e)=>{try{return(await(await fetch(mF,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,otp:e})})).json()).success===!0}catch(n){return console.error("Error verifying email OTP:",n),!1}},_F=t=>{let e=ws.find(n=>n.identifier===t);return e||(e=ws.find(n=>n.name===t)),!e||!e.counselors?[]:e.counselors.map(n=>n.email).filter(n=>n&&n.trim()!=="")},xF=(t,e)=>{let n=`New Visa Search Query - User Information

`;n+=`USER PROFILE
`,n+=`
`,n+=`Name: ${t.name||"N/A"}
`,n+=`Email: ${t.email||"N/A"}
`,n+=`Phone: ${t.phone||"N/A"}
`,n+=`EEC is Admissions Agent: ${t.isEECAgent||"N/A"}
`,t.isEECAgent==="Yes"&&t.branch&&(n+=`Selected Branch: ${t.branch}
`),n+=`

VISA SEARCH QUERY / BOOKING DETAILS
`,n+=`
`,n+=`Booking From: India
`,n+=`Booking To: ${e.destination||"N/A"}
`,n+=`Origin State: ${e.originState||"N/A"}
`,n+=`Visa Type: ${e.visaType||"N/A"}
`;const r=new Date().toLocaleString("en-IN",{timeZone:"Asia/Kolkata"});if(n+=`Search Date: ${r}
`,t.createdAt){const s=new Date(t.createdAt.seconds*1e3).toLocaleString("en-IN",{timeZone:"Asia/Kolkata"});n+=`User Registration Date: ${s}
`}return n+=`


`,n+=`TIP: To organize these emails, create a Gmail filter:
`,n+=`1. Click the three dots () on this email
`,n+=`2. Select "Filter messages like this"
`,n+=`3. Click "Create filter"
`,n+=`4. Check "Apply the label" and select/create "Visa Search Queries"
`,n+=`5. Click "Create filter"
`,n},cx=async(t,e)=>{try{const n=await Bh(t);if(!n)return console.error("User not found in database"),!1;const r=[];if(n.isEECAgent==="Yes"&&n.branch){const c=_F(n.branch);r.push(...c)}const s=["amit.jalan@eecglobal.com","madhav@eecglobal.com","eecprexa@gmail.com","eecbaroda@gmail.com"];r.push(...s);const i=[...new Set(r)];if(i.length===0)return console.error("No recipients found"),!1;const o=xF(n,e),l=`Visa Search: ${n.city?`${n.city}, `:""}${n.state||"India"}  ${e.destination} (${e.visaType}) - ${n.name||"User"}`;try{return(await(await fetch(gF,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({recipients:i,emailBody:o,subject:l})})).json()).success===!0}catch(c){return console.error("Error sending visa search emails:",c),!1}}catch(n){return console.error("Error in sendVisaSearchNotificationEmails:",n),!1}};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var wF={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EF=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),te=(t,e)=>{const n=$.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:a="",children:l,...c},h)=>$.createElement("svg",{ref:h,...wF,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${EF(t)}`,a].join(" "),...c},[...e.map(([m,g])=>$.createElement(m,g)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TF=te("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CF=te("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SF=te("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IF=te("BedDouble",[["path",{d:"M2 20v-8a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v8",key:"1k78r4"}],["path",{d:"M4 10V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v4",key:"fb3tl2"}],["path",{d:"M12 4v6",key:"1dcgq2"}],["path",{d:"M2 18h20",key:"ajqnye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AF=te("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kF=te("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gh=te("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NF=te("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bF=te("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RF=te("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PF=te("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MF=te("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DF=te("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LF=te("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yo=te("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VF=te("Compass",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76",key:"m9r19z"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UF=te("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FF=te("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OF=te("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BF=te("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GF=te("Gavel",[["path",{d:"m14.5 12.5-8 8a2.119 2.119 0 1 1-3-3l8-8",key:"15492f"}],["path",{d:"m16 16 6-6",key:"vzrcl6"}],["path",{d:"m8 8 6-6",key:"18bi4p"}],["path",{d:"m9 7 8 8",key:"5jnvq1"}],["path",{d:"m21 11-8-8",key:"z4y7zo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qh=te("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qF=te("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HF=te("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jF=te("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zF=te("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HS=te("Landmark",[["line",{x1:"3",x2:"21",y1:"22",y2:"22",key:"j8o0r"}],["line",{x1:"6",x2:"6",y1:"18",y2:"11",key:"10tf0k"}],["line",{x1:"10",x2:"10",y1:"18",y2:"11",key:"54lgf6"}],["line",{x1:"14",x2:"14",y1:"18",y2:"11",key:"380y"}],["line",{x1:"18",x2:"18",y1:"18",y2:"11",key:"1kevvc"}],["polygon",{points:"12 2 20 7 4 7",key:"jkujk7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $F=te("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WF=te("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KF=te("LocateFixed",[["line",{x1:"2",x2:"5",y1:"12",y2:"12",key:"bvdh0s"}],["line",{x1:"19",x2:"22",y1:"12",y2:"12",key:"1tbv5k"}],["line",{x1:"12",x2:"12",y1:"2",y2:"5",key:"11lu5j"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}],["circle",{cx:"12",cy:"12",r:"7",key:"fim9np"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JF=te("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jS=te("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hh=te("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YF=te("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QF=te("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XF=te("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZF=te("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e8=te("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t8=te("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n8=te("ScrollText",[["path",{d:"M8 21h12a2 2 0 0 0 2-2v-2H10v2a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v3h4",key:"13a6an"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M15 12h-5",key:"r7krc0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r8=te("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s8=te("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jh=te("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i8=te("Siren",[["path",{d:"M7 18v-6a5 5 0 1 1 10 0v6",key:"pcx96s"}],["path",{d:"M5 21a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-1a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2z",key:"1b4s83"}],["path",{d:"M21 12h1",key:"jtio3y"}],["path",{d:"M18.5 4.5 18 5",key:"g5sp9y"}],["path",{d:"M2 12h1",key:"1uaihz"}],["path",{d:"M12 2v1",key:"11qlp1"}],["path",{d:"m4.929 4.929.707.707",key:"1i51kw"}],["path",{d:"M12 12v6",key:"3ahymv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o8=te("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a8=te("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l8=te("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u8=te("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c8=te("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const of=te("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d8=te("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f8=te("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h8=te("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]),Qo=ZF,Aa=PF,sc=a8,ka=TF,Na=Hh,ba=Yo,Mo=SF,Ra=qF,ic=c8,af=kF,zh=$F,p8=r8,Kc=qh,Vr=CF,m8=d8,g8=bF,Tn=jh,y8=IF,zS=UF,Xo=BF,$S=e8,v8=HS,_8=KF,WS=NF,x8=FF,w8=s8,dx=jS,$h=o8,E8=u8,T8=QF,C8=JF,KS=t8,JS=GF,S8=i8,I8=AF,A8=VF,k8=YF,N8=n8,YS=HS,Wm=MF,Km=LF,QS=f8,XS=XF,Jm=l8,oc=({className:t})=>p.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:t,xmlns:"http://www.w3.org/2000/svg",children:p.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})}),b8=({processingTime:t})=>{const n=(a=>{const l=typeof a=="string"?a:String(a||"");if(!l)return 15;const c=l.match(/\d+/g);if(!c)return 15;const h=c.reduce((m,g)=>m+parseInt(g),0)/c.length;return l.toLowerCase().includes("week")?h*7:h})(t),r=7,s=r+n+3,i=a=>{const l=new Date;return l.setDate(l.getDate()+a),l.toLocaleDateString("en-IN",{day:"numeric",month:"short"})},o=[{title:"Prepare Docs",date:i(0),desc:"Get checklist ready",status:"current",icon:Aa},{title:"Submit App",date:i(r),desc:"Appointment / Biometrics",status:"upcoming",icon:WS},{title:"Processing",date:"~ "+Math.round(n)+" Days",desc:"Consulate Review",status:"upcoming",icon:ba},{title:"Fly",date:i(s),desc:"Visa Stamped",status:"upcoming",icon:Qo}];return p.jsxs("div",{className:"w-full py-6",children:[p.jsxs("h3",{className:"text-sm font-bold uppercase tracking-wider text-slate-500 dark:text-slate-400 mb-6 flex items-center gap-2",children:[p.jsx(ba,{className:"w-4 h-4"}),"Estimated Timeline"]}),p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute top-5 left-4 right-4 h-0.5 bg-slate-200 dark:bg-slate-700 hidden md:block"}),p.jsx("div",{className:"absolute left-5 top-4 bottom-4 w-0.5 bg-slate-200 dark:bg-slate-700 md:hidden"}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 relative z-10",children:o.map((a,l)=>p.jsxs("div",{className:"flex md:flex-col items-center md:text-center gap-4 md:gap-3 group",children:[p.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center border-4 flex-shrink-0 transition-all duration-500
                    ${l===0?"bg-violet-600 border-violet-100 dark:border-violet-900 text-white shadow-lg shadow-violet-500/30 scale-110":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-600 text-slate-400 dark:text-slate-500 group-hover:border-violet-300 dark:group-hover:border-violet-700 group-hover:text-violet-500"}
                `,children:p.jsx(a.icon,{className:"w-4 h-4"})}),p.jsxs("div",{className:"text-left md:text-center",children:[p.jsx("p",{className:`text-xs font-bold uppercase tracking-wider mb-0.5 ${l===0?"text-violet-600 dark:text-violet-400":"text-slate-500 dark:text-slate-400"}`,children:a.date}),p.jsx("h4",{className:`font-bold text-sm md:text-base ${l===0?"text-slate-900 dark:text-white":"text-slate-700 dark:text-slate-300"}`,children:a.title}),p.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-500 font-medium",children:a.desc})]})]},l))})]}),p.jsx("div",{className:"mt-6 p-3 bg-slate-50 dark:bg-slate-800/50 rounded-xl border border-slate-100 dark:border-slate-700 text-center",children:p.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 font-medium",children:["*Dates are estimated based on the current ",p.jsx("strong",{children:t||"Standard"})," processing window."]})})]})},R8=({data:t,origin:e,destination:n,visaType:r})=>{const[s,i]=$.useState("English"),[o,a]=$.useState(t),[l,c]=$.useState(!1),[h,m]=$.useState({}),[g,v]=$.useState(!1),[x,I]=$.useState(!1),[P,A]=$.useState(null),[E,k]=$.useState(!1),D=$.useRef(null),[U,L]=$.useState(0);$.useEffect(()=>{a(t),A(null),i("English")},[t]),$.useEffect(()=>{L(0);const B=setTimeout(()=>{L(o.confidenceScore||0)},100);return()=>clearTimeout(B)},[o.confidenceScore]),$.useLayoutEffect(()=>{E&&D.current&&D.current.scrollTo({top:0,behavior:"auto"})},[E]);const T=$.useMemo(()=>{try{if(!n)return null;const B=String(t.notes||""),j=String(t.embassyContact||""),z=(B+" "+j).toLowerCase(),ee=t&&Array.isArray(t.officialSources)?t.officialSources:[],le=String(n).toLowerCase().trim();if(le==="united states"||le==="usa"||z.includes("ustraveldocs"))return{url:"https://www.ustraveldocs.com/in/en/",label:"US Visa Appointment (CGI)"};if(le==="spain"||z.includes("bls")&&z.includes("spain"))return{url:"https://india.blsspainvisa.com/",label:"BLS Spain Appointment"};const Ee={"united kingdom":"gbr",uk:"gbr",canada:"can",australia:"aus",france:"fra",germany:"deu",italy:"ita",netherlands:"nld",switzerland:"che",austria:"aut",japan:"jpn",poland:"pol",sweden:"swe",norway:"nor",denmark:"dnk",portugal:"prt",belgium:"bel","south africa":"zaf","czech republic":"cze",hungary:"hun",finland:"fin",croatia:"hrv",ireland:"irl",luxembourg:"lux",malta:"mlt",slovakia:"svk",slovenia:"svn",estonia:"est",latvia:"lva",lithuania:"ltu",iceland:"isl",cyprus:"cyp",ukraine:"ukr",georgia:"geo",thailand:"tha",singapore:"sgp",malaysia:"mys"}[le],Xe=ee.find(ie=>{const Ce=String(ie.url||"").toLowerCase();return!!(Ee&&Ce.includes(`vfsglobal.com/ind/en/${Ee}`))});if(Xe)return{url:Xe.url,label:`VFS Global Appointment (${n})`};if(Ee)return{url:`https://visa.vfsglobal.com/ind/en/${Ee}/book-appointment`,label:`Book VFS Appointment (${n})`};if(z.includes("bls")){const ie=ee.find(Ce=>String(Ce.url||"").includes("blsinternational"));return ie?{url:ie.url,label:"BLS International Appointment"}:{url:"https://www.blsinternational.com/india/",label:"BLS International Appointment"}}if(z.includes("vfs")||ee.some(ie=>String(ie.url||"").includes("vfsglobal")))return{url:"https://visa.vfsglobal.com/ind/en/",label:"VFS Global Appointment"};if(z.includes("tlscontact"))return{url:"https://www.tlscontact.com/",label:"TLScontact Appointment"}}catch(B){return console.warn("Error calculating booking link",B),null}return null},[t,n]),w=async B=>{const j=B.target.value;if(i(j),j==="English"){a(t);return}if(h[j]){a(h[j]);return}c(!0);try{const z=await iD(t,j);m(ee=>({...ee,[j]:z})),a(z)}catch(z){console.error("Translation failed",z)}finally{c(!1)}},C=async()=>{if(P){k(!0);return}I(!0);try{const B=e.includes("(")?e.split("(")[1].replace(")",""):"India",j=await oD("India",B,n,r);A(j),k(!0)}catch{alert("Failed to generate detailed checklist. Please try again.")}finally{I(!1)}},R=()=>{var j;const B=`
> **Source**: [EEC Global AI Travel Agent](https://ai.eecglobal.com/#/destination/${encodeURIComponent(n)}/type/${encodeURIComponent(r)})
> **Verified**: ${o.lastUpdate||new Date().toISOString().split("T")[0]}

**Visa Requirements for ${n} (${r})**
*Origin: ${e}*

| Metric | Value |
| :--- | :--- |
| **Status** | ${o.status} |
| **Cost** | ${o.cost} |
| **Processing** | ${o.processingTime} |
| **Validity** | ${o.validity} |

**Key Documents**:
${(j=o.documents)==null?void 0:j.slice(0,5).map(z=>`- ${z}`).join(`
`)}

*Generated by Enbee Education Center (Est. 1997)*
    `.trim();navigator.clipboard.writeText(B),v(!0),setTimeout(()=>v(!1),2e3)},N=B=>{const j=new Date().toLocaleDateString("en-IN");let z=` *Visa Checklist: ${n} (${r})*
`;return z+=` Generated: ${j}
`,z+=` Origin: ${e}

`,z+=` *Status*: ${o.status}
`,z+=` *Est. Cost*: ${o.cost}
`,z+=` *Processing*: ${o.processingTime}

`,B&&P?(z+=` *FORENSIC DOCUMENT CHECKLIST*
`,P.forEach(ee=>{z+=`
*${ee.categoryName}*
`,(ee.items||[]).forEach(le=>{z+=` ${le.item}${le.isCritical?" ( Critical)":""}
`})})):(z+=` *Key Documents Required:*
`,(o.documents||[]).slice(0,8).forEach(ee=>{z+=` ${ee}
`}),(o.documents||[]).length>8&&(z+=`+ ${(o.documents||[]).length-8} more...
`)),z+=`
 *Official Booking:* ${(T==null?void 0:T.url)||"Check Consulate Website"}
`,z+=`
*Note:* Generated by EEC AI. Verify with official sources.`,encodeURIComponent(z)},M=(B,j=!1)=>{const z=N(j),ee=encodeURIComponent(`${n} Visa Checklist - EEC Services`);if(B==="whatsapp")window.open(`https://wa.me/?text=${z}`,"_blank");else{const le=decodeURIComponent(z);window.open(`mailto:?subject=${ee}&body=${encodeURIComponent(le)}`,"_blank")}},b=B=>{const j=String(B||"").toLowerCase();return j.includes("free")||j.includes("not required")?"bg-emerald-100 dark:bg-emerald-900/50 text-emerald-800 dark:text-emerald-200 border-emerald-200 dark:border-emerald-800":j.includes("arrival")||j.includes("evisa")?"bg-amber-100 dark:bg-amber-900/50 text-amber-800 dark:text-amber-200 border-amber-200 dark:border-amber-800":"bg-violet-100 dark:bg-violet-900/50 text-violet-800 dark:text-violet-200 border-violet-200 dark:border-violet-800"},X=B=>B==="Easy"?"text-emerald-600 dark:text-emerald-400 bg-emerald-50 dark:bg-emerald-900/20 border-emerald-100 dark:border-emerald-800":B==="Medium"?"text-amber-600 dark:text-amber-400 bg-amber-50 dark:bg-amber-900/20 border-amber-100 dark:border-amber-800":"text-rose-600 dark:text-rose-400 bg-rose-50 dark:bg-rose-900/20 border-rose-100 dark:border-rose-800",_e=()=>{const j=`Flights from ${e.includes("(")?"India":e} to ${n}`,z=`https://www.google.com/travel/flights?q=${encodeURIComponent(j)}`;window.open(z,"_blank")},ye=(B=>B>=80?{bg:"bg-emerald-500",text:"text-emerald-600 dark:text-emerald-400",border:"border-emerald-200 dark:border-emerald-800",label:"High Confidence"}:B>=50?{bg:"bg-amber-500",text:"text-amber-600 dark:text-amber-400",border:"border-amber-200 dark:border-amber-800",label:"Medium Confidence"}:{bg:"bg-rose-500",text:"text-rose-600 dark:text-rose-400",border:"border-rose-200 dark:border-rose-800",label:"Low Confidence"})(o.confidenceScore||0);return p.jsxs("article",{itemScope:!0,itemType:"http://schema.org/GovernmentPermit",className:"w-full max-w-6xl mx-auto animate-fade-in-up relative overflow-hidden group/article",children:[l&&p.jsxs("div",{className:"absolute inset-0 bg-white/80 dark:bg-slate-900/80 backdrop-blur-md z-20 rounded-3xl flex flex-col items-center justify-center",children:[p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-violet-200 border-t-violet-600 mb-4"}),p.jsxs("p",{className:"text-violet-900 dark:text-violet-200 font-bold animate-pulse",children:["Translating to ",s,"..."]})]}),E&&P&&p.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-200",children:p.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-3xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col overflow-hidden relative border border-slate-200 dark:border-slate-800",children:[p.jsxs("div",{className:"p-6 bg-slate-900 dark:bg-slate-950 text-white flex items-center justify-between flex-shrink-0 border-b border-slate-800",children:[p.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[p.jsx("div",{className:"p-2 bg-emerald-500 rounded-lg text-slate-900 flex-shrink-0",children:p.jsx(Tn,{className:"w-6 h-6"})}),p.jsxs("div",{className:"min-w-0",children:[p.jsx("h3",{className:"font-extrabold text-xl tracking-tight truncate",children:"Forensic Document Protocol"}),p.jsxs("p",{className:"text-emerald-400 text-xs font-bold uppercase tracking-wider truncate",children:["Official AI Deep-Dive  ",n,"  ",r]})]})]}),p.jsx("button",{onClick:()=>k(!1),className:"p-2 hover:bg-white/10 rounded-full transition-colors flex-shrink-0",children:p.jsx("span",{className:"text-2xl leading-none",children:""})})]}),p.jsxs("div",{className:"flex-1 overflow-y-auto p-6 md:p-8 space-y-8 bg-slate-50 dark:bg-slate-900",ref:D,children:[p.jsxs("div",{className:"bg-amber-50 dark:bg-amber-950/30 border border-amber-100 dark:border-amber-900/50 p-4 rounded-xl flex gap-3 items-start",children:[p.jsx(ka,{className:"w-5 h-5 text-amber-600 dark:text-amber-500 flex-shrink-0 mt-0.5"}),p.jsx("p",{className:"text-sm text-amber-800 dark:text-amber-200 font-medium break-words [overflow-wrap:anywhere]",children:"This checklist is generated based on strict consular standards. Missing small details (like bank stamps or specific photo backgrounds) often leads to rejection. Check off items as you verify them."})]}),(P||[]).map((B,j)=>p.jsxs("div",{className:"bg-white dark:bg-slate-950 p-6 rounded-2xl border border-slate-200 dark:border-slate-800 shadow-sm",children:[p.jsxs("h4",{className:"font-bold text-lg text-slate-800 dark:text-slate-100 mb-4 pb-2 border-b border-slate-100 dark:border-slate-800 flex items-center gap-2",children:[p.jsx("span",{className:"w-2 h-6 bg-violet-600 rounded-full"}),B.categoryName]}),p.jsx("div",{className:"space-y-4",children:(B.items||[]).map((z,ee)=>p.jsxs("div",{className:"flex gap-4 group",children:[p.jsx("div",{className:"pt-1 flex-shrink-0",children:p.jsx("input",{type:"checkbox",className:"w-5 h-5 rounded border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-violet-600 focus:ring-violet-500 cursor-pointer"})}),p.jsxs("div",{className:"min-w-0 flex-1",children:[p.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-1",children:[p.jsx("span",{className:"font-bold text-slate-900 dark:text-slate-200 text-base break-words [overflow-wrap:anywhere]",children:z.item}),z.isCritical&&p.jsx("span",{className:"bg-rose-100 dark:bg-rose-900/40 text-rose-700 dark:text-rose-300 text-[10px] font-extrabold px-2 py-0.5 rounded-full uppercase tracking-wider flex-shrink-0",children:"Critical"})]}),p.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-sm leading-relaxed font-medium break-words [overflow-wrap:anywhere] min-w-0",children:z.description})]})]},ee))})]},j))]}),p.jsxs("div",{className:"p-4 bg-white dark:bg-slate-950 border-t border-slate-200 dark:border-slate-800 flex justify-between gap-2 flex-shrink-0",children:[p.jsxs("div",{className:"flex gap-2",children:[p.jsxs("button",{onClick:()=>M("whatsapp",!0),className:"px-4 py-2.5 bg-green-500 hover:bg-green-600 text-white font-bold rounded-xl flex items-center gap-2 transition-colors shadow-sm",title:"Send Full Checklist to WhatsApp",children:[p.jsx(oc,{className:"w-4 h-4"}),p.jsx("span",{className:"hidden sm:inline",children:"WhatsApp"})]}),p.jsx("button",{onClick:()=>M("email",!0),className:"px-4 py-2.5 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-700 text-slate-700 dark:text-slate-200 hover:bg-slate-50 dark:hover:bg-slate-700 font-bold rounded-xl flex items-center gap-2 transition-colors",children:p.jsx(dx,{className:"w-4 h-4"})})]}),p.jsx("div",{className:"flex gap-2",children:p.jsx("button",{onClick:()=>k(!1),className:"px-5 py-2.5 bg-slate-900 dark:bg-slate-700 text-white font-bold rounded-xl hover:bg-slate-800 dark:hover:bg-slate-600 transition-colors",children:"Close"})})]})]})}),p.jsxs("div",{className:"bg-white/90 dark:bg-slate-900/90 backdrop-blur-xl rounded-3xl shadow-2xl shadow-slate-200/50 dark:shadow-black/50 border border-white dark:border-slate-800 overflow-hidden transition-colors w-full relative",children:[p.jsx("div",{className:"absolute top-10 right-10 opacity-[0.03] pointer-events-none select-none",children:p.jsx("div",{className:"border-4 border-slate-900 dark:border-white transform -rotate-12 p-4 rounded-xl",children:p.jsx("span",{className:"text-8xl font-black uppercase tracking-widest text-slate-900 dark:text-white",children:"Dossier"})})}),p.jsxs("div",{className:"p-5 md:p-10 border-b border-slate-100 dark:border-slate-800 bg-gradient-to-b from-white to-slate-50 dark:from-slate-900 dark:to-slate-900/50 relative transition-colors z-10",children:[p.jsxs("div",{className:"flex flex-col-reverse md:flex-row justify-between md:items-start gap-4 mb-4 md:mb-6",children:[p.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs font-bold uppercase tracking-wider",children:[p.jsxs("span",{className:"bg-slate-900 dark:bg-slate-700 text-white px-3 py-1 rounded-full whitespace-nowrap shadow-sm",children:[r," Visa"]}),p.jsx("span",{className:"text-slate-400 dark:text-slate-600",children:""}),p.jsxs("span",{className:"flex items-center gap-1 text-slate-600 dark:text-slate-400 break-words max-w-full min-w-0 bg-white dark:bg-slate-800 px-2 py-1 rounded-lg border border-slate-200 dark:border-slate-700",children:[p.jsx(Na,{className:"w-3 h-3 flex-shrink-0 text-violet-500"}),p.jsxs("span",{className:"break-words truncate",children:[e,"  ",n]})]}),o.lastUpdate&&p.jsxs(p.Fragment,{children:[p.jsx("span",{className:"text-slate-400 dark:text-slate-600",children:""}),p.jsxs("span",{className:"flex items-center gap-1 text-emerald-600 dark:text-emerald-400 bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-100 dark:border-emerald-900/30 px-2 py-1 rounded-lg",children:[p.jsx($S,{className:"w-3 h-3 flex-shrink-0"}),p.jsxs("span",{children:["Updated: ",o.lastUpdate]})]})]})]}),p.jsxs("div",{className:"relative group self-end md:self-auto flex items-center gap-2 flex-shrink-0",children:[p.jsxs("button",{onClick:R,className:"flex items-center gap-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-full px-4 py-2 shadow-sm text-sm font-bold text-slate-700 dark:text-slate-200 hover:border-violet-300 dark:hover:border-violet-600 hover:text-violet-600 dark:hover:text-violet-400 transition-colors",title:"Copy as Citation for LLM/Chat",children:[g?p.jsx(Aa,{className:"w-4 h-4 text-green-500"}):p.jsx(zS,{className:"w-4 h-4"}),p.jsx("span",{children:g?"Copied":"Copy Dossier"})]}),p.jsxs("div",{className:"flex items-center gap-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-full px-4 py-2 shadow-sm text-sm font-bold text-slate-700 dark:text-slate-200 hover:border-violet-300 dark:hover:border-violet-600 hover:text-violet-600 dark:hover:text-violet-400 transition-colors cursor-pointer relative",children:[p.jsx(zh,{className:"w-4 h-4 flex-shrink-0"}),p.jsx("span",{children:"Translate"}),p.jsxs("select",{value:s,onChange:w,className:"absolute inset-0 opacity-0 cursor-pointer w-full h-full",children:[p.jsx("option",{value:"English",children:"English"}),qE.map(B=>p.jsx("option",{value:B,children:B},B))]})]})]})]}),p.jsxs("div",{className:"relative block",children:[p.jsx("div",{className:`mb-4 md:mb-2 md:float-right md:ml-6 px-4 py-2 md:px-6 md:py-3 rounded-2xl font-bold border-2 text-center shadow-sm md:transform md:rotate-1 w-fit clear-right ${b(o.status)}`,children:o.status}),p.jsx("h2",{className:"text-2xl md:text-4xl font-extrabold text-slate-900 dark:text-white mb-3 leading-snug break-words [overflow-wrap:anywhere]",children:o.visaName}),p.jsx("p",{className:"text-slate-600 dark:text-slate-400 max-w-full leading-relaxed text-base md:text-lg font-medium break-words [overflow-wrap:anywhere]",children:o.summary}),p.jsx("div",{className:"clear-both"}),o.confidenceScore!==void 0&&p.jsxs("div",{className:`mt-8 p-6 rounded-2xl border ${ye.border} bg-white/60 dark:bg-slate-800/60 flex flex-col sm:flex-row items-center gap-6 max-w-2xl backdrop-blur-md shadow-sm transition-all`,children:[p.jsxs("div",{className:"relative w-28 h-28 flex-shrink-0 flex items-center justify-center",children:[p.jsx("div",{className:`absolute inset-0 rounded-full blur-xl opacity-20 ${ye.bg}`}),p.jsxs("svg",{className:"w-full h-full transform -rotate-90 drop-shadow-md",viewBox:"0 0 100 100",children:[p.jsx("circle",{cx:"50",cy:"50",r:"42",stroke:"currentColor",strokeWidth:"8",fill:"transparent",className:"text-slate-100 dark:text-slate-700/50"}),p.jsx("circle",{cx:"50",cy:"50",r:"42",stroke:"currentColor",strokeWidth:"8",fill:"transparent",strokeDasharray:264,strokeDashoffset:264-264*U/100,strokeLinecap:"round",className:`${ye.text} transition-all duration-[1500ms] ease-out`})]}),p.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:p.jsxs("span",{className:`text-3xl font-black tracking-tighter ${ye.text}`,children:[U,"%"]})})]}),p.jsxs("div",{className:"text-center sm:text-left flex-1",children:[p.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-2 mb-2",children:[p.jsx(Tn,{className:`w-5 h-5 ${ye.text}`}),p.jsx("span",{className:"text-xs font-bold uppercase tracking-widest text-slate-500 dark:text-slate-400",children:"Forensic Reliability Score"}),p.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-bold uppercase border ${ye.border} ${ye.bg} ${ye.text} bg-opacity-20`,children:ye.label})]}),p.jsxs("p",{className:"text-sm md:text-base text-slate-700 dark:text-slate-300 italic leading-relaxed font-medium",children:['"',o.aiAnalysis||"Calculated based on source reliability and cross-referencing.",'"']})]})]})]}),p.jsx("div",{className:"mt-8 md:mt-10 overflow-hidden rounded-2xl border border-slate-100 dark:border-slate-700",children:p.jsxs("table",{className:"w-full text-left border-collapse bg-white dark:bg-slate-800",children:[p.jsxs("caption",{className:"sr-only",children:["Visa Requirements Summary Table for ",n]}),p.jsx("thead",{className:"sr-only",children:p.jsxs("tr",{children:[p.jsx("th",{children:"Metric"}),p.jsx("th",{children:"Value"})]})}),p.jsxs("tbody",{className:"grid grid-cols-1 xs:grid-cols-2 md:grid-cols-4 divide-y md:divide-y-0 md:divide-x divide-slate-100 dark:divide-slate-700",children:[p.jsxs("tr",{className:"flex flex-col p-5 hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors group",children:[p.jsxs("td",{className:"text-xs font-bold uppercase tracking-wide text-blue-500 mb-2 flex items-center gap-2",children:[p.jsx(ba,{className:"w-4 h-4"})," Processing"]}),p.jsx("td",{className:"font-bold text-slate-900 dark:text-white text-sm md:text-base leading-tight break-words",children:o.processingTime})]}),p.jsxs("tr",{className:"flex flex-col p-5 hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors group",children:[p.jsxs("td",{className:"text-xs font-bold uppercase tracking-wide text-green-500 mb-2 flex items-center gap-2",children:[p.jsx(Mo,{className:"w-4 h-4"})," Est. Cost"]}),p.jsx("td",{className:"font-bold text-slate-900 dark:text-white text-sm md:text-base leading-tight break-words",children:o.cost})]}),p.jsxs("tr",{className:"flex flex-col p-5 hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors group",children:[p.jsxs("td",{className:"text-xs font-bold uppercase tracking-wide text-purple-500 mb-2 flex items-center gap-2",children:[p.jsx(sc,{className:"w-4 h-4"})," Validity"]}),p.jsx("td",{className:"font-bold text-slate-900 dark:text-white text-sm md:text-base leading-tight break-words",children:o.validity})]}),p.jsxs("tr",{className:`flex flex-col p-5 transition-colors group ${X(o.difficulty).replace("border","border-l-0")}`,children:[p.jsx("td",{className:"text-xs font-bold uppercase tracking-wide opacity-75 mb-2",children:"Difficulty"}),p.jsx("td",{className:"font-black text-lg leading-tight",children:o.difficulty})]})]})]})}),p.jsx("div",{className:"mt-10 pt-8 border-t border-slate-100 dark:border-slate-800",children:p.jsx(b8,{processingTime:o.processingTime})})]}),p.jsxs("div",{className:"p-5 md:p-10 grid lg:grid-cols-12 gap-8 md:gap-10",children:[p.jsxs("div",{className:"lg:col-span-8 space-y-8 md:space-y-12 min-w-0",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white mb-6 flex items-center gap-2",children:"Specific Requirements"}),p.jsx("div",{className:"grid md:grid-cols-2 gap-4 md:gap-6",children:[{icon:m8,title:"Financials",text:o.financialReqs,color:"text-emerald-700 dark:text-emerald-400"},{icon:g8,title:"Photo Specs",text:o.photoReqs,color:"text-blue-700 dark:text-blue-400"},{icon:Tn,title:"Insurance",text:o.insuranceReqs,color:"text-indigo-700 dark:text-indigo-400"},{icon:y8,title:"Accommodation",text:o.accommodationReqs,color:"text-fuchsia-700 dark:text-fuchsia-400"}].map((B,j)=>p.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-2xl p-5 md:p-6 border border-slate-100 dark:border-slate-800",children:[p.jsxs("div",{className:`flex items-center gap-2 ${B.color} font-bold mb-3 text-sm uppercase tracking-wide`,children:[p.jsx(B.icon,{className:"w-4 h-4 flex-shrink-0"})," ",B.title]}),p.jsx("p",{className:"text-slate-700 dark:text-slate-300 text-sm leading-relaxed font-medium break-words whitespace-pre-line [overflow-wrap:anywhere]",children:B.text})]},j))})]}),o.legalCitations&&o.legalCitations.length>0&&p.jsxs("div",{className:"bg-slate-900 dark:bg-slate-800 rounded-xl p-5 md:p-6 text-white relative overflow-hidden",children:[p.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10",children:p.jsx(KS,{className:"w-24 h-24"})}),p.jsxs("h3",{className:"text-sm font-bold uppercase tracking-wider mb-3 flex items-center gap-2 text-violet-300",children:[p.jsx(JS,{className:"w-4 h-4"})," Legal Framework & Acts"]}),p.jsx("ul",{className:"space-y-2 relative z-10",children:o.legalCitations.map((B,j)=>p.jsxs("li",{className:"flex items-start gap-2 text-sm font-mono text-slate-300",children:[p.jsx("span",{className:"text-violet-400",children:""})," ",B]},j))})]}),p.jsxs("div",{children:[p.jsxs("h3",{className:"text-xl md:text-2xl font-bold text-slate-900 dark:text-white mb-6 flex items-center gap-3",children:[p.jsx("span",{className:"flex items-center justify-center w-8 h-8 rounded-xl bg-violet-600 text-white text-sm font-bold shadow-lg shadow-violet-200 dark:shadow-violet-900/30 flex-shrink-0",children:"1"}),s==="English"?"Detailed Process":"Detailed Process (Translated)"]}),p.jsx("div",{className:"space-y-6 relative pl-4 border-l-2 border-slate-100 dark:border-slate-800 ml-4",children:(o.processSteps||[]).map((B,j)=>p.jsxs("div",{className:"relative pl-8 group",children:[p.jsx("div",{className:"absolute -left-[21px] top-0.5 w-4 h-4 rounded-full bg-white dark:bg-slate-900 border-4 border-violet-500 shadow-sm group-hover:scale-125 transition-transform"}),p.jsx("p",{className:"text-slate-700 dark:text-slate-300 leading-relaxed text-sm md:text-base font-medium break-words [overflow-wrap:anywhere]",children:B})]},j))})]}),p.jsxs("div",{children:[p.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[p.jsxs("h3",{className:"text-xl md:text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-3",children:[p.jsx("span",{className:"flex items-center justify-center w-8 h-8 rounded-xl bg-fuchsia-600 text-white text-sm font-bold shadow-lg shadow-fuchsia-200 dark:shadow-fuchsia-900/30 flex-shrink-0",children:"2"}),s==="English"?"Checklist":"Checklist (Translated)"]}),p.jsxs("button",{onClick:C,disabled:x,className:"bg-slate-900 dark:bg-slate-100 hover:bg-violet-700 dark:hover:bg-slate-200 text-white dark:text-slate-900 text-xs font-bold py-2.5 px-4 rounded-xl shadow-lg shadow-slate-200 dark:shadow-black/30 flex items-center gap-2 transition-all active:scale-95 disabled:opacity-70 disabled:cursor-not-allowed flex-shrink-0",children:[x?p.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}):p.jsx(Xo,{className:"w-4 h-4"}),p.jsx("span",{children:"Generate Forensic Checklist"})]})]}),p.jsx("div",{className:"bg-slate-50 dark:bg-slate-800/30 rounded-3xl p-6 md:p-8 border border-slate-100 dark:border-slate-800 relative overflow-hidden",children:p.jsx("ul",{className:"grid gap-4",children:(o.documents||[]).map((B,j)=>p.jsxs("li",{className:"flex items-start gap-4 p-2 hover:bg-white dark:hover:bg-slate-800 rounded-xl transition-colors",children:[p.jsx("div",{className:"mt-0.5 min-w-[20px] p-1 bg-green-100 dark:bg-green-900/50 rounded-full text-green-600 dark:text-green-400 flex-shrink-0 flex items-center justify-center h-5 w-5",children:p.jsx(Aa,{className:"w-3.5 h-3.5"})}),p.jsx("span",{className:"text-slate-700 dark:text-slate-300 font-medium break-words [overflow-wrap:anywhere] text-sm md:text-base flex-1 min-w-0",children:B})]},j))})})]})]}),p.jsxs("div",{className:"lg:col-span-4 space-y-6 min-w-0",children:[o.rejectionRisk&&p.jsxs("div",{className:`bg-white dark:bg-slate-800 border-2 rounded-3xl p-6 shadow-sm ${o.rejectionRisk.probability==="High"?"border-rose-200 dark:border-rose-900":o.rejectionRisk.probability==="Moderate"?"border-amber-200 dark:border-amber-900":"border-emerald-200 dark:border-emerald-900"}`,children:[p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsxs("h3",{className:"font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[p.jsx(S8,{className:`w-5 h-5 ${o.rejectionRisk.probability==="High"?"text-rose-500":"text-amber-500"}`}),"Risk Profile"]}),p.jsxs("span",{className:`px-2 py-1 rounded text-xs font-bold uppercase ${o.rejectionRisk.probability==="High"?"bg-rose-100 text-rose-700":o.rejectionRisk.probability==="Moderate"?"bg-amber-100 text-amber-700":"bg-emerald-100 text-emerald-700"}`,children:[o.rejectionRisk.probability," Risk"]})]}),p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-[10px] uppercase font-bold text-slate-400 mb-1",children:"Primary Concern"}),p.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200 leading-tight",children:o.rejectionRisk.primaryReason})]}),p.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 p-3 rounded-lg border border-slate-100 dark:border-slate-700",children:[p.jsx("p",{className:"text-[10px] uppercase font-bold text-violet-500 mb-1",children:"Mitigation Strategy"}),p.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-400 italic",children:['"',o.rejectionRisk.mitigationTip,'"']})]})]})]}),p.jsxs("div",{className:"bg-gradient-to-br from-violet-600 to-indigo-700 rounded-3xl p-6 md:p-8 text-white shadow-xl shadow-indigo-200 dark:shadow-indigo-900/40 relative overflow-hidden group",children:[p.jsx("div",{className:"absolute -right-10 -top-10 w-40 h-40 bg-white/10 rounded-full blur-3xl group-hover:bg-white/20 transition-all"}),p.jsxs("div",{className:"flex items-center gap-3 mb-4 relative z-10",children:[p.jsx("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:p.jsx(Qo,{className:"w-6 h-6 transform -rotate-45"})}),p.jsx("h3",{className:"font-bold text-xl",children:"Ready to fly?"})]}),p.jsxs("p",{className:"text-indigo-100 text-sm mb-6 font-medium relative z-10 break-words [overflow-wrap:anywhere]",children:["Search for flights from India to ",n," once your visa is approved."]}),p.jsx("button",{onClick:_e,className:"w-full bg-white text-indigo-700 font-bold py-3.5 rounded-xl hover:bg-indigo-50 transition-colors shadow-lg relative z-10",children:"Search Flights"})]}),p.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-3xl p-6 shadow-sm",children:[p.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[p.jsx("div",{className:"p-2 bg-green-50 dark:bg-green-900/20 rounded-lg text-green-600 dark:text-green-400",children:p.jsx(w8,{className:"w-5 h-5"})}),p.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"Save & Share"})]}),p.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-4 font-medium",children:"Send this visa dossier to your phone or email to keep it handy."}),p.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[p.jsxs("button",{onClick:()=>M("whatsapp"),className:"flex flex-col items-center justify-center gap-2 p-3 rounded-xl border border-slate-100 dark:border-slate-700 hover:border-green-200 hover:bg-green-50 dark:hover:bg-green-900/20 transition-all group",children:[p.jsx(oc,{className:"w-6 h-6 text-green-500 dark:text-green-400 group-hover:scale-110 transition-transform"}),p.jsx("span",{className:"text-xs font-bold text-slate-600 dark:text-slate-300 group-hover:text-green-700 dark:group-hover:text-green-300",children:"WhatsApp"})]}),p.jsxs("button",{onClick:()=>M("email"),className:"flex flex-col items-center justify-center gap-2 p-3 rounded-xl border border-slate-100 dark:border-slate-700 hover:border-blue-200 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-all group",children:[p.jsx(dx,{className:"w-6 h-6 text-blue-500 dark:text-blue-400 group-hover:scale-110 transition-transform"}),p.jsx("span",{className:"text-xs font-bold text-slate-600 dark:text-slate-300 group-hover:text-blue-700 dark:group-hover:text-blue-300",children:"Email"})]})]})]}),p.jsxs("div",{className:"bg-amber-50 dark:bg-amber-950/20 border border-amber-100 dark:border-amber-900/40 rounded-3xl p-6 md:p-8",children:[p.jsxs("div",{className:"flex items-center gap-2 text-amber-700 dark:text-amber-500 font-bold mb-4",children:[p.jsx(ka,{className:"w-5 h-5 flex-shrink-0"}),p.jsx("span",{children:"Critical Jurisdiction"})]}),p.jsx("div",{className:"prose prose-sm prose-amber dark:prose-invert text-amber-900/80 dark:text-amber-200/80 leading-relaxed font-medium break-words [overflow-wrap:anywhere] min-w-0",children:o.notes}),p.jsxs("div",{className:"mt-8 pt-6 border-t border-amber-200/50 dark:border-amber-900/50",children:[p.jsx("h4",{className:"font-bold text-amber-900 dark:text-amber-400 mb-2 text-xs uppercase tracking-wide",children:"Where to Apply"}),p.jsx("p",{className:"text-sm text-amber-800 dark:text-amber-200 font-medium bg-amber-100/50 dark:bg-amber-900/40 p-3 rounded-xl break-words [overflow-wrap:anywhere] min-w-0",children:o.embassyContact||"Contact your nearest embassy or consulate."}),T&&p.jsxs("a",{href:T.url,target:"_blank",rel:"noopener noreferrer",className:"mt-4 w-full bg-white dark:bg-slate-800 hover:bg-amber-100 dark:hover:bg-slate-700 text-amber-900 dark:text-amber-200 border border-amber-200 dark:border-slate-700 font-bold py-3 px-4 rounded-xl shadow-sm flex items-center justify-center gap-2 transition-all group",children:[p.jsx(WS,{className:"w-4 h-4 text-amber-700 dark:text-amber-400"}),p.jsx("span",{children:T.label}),p.jsx(x8,{className:"w-3 h-3 text-amber-400 group-hover:translate-x-1 transition-transform"})]})]})]}),o.officialSources&&o.officialSources.length>0&&p.jsxs("div",{className:"animate-fade-in-up pt-4",children:[p.jsxs("h3",{className:"text-sm font-bold uppercase tracking-wider text-slate-400 dark:text-slate-500 mb-4 flex items-center gap-2",children:[p.jsx(Kc,{className:"w-4 h-4"}),"Verified Official Sources"]}),p.jsx("div",{className:"grid gap-3",children:(o.officialSources||[]).map((B,j)=>p.jsxs("a",{href:B.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-between p-4 bg-white dark:bg-slate-900 border border-slate-100 dark:border-slate-800 rounded-xl hover:shadow-md transition-all group w-full max-w-full overflow-hidden",children:[p.jsxs("div",{className:"flex flex-col min-w-0 flex-1 pr-3",children:[p.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[p.jsx("span",{className:"font-bold text-sm text-slate-800 dark:text-slate-200 truncate max-w-full",children:B.title}),B.authorityLevel==="Gold"&&p.jsxs("span",{className:"flex-shrink-0 flex items-center gap-1 bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300 text-[10px] font-bold px-2 py-0.5 rounded-full uppercase tracking-wider border border-yellow-200 dark:border-yellow-800",children:[p.jsx(Tn,{className:"w-3 h-3"})," Gold Authority"]}),B.authorityLevel==="Silver"&&p.jsxs("span",{className:"flex-shrink-0 flex items-center gap-1 bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-300 text-[10px] font-bold px-2 py-0.5 rounded-full uppercase tracking-wider border border-slate-200 dark:border-slate-700",children:[p.jsx(v8,{className:"w-3 h-3"})," Govt"]})]}),p.jsx("span",{className:"text-xs text-slate-400 dark:text-slate-500 break-all line-clamp-2",children:B.url})]}),p.jsx(Vr,{className:"w-4 h-4 transition-all flex-shrink-0 ml-2 text-slate-400 group-hover:text-violet-500"})]},j))})]})]})]})]})]})},fx=[{icon:Mo,label:"Agri-Income Proof",query:"My sponsor is a farmer with agricultural land. How do I show proof of funds?"},{icon:ka,label:"Gap Justification",query:"I have a 2-year academic/career gap. How do I justify this in my SOP?"},{icon:JS,label:"Refusal Analysis",query:"Analyze my profile for potential Section 214(b) (Immigrant Intent) rejection risks."},{icon:ic,label:"Mock Interview",query:"Simulate a strict 5-minute visa interview with me. Grill me on my finances."},{icon:Mo,label:"Third-Party Sponsor",query:"Can my uncle or a family friend sponsor my education? What documents are needed?"},{icon:Xo,label:"CA Report Needed?",query:"Is a Chartered Accountant (CA) Valuation Report mandatory for my property assets?"},{icon:ba,label:"Processing Speed",query:"Is there a 'Priority Service' available to speed up my decision?"},{icon:Ra,label:"Backlogs Issue",query:"I have 5 backlogs in my Bachelor's degree. Will this affect my student visa?"},{icon:Tn,label:"Insurance Rules",query:"What are the exact minimum coverage requirements for travel insurance?"},{icon:KS,label:"Appeal Process",query:"If rejected, can I appeal the decision or should I re-apply immediately?"},{icon:Xo,label:"Cover Letter",query:"Draft a strong Cover Letter explaining my travel itinerary and intent to return."},{icon:Mo,label:"Liquid Funds",query:"How much money specifically needs to be in 'Liquid Savings' vs 'Fixed Assets'?"},{icon:Na,label:"Jurisdiction Check",query:"Based on my state, which specific Consulate/Embassy must I visit?"},{icon:ic,label:"Ties to Home",query:"How do I prove 'Strong Economic Ties' to India to satisfy the Visa Officer?"},{icon:ka,label:"English Waiver",query:"Can I get a waiver for IELTS/TOEFL based on my previous education?"},{icon:Xo,label:"SOP Review",query:"What are the 3 most important points to include in my Statement of Purpose?"},{icon:Ra,label:"Course Relevance",query:"How do I explain why I chose this specific course over Indian options?"},{icon:Mo,label:"Education Loan",query:"Does the embassy accept a 'Sanction Letter' from a Non-Banking Financial Company (NBFC)?"},{icon:Tn,label:"Biometrics",query:"What happens at the VAC (Visa Application Center)? Walk me through the steps."},{icon:ba,label:"Ideal Timing",query:"How many days before my travel date should I ideally submit my file?"}],P8=({text:t,isUser:e})=>{const[n,r]=$.useState(!1);if(!t)return null;const s=()=>{navigator.clipboard.writeText(t),r(!0),setTimeout(()=>r(!1),2e3)};if(e)return p.jsx("div",{className:"whitespace-pre-wrap font-medium text-[15px] leading-relaxed",children:t});let i=[];try{i=t.split(/(```[\s\S]*?```)/g)}catch{i=[t]}return p.jsxs("div",{className:"space-y-3 w-full relative group min-w-0",children:[p.jsx("button",{onClick:s,className:"absolute -top-2 -right-2 p-1.5 bg-slate-100 dark:bg-slate-700 hover:bg-violet-100 dark:hover:bg-violet-900 rounded-lg text-slate-400 hover:text-violet-600 opacity-0 group-hover:opacity-100 transition-all z-10 scale-90",title:"Copy Response",children:n?p.jsx(Aa,{className:"w-3.5 h-3.5 text-emerald-500"}):p.jsx(zS,{className:"w-3.5 h-3.5"})}),i.map((o,a)=>{if(!o)return null;if(o.startsWith("```")){const c=o.replace(/```/g,"");return p.jsx("div",{className:"bg-slate-900 text-slate-200 p-3 rounded-xl text-xs font-mono overflow-x-auto border border-slate-700 shadow-inner my-2",children:p.jsx("pre",{children:c})},a)}if(o.includes("|")&&o.includes("---")){const h=o.trim().split(`
`).filter(m=>m.trim().startsWith("|")&&m.trim().endsWith("|"));if(h.length>0)return p.jsx("div",{className:"overflow-hidden my-3 border border-slate-200 dark:border-slate-700 rounded-xl shadow-sm bg-white dark:bg-slate-800/50",children:p.jsx("div",{className:"overflow-x-auto",children:p.jsx("table",{className:"w-full text-sm text-left border-collapse",children:p.jsx("tbody",{children:h.map((m,g)=>{if(m.includes("---"))return null;const v=m.split("|").filter(I=>I.trim()!==""),x=g===0;return p.jsx("tr",{className:x?"bg-slate-100 dark:bg-slate-800 font-bold text-slate-700 dark:text-slate-200":"border-t border-slate-100 dark:border-slate-700/50 text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors",children:v.map((I,P)=>p.jsx("td",{className:"p-3 whitespace-pre-wrap min-w-[100px]",children:rs(I.trim())},P))},g)})})})})},a)}return o.split(/\n\n+/).map((c,h)=>{const m=c.trim();if(!m)return null;const g=m.match(/^(#{1,3})\s+(.+?)(?:\n|$)([\s\S]*)$/);if(g&&!m.match(/^[-*]\s/)){const v=g[1].length,x=g[2].trim(),I=g[3]?g[3].trim():"";return p.jsxs(du.Fragment,{children:[v===1&&p.jsx("h1",{className:"text-lg font-bold text-slate-900 dark:text-white mt-4 mb-2",children:rs(x)}),v===2&&p.jsx("h2",{className:"text-base font-bold text-slate-800 dark:text-slate-100 mt-3 mb-2",children:rs(x)}),v===3&&p.jsx("h3",{className:"text-sm font-bold uppercase tracking-wider text-violet-600 dark:text-violet-400 mt-3 mb-1",children:rs(x)}),I&&p.jsx("div",{className:"text-slate-600 dark:text-slate-300 text-sm leading-relaxed mt-1",children:rs(I)})]},h)}if(m.match(/^[-*]\s/m)){const v=m.split(`
`).filter(x=>x.trim().match(/^[-*]\s/));return p.jsx("ul",{className:"space-y-2 my-2 bg-slate-50 dark:bg-slate-800/30 p-4 rounded-xl border border-slate-100 dark:border-slate-800",children:v.map((x,I)=>p.jsxs("li",{className:"flex items-start gap-3 text-slate-700 dark:text-slate-300 text-sm leading-relaxed",children:[p.jsx("div",{className:"mt-1.5 w-1.5 h-1.5 bg-violet-500 rounded-full flex-shrink-0 shadow-sm shadow-violet-200 dark:shadow-none"}),p.jsx("span",{className:"flex-1",children:rs(x.replace(/^[-*]\s/,""))})]},I))},h)}return p.jsx("p",{className:"text-slate-600 dark:text-slate-300 leading-relaxed text-sm",children:rs(m)},h)})})]})},rs=t=>t?t.split(/(\*\*.*?\*\*|`.*?`)/g).map((n,r)=>n.startsWith("**")&&n.endsWith("**")?p.jsx("strong",{className:"font-bold text-slate-900 dark:text-white",children:n.slice(2,-2)},r):n.startsWith("`")&&n.endsWith("`")?p.jsx("code",{className:"bg-slate-100 dark:bg-slate-700 px-1 py-0.5 rounded text-violet-600 dark:text-violet-300 font-mono text-xs border border-slate-200 dark:border-slate-600",children:n.slice(1,-1)},r):p.jsx("span",{children:n},r)):null,M8=({visaData:t,originState:e,destination:n})=>{const[r,s]=$.useState([{role:"model",text:`Hello! I am your **EEC Expert Visa Consultant**.

I have the official consular dossier for **${t.visaName}** tailored for applicants from **${e}**.

How can I assist you with your application strategy today?`}]),[i,o]=$.useState(""),[a,l]=$.useState(!1),[c,h]=$.useState(!1),[m,g]=$.useState("English"),[v,x]=$.useState(r),[I,P]=$.useState(fx.slice(0,5)),A=$.useRef(null),E=$.useRef(null);$.useEffect(()=>{const w=[...fx].sort(()=>.5-Math.random());P(w.slice(0,5))},[n,t.visaName]);const k=()=>{E.current&&E.current.scrollTo({top:E.current.scrollHeight,behavior:"smooth"})};$.useLayoutEffect(()=>{k()},[r,a,c]),$.useEffect(()=>{const w={role:"model",text:`Hello! I am your **EEC Expert Visa Consultant**.

I have the official consular dossier for **${t.visaName}** tailored for applicants from **${e}**.

How can I assist you with your application strategy today?`};s([w]),x([w])},[t.visaName,e]);const D=async w=>{const C=w.target.value,R=m;if(g(C),C==="English"){s(v);return}h(!0);try{const N=await Promise.all(v.map(async M=>{const b=await lD(M.text,C);return{...M,text:b}}));s(N)}catch(N){console.error("Chat translation failed",N),g(R)}finally{h(!1)}},U=async w=>{const C=w||i.trim();if(!C||a)return;const R={role:"user",text:C};o(""),A.current&&A.current.focus({preventScroll:!0}),s(N=>[...N,R]),x(N=>[...N,R]),l(!0);try{const N=v.map(X=>({role:X.role,parts:[{text:X.text}]})),b={role:"model",text:await aD(N,C,t,m,n)};s(X=>[...X,b]),x(X=>[...X,b])}catch(N){console.error("Chat Error:",N);const M={role:"model",text:"I'm having trouble reaching the secure consular network. Please try again in a moment."};s(b=>[...b,M]),x(b=>[...b,M])}finally{l(!1)}},L=()=>{const w=v[0];s([w]),x([w]),o("")},T=w=>{w.key==="Enter"&&!w.shiftKey&&(w.preventDefault(),U())};return p.jsxs("div",{className:"w-full max-w-5xl mx-auto h-[650px] md:h-[750px] flex flex-col rounded-[2.5rem] overflow-hidden bg-white/90 dark:bg-slate-900/90 backdrop-blur-2xl border border-white/40 dark:border-white/5 shadow-2xl relative z-10 transition-colors duration-500 group/container",children:[p.jsx("div",{className:"absolute top-0 left-0 right-0 h-64 bg-gradient-to-b from-violet-50/80 dark:from-violet-900/10 to-transparent pointer-events-none z-0"}),p.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-slate-100 dark:border-slate-800 relative z-20 bg-white/50 dark:bg-slate-900/50 backdrop-blur-md",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsxs("div",{className:"relative group/avatar cursor-pointer",children:[p.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-violet-600 to-indigo-600 flex items-center justify-center text-white shadow-lg shadow-violet-500/30 transform group-hover/avatar:scale-105 transition-transform duration-300",children:p.jsx(af,{className:"w-6 h-6"})}),p.jsxs("div",{className:"absolute -bottom-1 -right-1 flex h-4 w-4",children:[p.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"}),p.jsx("span",{className:"relative inline-flex rounded-full h-4 w-4 bg-emerald-500 ring-2 ring-white dark:ring-slate-900"})]})]}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-extrabold text-slate-900 dark:text-white leading-tight",children:"EEC Expert Visa Consultant"}),p.jsxs("p",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 flex items-center gap-1.5 uppercase tracking-wide",children:[p.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500"}),"Official EEC Agent"]})]})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[r.length>1&&p.jsx("button",{onClick:L,className:"p-2.5 rounded-xl text-slate-400 hover:text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-900/20 transition-all border border-transparent hover:border-rose-100 dark:hover:border-rose-900",title:"Reset Conversation",children:p.jsx($S,{className:"w-5 h-5"})}),p.jsxs("div",{className:"relative flex items-center gap-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl px-3 py-2 transition-all hover:bg-white dark:hover:bg-slate-700 hover:border-violet-200 dark:hover:border-slate-600 hover:shadow-sm",children:[p.jsx(zh,{className:"w-4 h-4 text-slate-500 dark:text-slate-400"}),p.jsxs("select",{value:m,onChange:D,className:"bg-transparent text-xs font-bold text-slate-700 dark:text-slate-200 outline-none cursor-pointer appearance-none pr-6 w-20",disabled:c,children:[p.jsx("option",{value:"English",children:"English"}),qE.map(w=>p.jsx("option",{value:w,children:w},w))]})]})]})]}),p.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-6 space-y-6 scroll-smooth scrollbar-thin scrollbar-thumb-slate-200 dark:scrollbar-thumb-slate-700 scrollbar-track-transparent z-10",ref:E,children:[c&&p.jsx("div",{className:"sticky top-0 z-50 flex justify-center pb-4",children:p.jsxs("div",{className:"px-4 py-1.5 bg-white/90 dark:bg-slate-800/90 backdrop-blur border border-slate-200 dark:border-slate-700 rounded-full text-[10px] font-bold uppercase tracking-wider text-violet-600 dark:text-violet-400 flex items-center gap-2 shadow-sm animate-pulse",children:[p.jsx(zh,{className:"w-3 h-3"})," Translating..."]})}),r.map((w,C)=>{const R=w.role==="user";return p.jsxs("div",{className:`flex items-end gap-3 ${R?"flex-row-reverse":"flex-row"} group animate-in fade-in slide-in-from-bottom-2 duration-500`,children:[!R&&p.jsx("div",{className:"w-8 h-8 rounded-xl bg-violet-100 dark:bg-violet-900/50 flex items-center justify-center text-violet-600 dark:text-violet-400 flex-shrink-0",children:p.jsx(af,{className:"w-5 h-5"})}),R&&p.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-200 dark:bg-slate-700 flex items-center justify-center text-slate-500 dark:text-slate-400 flex-shrink-0",children:p.jsx(ic,{className:"w-4 h-4"})}),p.jsx("div",{className:`relative max-w-[85%] sm:max-w-[75%] px-5 py-4 shadow-sm transition-all duration-300 ${R?"bg-slate-900 dark:bg-white text-white dark:text-slate-900 rounded-[1.5rem] rounded-tr-sm":"bg-white dark:bg-slate-800 text-slate-800 dark:text-slate-200 border border-slate-100 dark:border-slate-700 rounded-[1.5rem] rounded-tl-sm hover:shadow-md"}`,children:p.jsx(P8,{text:w.text,isUser:R})})]},C)}),a&&p.jsxs("div",{className:"flex items-center gap-3 animate-in fade-in duration-300",children:[p.jsx("div",{className:"w-8 h-8 rounded-xl bg-violet-50 dark:bg-violet-900/30 flex items-center justify-center text-violet-400 dark:text-violet-500 flex-shrink-0",children:p.jsx(af,{className:"w-5 h-5"})}),p.jsxs("div",{className:"bg-white dark:bg-slate-800 px-5 py-4 rounded-[1.5rem] rounded-tl-sm border border-slate-100 dark:border-slate-700 shadow-sm flex items-center gap-1.5",children:[p.jsx("span",{className:"w-1.5 h-1.5 bg-violet-500 rounded-full animate-[bounce_1s_infinite_0ms]"}),p.jsx("span",{className:"w-1.5 h-1.5 bg-violet-500 rounded-full animate-[bounce_1s_infinite_200ms]"}),p.jsx("span",{className:"w-1.5 h-1.5 bg-violet-500 rounded-full animate-[bounce_1s_infinite_400ms]"})]})]})]}),p.jsxs("div",{className:"p-4 md:p-6 bg-white dark:bg-slate-900 border-t border-slate-100 dark:border-slate-800 z-20",children:[!a&&p.jsx("div",{className:"flex gap-2 ml-10 overflow-x-auto pb-4 mask-linear-fade scrollbar-hide snap-x",children:I.map((w,C)=>p.jsxs("button",{onClick:()=>U(w.query),className:"snap-start flex items-center gap-2 px-4 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-full text-xs font-bold text-slate-600 dark:text-slate-400 hover:bg-violet-50 dark:hover:bg-violet-900/20 hover:border-violet-300 dark:hover:border-violet-700 hover:text-violet-700 dark:hover:text-violet-300 transition-all whitespace-nowrap active:scale-95",children:[p.jsx(w.icon,{className:"w-3.5 h-3.5"}),w.label]},C))}),p.jsxs("div",{className:"relative flex items-end gap-2 bg-slate-100 dark:bg-black/30 p-2 rounded-[2rem] border border-transparent focus-within:border-violet-300 dark:focus-within:border-violet-700 focus-within:ring-4 focus-within:ring-violet-100 dark:focus-within:ring-violet-900/20 transition-all",children:[p.jsx("textarea",{ref:A,value:i,onChange:w=>o(w.target.value),onKeyDown:T,disabled:a||c,placeholder:m==="English"?"Type your question...":`Ask in ${m}...`,className:"w-full bg-transparent border-0 focus:ring-0 text-slate-900 dark:text-white placeholder:text-slate-400 py-3 pl-4 resize-none max-h-32 min-h-[48px] leading-relaxed scrollbar-hide text-sm md:text-base font-medium",rows:1}),p.jsx("button",{onClick:()=>U(),disabled:!i.trim()||a,className:"p-3 bg-slate-900 dark:bg-white text-white dark:text-slate-900 rounded-full hover:scale-105 active:scale-90 transition-all disabled:opacity-50 disabled:scale-100 shadow-md flex-shrink-0",title:"Send Message",children:a?p.jsx("div",{className:"w-5 h-5 border-2 border-white/30 dark:border-slate-900/30 border-t-white dark:border-t-slate-900 rounded-full animate-spin"}):p.jsx(Vr,{className:"w-5 h-5"})})]}),p.jsxs("div",{className:"text-center mt-3 flex items-center justify-center gap-2 opacity-60 hover:opacity-100 transition-opacity",children:[p.jsx(sc,{className:"w-3 h-3 text-violet-500"}),p.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Powered by Gemini 2.5  Official EEC Intelligence"})]})]})]})};function D8(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}var L8=["AD","AE","AF","AG","AI","AL","AM","AO","AR","AS","AT","AU","AW","AX","BA","BB","BD","BE","BF","BG","BH","BI","BJ","BL","BM","BN","BO","BR","BS","BT","BV","BW","BY","BZ","CA","CC","CD","CF","CG","CH","CI","CK","CL","CM","CN","CO","CR","CU","CV","CW","CX","CY","CZ","DE","DJ","DK","DM","DO","DZ","EC","EE","EG","ER","ES","ET","FI","FJ","FK","FM","FO","FR","GA","GB","GD","GE","GF","GG","GH","GI","GL","GM","GN","GP","GQ","GR","GS","GT","GU","GW","GY","HK","HM","HN","HR","HT","HU","ID","IE","IL","IM","IN","IO","IQ","IR","IS","IT","JE","JM","JO","JP","KE","KG","KH","KI","KM","KN","KP","KR","KW","KY","KZ","LA","LB","LC","LGBT","LI","LK","LR","LS","LT","LU","LV","LY","MA","MC","MD","ME","MG","MH","MK","ML","MM","MN","MO","MP","MQ","MR","MS","MT","MU","MV","MW","MX","MY","MZ","NA","NC","NE","NF","NG","NI","NL","NO","NP","NR","NU","NZ","OM","PA","PE","PF","PG","PH","PK","PL","PM","PN","PR","PS","PT","PW","PY","QA","RE","RO","RS","RU","RW","SA","SB","SC","SD","SE","SG","SI","SJ","SK","SL","SM","SN","SO","SR","SS","ST","SV","SX","SY","SZ","TC","TD","TF","TG","TH","TJ","TK","TL","TM","TN","TO","TR","TT","TV","TW","TZ","UA","UG","UM","US","UY","UZ","VA","VC","VE","VG","VI","VN","VU","WF","WS","XK","YE","YT","ZA","ZM","ZW","EU","GB-ENG","GB-NIR","GB-SCT","GB-WLS","GB-ZET","US-CA"],V8=function(e){var n=e.country,r=n===void 0?"US":n,s=e.role,i=s===void 0?"img":s,o=e.size,a=o===void 0?24:o,l=e.alt,c=D8(e,["country","role","size","alt"]);if(r){var h=r.toUpperCase();if(L8.find(function(v){return v===r})!==void 0){var m="https://cdn.jsdelivr.net/gh/madebybowtie/FlagKit@2.2/Assets/SVG",g=m+"/"+h+".svg";return du.createElement("img",Object.assign({src:g,role:i,alt:l??h+" Flag",height:a,width:a},c))}return du.createElement("span",null,h)}return null};const U8=[{code:"USD",name:"US Dollar",countryCode:"US",symbol:"$"},{code:"EUR",name:"Euro",countryCode:"EU",symbol:""},{code:"GBP",name:"British Pound",countryCode:"GB",symbol:""},{code:"CHF",name:"Swiss Franc",countryCode:"CH",symbol:"Fr"},{code:"CAD",name:"Canadian Dollar",countryCode:"CA",symbol:"C$"},{code:"AUD",name:"Australian Dollar",countryCode:"AU",symbol:"A$"},{code:"AED",name:"UAE Dirham",countryCode:"AE",symbol:"dh"},{code:"NZD",name:"NZ Dollar",countryCode:"NZ",symbol:"NZ$"},{code:"SGD",name:"Singapore Dollar",countryCode:"SG",symbol:"S$"}],F8=$.memo(({item:t})=>{const[e,n]=$.useState(null);$.useEffect(()=>{t.change>0?n("up"):n("down");const s=setTimeout(()=>n(null),1e3);return()=>clearTimeout(s)},[t.rate]);const r=!isNaN(t.rate)&&isFinite(t.rate)&&t.rate>0;return p.jsxs("div",{className:"inline-flex items-center gap-3 px-6 border-r border-slate-200/70 dark:border-white/10 min-w-max group cursor-default transition-colors hover:bg-slate-100/60 dark:hover:bg-white/5 py-3 relative h-14 box-border",children:[p.jsx("div",{className:`absolute inset-0 transition-opacity duration-500 pointer-events-none ${e==="up"?"bg-emerald-500/10 opacity-100":e==="down"?"bg-rose-500/10 opacity-100":"opacity-0"}`}),p.jsx("div",{className:"filter drop-shadow-md transform group-hover:scale-110 transition-transform duration-300 grayscale-[10%] group-hover:grayscale-0 rounded overflow-hidden",children:p.jsx(V8,{country:t.countryCode,size:24})}),p.jsxs("div",{className:"flex flex-col justify-center h-full",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"font-bold text-xs text-slate-900 dark:text-white tracking-wide",children:t.code}),p.jsx("span",{className:"text-[10px] text-slate-500 dark:text-slate-400 font-bold uppercase hidden sm:inline-block tracking-wider opacity-80",children:t.name})]}),p.jsxs("div",{className:"flex items-baseline gap-1.5",children:[p.jsx("span",{className:"text-xs text-amber-500 dark:text-amber-400 font-bold",children:t.symbol}),p.jsx("span",{className:`font-mono font-bold text-sm transition-colors duration-300 ${e==="up"?"text-emerald-600 dark:text-emerald-400":e==="down"?"text-rose-600 dark:text-rose-400":"text-slate-900 dark:text-white"}`,children:r?t.rate.toFixed(2):"--.--"}),p.jsxs("span",{className:`text-[9px] font-bold px-1.5 py-0.5 rounded-md flex items-center ml-1 ${t.change>=0?"bg-emerald-500/10 text-emerald-600 dark:bg-emerald-500/20 dark:text-emerald-300":"bg-rose-500/10 text-rose-600 dark:bg-rose-500/20 dark:text-rose-300"}`,children:[t.change>=0?"":""," ",Math.abs(t.change).toFixed(2),"%"]})]})]})]})}),O8=()=>{const[t,e]=$.useState([]),[n,r]=$.useState(!0);if($.useEffect(()=>{let i=!0;return(async()=>{try{const l=await(await fetch("https://open.er-api.com/v6/latest/INR")).json();if(l&&l.rates&&i){const c=U8.map(h=>{const m=l.rates[h.code];if(!m)return null;const g=1/m,v=Math.random()*.8*(Math.random()>.5?1:-1);return{...h,rate:g,change:v}}).filter(h=>h!==null);e(c),r(!1)}}catch(a){i&&(console.error("Failed to fetch forex rates",a),r(!1))}})(),()=>{i=!1}},[]),$.useEffect(()=>{if(n||t.length===0)return;const i=setInterval(()=>{e(o=>{if(o.length===0)return o;const a=[...o],l=Math.floor(Math.random()*a.length),c=a[l],h=Math.random()*.05*(Math.random()>.5?1:-1);let m=c.rate+h;m<0&&(m=c.rate);const g=h/c.rate*100,v=c.change+g;return a[l]={...c,rate:m,change:v},a})},2e3);return()=>clearInterval(i)},[n,t.length]),n)return p.jsxs("div",{className:"w-full bg-slate-50 dark:bg-[#0B1120] border-b border-slate-200 dark:border-white/10 h-14 relative overflow-hidden flex items-center shadow-lg z-40 box-border select-none",children:[p.jsxs("div",{className:"absolute left-0 top-0 bottom-0 bg-slate-50 dark:bg-[#0B1120] z-50 px-5 flex items-center gap-3 border-r border-slate-200 dark:border-white/10 h-14 min-w-[130px]",children:[p.jsx("div",{className:"relative flex h-3 w-3 flex-shrink-0",children:p.jsx("span",{className:"bg-emerald-500/20 h-full w-full rounded-full animate-pulse"})}),p.jsxs("div",{className:"flex flex-col gap-1.5 w-full",children:[p.jsx("div",{className:"h-2 bg-slate-200 dark:bg-white/10 rounded w-10 animate-pulse"}),p.jsx("div",{className:"h-2 bg-slate-200 dark:bg-white/10 rounded w-14 animate-pulse"})]})]}),p.jsx("div",{className:"flex items-center w-full pl-[130px]",children:[1,2,3,4,5,6,7].map(i=>p.jsx("div",{className:"px-6 border-r border-slate-200/70 dark:border-white/5 h-14 flex items-center min-w-[180px]",children:p.jsxs("div",{className:"flex items-center gap-3 w-full",children:[p.jsx("div",{className:"w-6 h-6 bg-slate-200 dark:bg-white/5 rounded-full animate-pulse"}),p.jsxs("div",{className:"flex flex-col gap-1.5 flex-1",children:[p.jsx("div",{className:"h-2 bg-slate-200 dark:bg-white/5 rounded w-8 animate-pulse"}),p.jsx("div",{className:"h-2 bg-slate-200 dark:bg-white/5 rounded w-16 animate-pulse"})]})]})},i))})]});const s=[...t,...t,...t,...t];return p.jsxs("div",{className:"w-full bg-slate-50 dark:bg-[#0B1120] border-b border-slate-200 dark:border-white/10 h-14 overflow-hidden relative z-40 shadow-lg flex select-none box-border transform-gpu",children:[p.jsxs("div",{className:"absolute left-0 top-0 bottom-0 bg-slate-50 dark:bg-[#0B1120] z-50 px-5 flex items-center gap-3 shadow-[10px_0_20px_rgba(15,23,42,0.25)] dark:shadow-[10px_0_20px_rgba(0,0,0,0.8)] border-r border-slate-200 dark:border-white/10 h-14 min-w-[130px]",children:[p.jsxs("div",{className:"relative flex h-3 w-3 flex-shrink-0",children:[p.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400/70 opacity-75"}),p.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-emerald-500 shadow-[0_0_10px_rgba(16,185,129,0.5)]"})]}),p.jsxs("div",{className:"flex flex-col leading-none",children:[p.jsx("span",{className:"text-[10px] font-bold tracking-[0.2em] uppercase text-emerald-500 dark:text-emerald-400 mb-0.5",children:"Live"}),p.jsx("span",{className:"text-[10px] font-bold text-slate-700 dark:text-slate-300",children:"MARKET"})]})]}),p.jsx("div",{className:"flex items-center animate-ticker whitespace-nowrap will-change-transform hover:pause-animation",children:s.map((i,o)=>p.jsx(F8,{item:i},`${i.code}-${o}`))}),p.jsx("style",{children:`
        @keyframes ticker {
          0% { transform: translateX(0); }
          100% { transform: translateX(-25%); } /* Move 1 set out of 4 */
        }
        .animate-ticker {
          animation: ticker 80s linear infinite;
        }
        .hover\\:pause-animation:hover {
          animation-play-state: paused;
        }
      `})]})},B8=({question:t,answer:e})=>{const[n,r]=$.useState(!1);return p.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 overflow-hidden transition-all duration-300 hover:border-violet-300 dark:hover:border-violet-700",children:[p.jsxs("button",{onClick:()=>r(!n),className:"w-full px-6 py-5 flex items-center justify-between text-left focus:outline-none",children:[p.jsx("h3",{className:"font-bold text-slate-900 dark:text-white text-base md:text-lg pr-4",children:t}),p.jsx("div",{className:`flex-shrink-0 p-2 rounded-full transition-colors ${n?"bg-violet-100 dark:bg-violet-900/30 text-violet-600":"bg-slate-100 dark:bg-slate-700 text-slate-400"}`,children:n?p.jsx(Km,{className:"w-4 h-4"}):p.jsx(Wm,{className:"w-4 h-4"})})]}),p.jsx("div",{className:`px-6 overflow-hidden transition-all duration-300 ease-in-out ${n?"max-h-96 pb-6 opacity-100":"max-h-0 opacity-0"}`,children:p.jsx("p",{className:"text-slate-600 dark:text-slate-300 text-sm leading-relaxed border-t border-slate-100 dark:border-slate-700/50 pt-4",children:e})})]})},ZS=({rating:t,size:e="md"})=>{const n={sm:"w-3 h-3",md:"w-4 h-4",lg:"w-5 h-5"};return p.jsx("div",{className:"flex items-center gap-0.5",children:[1,2,3,4,5].map(r=>p.jsx(Jm,{className:`${n[e]} ${r<=Math.floor(t)?"text-amber-400 fill-amber-400":r-.5<=t?"text-amber-400 fill-amber-400/50":"text-slate-300"}`},r))})},G8=({reviews:t})=>{const[e,n]=$.useState(0);return $.useEffect(()=>{if(t.length<=1)return;const r=setInterval(()=>{n(s=>(s+1)%t.length)},4e3);return()=>clearInterval(r)},[t.length]),!t||t.length===0?null:p.jsxs("div",{className:"relative overflow-hidden",children:[p.jsx("div",{className:"transition-transform duration-500 ease-in-out",style:{transform:`translateX(-${e*100}%)`},children:p.jsx("div",{className:"flex",children:t.map((r,s)=>p.jsx("div",{className:"w-full flex-shrink-0 px-1",children:p.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-xl p-4 border border-slate-100 dark:border-slate-700/50",children:[p.jsx("div",{className:"flex items-center gap-2 mb-2",children:p.jsx(ZS,{rating:r.rating,size:"sm"})}),p.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-300 italic line-clamp-2",children:['"',r.text,'"']})]})},s))})}),t.length>1&&p.jsx("div",{className:"flex justify-center gap-1.5 mt-3",children:t.map((r,s)=>p.jsx("button",{onClick:()=>n(s),className:`w-1.5 h-1.5 rounded-full transition-all ${s===e?"bg-violet-500 w-4":"bg-slate-300 dark:bg-slate-600"}`},s))})]})},q8=()=>{const[t,e]=$.useState(null),n=o=>{e(o)},r=()=>{e(null)},s=encodeURIComponent("Hi, I am contacting you from the EEC Travel & Visa Services web page"),i=o=>{var a,l;return(a=o.timings)!=null&&a.coachingCounseling?o.timings.coachingCounseling:(l=o.timings)!=null&&l.general?o.timings.general:"10:00 AM - 7:00 PM"};return p.jsxs("div",{className:"w-full max-w-6xl mx-auto mt-16 mb-8 space-y-12 relative",children:[t&&p.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-950/70 backdrop-blur-md animate-in fade-in duration-300",children:p.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-lg rounded-[2.5rem] shadow-2xl border border-white/20 dark:border-slate-700 overflow-hidden relative flex flex-col max-h-[90vh] animate-in zoom-in-95 duration-300 ring-1 ring-white/10",children:[p.jsxs("div",{className:"relative h-48 bg-slate-950 flex items-center justify-center overflow-hidden flex-shrink-0",children:[p.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-950 via-slate-900 to-indigo-950 opacity-100"}),p.jsx("div",{className:"absolute inset-0 opacity-10 bg-[linear-gradient(rgba(255,255,255,0.1)_1px,transparent_1px),linear-gradient(90deg,rgba(255,255,255,0.1)_1px,transparent_1px)] bg-[size:24px_24px]"}),p.jsx("div",{className:"absolute -top-20 -left-20 w-64 h-64 bg-violet-600 rounded-full blur-[100px] opacity-30"}),p.jsx("div",{className:"absolute -bottom-20 -right-20 w-64 h-64 bg-emerald-500 rounded-full blur-[100px] opacity-20"}),p.jsx("button",{onClick:r,className:"absolute top-5 right-5 p-2 bg-white/10 hover:bg-white/20 text-white rounded-full transition-all backdrop-blur-md border border-white/10 hover:rotate-90 duration-300 z-30 shadow-lg",children:p.jsx(QS,{className:"w-5 h-5"})})]}),p.jsx("div",{className:"absolute top-24 left-1/2 transform -translate-x-1/2 z-30",children:p.jsx("div",{className:"p-1 bg-gradient-to-br from-white/80 to-white/40 backdrop-blur-xl rounded-full shadow-[0_8px_32px_rgba(0,0,0,0.2)] border border-white/50",children:p.jsxs("div",{className:"w-24 h-24 bg-white rounded-full flex items-center justify-center shadow-inner relative overflow-hidden",children:[p.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-slate-50 to-white opacity-50"}),p.jsx("img",{src:"https://eecglobal.com/assets/eeclogo-fDB7GrEm.svg",alt:"EEC Global",className:"h-12 w-auto object-contain relative z-10"})]})})}),p.jsxs("div",{className:"px-6 md:px-8 pb-8 pt-16 -mt-6 relative z-20 flex-1 overflow-y-auto bg-slate-50 dark:bg-slate-900 rounded-t-[2.5rem] border-t border-white/50 dark:border-slate-800",children:[p.jsxs("div",{className:"text-center mb-6 relative",children:[p.jsxs("div",{className:"inline-flex items-center gap-1.5 px-3 py-1 bg-violet-100 dark:bg-violet-900/30 rounded-full border border-violet-200 dark:border-violet-800 mb-3",children:[p.jsx(Hh,{className:"w-3 h-3 text-violet-600 dark:text-violet-400"}),p.jsx("span",{className:"text-[10px] font-bold text-violet-700 dark:text-violet-300 uppercase tracking-widest",children:t.address.addressLocality})]}),p.jsx("h3",{className:"text-2xl md:text-3xl font-black text-slate-900 dark:text-white leading-tight mb-2 tracking-tight",children:t.name.replace("EEC","").trim()}),t.googleReviews&&p.jsx("div",{className:"flex items-center justify-center gap-3 mt-3",children:p.jsxs("div",{className:"flex items-center gap-2 bg-white dark:bg-slate-800 px-4 py-2 rounded-full shadow-sm border border-slate-200 dark:border-slate-700",children:[p.jsx("img",{src:"https://www.google.com/favicon.ico",alt:"Google",className:"w-4 h-4"}),p.jsx("span",{className:"font-black text-slate-900 dark:text-white",children:t.googleReviews.rating}),p.jsx(ZS,{rating:t.googleReviews.rating,size:"sm"}),p.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:["(",t.googleReviews.reviewCount.toLocaleString(),")"]})]})}),p.jsxs("div",{className:"flex justify-center gap-4 text-xs font-medium text-slate-500 dark:text-slate-400 mt-3",children:[p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx(jh,{className:"w-3.5 h-3.5 text-emerald-500"})," Verified Branch"]}),p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx(Yo,{className:"w-3.5 h-3.5 text-amber-500"})," ",i(t)]})]})]}),p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"bg-white dark:bg-slate-800/80 rounded-3xl p-5 border border-slate-200 dark:border-slate-700 shadow-sm relative overflow-hidden group",children:[p.jsx("div",{className:"absolute top-0 right-0 p-3 opacity-5 group-hover:opacity-10 transition-opacity",children:p.jsx(YS,{className:"w-24 h-24 transform rotate-12 -mr-4 -mt-4"})}),p.jsxs("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-2 flex items-center gap-2",children:[p.jsx(Gh,{className:"w-3.5 h-3.5"})," Address"]}),p.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-200 font-medium leading-relaxed pr-8",children:t.address.streetAddress})]}),t.timings&&p.jsxs("div",{className:"bg-white dark:bg-slate-800/80 rounded-3xl p-5 border border-slate-200 dark:border-slate-700 shadow-sm",children:[p.jsxs("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-3 flex items-center gap-2",children:[p.jsx(Yo,{className:"w-3.5 h-3.5"})," Branch Timings"]}),p.jsxs("div",{className:"grid grid-cols-1 gap-2 text-sm",children:[t.timings.coachingCounseling&&p.jsxs("div",{className:"flex justify-between items-center py-1.5 border-b border-slate-100 dark:border-slate-700/50",children:[p.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"Coaching & Counseling"}),p.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-200",children:t.timings.coachingCounseling})]}),t.timings.demoClass&&p.jsxs("div",{className:"flex justify-between items-center py-1.5 border-b border-slate-100 dark:border-slate-700/50",children:[p.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"Demo Classes"}),p.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-200",children:t.timings.demoClass})]}),t.timings.visaCounseling&&p.jsxs("div",{className:"flex justify-between items-center py-1.5 border-b border-slate-100 dark:border-slate-700/50",children:[p.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"Visa Counseling"}),p.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-200",children:t.timings.visaCounseling})]}),t.timings.general&&p.jsxs("div",{className:"flex justify-between items-center py-1.5 border-b border-slate-100 dark:border-slate-700/50",children:[p.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"Office Hours"}),p.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-200",children:t.timings.general})]}),p.jsxs("div",{className:"flex justify-between items-center py-1.5",children:[p.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"Working Days"}),p.jsx("span",{className:"font-semibold text-emerald-600 dark:text-emerald-400",children:t.timings.workingDays})]}),p.jsxs("div",{className:"flex justify-between items-center py-1.5",children:[p.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"Closed"}),p.jsx("span",{className:"font-semibold text-red-500",children:t.timings.closedOn})]})]})]}),t.googleReviews&&t.googleReviews.reviews.length>0&&p.jsxs("div",{className:"bg-white dark:bg-slate-800/80 rounded-3xl p-5 border border-slate-200 dark:border-slate-700 shadow-sm",children:[p.jsxs("div",{className:"flex items-center justify-between mb-3",children:[p.jsxs("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider flex items-center gap-2",children:[p.jsx("img",{src:"https://www.google.com/favicon.ico",alt:"Google",className:"w-3.5 h-3.5"}),"Customer Reviews"]}),p.jsx("a",{href:t.hasMap,target:"_blank",rel:"noreferrer",className:"text-[10px] font-semibold text-violet-600 dark:text-violet-400 hover:underline",children:"View All "})]}),p.jsx(G8,{reviews:t.googleReviews.reviews})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"flex items-center gap-2 px-1",children:[p.jsx(of,{className:"w-4 h-4 text-slate-400"}),p.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Department Contacts"})]}),t.contactPoint.map((o,a)=>{const l=o.contactType.includes("Coaching");return p.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between p-1 pr-1 bg-white dark:bg-slate-800 rounded-3xl border border-slate-200 dark:border-slate-700 hover:border-violet-300 dark:hover:border-violet-600 transition-all shadow-sm group hover:shadow-md",children:[p.jsxs("div",{className:"flex items-center gap-4 p-4 w-full sm:w-auto",children:[p.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center transition-colors shadow-sm ${l?"bg-blue-50 text-blue-600 dark:bg-blue-900/20 dark:text-blue-400":"bg-fuchsia-50 text-fuchsia-600 dark:bg-fuchsia-900/20 dark:text-fuchsia-400"}`,children:l?p.jsx(of,{className:"w-6 h-6"}):p.jsx(qh,{className:"w-6 h-6"})}),p.jsxs("div",{children:[p.jsx("p",{className:"text-sm font-bold text-slate-900 dark:text-white group-hover:text-violet-600 dark:group-hover:text-violet-400 transition-colors",children:o.contactType}),p.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 font-mono tracking-wide mt-0.5",children:o.telephone})]})]}),p.jsxs("div",{className:"flex gap-2 w-full sm:w-auto px-4 pb-4 sm:p-0 sm:pr-2",children:[p.jsxs("a",{href:`tel:${o.telephone}`,className:"flex-1 sm:flex-none py-2.5 px-4 rounded-xl bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-900 hover:text-white dark:hover:bg-white dark:hover:text-slate-900 transition-all flex items-center justify-center gap-2 font-bold text-xs",children:[p.jsx($h,{className:"w-4 h-4"}),p.jsx("span",{className:"sm:hidden",children:"Call"})]}),p.jsxs("a",{href:`${o.url}?text=${s}`,target:"_blank",rel:"noreferrer",className:"flex-1 sm:flex-none py-2.5 px-4 rounded-xl bg-green-50 dark:bg-green-900/20 text-green-600 dark:text-green-400 hover:bg-green-500 hover:text-white transition-all flex items-center justify-center gap-2 font-bold text-xs shadow-sm border border-green-100 dark:border-green-900/30",children:[p.jsx(oc,{className:"w-4 h-4"}),p.jsx("span",{className:"sm:hidden",children:"WhatsApp"})]})]})]},a)}),t.counselors&&t.counselors.filter(o=>o.phone).length>0&&p.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-200 dark:border-slate-700",children:[p.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-3",children:"Additional Contact Numbers"}),p.jsx("div",{className:"grid grid-cols-2 gap-2",children:t.counselors.filter(o=>o.phone).map((o,a)=>p.jsxs("a",{href:`tel:+91${o.phone.replace(/\s/g,"")}`,className:"flex items-center gap-2 p-3 bg-slate-50 dark:bg-slate-800/50 rounded-xl border border-slate-200 dark:border-slate-700 hover:border-violet-300 dark:hover:border-violet-600 transition-all",children:[p.jsx($h,{className:"w-4 h-4 text-slate-400"}),p.jsx("span",{className:"text-xs font-mono text-slate-600 dark:text-slate-300",children:o.phone})]},a))})]})]})]}),p.jsx("div",{className:"mt-8 sticky bottom-0 bg-slate-50 dark:bg-slate-900 pt-4 pb-2",children:p.jsxs("a",{href:t.hasMap,target:"_blank",rel:"noreferrer",className:"w-full flex items-center justify-center gap-3 bg-slate-900 dark:bg-white text-white dark:text-slate-900 font-bold py-4 rounded-2xl hover:scale-[1.02] active:scale-[0.98] transition-all shadow-xl shadow-slate-300/50 dark:shadow-none group relative overflow-hidden",children:[p.jsx("div",{className:"absolute inset-0 -translate-x-full group-hover:animate-[shimmer_1.5s_infinite] bg-gradient-to-r from-transparent via-white/10 to-transparent z-10"}),p.jsx("div",{className:"p-1 bg-white/20 dark:bg-slate-900/10 rounded-lg",children:p.jsx(XS,{className:"w-5 h-5"})}),p.jsx("span",{children:"Get Directions to Branch"}),p.jsx(Vr,{className:"w-4 h-4 opacity-50 group-hover:translate-x-1 transition-transform"})]})})]})]})}),p.jsx("section",{className:"bg-white/60 dark:bg-slate-900/60 backdrop-blur-md rounded-[32px] p-8 md:p-12 border border-slate-200 dark:border-slate-800 shadow-xl",children:p.jsxs("div",{className:"flex flex-col md:flex-row gap-8 items-start",children:[p.jsxs("div",{className:"flex-1",children:[p.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-violet-100 dark:bg-violet-900/30 text-violet-700 dark:text-violet-300 text-xs font-bold uppercase tracking-wider mb-4",children:[p.jsx(jh,{className:"w-4 h-4"}),p.jsx("span",{children:"Official Authority"})]}),p.jsx("h2",{className:"text-3xl font-extrabold text-slate-900 dark:text-white mb-4",children:"Why Trust EEC Global?"}),p.jsxs("p",{className:"text-slate-600 dark:text-slate-300 text-lg leading-relaxed mb-6 font-medium",children:["This AI Travel Agent is backed by ",p.jsx("strong",{children:"Enbee Education Center (EEC)"}),", the largest and oldest study abroad consultancy in Gujarat. Established in ",p.jsx("strong",{children:"1997"}),", we have guided over 50,000+ students with a near-perfect success rate."]}),p.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{label:"Est. 1997",sub:"27+ Years Experience",icon:Yo},{label:"26 Branches",sub:"Across 12 Cities",icon:Hh},{label:"Certified",sub:"Expert Counsellors",icon:of},{label:"Global",sub:"USA, UK, CAN, AUS",icon:qh}].map((o,a)=>p.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm",children:[p.jsx(o.icon,{className:"w-6 h-6 text-violet-600 dark:text-violet-400 mb-2"}),p.jsx("div",{className:"font-bold text-slate-900 dark:text-white",children:o.label}),p.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 font-medium",children:o.sub})]},a))})]}),p.jsxs("div",{className:"w-full md:w-1/3 bg-slate-900 dark:bg-white text-white dark:text-slate-900 p-8 rounded-3xl relative overflow-hidden group",children:[p.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-fuchsia-500 to-violet-600 rounded-full blur-3xl opacity-20 group-hover:opacity-40 transition-opacity"}),p.jsx("h3",{className:"text-xl font-bold mb-4 relative z-10",children:"Consular Protocol"}),p.jsxs("p",{className:"text-sm opacity-80 mb-6 leading-relaxed relative z-10 font-medium",children:["Unlike standard AI, the EEC Engine uses a proprietary ",p.jsx("strong",{children:"Official Source Grounding"})," protocol. We cross-reference requirements exclusively against:"]}),p.jsx("ul",{className:"space-y-3 relative z-10",children:["Government (.gov) Portals","Official Embassies","VFS / BLS / TLS Partners"].map((o,a)=>p.jsxs("li",{className:"flex items-center gap-2 text-sm font-bold",children:[p.jsx(RF,{className:"w-4 h-4 text-emerald-400 dark:text-emerald-600"}),o]},a))})]})]})}),p.jsxs("section",{children:[p.jsxs("div",{className:"flex items-center gap-3 mb-8 px-4",children:[p.jsx(HF,{className:"w-6 h-6 text-slate-400"}),p.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Frequently Asked Questions"})]}),p.jsx("div",{className:"max-w-4xl mx-auto space-y-4",children:[{q:"Is the EEC AI Visa Tool completely free?",a:"Yes. EEC Global provides this AI-powered visa and flight search tool as a 100% free community service for Indian students and travelers. There are no hidden fees or paywalls."},{q:"How accurate is the visa information?",a:"Our Generative AI Engine is grounded in real-time data from official government websites (e.g., travel.state.gov, gov.uk). However, visa policies change daily, so we always recommend verifying with our certified counsellors at EEC branches."},{q:"Does EEC provide physical visa appointments?",a:"Yes. While this tool is for information, Enbee Education Center (EEC) has 26 physical branches across Gujarat (Vadodara, Surat, Ahmedabad, etc.) where our team handles the complete visa filing, documentation, and appointment process."},{q:"Can I use this for Student Visas?",a:"Absolutely. The tool specializes in Student Visas (F1, Tier 4, Subclass 500) for major destinations like USA, UK, Canada, and Australia, providing specific financial and academic document checklists."},{q:"Why do I need to check my state jurisdiction?",a:"Visa applications in India are often jurisdiction-based. For example, students from Gujarat often need to apply to the Mumbai Consulate for USA visas, or specific VFS centers for Europe. This tool identifies your optimal application center."}].map((o,a)=>p.jsx(B8,{question:o.q,answer:o.a},a))})]}),p.jsxs("section",{className:"border-t border-slate-200 dark:border-slate-800 pt-8 px-4",children:[p.jsxs("h3",{className:"text-sm font-bold uppercase tracking-wider text-slate-500 dark:text-slate-400 mb-6 flex items-center gap-2",children:[p.jsx(Gh,{className:"w-4 h-4"}),"Our Physical Presence (Gujarat's Largest Network)"]}),p.jsx("p",{className:"text-xs text-slate-400 mb-4 font-medium italic",children:"Click any branch below to view office details, timings, and Google reviews."}),p.jsx("div",{className:"flex flex-wrap gap-2",children:ws.map(o=>p.jsxs("button",{onClick:()=>n(o),className:"px-3 py-1.5 bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400 text-xs rounded-lg font-medium hover:bg-violet-600 hover:text-white dark:hover:bg-violet-600 dark:hover:text-white transition-all transform hover:-translate-y-0.5 shadow-sm active:scale-95 flex items-center gap-1.5",children:[p.jsx("span",{children:o.name.replace("EEC","").trim()}),o.googleReviews&&p.jsxs("span",{className:"flex items-center gap-0.5 text-[10px] opacity-60",children:[p.jsx(Jm,{className:"w-2.5 h-2.5 fill-amber-400 text-amber-400"}),o.googleReviews.rating]}),p.jsxs("span",{className:"opacity-50 text-[10px]",children:["(",o.address.addressLocality,")"]})]},o.identifier))})]})]})},H8=({destination:t,visaType:e})=>{var a,l;const[n,r]=$.useState(null),[s,i]=$.useState(!0);if($.useEffect(()=>{let c=!0;return(async()=>{i(!0);try{const m=await uD(t,e);c&&r(m)}catch(m){console.error(m)}finally{c&&i(!1)}})(),()=>{c=!1}},[t,e]),s)return p.jsxs("div",{className:"w-full max-w-4xl mx-auto mt-8 p-6 bg-slate-50 dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 animate-pulse flex flex-col items-center justify-center",children:[p.jsx("div",{className:"w-8 h-8 border-4 border-slate-300 dark:border-slate-700 border-t-violet-600 rounded-full animate-spin mb-3"}),p.jsx("span",{className:"text-xs font-bold uppercase tracking-widest text-slate-400",children:"Retrieving Consular Directives..."})]});if(!n)return null;const o=c=>c==="High"?"text-rose-600 bg-rose-50 dark:bg-rose-900/20 border-rose-200 dark:border-rose-800":c==="Medium"?"text-amber-600 bg-amber-50 dark:bg-amber-900/20 border-amber-200 dark:border-amber-800":"text-emerald-600 bg-emerald-50 dark:bg-emerald-900/20 border-emerald-200 dark:border-emerald-800";return p.jsxs("div",{className:"w-full max-w-4xl mx-auto mt-8 relative",children:[p.jsx("div",{className:"absolute inset-0 bg-white dark:bg-slate-900 rounded-[24px] shadow-xl transform rotate-1 border border-slate-200 dark:border-slate-800 z-0"}),p.jsxs("div",{className:"relative z-10 bg-white dark:bg-slate-950 rounded-[24px] border border-slate-200 dark:border-slate-800 overflow-hidden shadow-sm",children:[p.jsxs("div",{className:"bg-slate-100 dark:bg-slate-900 border-b border-slate-200 dark:border-slate-800 p-4 flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"p-2 bg-slate-200 dark:bg-slate-800 rounded-lg",children:p.jsx(C8,{className:"w-5 h-5 text-slate-600 dark:text-slate-400"})}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-sm font-bold uppercase tracking-wider text-slate-900 dark:text-white",children:"Official Visa Bulletin"}),p.jsxs("p",{className:"text-[10px] font-mono text-slate-500 dark:text-slate-400",children:["REF: ",n.bulletinId,"  AUTH: EEC-GLOBAL"]})]})]}),p.jsxs("div",{className:`px-4 py-1.5 rounded-full border text-xs font-bold uppercase tracking-wider flex items-center gap-2 ${o(n.riskLevel)}`,children:[p.jsx(ka,{className:"w-3.5 h-3.5"}),"Risk Assessment: ",n.riskLevel]})]}),p.jsxs("div",{className:"p-6 md:p-8 grid md:grid-cols-2 gap-8",children:[p.jsxs("article",{children:[p.jsxs("h4",{className:"flex items-center gap-2 text-xs font-bold uppercase tracking-wider text-violet-600 dark:text-violet-400 mb-3",children:[p.jsx(ic,{className:"w-4 h-4"})," Consular Psychology"]}),p.jsxs("p",{className:"font-serif text-lg leading-relaxed text-slate-800 dark:text-slate-200 italic",children:['"',n.consularPsychology,'"']})]}),p.jsxs("article",{children:[p.jsxs("h4",{className:"flex items-center gap-2 text-xs font-bold uppercase tracking-wider text-emerald-600 dark:text-emerald-400 mb-3",children:[p.jsx(Tn,{className:"w-4 h-4"})," Strong Ties Analysis"]}),p.jsx("p",{className:"text-sm leading-relaxed text-slate-600 dark:text-slate-400 font-medium text-justify",children:n.economicTiesAnalysis})]}),p.jsxs("article",{className:"md:col-span-2 bg-slate-50 dark:bg-slate-900/50 rounded-xl p-5 border border-slate-100 dark:border-slate-800",children:[p.jsxs("h4",{className:"flex items-center gap-2 text-xs font-bold uppercase tracking-wider text-rose-600 dark:text-rose-400 mb-3",children:[p.jsx(Xo,{className:"w-4 h-4"})," Forensic Document Protocol"]}),typeof n.documentForensics=="string"?p.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 font-mono leading-relaxed",children:n.documentForensics}):p.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[p.jsxs("div",{className:"flex-1",children:[p.jsx("span",{className:"text-[10px] font-bold uppercase text-slate-500",children:"Target Document"}),p.jsx("p",{className:"font-bold text-slate-900 dark:text-slate-100",children:(a=n.documentForensics)==null?void 0:a.document})]}),p.jsxs("div",{className:"flex-[2] p-3 bg-rose-50 dark:bg-rose-900/20 rounded-lg border border-rose-100 dark:border-rose-800/30",children:[p.jsx("span",{className:"text-[10px] font-bold uppercase text-rose-600 dark:text-rose-400",children:"Forensic Red Flag"}),p.jsxs("p",{className:"text-sm text-rose-800 dark:text-rose-200 font-medium italic",children:['"',(l=n.documentForensics)==null?void 0:l.forgeryErrorReason,'"']})]})]})]}),p.jsx("div",{className:"md:col-span-2 pt-4 border-t border-slate-100 dark:border-slate-800",children:p.jsxs("p",{className:"text-[11px] text-slate-400 dark:text-slate-500 font-medium uppercase tracking-wide",children:["Active Policy Directive (",new Date().getFullYear(),"): ",p.jsx("span",{className:"text-slate-600 dark:text-slate-300 normal-case",children:n.recentPolicyShift})]})})]})]})]})},j8=()=>{const t=new Date().getFullYear(),[e,n]=$.useState(null),r=encodeURIComponent("Hi, I am contacting you from the EEC Travel & Visa Services web page"),s=Array.from(new Set(ws.map(c=>c.address.addressLocality))).sort(),i=e?ws.filter(c=>c.address.addressLocality===e):[],o=c=>{var h,m;return(h=c.timings)!=null&&h.coachingCounseling?c.timings.coachingCounseling:(m=c.timings)!=null&&m.general?c.timings.general:"10:00 AM - 7:00 PM"},a=[{dest:"United States",type:"Student",label:"F1 Visa Requirements for USA"},{dest:"United Kingdom",type:"Student",label:"UK Tier 4 Student Visa Guide"},{dest:"Canada",type:"Student",label:"Canada Study Permit Process"},{dest:"Australia",type:"Student",label:"Australia Subclass 500 Visa"},{dest:"Germany",type:"Student",label:"German Student Visa Checklist"},{dest:"France",type:"Tourist",label:"Schengen Visa for France"},{dest:"United States",type:"Tourist",label:"US B1/B2 Tourist Visa"},{dest:"Dubai",type:"Tourist",label:"Dubai Express Visa from India"}],l=[{term:"SOP (Statement of Purpose)",def:"A critical essay stating your purpose of study, required for student visas in UK, Canada, and Australia."},{term:"CAS Letter",def:"Confirmation of Acceptance for Studies. A mandatory electronic document for UK Student Visa applications."},{term:"I-20 Form",def:"Certificate of Eligibility for Nonimmigrant Student Status, issued by US universities for F1 Visa interviews."},{term:"GIC (Guaranteed Investment Certificate)",def:"A mandatory investment of $10,000+ CAD for Indian students applying to Canada under SDS stream."},{term:"Schengen Area",def:"A zone of 27 European countries with no internal borders. A single visa allows travel across all member states."},{term:"Biometrics",def:"Fingerprinting and digital photo process conducted at VACs (Visa Application Centers) like VFS or BLS."}];return p.jsxs("section",{className:"w-full bg-slate-100 dark:bg-slate-950/50 border-t border-slate-200 dark:border-slate-800 py-16 mt-16",children:[e&&p.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-950/70 backdrop-blur-md animate-in fade-in duration-300",children:p.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-2xl rounded-[2.5rem] shadow-2xl border border-white/20 dark:border-slate-700 overflow-hidden relative flex flex-col max-h-[90vh] animate-in zoom-in-95 duration-300 ring-1 ring-white/10",children:[p.jsxs("div",{className:"relative h-40 bg-slate-950 flex items-center justify-center overflow-hidden flex-shrink-0",children:[p.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-950 via-slate-900 to-indigo-950 opacity-100"}),p.jsx("div",{className:"absolute inset-0 opacity-10 bg-[linear-gradient(rgba(255,255,255,0.1)_1px,transparent_1px),linear-gradient(90deg,rgba(255,255,255,0.1)_1px,transparent_1px)] bg-[size:24px_24px]"}),p.jsx("div",{className:"absolute -top-10 -left-10 w-48 h-48 bg-violet-600 rounded-full blur-[80px] opacity-30"}),p.jsx("div",{className:"absolute -bottom-10 -right-10 w-48 h-48 bg-emerald-500 rounded-full blur-[80px] opacity-20"}),p.jsxs("div",{className:"relative z-20 text-center",children:[p.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 bg-white/10 rounded-full backdrop-blur-md border border-white/10 mb-2",children:[p.jsx(Na,{className:"w-3.5 h-3.5 text-emerald-400"}),p.jsx("span",{className:"text-[10px] font-bold text-emerald-200 uppercase tracking-widest",children:"Selected City"})]}),p.jsx("h2",{className:"text-4xl font-black text-white tracking-tight",children:e})]}),p.jsx("button",{onClick:()=>n(null),className:"absolute top-5 right-5 p-2 bg-white/10 hover:bg-white/20 text-white rounded-full transition-all backdrop-blur-md border border-white/10 hover:rotate-90 duration-300 z-30 shadow-lg",children:p.jsx(QS,{className:"w-5 h-5"})})]}),p.jsxs("div",{className:"flex-1 overflow-y-auto p-6 md:p-8 bg-slate-50 dark:bg-slate-900",children:[p.jsxs("p",{className:"text-center text-slate-500 dark:text-slate-400 text-sm font-medium mb-6",children:["We found ",i.length," premium branch",i.length!==1?"es":""," in ",e," ready to assist you."]}),p.jsx("div",{className:"space-y-6",children:i.map(c=>p.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl p-6 border border-slate-200 dark:border-slate-700 shadow-sm hover:shadow-lg transition-all duration-300 group",children:[p.jsxs("div",{className:"flex flex-col md:flex-row md:items-start justify-between gap-4 mb-6",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white mb-1 group-hover:text-violet-600 dark:group-hover:text-violet-400 transition-colors",children:c.name}),p.jsxs("div",{className:"flex items-center gap-4 text-xs font-medium text-slate-500 dark:text-slate-400",children:[p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx(Tn,{className:"w-3.5 h-3.5 text-emerald-500"})," Verified"]}),p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx(Yo,{className:"w-3.5 h-3.5 text-amber-500"})," ",o(c)]}),c.googleReviews&&p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx(Jm,{className:"w-3.5 h-3.5 text-amber-400 fill-amber-400"}),c.googleReviews.rating," (",c.googleReviews.reviewCount.toLocaleString(),")"]})]})]}),p.jsxs("a",{href:c.hasMap,target:"_blank",rel:"noreferrer",className:"px-4 py-2 bg-slate-100 dark:bg-slate-700 hover:bg-slate-900 hover:text-white dark:hover:bg-white dark:hover:text-slate-900 rounded-xl text-xs font-bold transition-all flex items-center justify-center gap-2",children:[p.jsx(XS,{className:"w-3.5 h-3.5"})," Directions"]})]}),p.jsxs("div",{className:"mb-6 p-4 bg-slate-50 dark:bg-slate-900/50 rounded-2xl border border-slate-100 dark:border-slate-800/50",children:[p.jsxs("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-1 flex items-center gap-1.5",children:[p.jsx(Gh,{className:"w-3 h-3"})," Address"]}),p.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium leading-relaxed",children:c.address.streetAddress})]}),p.jsx("div",{className:"space-y-3",children:c.contactPoint.map((h,m)=>p.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between p-1 bg-slate-50 dark:bg-slate-900/30 rounded-2xl border border-slate-100 dark:border-slate-800",children:[p.jsxs("div",{className:"px-4 py-3 w-full sm:w-auto text-center sm:text-left",children:[p.jsx("p",{className:"text-xs font-bold text-slate-700 dark:text-slate-300",children:h.contactType}),p.jsx("p",{className:"text-[10px] text-slate-400 font-mono mt-0.5",children:h.telephone})]}),p.jsxs("div",{className:"flex w-full sm:w-auto p-1 gap-1",children:[p.jsxs("a",{href:`tel:${h.telephone}`,className:"flex-1 py-2 px-3 bg-white dark:bg-slate-800 rounded-xl text-slate-600 dark:text-slate-300 text-xs font-bold hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors flex items-center justify-center gap-2",children:[p.jsx($h,{className:"w-3.5 h-3.5"})," Call"]}),p.jsxs("a",{href:`${h.url}?text=${r}`,target:"_blank",rel:"noreferrer",className:"flex-1 py-2 px-3 bg-green-500 rounded-xl text-white text-xs font-bold hover:bg-green-600 transition-colors flex items-center justify-center gap-2",children:[p.jsx(oc,{className:"w-3.5 h-3.5"})," WhatsApp"]})]})]},m))})]},c.identifier))})]})]})}),p.jsxs("div",{className:"container mx-auto px-4 max-w-6xl",children:[p.jsxs("div",{className:"text-center mb-12",children:[p.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-slate-200 dark:bg-slate-800 text-slate-600 dark:text-slate-400 text-xs font-bold uppercase tracking-wider mb-4",children:[p.jsx(I8,{className:"w-4 h-4"}),p.jsxs("span",{children:["EEC Travel Knowledge Vault ",t]})]}),p.jsx("h2",{className:"text-2xl md:text-3xl font-extrabold text-slate-900 dark:text-white mb-4",children:"Comprehensive Visa & Immigration Resource Center"}),p.jsx("p",{className:"text-slate-600 dark:text-slate-400 max-w-3xl mx-auto text-sm md:text-base leading-relaxed",children:"Access verified guides for Indian citizens. Powered by Enbee Education Center's 27 years of consular expertise. Navigating the complexities of international travel and study abroad documentation from Gujarat to the World."})]}),p.jsxs("div",{className:"grid md:grid-cols-12 gap-8 md:gap-12",children:[p.jsxs("div",{className:"md:col-span-4 space-y-8",children:[p.jsxs("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-2xl border border-slate-200 dark:border-slate-800 shadow-sm",children:[p.jsxs("h3",{className:"font-bold text-slate-900 dark:text-white flex items-center gap-2 mb-4",children:[p.jsx(A8,{className:"w-5 h-5 text-violet-600"}),p.jsx("span",{children:"Popular Visa Corridors"})]}),p.jsx("ul",{className:"space-y-3",children:a.map((c,h)=>p.jsx("li",{children:p.jsxs("a",{href:`#/destination/${encodeURIComponent(c.dest)}/type/${encodeURIComponent(c.type)}/state/Gujarat`,className:"flex items-center justify-between text-sm text-slate-600 dark:text-slate-400 hover:text-violet-600 dark:hover:text-violet-400 font-medium group transition-colors",children:[p.jsx("span",{children:c.label}),p.jsx(Vr,{className:"w-3 h-3 opacity-0 group-hover:opacity-100 transition-opacity transform -rotate-45"})]})},h))}),p.jsx("div",{className:"mt-4 pt-4 border-t border-slate-100 dark:border-slate-800",children:p.jsxs("a",{href:"https://www.eecglobal.com",target:"_blank",rel:"noreferrer",className:"text-xs font-bold text-violet-600 uppercase tracking-wide flex items-center gap-1 hover:underline",children:["View All Destinations ",p.jsx(Vr,{className:"w-3 h-3"})]})})]}),p.jsxs("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-2xl border border-slate-200 dark:border-slate-800 shadow-sm",children:[p.jsxs("h3",{className:"font-bold text-slate-900 dark:text-white flex items-center gap-2 mb-4",children:[p.jsx(k8,{className:"w-5 h-5 text-emerald-600"}),p.jsx("span",{children:"Gujarat Student Corridor"})]}),p.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-500 mb-4 leading-relaxed",children:"EEC specializes in student visa counseling for residents of Gujarat. We provide local biometric support and documentation services in:"}),p.jsx("div",{className:"flex flex-wrap gap-2",children:s.map((c,h)=>p.jsx("button",{onClick:()=>n(c),className:"text-[10px] bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400 px-2 py-1 rounded border border-slate-200 dark:border-slate-700 hover:bg-violet-600 hover:text-white dark:hover:bg-violet-600 dark:hover:text-white transition-colors cursor-pointer",children:c},h))}),p.jsx("p",{className:"text-[10px] text-slate-400 mt-3 italic text-center",children:"* Click a city to view local branch details"})]})]}),p.jsxs("div",{className:"md:col-span-8 space-y-8",children:[p.jsxs("div",{className:"space-y-4",children:[p.jsxs("h3",{className:"font-bold text-xl text-slate-900 dark:text-white flex items-center gap-2",children:[p.jsx(N8,{className:"w-6 h-6 text-amber-500"}),p.jsx("span",{children:"Immigration Terminology (Glossary)"})]}),p.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:l.map((c,h)=>p.jsxs("div",{className:"bg-white dark:bg-slate-900 p-4 rounded-xl border border-slate-200 dark:border-slate-800 hover:border-amber-200 dark:hover:border-amber-900/50 transition-colors",children:[p.jsx("h4",{className:"font-bold text-slate-800 dark:text-slate-200 text-sm mb-1",children:c.term}),p.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 leading-relaxed",children:c.def})]},h))})]}),p.jsx("div",{className:"bg-gradient-to-br from-slate-900 to-slate-800 dark:from-white dark:to-slate-200 rounded-2xl p-8 text-white dark:text-slate-900 relative overflow-hidden",children:p.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row gap-8 items-center",children:[p.jsxs("div",{className:"flex-1",children:[p.jsxs("h3",{className:"text-lg font-bold mb-2 flex items-center gap-2",children:[p.jsx(YS,{className:"w-5 h-5"}),"Why EEC is the Authority on Visas"]}),p.jsx("p",{className:"text-sm opacity-90 leading-relaxed mb-4",children:'Since 1997, Enbee Education Center has processed over 50,000+ visas. Our "Forensic Documentation" approach reduces rejection risks by pre-emptively addressing common INA 214(b) (USA) and GTE/GS (Australia) refusal grounds.'}),p.jsxs("div",{className:"flex gap-4",children:[p.jsxs("div",{className:"flex flex-col",children:[p.jsx("span",{className:"text-2xl font-black",children:"98%"}),p.jsx("span",{className:"text-[10px] uppercase tracking-wider opacity-75",children:"Success Rate"})]}),p.jsxs("div",{className:"flex flex-col",children:[p.jsx("span",{className:"text-2xl font-black",children:"26"}),p.jsx("span",{className:"text-[10px] uppercase tracking-wider opacity-75",children:"Branches"})]}),p.jsxs("div",{className:"flex flex-col",children:[p.jsx("span",{className:"text-2xl font-black",children:"27+"}),p.jsx("span",{className:"text-[10px] uppercase tracking-wider opacity-75",children:"Years"})]})]})]}),p.jsxs("div",{className:"w-full md:w-1/3 p-4 bg-white/10 dark:bg-black/5 rounded-xl backdrop-blur-sm border border-white/10 dark:border-black/5",children:[p.jsxs("h4",{className:"text-xs font-bold uppercase tracking-wider mb-3 flex items-center gap-2",children:[p.jsx(Tn,{className:"w-3 h-3"}),"Accreditations"]}),p.jsxs("ul",{className:"space-y-2 text-xs font-medium opacity-80",children:[p.jsxs("li",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"w-1.5 h-1.5 bg-green-400 rounded-full"})," AIRC Certified"]}),p.jsxs("li",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"w-1.5 h-1.5 bg-green-400 rounded-full"})," ICEF Agency Status"]}),p.jsxs("li",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"w-1.5 h-1.5 bg-green-400 rounded-full"})," British Council Trained"]}),p.jsxs("li",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"w-1.5 h-1.5 bg-green-400 rounded-full"})," CCEA (Canada) Grads"]})]})]})]})})]})]}),p.jsx("div",{className:"mt-12 pt-8 border-t border-slate-200 dark:border-slate-800",children:p.jsxs("p",{className:"text-[10px] text-slate-400 dark:text-slate-600 text-center leading-loose",children:[p.jsx("strong",{children:"Relevant Keywords:"})," Student Visa Consultants Vadodara, Study in USA, UK Student Visa fees ",t,", Canada SDS Colleges list, German Blocked Account amount, Australia GTE requirements, US Visa Interview questions, Schengen Visa appointment availability India, Foreign Exchange Rates Vadodara, Flight tickets to Toronto, IELTS Coaching Gujarat, TOEFL classes Ahmedabad."]})})]})]})},z8=({params:t,result:e})=>($.useEffect(()=>{const n=document.querySelector('meta[name="description"]'),r=document.querySelector('link[rel="canonical"]');let s="Use EEC's 100% free AI-powered travel agent for verified Student & Tourist visa requirements.";if(e&&t.destination&&(s=`Official ${t.visaType} visa requirements for ${t.destination} from ${t.originState||"India"}. Verified fees, documents, and ${e.processingTime} processing time. Updated 2025.`),n)n.setAttribute("content",s);else{const c=document.createElement("meta");c.name="description",c.content=s,document.head.appendChild(c)}const i=`https://ai.eecglobal.com/travelagent/#/destination/${encodeURIComponent(t.destination)}/type/${encodeURIComponent(t.visaType)}`;if(r)r.setAttribute("href",i);else{const c=document.createElement("link");c.rel="canonical",c.href=i,document.head.appendChild(c)}const o="supplemental-seo-schema";let a=document.getElementById(o);a&&document.head.removeChild(a),a=document.createElement("script"),a.id=o,a.type="application/ld+json";const l=[];return l.push({"@context":"https://schema.org","@type":"BreadcrumbList",itemListElement:[{"@type":"ListItem",position:1,name:"Home",item:"https://ai.eecglobal.com/travelagent"},{"@type":"ListItem",position:2,name:t.destination||"Destinations",item:`https://ai.eecglobal.com/travelagent/#/destination/${encodeURIComponent(t.destination||"")}`},{"@type":"ListItem",position:3,name:`${t.visaType} Visa`,item:i}]}),l.push({"@context":"https://schema.org","@type":"FAQPage",mainEntity:[{"@type":"Question",name:`How much does a ${t.visaType} visa to ${t.destination} cost?`,acceptedAnswer:{"@type":"Answer",text:(e==null?void 0:e.cost)||"Fees vary by embassy exchange rates. Check official VFS/Consulate pages."}},{"@type":"Question",name:`What is the processing time for ${t.destination} visa from ${t.originState}?`,acceptedAnswer:{"@type":"Answer",text:(e==null?void 0:e.processingTime)||"Processing times depend on consulate workload and season."}},{"@type":"Question",name:"Is EEC Global a registered consultancy?",acceptedAnswer:{"@type":"Answer",text:"Yes, Enbee Education Center (EEC) is established since 1997 with 26 branches across Gujarat."}}]}),l.push({"@context":"https://schema.org","@type":"TravelAgency",name:"Enbee Education Center (EEC)",image:"https://cdn-icons-png.flaticon.com/512/2060/2060284.png",telephone:"+91-9998887776",address:{"@type":"PostalAddress",streetAddress:"Alkapuri",addressLocality:"Vadodara",addressRegion:"Gujarat",postalCode:"390007",addressCountry:"IN"},geo:{"@type":"GeoCoordinates",latitude:22.3072,longitude:73.1812},openingHoursSpecification:{"@type":"OpeningHoursSpecification",dayOfWeek:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],opens:"10:00",closes:"19:00"}}),a.textContent=JSON.stringify(l),document.head.appendChild(a),()=>{a&&document.head.removeChild(a)}},[t,e]),null),$8=()=>{const t=[{name:"Mr. Amit Jalan",role:"Managing Director",exp:"27+ Years",spec:"US & Canada Immigration Law",desc:"Pioneer of study abroad consulting in Gujarat. Expert in challenging INA 214(b) refusals.",imageUrl:"https://ai.eecglobal.com/assets/amit.jpeg"},{name:"CA Madhav Gupta",role:"Director",exp:"18+ Years",spec:"Financial Forensics & Compliance",desc:"Expert in financial documentation forensics, funds verification, and high-stakes visa compliance.",imageUrl:"https://ai.eecglobal.com/assets/Madhav-Gupta.jpeg"},{name:"Mrs. Mohita Gupta",role:"Vice President",exp:"12+ Years",spec:"Global Operations & GS",desc:"Specializes in complex GS drafting, academic assessment, and operational excellence for student visas.",imageUrl:"https://ai.eecglobal.com/assets/mohita-gupta.jpeg"}],e={"@context":"https://schema.org","@graph":t.map(n=>({"@type":"Person",name:n.name,jobTitle:n.role,worksFor:{"@type":"Organization",name:"Enbee Education Center"},description:n.desc,knowsAbout:n.spec}))};return p.jsxs("div",{className:"w-full max-w-6xl mx-auto mt-16 mb-8",children:[p.jsx("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify(e)}}),p.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-[32px] border border-slate-200 dark:border-slate-800 p-8 md:p-12 relative overflow-hidden",children:[p.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-violet-600 via-fuchsia-500 to-indigo-600"}),p.jsxs("div",{className:"text-center mb-10",children:[p.jsx("h2",{className:"text-2xl font-extrabold text-slate-900 dark:text-white mb-3",children:"The Forensic Visa Board"}),p.jsx("p",{className:"text-slate-600 dark:text-slate-400 max-w-2xl mx-auto text-sm font-medium",children:"Our AI is trained and supervised by real humans. Meet the senior experts who audit our algorithms and ensure strict adherence to consular guidelines (E-E-A-T Compliance)."})]}),p.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:t.map((n,r)=>p.jsxs("div",{className:"bg-slate-50 dark:bg-slate-950 rounded-2xl p-6 border border-slate-100 dark:border-slate-800 hover:shadow-lg transition-all group",children:[p.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[p.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden bg-slate-200 dark:bg-slate-800 flex items-center justify-center group-hover:ring-2 group-hover:ring-violet-500 transition-all",children:n.imageUrl?p.jsx("img",{src:n.imageUrl,alt:n.name,className:"w-full h-full object-cover",loading:"lazy"}):p.jsx("span",{className:"text-slate-500 dark:text-slate-400 font-bold text-lg",children:n.name.charAt(0)})}),p.jsxs("div",{children:[p.jsx("h3",{className:"font-bold text-slate-900 dark:text-white text-base",children:n.name}),p.jsx("p",{className:"text-xs font-bold text-violet-600 dark:text-violet-400 uppercase tracking-wide",children:n.role})]})]}),p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"flex items-center gap-2 text-xs font-medium text-slate-500 dark:text-slate-400",children:[p.jsx(Tn,{className:"w-3.5 h-3.5 text-emerald-500"}),p.jsxs("span",{children:["Experience: ",n.exp]})]}),p.jsxs("div",{className:"flex items-center gap-2 text-xs font-medium text-slate-500 dark:text-slate-400",children:[p.jsx(Ra,{className:"w-3.5 h-3.5 text-fuchsia-500"}),p.jsxs("span",{children:["Focus: ",n.spec]})]}),p.jsxs("p",{className:"text-sm text-slate-700 dark:text-slate-300 leading-relaxed italic border-l-2 border-slate-200 dark:border-slate-800 pl-3 mt-2",children:['"',n.desc,'"']})]})]},r))}),p.jsx("div",{className:"mt-8 pt-6 border-t border-slate-100 dark:border-slate-800 text-center",children:p.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-emerald-50 dark:bg-emerald-900/20 rounded-full text-emerald-700 dark:text-emerald-400 text-xs font-bold",children:[p.jsx(Aa,{className:"w-3.5 h-3.5"}),p.jsx("span",{children:"Verified Human Oversight  No hallucinations on critical policy data"})]})})]})]})};function eI(t,e){return function(){return t.apply(e,arguments)}}const{toString:W8}=Object.prototype,{getPrototypeOf:Ym}=Object,{iterator:Jc,toStringTag:tI}=Symbol,Yc=(t=>e=>{const n=W8.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),pn=t=>(t=t.toLowerCase(),e=>Yc(e)===t),Qc=t=>e=>typeof e===t,{isArray:Qi}=Array,Vi=Qc("undefined");function Ya(t){return t!==null&&!Vi(t)&&t.constructor!==null&&!Vi(t.constructor)&&Ft(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const nI=pn("ArrayBuffer");function K8(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&nI(t.buffer),e}const J8=Qc("string"),Ft=Qc("function"),rI=Qc("number"),Qa=t=>t!==null&&typeof t=="object",Y8=t=>t===!0||t===!1,lu=t=>{if(Yc(t)!=="object")return!1;const e=Ym(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(tI in t)&&!(Jc in t)},Q8=t=>{if(!Qa(t)||Ya(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},X8=pn("Date"),Z8=pn("File"),e9=pn("Blob"),t9=pn("FileList"),n9=t=>Qa(t)&&Ft(t.pipe),r9=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Ft(t.append)&&((e=Yc(t))==="formdata"||e==="object"&&Ft(t.toString)&&t.toString()==="[object FormData]"))},s9=pn("URLSearchParams"),[i9,o9,a9,l9]=["ReadableStream","Request","Response","Headers"].map(pn),u9=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Xa(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,s;if(typeof t!="object"&&(t=[t]),Qi(t))for(r=0,s=t.length;r<s;r++)e.call(null,t[r],r,t);else{if(Ya(t))return;const i=n?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let a;for(r=0;r<o;r++)a=i[r],e.call(null,t[a],a,t)}}function sI(t,e){if(Ya(t))return null;e=e.toLowerCase();const n=Object.keys(t);let r=n.length,s;for(;r-- >0;)if(s=n[r],e===s.toLowerCase())return s;return null}const ds=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,iI=t=>!Vi(t)&&t!==ds;function Wh(){const{caseless:t,skipUndefined:e}=iI(this)&&this||{},n={},r=(s,i)=>{const o=t&&sI(n,i)||i;lu(n[o])&&lu(s)?n[o]=Wh(n[o],s):lu(s)?n[o]=Wh({},s):Qi(s)?n[o]=s.slice():(!e||!Vi(s))&&(n[o]=s)};for(let s=0,i=arguments.length;s<i;s++)arguments[s]&&Xa(arguments[s],r);return n}const c9=(t,e,n,{allOwnKeys:r}={})=>(Xa(e,(s,i)=>{n&&Ft(s)?t[i]=eI(s,n):t[i]=s},{allOwnKeys:r}),t),d9=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),f9=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},h9=(t,e,n,r)=>{let s,i,o;const a={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),i=s.length;i-- >0;)o=s[i],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&Ym(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},p9=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},m9=t=>{if(!t)return null;if(Qi(t))return t;let e=t.length;if(!rI(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},g9=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Ym(Uint8Array)),y9=(t,e)=>{const r=(t&&t[Jc]).call(t);let s;for(;(s=r.next())&&!s.done;){const i=s.value;e.call(t,i[0],i[1])}},v9=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},_9=pn("HTMLFormElement"),x9=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),hx=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),w9=pn("RegExp"),oI=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Xa(n,(s,i)=>{let o;(o=e(s,i,t))!==!1&&(r[i]=o||s)}),Object.defineProperties(t,r)},E9=t=>{oI(t,(e,n)=>{if(Ft(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Ft(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},T9=(t,e)=>{const n={},r=s=>{s.forEach(i=>{n[i]=!0})};return Qi(t)?r(t):r(String(t).split(e)),n},C9=()=>{},S9=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function I9(t){return!!(t&&Ft(t.append)&&t[tI]==="FormData"&&t[Jc])}const A9=t=>{const e=new Array(10),n=(r,s)=>{if(Qa(r)){if(e.indexOf(r)>=0)return;if(Ya(r))return r;if(!("toJSON"in r)){e[s]=r;const i=Qi(r)?[]:{};return Xa(r,(o,a)=>{const l=n(o,s+1);!Vi(l)&&(i[a]=l)}),e[s]=void 0,i}}return r};return n(t,0)},k9=pn("AsyncFunction"),N9=t=>t&&(Qa(t)||Ft(t))&&Ft(t.then)&&Ft(t.catch),aI=((t,e)=>t?setImmediate:e?((n,r)=>(ds.addEventListener("message",({source:s,data:i})=>{s===ds&&i===n&&r.length&&r.shift()()},!1),s=>{r.push(s),ds.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Ft(ds.postMessage)),b9=typeof queueMicrotask<"u"?queueMicrotask.bind(ds):typeof process<"u"&&process.nextTick||aI,R9=t=>t!=null&&Ft(t[Jc]),F={isArray:Qi,isArrayBuffer:nI,isBuffer:Ya,isFormData:r9,isArrayBufferView:K8,isString:J8,isNumber:rI,isBoolean:Y8,isObject:Qa,isPlainObject:lu,isEmptyObject:Q8,isReadableStream:i9,isRequest:o9,isResponse:a9,isHeaders:l9,isUndefined:Vi,isDate:X8,isFile:Z8,isBlob:e9,isRegExp:w9,isFunction:Ft,isStream:n9,isURLSearchParams:s9,isTypedArray:g9,isFileList:t9,forEach:Xa,merge:Wh,extend:c9,trim:u9,stripBOM:d9,inherits:f9,toFlatObject:h9,kindOf:Yc,kindOfTest:pn,endsWith:p9,toArray:m9,forEachEntry:y9,matchAll:v9,isHTMLForm:_9,hasOwnProperty:hx,hasOwnProp:hx,reduceDescriptors:oI,freezeMethods:E9,toObjectSet:T9,toCamelCase:x9,noop:C9,toFiniteNumber:S9,findKey:sI,global:ds,isContextDefined:iI,isSpecCompliantForm:I9,toJSONObject:A9,isAsyncFn:k9,isThenable:N9,setImmediate:aI,asap:b9,isIterable:R9};function ae(t,e,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}F.inherits(ae,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:F.toJSONObject(this.config),code:this.code,status:this.status}}});const lI=ae.prototype,uI={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{uI[t]={value:t}});Object.defineProperties(ae,uI);Object.defineProperty(lI,"isAxiosError",{value:!0});ae.from=(t,e,n,r,s,i)=>{const o=Object.create(lI);F.toFlatObject(t,o,function(h){return h!==Error.prototype},c=>c!=="isAxiosError");const a=t&&t.message?t.message:"Error",l=e==null&&t?t.code:e;return ae.call(o,a,l,n,r,s),t&&o.cause==null&&Object.defineProperty(o,"cause",{value:t,configurable:!0}),o.name=t&&t.name||"Error",i&&Object.assign(o,i),o};const P9=null;function Kh(t){return F.isPlainObject(t)||F.isArray(t)}function cI(t){return F.endsWith(t,"[]")?t.slice(0,-2):t}function px(t,e,n){return t?t.concat(e).map(function(s,i){return s=cI(s),!n&&i?"["+s+"]":s}).join(n?".":""):e}function M9(t){return F.isArray(t)&&!t.some(Kh)}const D9=F.toFlatObject(F,{},null,function(e){return/^is[A-Z]/.test(e)});function Xc(t,e,n){if(!F.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=F.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(I,P){return!F.isUndefined(P[I])});const r=n.metaTokens,s=n.visitor||h,i=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&F.isSpecCompliantForm(e);if(!F.isFunction(s))throw new TypeError("visitor must be a function");function c(x){if(x===null)return"";if(F.isDate(x))return x.toISOString();if(F.isBoolean(x))return x.toString();if(!l&&F.isBlob(x))throw new ae("Blob is not supported. Use a Buffer instead.");return F.isArrayBuffer(x)||F.isTypedArray(x)?l&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function h(x,I,P){let A=x;if(x&&!P&&typeof x=="object"){if(F.endsWith(I,"{}"))I=r?I:I.slice(0,-2),x=JSON.stringify(x);else if(F.isArray(x)&&M9(x)||(F.isFileList(x)||F.endsWith(I,"[]"))&&(A=F.toArray(x)))return I=cI(I),A.forEach(function(k,D){!(F.isUndefined(k)||k===null)&&e.append(o===!0?px([I],D,i):o===null?I:I+"[]",c(k))}),!1}return Kh(x)?!0:(e.append(px(P,I,i),c(x)),!1)}const m=[],g=Object.assign(D9,{defaultVisitor:h,convertValue:c,isVisitable:Kh});function v(x,I){if(!F.isUndefined(x)){if(m.indexOf(x)!==-1)throw Error("Circular reference detected in "+I.join("."));m.push(x),F.forEach(x,function(A,E){(!(F.isUndefined(A)||A===null)&&s.call(e,A,F.isString(E)?E.trim():E,I,g))===!0&&v(A,I?I.concat(E):[E])}),m.pop()}}if(!F.isObject(t))throw new TypeError("data must be an object");return v(t),e}function mx(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function Qm(t,e){this._pairs=[],t&&Xc(t,this,e)}const dI=Qm.prototype;dI.append=function(e,n){this._pairs.push([e,n])};dI.toString=function(e){const n=e?function(r){return e.call(this,r,mx)}:mx;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function L9(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function fI(t,e,n){if(!e)return t;const r=n&&n.encode||L9;F.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let i;if(s?i=s(e,n):i=F.isURLSearchParams(e)?e.toString():new Qm(e,n).toString(r),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class gx{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){F.forEach(this.handlers,function(r){r!==null&&e(r)})}}const hI={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},V9=typeof URLSearchParams<"u"?URLSearchParams:Qm,U9=typeof FormData<"u"?FormData:null,F9=typeof Blob<"u"?Blob:null,O9={isBrowser:!0,classes:{URLSearchParams:V9,FormData:U9,Blob:F9},protocols:["http","https","file","blob","url","data"]},Xm=typeof window<"u"&&typeof document<"u",Jh=typeof navigator=="object"&&navigator||void 0,B9=Xm&&(!Jh||["ReactNative","NativeScript","NS"].indexOf(Jh.product)<0),G9=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",q9=Xm&&window.location.href||"http://localhost",H9=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Xm,hasStandardBrowserEnv:B9,hasStandardBrowserWebWorkerEnv:G9,navigator:Jh,origin:q9},Symbol.toStringTag,{value:"Module"})),_t={...H9,...O9};function j9(t,e){return Xc(t,new _t.classes.URLSearchParams,{visitor:function(n,r,s,i){return _t.isNode&&F.isBuffer(n)?(this.append(r,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...e})}function z9(t){return F.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function $9(t){const e={},n=Object.keys(t);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],e[i]=t[i];return e}function pI(t){function e(n,r,s,i){let o=n[i++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=i>=n.length;return o=!o&&F.isArray(s)?s.length:o,l?(F.hasOwnProp(s,o)?s[o]=[s[o],r]:s[o]=r,!a):((!s[o]||!F.isObject(s[o]))&&(s[o]=[]),e(n,r,s[o],i)&&F.isArray(s[o])&&(s[o]=$9(s[o])),!a)}if(F.isFormData(t)&&F.isFunction(t.entries)){const n={};return F.forEachEntry(t,(r,s)=>{e(z9(r),s,n,0)}),n}return null}function W9(t,e,n){if(F.isString(t))try{return(e||JSON.parse)(t),F.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const Za={transitional:hI,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,i=F.isObject(e);if(i&&F.isHTMLForm(e)&&(e=new FormData(e)),F.isFormData(e))return s?JSON.stringify(pI(e)):e;if(F.isArrayBuffer(e)||F.isBuffer(e)||F.isStream(e)||F.isFile(e)||F.isBlob(e)||F.isReadableStream(e))return e;if(F.isArrayBufferView(e))return e.buffer;if(F.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return j9(e,this.formSerializer).toString();if((a=F.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Xc(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),W9(e)):e}],transformResponse:[function(e){const n=this.transitional||Za.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(F.isResponse(e)||F.isReadableStream(e))return e;if(e&&F.isString(e)&&(r&&!this.responseType||s)){const o=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e,this.parseReviver)}catch(a){if(o)throw a.name==="SyntaxError"?ae.from(a,ae.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:_t.classes.FormData,Blob:_t.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};F.forEach(["delete","get","head","post","put","patch"],t=>{Za.headers[t]={}});const K9=F.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),J9=t=>{const e={};let n,r,s;return t&&t.split(`
`).forEach(function(o){s=o.indexOf(":"),n=o.substring(0,s).trim().toLowerCase(),r=o.substring(s+1).trim(),!(!n||e[n]&&K9[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},yx=Symbol("internals");function So(t){return t&&String(t).trim().toLowerCase()}function uu(t){return t===!1||t==null?t:F.isArray(t)?t.map(uu):String(t)}function Y9(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const Q9=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function lf(t,e,n,r,s){if(F.isFunction(r))return r.call(this,e,n);if(s&&(e=n),!!F.isString(e)){if(F.isString(r))return e.indexOf(r)!==-1;if(F.isRegExp(r))return r.test(e)}}function X9(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function Z9(t,e){const n=F.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(s,i,o){return this[r].call(this,e,s,i,o)},configurable:!0})})}let Ot=class{constructor(e){e&&this.set(e)}set(e,n,r){const s=this;function i(a,l,c){const h=So(l);if(!h)throw new Error("header name must be a non-empty string");const m=F.findKey(s,h);(!m||s[m]===void 0||c===!0||c===void 0&&s[m]!==!1)&&(s[m||l]=uu(a))}const o=(a,l)=>F.forEach(a,(c,h)=>i(c,h,l));if(F.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(F.isString(e)&&(e=e.trim())&&!Q9(e))o(J9(e),n);else if(F.isObject(e)&&F.isIterable(e)){let a={},l,c;for(const h of e){if(!F.isArray(h))throw TypeError("Object iterator must return a key-value pair");a[c=h[0]]=(l=a[c])?F.isArray(l)?[...l,h[1]]:[l,h[1]]:h[1]}o(a,n)}else e!=null&&i(n,e,r);return this}get(e,n){if(e=So(e),e){const r=F.findKey(this,e);if(r){const s=this[r];if(!n)return s;if(n===!0)return Y9(s);if(F.isFunction(n))return n.call(this,s,r);if(F.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=So(e),e){const r=F.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||lf(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let s=!1;function i(o){if(o=So(o),o){const a=F.findKey(r,o);a&&(!n||lf(r,r[a],a,n))&&(delete r[a],s=!0)}}return F.isArray(e)?e.forEach(i):i(e),s}clear(e){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const i=n[r];(!e||lf(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const n=this,r={};return F.forEach(this,(s,i)=>{const o=F.findKey(r,i);if(o){n[o]=uu(s),delete n[i];return}const a=e?X9(i):String(i).trim();a!==i&&delete n[i],n[a]=uu(s),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return F.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=e&&F.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[yx]=this[yx]={accessors:{}}).accessors,s=this.prototype;function i(o){const a=So(o);r[a]||(Z9(s,o),r[a]=!0)}return F.isArray(e)?e.forEach(i):i(e),this}};Ot.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);F.reduceDescriptors(Ot.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});F.freezeMethods(Ot);function uf(t,e){const n=this||Za,r=e||n,s=Ot.from(r.headers);let i=r.data;return F.forEach(t,function(a){i=a.call(n,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function mI(t){return!!(t&&t.__CANCEL__)}function Xi(t,e,n){ae.call(this,t??"canceled",ae.ERR_CANCELED,e,n),this.name="CanceledError"}F.inherits(Xi,ae,{__CANCEL__:!0});function gI(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new ae("Request failed with status code "+n.status,[ae.ERR_BAD_REQUEST,ae.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function eO(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function tO(t,e){t=t||10;const n=new Array(t),r=new Array(t);let s=0,i=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),h=r[i];o||(o=c),n[s]=l,r[s]=c;let m=i,g=0;for(;m!==s;)g+=n[m++],m=m%t;if(s=(s+1)%t,s===i&&(i=(i+1)%t),c-o<e)return;const v=h&&c-h;return v?Math.round(g*1e3/v):void 0}}function nO(t,e){let n=0,r=1e3/e,s,i;const o=(c,h=Date.now())=>{n=h,s=null,i&&(clearTimeout(i),i=null),t(...c)};return[(...c)=>{const h=Date.now(),m=h-n;m>=r?o(c,h):(s=c,i||(i=setTimeout(()=>{i=null,o(s)},r-m)))},()=>s&&o(s)]}const ac=(t,e,n=3)=>{let r=0;const s=tO(50,250);return nO(i=>{const o=i.loaded,a=i.lengthComputable?i.total:void 0,l=o-r,c=s(l),h=o<=a;r=o;const m={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&h?(a-o)/c:void 0,event:i,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(m)},n)},vx=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},_x=t=>(...e)=>F.asap(()=>t(...e)),rO=_t.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,_t.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(_t.origin),_t.navigator&&/(msie|trident)/i.test(_t.navigator.userAgent)):()=>!0,sO=_t.hasStandardBrowserEnv?{write(t,e,n,r,s,i,o){if(typeof document>"u")return;const a=[`${t}=${encodeURIComponent(e)}`];F.isNumber(n)&&a.push(`expires=${new Date(n).toUTCString()}`),F.isString(r)&&a.push(`path=${r}`),F.isString(s)&&a.push(`domain=${s}`),i===!0&&a.push("secure"),F.isString(o)&&a.push(`SameSite=${o}`),document.cookie=a.join("; ")},read(t){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function iO(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function oO(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function yI(t,e,n){let r=!iO(e);return t&&(r||n==!1)?oO(t,e):e}const xx=t=>t instanceof Ot?{...t}:t;function As(t,e){e=e||{};const n={};function r(c,h,m,g){return F.isPlainObject(c)&&F.isPlainObject(h)?F.merge.call({caseless:g},c,h):F.isPlainObject(h)?F.merge({},h):F.isArray(h)?h.slice():h}function s(c,h,m,g){if(F.isUndefined(h)){if(!F.isUndefined(c))return r(void 0,c,m,g)}else return r(c,h,m,g)}function i(c,h){if(!F.isUndefined(h))return r(void 0,h)}function o(c,h){if(F.isUndefined(h)){if(!F.isUndefined(c))return r(void 0,c)}else return r(void 0,h)}function a(c,h,m){if(m in e)return r(c,h);if(m in t)return r(void 0,c)}const l={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,h,m)=>s(xx(c),xx(h),m,!0)};return F.forEach(Object.keys({...t,...e}),function(h){const m=l[h]||s,g=m(t[h],e[h],h);F.isUndefined(g)&&m!==a||(n[h]=g)}),n}const vI=t=>{const e=As({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:i,headers:o,auth:a}=e;if(e.headers=o=Ot.from(o),e.url=fI(yI(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),F.isFormData(n)){if(_t.hasStandardBrowserEnv||_t.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(F.isFunction(n.getHeaders)){const l=n.getHeaders(),c=["content-type","content-length"];Object.entries(l).forEach(([h,m])=>{c.includes(h.toLowerCase())&&o.set(h,m)})}}if(_t.hasStandardBrowserEnv&&(r&&F.isFunction(r)&&(r=r(e)),r||r!==!1&&rO(e.url))){const l=s&&i&&sO.read(i);l&&o.set(s,l)}return e},aO=typeof XMLHttpRequest<"u",lO=aO&&function(t){return new Promise(function(n,r){const s=vI(t);let i=s.data;const o=Ot.from(s.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=s,h,m,g,v,x;function I(){v&&v(),x&&x(),s.cancelToken&&s.cancelToken.unsubscribe(h),s.signal&&s.signal.removeEventListener("abort",h)}let P=new XMLHttpRequest;P.open(s.method.toUpperCase(),s.url,!0),P.timeout=s.timeout;function A(){if(!P)return;const k=Ot.from("getAllResponseHeaders"in P&&P.getAllResponseHeaders()),U={data:!a||a==="text"||a==="json"?P.responseText:P.response,status:P.status,statusText:P.statusText,headers:k,config:t,request:P};gI(function(T){n(T),I()},function(T){r(T),I()},U),P=null}"onloadend"in P?P.onloadend=A:P.onreadystatechange=function(){!P||P.readyState!==4||P.status===0&&!(P.responseURL&&P.responseURL.indexOf("file:")===0)||setTimeout(A)},P.onabort=function(){P&&(r(new ae("Request aborted",ae.ECONNABORTED,t,P)),P=null)},P.onerror=function(D){const U=D&&D.message?D.message:"Network Error",L=new ae(U,ae.ERR_NETWORK,t,P);L.event=D||null,r(L),P=null},P.ontimeout=function(){let D=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const U=s.transitional||hI;s.timeoutErrorMessage&&(D=s.timeoutErrorMessage),r(new ae(D,U.clarifyTimeoutError?ae.ETIMEDOUT:ae.ECONNABORTED,t,P)),P=null},i===void 0&&o.setContentType(null),"setRequestHeader"in P&&F.forEach(o.toJSON(),function(D,U){P.setRequestHeader(U,D)}),F.isUndefined(s.withCredentials)||(P.withCredentials=!!s.withCredentials),a&&a!=="json"&&(P.responseType=s.responseType),c&&([g,x]=ac(c,!0),P.addEventListener("progress",g)),l&&P.upload&&([m,v]=ac(l),P.upload.addEventListener("progress",m),P.upload.addEventListener("loadend",v)),(s.cancelToken||s.signal)&&(h=k=>{P&&(r(!k||k.type?new Xi(null,t,P):k),P.abort(),P=null)},s.cancelToken&&s.cancelToken.subscribe(h),s.signal&&(s.signal.aborted?h():s.signal.addEventListener("abort",h)));const E=eO(s.url);if(E&&_t.protocols.indexOf(E)===-1){r(new ae("Unsupported protocol "+E+":",ae.ERR_BAD_REQUEST,t));return}P.send(i||null)})},uO=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,s;const i=function(c){if(!s){s=!0,a();const h=c instanceof Error?c:this.reason;r.abort(h instanceof ae?h:new Xi(h instanceof Error?h.message:h))}};let o=e&&setTimeout(()=>{o=null,i(new ae(`timeout ${e} of ms exceeded`,ae.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(c=>{c.unsubscribe?c.unsubscribe(i):c.removeEventListener("abort",i)}),t=null)};t.forEach(c=>c.addEventListener("abort",i));const{signal:l}=r;return l.unsubscribe=()=>F.asap(a),l}},cO=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,s;for(;r<n;)s=r+e,yield t.slice(r,s),r=s},dO=async function*(t,e){for await(const n of fO(t))yield*cO(n,e)},fO=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},wx=(t,e,n,r)=>{const s=dO(t,e);let i=0,o,a=l=>{o||(o=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:c,value:h}=await s.next();if(c){a(),l.close();return}let m=h.byteLength;if(n){let g=i+=m;n(g)}l.enqueue(new Uint8Array(h))}catch(c){throw a(c),c}},cancel(l){return a(l),s.return()}},{highWaterMark:2})},Ex=64*1024,{isFunction:Vl}=F,hO=(({Request:t,Response:e})=>({Request:t,Response:e}))(F.global),{ReadableStream:Tx,TextEncoder:Cx}=F.global,Sx=(t,...e)=>{try{return!!t(...e)}catch{return!1}},pO=t=>{t=F.merge.call({skipUndefined:!0},hO,t);const{fetch:e,Request:n,Response:r}=t,s=e?Vl(e):typeof fetch=="function",i=Vl(n),o=Vl(r);if(!s)return!1;const a=s&&Vl(Tx),l=s&&(typeof Cx=="function"?(x=>I=>x.encode(I))(new Cx):async x=>new Uint8Array(await new n(x).arrayBuffer())),c=i&&a&&Sx(()=>{let x=!1;const I=new n(_t.origin,{body:new Tx,method:"POST",get duplex(){return x=!0,"half"}}).headers.has("Content-Type");return x&&!I}),h=o&&a&&Sx(()=>F.isReadableStream(new r("").body)),m={stream:h&&(x=>x.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(x=>{!m[x]&&(m[x]=(I,P)=>{let A=I&&I[x];if(A)return A.call(I);throw new ae(`Response type '${x}' is not supported`,ae.ERR_NOT_SUPPORT,P)})});const g=async x=>{if(x==null)return 0;if(F.isBlob(x))return x.size;if(F.isSpecCompliantForm(x))return(await new n(_t.origin,{method:"POST",body:x}).arrayBuffer()).byteLength;if(F.isArrayBufferView(x)||F.isArrayBuffer(x))return x.byteLength;if(F.isURLSearchParams(x)&&(x=x+""),F.isString(x))return(await l(x)).byteLength},v=async(x,I)=>{const P=F.toFiniteNumber(x.getContentLength());return P??g(I)};return async x=>{let{url:I,method:P,data:A,signal:E,cancelToken:k,timeout:D,onDownloadProgress:U,onUploadProgress:L,responseType:T,headers:w,withCredentials:C="same-origin",fetchOptions:R}=vI(x),N=e||fetch;T=T?(T+"").toLowerCase():"text";let M=uO([E,k&&k.toAbortSignal()],D),b=null;const X=M&&M.unsubscribe&&(()=>{M.unsubscribe()});let _e;try{if(L&&c&&P!=="get"&&P!=="head"&&(_e=await v(w,A))!==0){let ee=new n(I,{method:"POST",body:A,duplex:"half"}),le;if(F.isFormData(A)&&(le=ee.headers.get("content-type"))&&w.setContentType(le),ee.body){const[bt,Ee]=vx(_e,ac(_x(L)));A=wx(ee.body,Ex,bt,Ee)}}F.isString(C)||(C=C?"include":"omit");const pe=i&&"credentials"in n.prototype,ye={...R,signal:M,method:P.toUpperCase(),headers:w.normalize().toJSON(),body:A,duplex:"half",credentials:pe?C:void 0};b=i&&new n(I,ye);let B=await(i?N(b,R):N(I,ye));const j=h&&(T==="stream"||T==="response");if(h&&(U||j&&X)){const ee={};["status","statusText","headers"].forEach(Xe=>{ee[Xe]=B[Xe]});const le=F.toFiniteNumber(B.headers.get("content-length")),[bt,Ee]=U&&vx(le,ac(_x(U),!0))||[];B=new r(wx(B.body,Ex,bt,()=>{Ee&&Ee(),X&&X()}),ee)}T=T||"text";let z=await m[F.findKey(m,T)||"text"](B,x);return!j&&X&&X(),await new Promise((ee,le)=>{gI(ee,le,{data:z,headers:Ot.from(B.headers),status:B.status,statusText:B.statusText,config:x,request:b})})}catch(pe){throw X&&X(),pe&&pe.name==="TypeError"&&/Load failed|fetch/i.test(pe.message)?Object.assign(new ae("Network Error",ae.ERR_NETWORK,x,b),{cause:pe.cause||pe}):ae.from(pe,pe&&pe.code,x,b)}}},mO=new Map,_I=t=>{let e=t&&t.env||{};const{fetch:n,Request:r,Response:s}=e,i=[r,s,n];let o=i.length,a=o,l,c,h=mO;for(;a--;)l=i[a],c=h.get(l),c===void 0&&h.set(l,c=a?new Map:pO(e)),h=c;return c};_I();const Zm={http:P9,xhr:lO,fetch:{get:_I}};F.forEach(Zm,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Ix=t=>`- ${t}`,gO=t=>F.isFunction(t)||t===null||t===!1;function yO(t,e){t=F.isArray(t)?t:[t];const{length:n}=t;let r,s;const i={};for(let o=0;o<n;o++){r=t[o];let a;if(s=r,!gO(r)&&(s=Zm[(a=String(r)).toLowerCase()],s===void 0))throw new ae(`Unknown adapter '${a}'`);if(s&&(F.isFunction(s)||(s=s.get(e))))break;i[a||"#"+o]=s}if(!s){const o=Object.entries(i).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let a=n?o.length>1?`since :
`+o.map(Ix).join(`
`):" "+Ix(o[0]):"as no adapter specified";throw new ae("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return s}const xI={getAdapter:yO,adapters:Zm};function cf(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Xi(null,t)}function Ax(t){return cf(t),t.headers=Ot.from(t.headers),t.data=uf.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),xI.getAdapter(t.adapter||Za.adapter,t)(t).then(function(r){return cf(t),r.data=uf.call(t,t.transformResponse,r),r.headers=Ot.from(r.headers),r},function(r){return mI(r)||(cf(t),r&&r.response&&(r.response.data=uf.call(t,t.transformResponse,r.response),r.response.headers=Ot.from(r.response.headers))),Promise.reject(r)})}const wI="1.13.2",Zc={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Zc[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const kx={};Zc.transitional=function(e,n,r){function s(i,o){return"[Axios v"+wI+"] Transitional option '"+i+"'"+o+(r?". "+r:"")}return(i,o,a)=>{if(e===!1)throw new ae(s(o," has been removed"+(n?" in "+n:"")),ae.ERR_DEPRECATED);return n&&!kx[o]&&(kx[o]=!0,console.warn(s(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(i,o,a):!0}};Zc.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function vO(t,e,n){if(typeof t!="object")throw new ae("options must be an object",ae.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let s=r.length;for(;s-- >0;){const i=r[s],o=e[i];if(o){const a=t[i],l=a===void 0||o(a,i,t);if(l!==!0)throw new ae("option "+i+" must be "+l,ae.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new ae("Unknown option "+i,ae.ERR_BAD_OPTION)}}const cu={assertOptions:vO,validators:Zc},vn=cu.validators;let ms=class{constructor(e){this.defaults=e||{},this.interceptors={request:new gx,response:new gx}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=As(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:i}=n;r!==void 0&&cu.assertOptions(r,{silentJSONParsing:vn.transitional(vn.boolean),forcedJSONParsing:vn.transitional(vn.boolean),clarifyTimeoutError:vn.transitional(vn.boolean)},!1),s!=null&&(F.isFunction(s)?n.paramsSerializer={serialize:s}:cu.assertOptions(s,{encode:vn.function,serialize:vn.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),cu.assertOptions(n,{baseUrl:vn.spelling("baseURL"),withXsrfToken:vn.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=i&&F.merge(i.common,i[n.method]);i&&F.forEach(["delete","get","head","post","put","patch","common"],x=>{delete i[x]}),n.headers=Ot.concat(o,i);const a=[];let l=!0;this.interceptors.request.forEach(function(I){typeof I.runWhen=="function"&&I.runWhen(n)===!1||(l=l&&I.synchronous,a.unshift(I.fulfilled,I.rejected))});const c=[];this.interceptors.response.forEach(function(I){c.push(I.fulfilled,I.rejected)});let h,m=0,g;if(!l){const x=[Ax.bind(this),void 0];for(x.unshift(...a),x.push(...c),g=x.length,h=Promise.resolve(n);m<g;)h=h.then(x[m++],x[m++]);return h}g=a.length;let v=n;for(;m<g;){const x=a[m++],I=a[m++];try{v=x(v)}catch(P){I.call(this,P);break}}try{h=Ax.call(this,v)}catch(x){return Promise.reject(x)}for(m=0,g=c.length;m<g;)h=h.then(c[m++],c[m++]);return h}getUri(e){e=As(this.defaults,e);const n=yI(e.baseURL,e.url,e.allowAbsoluteUrls);return fI(n,e.params,e.paramsSerializer)}};F.forEach(["delete","get","head","options"],function(e){ms.prototype[e]=function(n,r){return this.request(As(r||{},{method:e,url:n,data:(r||{}).data}))}});F.forEach(["post","put","patch"],function(e){function n(r){return function(i,o,a){return this.request(As(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}ms.prototype[e]=n(),ms.prototype[e+"Form"]=n(!0)});let _O=class EI{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const r=this;this.promise.then(s=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](s);r._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(a=>{r.subscribe(a),i=a}).then(s);return o.cancel=function(){r.unsubscribe(i)},o},e(function(i,o,a){r.reason||(r.reason=new Xi(i,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new EI(function(s){e=s}),cancel:e}}};function xO(t){return function(n){return t.apply(null,n)}}function wO(t){return F.isObject(t)&&t.isAxiosError===!0}const Yh={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Yh).forEach(([t,e])=>{Yh[e]=t});function TI(t){const e=new ms(t),n=eI(ms.prototype.request,e);return F.extend(n,ms.prototype,e,{allOwnKeys:!0}),F.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return TI(As(t,s))},n}const Oe=TI(Za);Oe.Axios=ms;Oe.CanceledError=Xi;Oe.CancelToken=_O;Oe.isCancel=mI;Oe.VERSION=wI;Oe.toFormData=Xc;Oe.AxiosError=ae;Oe.Cancel=Oe.CanceledError;Oe.all=function(e){return Promise.all(e)};Oe.spread=xO;Oe.isAxiosError=wO;Oe.mergeConfig=As;Oe.AxiosHeaders=Ot;Oe.formToJSON=t=>pI(F.isHTMLForm(t)?new FormData(t):t);Oe.getAdapter=xI.getAdapter;Oe.HttpStatusCode=Yh;Oe.default=Oe;const{Axios:FO,AxiosError:OO,CanceledError:BO,isCancel:GO,CancelToken:qO,VERSION:HO,all:jO,Cancel:zO,isAxiosError:$O,spread:WO,toFormData:KO,AxiosHeaders:JO,HttpStatusCode:YO,formToJSON:QO,getAdapter:XO,mergeConfig:ZO}=Oe,EO="https://us-central1-usa-visa-prep-c72f7.cloudfunctions.net/sendOtpUSA",TO="https://us-central1-usa-visa-prep-c72f7.cloudfunctions.net/verifyOtpUSA",Qh=async t=>{var e;try{return(await Oe.post(EO,{phone:t},{headers:{"Content-Type":"application/json"}})).data}catch(n){throw console.error(" sendOtpMSG91 ERROR",((e=n.response)==null?void 0:e.data)||n),n}},CI=async(t,e)=>{var n;try{return(await Oe.post(TO,{phone:t,otp:e},{headers:{"Content-Type":"application/json"}})).data}catch(r){throw console.error(" verifyOtpMSG91 ERROR",((n=r.response)==null?void 0:n.data)||r),r}},Nx=()=>p.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",viewBox:"0 0 24 24",children:[p.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),p.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0..."})]}),CO=({onAuthSuccess:t,onSwitchToSignup:e,onClose:n})=>{const[r,s]=$.useState("phone"),[i,o]=$.useState(""),[a,l]=$.useState(""),[c,h]=$.useState(null),[m,g]=$.useState(!1),[v,x]=$.useState(0),I=$.useRef();$.useEffect(()=>(v>0&&(I.current=setInterval(()=>x(E=>E-1),1e3)),()=>clearInterval(I.current)),[v]);const P=async E=>{E.preventDefault(),h(null);const k="+91"+i,D=i;if(!/^\d{10}$/.test(i)){h("Enter a valid 10-digit number.");return}g(!0);try{if(!await qS(D)){h("Phone not registered. Please sign up first."),g(!1);return}await Qh(k),s("otp"),x(60)}catch{h("Unable to send OTP. Try again.")}g(!1)},A=async E=>{var D;E.preventDefault(),h(null),g(!0);const k="+91"+i;try{const U=await CI(k,a);if(U.type==="success"||(D=U.message)!=null&&D.toLowerCase().includes("verified")){const L=await fF(i);L&&L.email&&localStorage.setItem("travelagentemail",L.email),t()}else h("Invalid OTP.")}catch{h("OTP verification failed.")}g(!1)};return p.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/50 backdrop-blur-sm",children:p.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 sm:p-8 rounded-2xl w-full max-w-md relative shadow-2xl animate-fadeIn",children:[p.jsx("button",{onClick:n,className:"absolute top-4 right-4 text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200 transition-colors",children:""}),p.jsxs("div",{className:"text-center mb-6",children:[p.jsx("img",{src:"https://ai.eecglobal.com/assets/logos/eeclogo-main.png",alt:"EEC",className:"mx-auto h-10 mb-4"}),p.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:"Welcome back!"}),p.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-400",children:"Enter your phone number to continue"})]}),r==="phone"&&p.jsxs("form",{onSubmit:P,className:"space-y-6",children:[p.jsxs("div",{className:"relative",children:[p.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Phone Number"}),p.jsxs("div",{className:"relative",children:[p.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-500 dark:text-slate-400 font-medium",children:"+91"}),p.jsx("input",{className:"w-full border border-slate-300 dark:border-slate-600 rounded-lg pl-14 pr-4 py-3 bg-white dark:bg-slate-900 text-slate-900 dark:text-slate-100 placeholder:text-slate-400 dark:placeholder:text-slate-500 focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400 focus:border-indigo-500 dark:focus:border-indigo-400 transition-shadow",value:i,onChange:E=>o(E.target.value.replace(/\D/g,"").slice(0,10)),placeholder:"98765 43210",required:!0})]})]}),p.jsx("button",{type:"submit",disabled:m||i.length!==10,className:"w-full bg-indigo-600 hover:bg-indigo-700 dark:hover:bg-indigo-500 text-white font-semibold py-3 px-6 rounded-lg transition-all transform hover:scale-[1.02] disabled:bg-slate-400 dark:disabled:bg-slate-600 disabled:cursor-not-allowed disabled:scale-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:m?p.jsxs("span",{className:"flex items-center justify-center",children:[p.jsx(Nx,{}),p.jsx("span",{className:"ml-2",children:"Sending..."})]}):"Send OTP"})]}),r==="otp"&&p.jsxs("form",{onSubmit:A,className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Enter OTP"}),p.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3 text-center",children:["We sent a 6-digit code to ",p.jsxs("strong",{className:"text-slate-700 dark:text-slate-300",children:["+91 ",i]})]}),p.jsx("input",{className:"w-full border border-slate-300 dark:border-slate-600 rounded-lg text-center tracking-[1em] py-3 px-4 bg-white dark:bg-slate-900 text-slate-900 dark:text-slate-100 placeholder:text-slate-400 dark:placeholder:text-slate-500 focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400 focus:border-indigo-500 dark:focus:border-indigo-400 transition-shadow text-lg font-semibold",placeholder:"______",value:a,onChange:E=>l(E.target.value.replace(/\D/g,"").slice(0,6)),maxLength:6})]}),p.jsx("button",{type:"submit",disabled:a.length!==6||m,className:"w-full bg-indigo-600 hover:bg-indigo-700 dark:hover:bg-indigo-500 text-white font-semibold py-3 px-6 rounded-lg transition-all transform hover:scale-[1.02] disabled:bg-slate-400 dark:disabled:bg-slate-600 disabled:cursor-not-allowed disabled:scale-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:m?p.jsxs("span",{className:"flex items-center justify-center",children:[p.jsx(Nx,{}),p.jsx("span",{className:"ml-2",children:"Verifying..."})]}):"Verify & Continue"}),p.jsxs("div",{className:"text-center space-y-2",children:[p.jsx("button",{type:"button",disabled:v>0||m,className:"text-indigo-600 dark:text-indigo-400 hover:text-indigo-700 dark:hover:text-indigo-300 disabled:text-slate-400 dark:disabled:text-slate-500 transition-colors text-sm font-medium",onClick:async()=>{h(null),g(!0);try{const E="+91"+i;await Qh(E),x(60),l("")}catch{h("Failed to resend OTP. Please try again.")}g(!1)},children:v>0?`Resend OTP in ${v}s`:"Resend OTP"}),p.jsx("button",{type:"button",className:"text-indigo-600 dark:text-indigo-400 hover:text-indigo-700 dark:hover:text-indigo-300 transition-colors text-sm font-medium",onClick:()=>{l(""),s("phone"),x(0)},children:"Change number"})]})]}),c&&p.jsx("div",{className:"mt-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:p.jsx("p",{className:"text-center text-sm text-red-600 dark:text-red-400",children:c})}),p.jsx("div",{className:"mt-6 pt-6 border-t border-slate-200 dark:border-slate-700",children:p.jsxs("p",{className:"text-center text-sm text-slate-600 dark:text-slate-400",children:["Don't have an account?"," ",p.jsx("button",{className:"text-indigo-600 dark:text-indigo-400 hover:text-indigo-700 dark:hover:text-indigo-300 ml-1 font-semibold transition-colors",onClick:e,children:"Sign up"})]})})]})})},Ul=({className:t="h-5 w-5 text-white"})=>p.jsxs("svg",{className:`animate-spin ${t}`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[p.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),p.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),SO=({onAuthSuccess:t,onSwitchToLogin:e,onClose:n})=>{const[r,s]=$.useState("idle"),[i,o]=$.useState("idle"),[a,l]=$.useState(""),[c,h]=$.useState(!1),[m,g]=$.useState(!1),[v,x]=$.useState(null),[I,P]=$.useState({name:"",email:"",phone:"",targetCountry:"New Zealand",isEECAgent:"",branch:""}),[A,E]=$.useState(""),[k,D]=$.useState(!1),[U,L]=$.useState(!1),[T,w]=$.useState(null),[C,R]=$.useState(null),[N,M]=$.useState(null),[b,X]=$.useState(null),[_e,pe]=$.useState(0),ye=$.useRef(null),B=async()=>{if(I.phone.length!==10){M("Please enter a valid 10-digit phone number.");return}const ie="+91"+I.phone,Ce=I.phone;w(null),M(null),x(null),h(!0);try{if(await qS(Ce)){M("An account with this phone number already exists. Please sign in instead."),h(!1);return}await Qh(ie)?(o("pending"),pe(60)):M("Failed to send phone OTP. Try again.")}catch{M("Unable to send phone OTP. Try again.")}h(!1)},j=async()=>{var Ce;if(a.length!==6){x("Enter the 6-digit OTP.");return}x(null),g(!0);const ie="+91"+I.phone;try{const rt=await CI(ie,a);rt.type==="success"||(Ce=rt.message)!=null&&Ce.toLowerCase().includes("verified")?o("verified"):(x("Invalid OTP."),l(""))}catch{x("Failed to verify OTP. Try again.")}g(!1)};$.useEffect(()=>(_e>0?ye.current=setInterval(()=>{pe(ie=>ie>0?ie-1:0)},1e3):ye.current&&clearInterval(ye.current),()=>{ye.current&&clearInterval(ye.current)}),[_e]);const z=ie=>{const{name:Ce,value:rt}=ie.target;if(Ce==="phone"){const ct=rt.replace(/\D/g,"");ct.length<=10&&P(ed=>({...ed,[Ce]:ct}))}else P(Ce==="state"?ct=>({...ct,state:rt,city:""}):Ce==="isEECAgent"?ct=>({...ct,[Ce]:rt,branch:rt==="No"?"":ct.branch}):ct=>({...ct,[Ce]:rt}))},ee=async()=>{if(!I.email||!I.email.includes("@")){R("Please enter a valid email address.");return}w(null),R(null),X(null);try{if(await ox(I.email)){R("An account with this email already exists. Please sign in instead.");return}await yF(I.email)?(s("pending"),pe(60)):R("Failed to send OTP. Please check your email and try again.")}catch{R("An unexpected error occurred.")}finally{}},le=async()=>{if(A.length!==6){X("Please enter the 6-digit OTP.");return}X(null),w(null),D(!0);try{await vF(I.email,A)?s("verified"):(X("Invalid OTP. Please try again."),E(""))}finally{D(!1)}},bt=async ie=>{ie.preventDefault(),L(!0),w(null),R(null);try{if(await ox(I.email)){R("An account with this email already exists. Please sign in instead."),L(!1);return}const rt={...I,targetCountry:I.targetCountry||"New Zealand",isEECAgent:I.isEECAgent||"",branch:I.isEECAgent==="Yes"&&I.branch||""},ct=await hF(rt);if(ct==="EXISTS"){R("An account with this email already exists. Please sign in instead."),e();return}if(ct==="ERROR"){w("Something went wrong. Please try again.");return}localStorage.setItem("travelagentemail",I.email),t()}finally{L(!1)}},Ee="w-full px-4 py-3 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400 transition bg-white dark:bg-slate-900 dark:text-slate-100",Xe="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1";return p.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-2 bg-slate-900/50 backdrop-blur-sm",children:p.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl max-w-md w-full p-4 sm:p-5 relative max-h-[96vh] overflow-y-auto scrollbar-hide",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:[p.jsx("style",{children:`
          .scrollbar-hide::-webkit-scrollbar {
            display: none;
          }
        `}),p.jsx("button",{onClick:n,className:"absolute top-4 right-4 z-50 text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-100 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-full p-1 w-8 h-8 flex items-center justify-center transition-colors duration-200","aria-label":"Close",children:""}),p.jsxs("div",{className:"text-center mb-3",children:[p.jsx("img",{src:"https://ai.eecglobal.com/assets/logos/eeclogo-main.png",alt:"EEC",className:"mx-auto h-10 mb-2"}),p.jsx("h2",{className:"mt-1 text-xl font-bold text-slate-900 dark:text-slate-100",children:"Welcome!"}),p.jsxs("p",{className:"mt-1 text-md text-slate-600 dark:text-slate-400",children:["Create an account or"," ",p.jsx("button",{onClick:e,className:"text-indigo-600",children:"Sign In"})]})]}),p.jsxs("form",{onSubmit:bt,className:"mt-2 space-y-3",children:[p.jsxs("div",{children:[p.jsx("label",{className:Xe,children:"Full Name"}),p.jsx("input",{type:"text",name:"name",required:!0,value:I.name,onChange:z,className:Ee})]}),p.jsxs("div",{children:[p.jsx("label",{className:Xe,children:"Email"}),p.jsx("div",{className:"flex items-center gap-2",children:p.jsx("input",{type:"email",name:"email",required:!0,value:I.email,onChange:ie=>{z(ie),R(null)},className:`${Ee} ${C?"border-red-500":""}`})}),C&&p.jsx("p",{className:"mt-1 text-sm text-red-600",children:C})]}),r==="pending"&&p.jsxs("div",{className:"mt-2 p-3 bg-gradient-to-br from-indigo-50 to-blue-50 dark:from-slate-800 dark:to-slate-700 rounded-lg border border-indigo-200 dark:border-slate-600 shadow-sm space-y-2",children:[p.jsxs("p",{className:"text-xs text-center text-slate-700 dark:text-slate-300",children:["Enter the 6-digit code sent to",p.jsx("br",{}),p.jsx("strong",{className:"text-indigo-600 dark:text-indigo-400 text-xs",children:I.email})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("input",{type:"text",value:A,onChange:ie=>E(ie.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"000000",className:"flex-1 px-3 py-2 bg-white dark:bg-slate-900 border-2 border-indigo-300 dark:border-indigo-600 rounded-lg text-center text-base tracking-[0.2em] font-semibold text-slate-900 dark:text-white placeholder-slate-400 dark:placeholder-slate-500 focus:border-indigo-500 dark:focus:border-indigo-400 focus:ring-1 focus:ring-indigo-300 dark:focus:ring-indigo-600 focus:outline-none transition text-sm",maxLength:6}),p.jsx("button",{type:"button",onClick:le,disabled:k,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 dark:hover:bg-indigo-500 text-white font-semibold text-sm rounded-lg transition disabled:opacity-50 disabled:cursor-not-allowed",children:k?p.jsx(Ul,{className:"h-4 w-4"}):"Confirm"})]}),b&&p.jsx("p",{className:"text-center text-xs text-red-600 dark:text-red-400 font-medium",children:b}),p.jsx("div",{className:"text-center",children:p.jsxs("button",{type:"button",onClick:ee,disabled:_e>0,className:"text-xs text-indigo-600 dark:text-indigo-400 hover:text-indigo-700 dark:hover:text-indigo-300 font-medium disabled:text-slate-400 disabled:cursor-not-allowed transition",children:["Resend OTP ",_e>0?`(${_e}s)`:""]})})]}),p.jsxs("div",{children:[p.jsx("label",{className:Xe,children:"Phone Number"}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsxs("div",{className:"relative flex-1",children:[p.jsx("span",{className:"absolute left-3 top-3 text-slate-500",children:"+91"}),p.jsx("input",{type:"tel",name:"phone",required:!0,value:I.phone,onChange:ie=>{z(ie),M(null)},className:`${Ee} pl-12 ${N?"border-red-500":""}`,disabled:i!=="idle"})]}),i==="idle"&&p.jsx("button",{type:"button",onClick:B,disabled:c||I.phone.length!==10,className:"px-4 py-3 bg-indigo-600 text-white rounded-lg disabled:bg-slate-400 disabled:cursor-not-allowed",children:c?p.jsx(Ul,{}):"Verify"}),i==="verified"&&p.jsx("span",{className:"text-green-600 font-semibold",children:" Verified"})]}),N&&p.jsx("p",{className:"mt-1 text-sm text-red-600",children:N})]}),i==="pending"&&p.jsxs("div",{className:"mt-2 p-3 bg-gradient-to-br from-indigo-50 to-blue-50 dark:from-slate-800 dark:to-slate-700 rounded-lg border border-indigo-200 dark:border-slate-600 shadow-sm space-y-2",children:[p.jsxs("p",{className:"text-xs text-center text-slate-700 dark:text-slate-300",children:["Enter OTP sent to",p.jsx("br",{}),p.jsxs("strong",{className:"text-indigo-600 dark:text-indigo-400 text-xs",children:["+91 ",I.phone]})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("input",{type:"text",value:a,onChange:ie=>l(ie.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"000000",className:"flex-1 px-3 py-2 bg-white dark:bg-slate-900 border-2 border-indigo-300 dark:border-indigo-600 rounded-lg text-center text-base tracking-[0.2em] font-semibold text-slate-900 dark:text-white placeholder-slate-400 dark:placeholder-slate-500 focus:border-indigo-500 dark:focus:border-indigo-400 focus:ring-1 focus:ring-indigo-300 dark:focus:ring-indigo-600 focus:outline-none transition text-sm",maxLength:6}),p.jsx("button",{type:"button",onClick:j,disabled:m,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 dark:hover:bg-indigo-500 text-white font-semibold text-sm rounded-lg transition disabled:opacity-50 disabled:cursor-not-allowed",children:m?p.jsx(Ul,{className:"h-4 w-4"}):"Confirm"})]}),v&&p.jsx("p",{className:"text-center text-xs text-red-600 dark:text-red-400 font-medium",children:v}),p.jsx("div",{className:"text-center",children:p.jsxs("button",{type:"button",onClick:B,disabled:_e>0,className:"text-xs text-indigo-600 dark:text-indigo-400 hover:text-indigo-700 dark:hover:text-indigo-300 font-medium disabled:text-slate-400 disabled:cursor-not-allowed transition",children:["Resend OTP ",_e>0?`(${_e}s)`:""]})})]}),p.jsxs("div",{className:"flex items-center gap-x-6",children:[p.jsxs("label",{className:"flex items-center whitespace-nowrap text-sm font-medium text-slate-700 dark:text-slate-300",children:["EEC is my admissions agent?",p.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),p.jsxs("div",{className:"flex items-center gap-x-6",children:[p.jsxs("label",{className:"flex items-center cursor-pointer",children:[p.jsx("input",{type:"radio",name:"isEECAgent",value:"Yes",checked:I.isEECAgent==="Yes",onChange:z,className:"mr-2 h-4 w-4 accent-indigo-600 dark:accent-indigo-500",disabled:i!=="verified",required:!0}),p.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:"Yes"})]}),p.jsxs("label",{className:"flex items-center cursor-pointer",children:[p.jsx("input",{type:"radio",name:"isEECAgent",value:"No",checked:I.isEECAgent==="No",onChange:z,className:"mr-2 h-4 w-4 accent-indigo-600 dark:accent-indigo-500",disabled:i!=="verified",required:!0}),p.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:"No"})]})]})]}),I.isEECAgent==="Yes"&&p.jsxs("div",{children:[p.jsxs("label",{className:Xe,children:["Choose Branch",p.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),p.jsxs("select",{name:"branch",value:I.branch,onChange:z,className:Ee,disabled:i!=="verified",required:I.isEECAgent==="Yes",children:[p.jsx("option",{value:"",children:"Select Branch"}),ws.map(ie=>p.jsx("option",{value:ie.identifier,children:ie.name},ie.identifier))]})]}),p.jsx("button",{type:"submit",disabled:U||i!=="verified",className:"w-full py-3 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold rounded-lg mt-4 transition-colors duration-200 disabled:bg-slate-400 disabled:cursor-not-allowed disabled:opacity-70 flex items-center justify-center min-h-[44px]",children:U?p.jsx(Ul,{}):"Create Account & Get Started"})]}),p.jsxs("button",{type:"button",onClick:e,className:"group relative w-full py-3 bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-800 dark:to-slate-700 hover:from-indigo-50 hover:to-blue-50 dark:hover:from-indigo-900/30 dark:hover:to-blue-900/30 text-slate-700 dark:text-slate-200 font-semibold rounded-lg mt-3 transition-all duration-300 flex items-center justify-center min-h-[44px] border border-slate-200 dark:border-slate-600 hover:border-indigo-300 dark:hover:border-indigo-600 hover:shadow-lg hover:scale-[1.02] active:scale-[0.98] backdrop-blur-sm overflow-hidden",children:[p.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-indigo-500/0 via-indigo-500/10 to-indigo-500/0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000"}),p.jsxs("span",{className:"relative flex items-center gap-2",children:[p.jsx("svg",{className:"w-5 h-5 transition-transform duration-300 group-hover:rotate-[-10deg]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})}),"Already Registered? Sign In"]})]}),T&&p.jsx("p",{className:"mt-2 text-center text-xs text-red-600",children:T})]})})},IO=({title:t,children:e})=>{const[n,r]=$.useState(!1);return p.jsxs("div",{className:"border border-slate-200/50 dark:border-slate-800/50 rounded-xl overflow-hidden bg-slate-50/50 dark:bg-slate-900/30",children:[p.jsxs("button",{onClick:()=>r(!n),className:"w-full px-4 py-3 flex items-center justify-between text-left hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors group",children:[p.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest text-slate-500 dark:text-slate-400 group-hover:text-slate-900 dark:group-hover:text-slate-200",children:t}),n?p.jsx(Km,{className:"w-3 h-3 text-slate-400"}):p.jsx(Wm,{className:"w-3 h-3 text-slate-400"})]}),n&&p.jsx("div",{className:"px-4 pb-4 pt-1 animate-in fade-in slide-in-from-top-2 duration-200",children:e})]})},AO=()=>{const t={"United States":["US F1 student visa interview questions 2025","US tourist visa B1/B2 wait times India","DS-160 form filling guide for indian students","documents required for US student visa dropbox","cost of studying in USA for indian students","US visa rejection reasons 214(b) explained","gap acceptance in US universities for masters","US student visa financial proof requirements","stem opt extension rules for indian students","emergency US visa appointment india process"],"United Kingdom":["UK tier 4 student visa checklist India","study in UK without IELTS for indian students","UK post study work visa graduate route 2025","CAS letter processing time UK universities","UK tourist visa fees in indian rupees 2025","london university fees for indian students","proof of funds for UK student visa calculation","UK spouse visa requirements for students","list of UK universities accepting study gap","UK credibility interview questions and answers"],Canada:["canada student visa sds vs non sds 2025","canada study permit processing time india","minimum bank balance for canada student visa","SOP for canada student visa 100% approval","GIC amount for canada student visa 2025","canada visitor visa checklist for parents","canada spouse open work permit eligibility","reasons for canada student visa rejection","ircc portal login for indian applicants","colleges in canada for indian students low fees"],Australia:["australia student visa subclass 500 requirements","GTE statement australia student visa sample","australia tourist visa subclass 600 checklist","level 1 universities in australia for india","study in australia cost for indian students","australia student visa fees in indian rupees","working rights in australia for students","australia dependent visa requirements 2025","australia visa rejection reasons 2025","immiaccount login australia visa application"],"New Zealand":["new zealand student visa requirements from india","study in new zealand cost for indian students","new zealand tourist visa processing time india","post study work rights new zealand 2025","green list occupations new zealand for students","level 7 diploma in new zealand for international students","new zealand student visa fund requirements","partner work visa new zealand student","unitec new zealand courses for international students","university of auckland admission requirements"],Germany:["germany student visa checklist vfs india","blocked account amount germany 2025","aps certificate india process and time","study in germany free universities for indian students","germany job seeker visa requirements from india","germany tourist visa appointment vfs","public universities in germany for masters","german language levels for student visa","letter of motivation for german student visa","germany opportunity card for indian citizens"],France:["campus france procedure for indian students 2025","france long stay student visa checklist","study in france without ielts for indian students","france schengen visa appointment availability","france tourist visa documents checklist","interview questions for france student visa","cost of living in paris for indian students","public universities in france for international students","france job seeker visa after masters","accommodation proof for france visa application"],Ireland:["study in ireland cost for indian students","ireland student visa interview questions","ireland tourist visa processing time india","stamp 1g visa rules ireland for students","GNIB appointment dublin for students","universities in ireland for ms in computer science","ireland critical skills employment permit","proof of funds for ireland student visa","study in ireland with education loan","part time job salary in ireland for students"],Netherlands:["mvv visa netherlands student requirements","study in netherlands cost for indian students","netherlands tourist visa from india checklist","university of amsterdam admission requirements","netherlands post study work visa orientation year","ielts requirement for netherlands universities","ind netherlands student visa processing time","housing for students in netherlands","netherlands scholarship for indian students","schengen visa netherlands vfs appointment"],Italy:["italy student visa checklist for indian students","cimea statement of comparability italy","italy schengen visa processing time india","scholarship in italy for indian students 2025","universitaly pre-enrollment summary guide","study in italy free universities for international students","italy tourist visa appointment vfs mumbai","politecnico di milano admission requirements","sapienza university of rome application fee","accommodation proof for italy student visa"],Spain:["spain student visa requirements from india","spain tourist visa appointment bls india","study in spain cost for international students","nie number spain student visa process","spain non-lucrative visa requirements india","barcelona university admission for international students","medical certificate for spain student visa","spain digital nomad visa for indian citizens","public universities in spain for masters","bls spain visa tracking status india"],Switzerland:["study in switzerland cost for indian students","switzerland student visa checklist india","swiss schengen visa appointment vfs","eth zurich admission requirements for indian students","swiss tourist visa requirements for indian citizens","hospitality management courses in switzerland","switzerland work visa for indian citizens","cost of living in zurich for students","university of geneva international students","swiss visa processing time from india"],Sweden:["sweden residence permit for studies requirements","study in sweden cost for indian students","sweden job seeker visa requirements","sweden tourist visa from india vfs","personnummer sweden student process","kth royal institute of technology admission","lund university scholarship for international students","work permit after study in sweden","sweden dependent visa requirements","university admissions se application guide"],Finland:["study in finland for indian students 2025","finland residence permit student requirements","finland job seeker visa for indian citizens","finland tourist visa requirements from india","finland university application deadline 2025","university of helsinki admission requirements","cost of living in finland for students","finland scholarship for international students","part time work rules in finland for students","migri finland student visa processing time"],Denmark:["study in denmark for international students requirements","denmark student visa processing time india","denmark green card scheme point system","denmark tourist visa checklist for indian citizens","copenhagen university admission for indian students","denmark positive list for work visa","tuition fees in denmark for indian students","residence permit denmark student","post study work visa denmark rules","nyidanmark student application guide"],Austria:["austria student visa residence permit india","study in austria public universities fees","austria tourist visa vfs checklist","austria job seeker visa requirements","university of vienna admission for indian students","legalization of documents for austria visa","cost of living in vienna for students","austria red white red card explanation","german language requirement for austria student visa","accommodation booking for austria visa"],Malta:["study in malta visa success rate 2025","malta work permit for indian citizens","malta tourist visa requirements from india","identity malta student visa checklist","english courses in malta for work visa","jobs in malta for indian students","malta schengen visa processing time","cost of studying in malta for indian students","malta college of arts science and technology admission","vfs malta appointment india"],UAE:["uae golden visa requirements for students","dubai student visa cost and process","uae tourist visa 5 years multiple entry india","study in dubai universities for indian students","uae residence visa for students sponsorship","knowledge village dubai universities list","part time work permit for students in dubai","visa on arrival for indian citizens with us visa","dubai freelance visa for indian citizens","sharjah university admission requirements"],Singapore:["singapore student pass application process","study in singapore for indian students cost","singapore tourist visa documents for indian citizens","singapore visa processing time india","singapore universities fees for international students","nus admission requirements for indian students","singapore work holiday programme for students","ica singapore student pass login","private universities in singapore for indian students","singapore visa rejection reasons"],Latvia:["study in latvia without ielts for indian students","latvia student visa interview questions","latvia trp process for students","latvia tourist visa requirements from india","riga technical university admission 2025","latvia visa success rate for indian students","cost of living in riga for students","latvia schengen visa appointment","latvia university admission letter time","part time jobs in latvia for indian students"],Hungary:["study in hungary stipendiums hungaricum 2025","hungary student visa interview questions","hungary tourist visa checklist india","university of debrecen admission requirements","residence permit hungary student process","study in hungary without ielts","cost of living in budapest for students","semmelweis university entrance exam","hungary work visa for indian citizens","hungary visa appointment vfs"]},e={"North America":["United States","Canada"],"UK & Europe":["United Kingdom","Germany","France","Ireland","Netherlands","Italy","Spain","Switzerland","Sweden","Finland","Denmark","Austria","Malta","Latvia","Hungary"],"Asia Pacific":["Australia","New Zealand","Singapore"],"Middle East":["UAE"]};return p.jsx("div",{className:"w-full mt-2 pt-3 border-t border-slate-200/50 dark:border-slate-800/50 ",children:p.jsxs("div",{className:"container mx-auto px-4 max-w-4xl",children:[p.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4 opacity-70",children:[p.jsx(Kc,{className:"w-4 h-4 text-slate-400"}),p.jsx("h3",{className:"text-[10px] font-bold uppercase tracking-[0.2em] text-slate-400 dark:text-slate-600 select-none",children:"Global Consular Search Index (2025)"})]}),p.jsx("div",{className:"space-y-1",children:Object.entries(e).map(([n,r])=>p.jsx(IO,{title:`${n} (${r.length} Regions)`,children:p.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-x-6 gap-y-8 pt-2",children:r.map(s=>{var i;return p.jsxs("div",{className:"space-y-2 opacity-60 hover:opacity-100 transition-opacity",children:[p.jsx("h4",{className:"text-[9px] font-black uppercase tracking-widest text-violet-500 dark:text-violet-400 border-b border-slate-200 dark:border-slate-800 pb-1 mb-2",children:s}),p.jsx("ul",{className:"space-y-1",children:(i=t[s])==null?void 0:i.map((o,a)=>p.jsx("li",{className:"text-[9px] leading-tight text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200 cursor-default font-medium",children:o},a))})]},s)})})},n))}),p.jsx("div",{className:"mt-4 text-center",children:p.jsx("p",{className:"text-[9px] text-slate-300 dark:text-slate-700 italic",children:"*Index generated for programmatic SEO crawlability. Content accuracy verified dynamically."})})]})})},kO=()=>{const[t,e]=$.useState(!1),n=["Gujarat","Maharashtra","Punjab","Delhi","Telangana"],r=["United States","Canada","United Kingdom","Australia","Germany"];return p.jsx("div",{className:" pt-1 border-t border-slate-200/50 dark:border-slate-800/50",children:p.jsxs("div",{className:"border border-slate-200/50 dark:border-slate-800/50 rounded-xl overflow-hidden bg-slate-50/50 dark:bg-slate-900/30",children:[p.jsxs("button",{onClick:()=>e(!t),className:"w-full px-4 py-3 flex items-center justify-between text-left hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors group",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(Kc,{className:"w-3.5 h-3.5 text-violet-500 opacity-70"}),p.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest text-slate-500 dark:text-slate-400 group-hover:text-slate-900 dark:group-hover:text-slate-200",children:"Regional Visa Requirements Index"})]}),t?p.jsx(Km,{className:"w-3 h-3 text-slate-400"}):p.jsx(Wm,{className:"w-3 h-3 text-slate-400"})]}),t&&p.jsx("div",{className:"px-4 pb-6 pt-2 animate-in fade-in slide-in-from-top-2 duration-200",children:p.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:n.map(s=>p.jsxs("div",{className:"space-y-2",children:[p.jsx("h4",{className:"text-[9px] font-extrabold uppercase tracking-wider text-slate-400 dark:text-slate-600 mb-1 border-b border-slate-200 dark:border-slate-800 pb-1",children:s}),p.jsx("ul",{className:"space-y-1",children:r.map(i=>p.jsx("li",{children:p.jsxs("a",{href:`#/destination/${encodeURIComponent(i)}/type/Student/state/${encodeURIComponent(s)}`,className:"text-[9px] text-slate-500 hover:text-violet-600 dark:text-slate-500 dark:hover:text-violet-400 transition-colors block py-0.5 truncate",children:["Student Visa: ",i]})},`${s}-${i}`))})]},s))})})]})})},NO=()=>p.jsx("footer",{className:"border-t border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-950 pt-4 pb-6 mt-auto transition-colors relative z-10",children:p.jsxs("div",{className:"container mx-auto px-4",children:[p.jsxs("div",{className:"flex flex-col md:flex-row max-w-7xl mx-auto items-start justify-evenly",children:[p.jsxs("div",{className:"text-center md:text-left flex-1",children:[p.jsx("a",{href:"https://eecglobal.com",target:"_blank",rel:"noopener noreferrer",className:"inline-block group",children:p.jsx("img",{src:"https://ai.eecglobal.com/assets/logos/eeclogo-main.png",alt:"Logo",className:"h-14 sm:h-10"})}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("p",{className:"font-bold text-slate-900 dark:text-white text-lg tracking-tight",children:"Enbee Education Center Private Limited (EEC)"}),p.jsxs("div",{className:"flex flex-col gap-1 text-sm text-slate-500 dark:text-slate-400 font-medium",children:[p.jsx("span",{children:" 2025 EEC. All rights reserved."}),p.jsxs("div",{className:"flex flex-row flex-wrap items-center gap-x-2 gap-y-0.5 justify-center md:justify-start",children:[p.jsx("span",{children:"Established 1997"}),p.jsx("span",{className:"text-slate-300 dark:text-slate-700",children:""}),p.jsx("span",{children:"26 Branches"}),p.jsx("span",{className:"text-slate-300 dark:text-slate-700",children:""}),p.jsx("span",{children:"12 Cities"})]})]})]})]}),p.jsxs("div",{className:"flex flex-col items-start flex-shrink-0 mx-auto md:mx-0 max-w-fit",children:[p.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-200 md:mt-0 mt-3 text-xl text-left md:text-right",children:"Connect with Us"}),p.jsxs("div",{className:"flex items-center gap-6 sm:gap-5 my-3 justify-start md:justify-end",children:[p.jsx("a",{href:"https://www.instagram.com/eecglobal",target:"_blank",rel:"noopener noreferrer","aria-label":"Instagram",className:"group transition-all",children:p.jsx(zF,{className:"h-7 w-7 text-slate-400 group-hover:text-[#E1306C] transition-all duration-300 transform group-hover:scale-110"})}),p.jsx("a",{href:"https://www.facebook.com/eecglobal",target:"_blank",rel:"noopener noreferrer","aria-label":"Facebook",className:"group transition-all",children:p.jsx(OF,{className:"h-7 w-7 text-slate-400 group-hover:text-[#1877F2] transition-all duration-300 transform group-hover:scale-110"})}),p.jsx("a",{href:"https://www.youtube.com/@eecgujarat",target:"_blank",rel:"noopener noreferrer","aria-label":"YouTube",className:"group transition-all",children:p.jsx(h8,{className:"h-7 w-7 text-slate-400 group-hover:text-[#FF0000] transition-all duration-300 transform group-hover:scale-110"})}),p.jsx("a",{href:"https://www.linkedin.com/school/eecindia",target:"_blank",rel:"noopener noreferrer","aria-label":"LinkedIn",className:"group transition-all",children:p.jsx(WF,{className:"h-7 w-7 text-slate-400 group-hover:text-[#0A66C2] transition-all duration-300 transform group-hover:scale-110"})})]}),p.jsxs("div",{className:"flex items-start gap-3 justify-start md:justify-end",children:[p.jsx(jS,{className:"h-6 w-6 text-slate-400 mt-1 flex-shrink-0"}),p.jsxs("div",{className:"text-left md:text-right",children:[p.jsx("p",{className:"text-xs text-slate-400 ",children:"Feedback & Suggestions"}),p.jsx("a",{href:"mailto:info@eecglobal.com",className:"text-sm font-semibold text-slate-900 dark:text-slate-300 hover:text-[#0A66C2] dark:hover:text-[#0A66C2] transition-all duration-200",children:"info@eecglobal.com"})]})]})]})]}),p.jsxs("div",{className:"space-y-4 max-w-5xl mx-auto mt-3",children:[p.jsx(AO,{}),p.jsx(kO,{})]}),p.jsxs("div",{className:"mt-1 pt-2 text-center space-y-2",children:[p.jsx("p",{className:"text-[10px] text-slate-400 dark:text-slate-600 uppercase tracking-widest font-bold",children:"Disclaimer: AI-generated information. Verify with official embassies."}),p.jsxs("a",{href:"/travelagent/llm.txt",target:"_blank",className:"inline-flex items-center gap-2 text-[10px] text-slate-500 dark:text-slate-500 hover:text-violet-600 dark:hover:text-violet-400 transition-colors uppercase tracking-widest font-mono py-2 px-5 rounded-full border border-slate-100 dark:border-slate-800/50 hover:border-violet-200 dark:hover:border-violet-900/50 bg-slate-50/50 dark:bg-slate-900/50",children:[p.jsx("span",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full animate-pulse"}),"LLM's & Generative Engines read here"]})]})]})}),bO=[{name:"EEC Main Website",url:"https://eecglobal.com"},{name:"AI Tools",url:"https://ai.eecglobal.com"},{name:"Course Search",url:"https://courses.eecglobal.com"},{name:"Visa & Travel Services",url:"https://ai.eecglobal.com/travelagent",current:!0}],RO=()=>p.jsx("nav",{"aria-label":"Breadcrumb",className:"ml-9 ",itemScope:!0,itemType:"https://schema.org/BreadcrumbList",children:p.jsx("ol",{className:"flex flex-wrap items-center gap-1 text-sm",children:bO.map((t,e)=>p.jsxs("li",{className:"flex items-center",itemProp:"itemListElement",itemScope:!0,itemType:"https://schema.org/ListItem",children:[e>0&&p.jsx(DF,{className:"h-4 w-4 text-slate-400 dark:text-slate-500 mx-1 flex-shrink-0"}),e===0&&p.jsx(jF,{className:"h-4 w-4 text-slate-400 dark:text-slate-500 mr-1 flex-shrink-0"}),t.current?p.jsx("span",{className:"text-indigo-600 dark:text-indigo-400 font-medium",itemProp:"name","aria-current":"page",children:t.name}):p.jsx("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"text-slate-600 dark:text-slate-400 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors",itemProp:"item",children:p.jsx("span",{itemProp:"name",children:t.name})}),p.jsx("meta",{itemProp:"position",content:String(e+1)})]},t.url))})}),PO=()=>{const[t,e]=$.useState({origin:"India",originState:"",destination:"",visaType:"Tourist"}),[n,r]=$.useState(null),[s,i]=$.useState(Gt.IDLE),[o,a]=$.useState(null),[l,c]=$.useState(null),[h,m]=$.useState(!1),[g,v]=$.useState(null),[x,I]=$.useState(()=>typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),P=$.useRef(null),A=()=>typeof window<"u"&&!!localStorage.getItem("travelagentemail");$.useEffect(()=>{x==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[x]),$.useEffect(()=>{const N=async()=>{const M=window.location.hash;if(M.startsWith("#/")){const b=M.split("/"),X=b.indexOf("destination"),_e=b.indexOf("type"),pe=b.indexOf("state");if(X!==-1&&b[X+1]){const ye=decodeURIComponent(b[X+1]),B=_e!==-1?decodeURIComponent(b[_e+1]):"Student",j=pe!==-1?decodeURIComponent(b[pe+1]):"Gujarat";if(n&&ye===n.destination&&B===n.visaType&&j===n.originState&&o)return;const z={origin:"India",originState:j,destination:ye,visaType:B};e(z),i(Gt.LOADING),a(null),c(null);try{const ee=await rD("India",j,ye,B);a(ee),r(z),i(Gt.SUCCESS)}catch(ee){console.error(ee),c("Unable to retrieve verified dossier. Please try manual search."),i(Gt.ERROR)}}}};return N(),window.addEventListener("hashchange",N),()=>window.removeEventListener("hashchange",N)},[n,o]);const E=async N=>{if(N.preventDefault(),!t.destination||!t.originState)return;if(!A()){v("signup");return}const M=localStorage.getItem("travelagentemail");M&&(ax(M).catch(b=>{console.error("Failed to increment search count:",b)}),Bh(M).then(b=>{b&&(ux(M,{origin:"India",originState:t.originState,destination:t.destination,visaType:t.visaType}).catch(X=>{console.error("Failed to update user last search:",X)}),lx(M,{origin:"India",originState:t.originState,destination:t.destination,visaType:t.visaType,userCity:b.city||"",userState:b.state||""}).catch(X=>{console.error("Failed to save search query to Firebase:",X)}),cx(M,{destination:t.destination,originState:t.originState,visaType:t.visaType}).catch(X=>{console.error("Failed to send search notification email:",X)}))}).catch(b=>{console.error("Failed to fetch user data:",b)})),a(null),i(Gt.LOADING),window.location.hash=`#/destination/${encodeURIComponent(t.destination)}/type/${encodeURIComponent(t.visaType)}/state/${encodeURIComponent(t.originState)}`},k=()=>{if(v(null),t.destination&&t.originState){const N=localStorage.getItem("travelagentemail");N&&(ax(N).catch(M=>{console.error("Failed to increment search count:",M)}),Bh(N).then(M=>{M&&(ux(N,{origin:"India",originState:t.originState,destination:t.destination,visaType:t.visaType}).catch(b=>{console.error("Failed to update user last search:",b)}),lx(N,{origin:"India",originState:t.originState,destination:t.destination,visaType:t.visaType,userCity:M.city||"",userState:M.state||""}).catch(b=>{console.error("Failed to save search query to Firebase:",b)}),cx(N,{destination:t.destination,originState:t.originState,visaType:t.visaType}).catch(b=>{console.error("Failed to send search notification email:",b)}))}).catch(M=>{console.error("Failed to fetch user data:",M)})),a(null),i(Gt.LOADING),window.location.hash=`#/destination/${encodeURIComponent(t.destination)}/type/${encodeURIComponent(t.visaType)}/state/${encodeURIComponent(t.originState)}`}},D=()=>{v("login")},U=()=>{v("signup")},L=()=>{v(null)},T=()=>{const N=(n==null?void 0:n.destination)||t.destination;if(!N){alert("Please enter a destination to search for flights.");return}const M=`Flights from India to ${N}`,b=`https://www.google.com/travel/flights?q=${encodeURIComponent(M)}`;window.open(b,"_blank")},w=()=>{if(!navigator.geolocation){alert("Geolocation is not supported by your browser.");return}m(!0),navigator.geolocation.getCurrentPosition(async N=>{try{const{latitude:M,longitude:b}=N.coords,X=await sD(M,b);X&&oy.includes(X)?e(_e=>({..._e,originState:X})):alert("Could not identify your state or you are outside India.")}catch(M){console.error("Geocoding error",M),alert("Failed to identify location. Please select manually.")}finally{m(!1)}},N=>{console.error("Geo error",N),m(!1),alert("Failed to detect location.")},{enableHighAccuracy:!1,timeout:1e4,maximumAge:6e4})},C=()=>{I(N=>N==="light"?"dark":"light")},R=n?`${n.destination}-${n.visaType}-${n.originState}`:"init";return p.jsxs("div",{className:"min-h-screen flex flex-col font-sans text-slate-900 dark:text-slate-100 selection:bg-violet-200 selection:text-violet-900 overflow-x-hidden transition-colors duration-500",children:[p.jsx(z8,{params:n||t,result:o}),p.jsx("header",{className:"sticky top-0 z-50 glass-panel border-b border-white/40 dark:border-white/5 shadow-sm transition-colors duration-300",children:p.jsxs("div",{className:"container mx-auto px-4 h-16 flex items-center justify-between",children:[p.jsxs("a",{href:"https://eecglobal.com",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 group cursor-pointer",children:[p.jsx("img",{src:"https://ai.eecglobal.com/assets/logos/eeclogo-main.png",alt:"Logo",className:"h-8 sm:h-10"}),p.jsxs("div",{className:"flex flex-col",children:[p.jsx("span",{className:"font-extrabold text-xl tracking-tight text-slate-900 dark:text-white",children:"Travel & Visa Services"}),"  "]})]}),p.jsxs("div",{className:"flex items-center gap-3 md:gap-4",children:[p.jsxs("div",{className:"hidden md:flex items-center gap-2",children:[p.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1 bg-emerald-50 dark:bg-emerald-900/20 rounded-lg border border-emerald-100 dark:border-emerald-800",children:[p.jsx("span",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-pulse"}),p.jsx("span",{className:"text-xs font-bold text-emerald-700 dark:text-emerald-300",children:"System Online"})]}),p.jsx("span",{className:"px-3 py-1 bg-slate-100 dark:bg-slate-800 rounded-lg text-xs font-bold text-slate-600 dark:text-slate-400 border border-slate-200 dark:border-slate-700",children:"26 Branches"}),p.jsxs("a",{href:"https://eecglobal.com",target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 rounded-full text-sm font-semibold text-slate-600 dark:text-slate-300 hover:text-violet-700 dark:hover:text-white hover:bg-violet-50 dark:hover:bg-white/10 transition-all flex items-center gap-1",children:["Main Site ",p.jsx(Vr,{className:"w-3 h-3 -rotate-45"})]})]}),p.jsx("button",{onClick:C,className:"p-2 rounded-full bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors",title:x==="light"?"Switch to Dark Mode":"Switch to Light Mode",children:x==="light"?p.jsx(T8,{className:"w-5 h-5"}):p.jsx(E8,{className:"w-5 h-5"})})]})]})}),p.jsx(O8,{}),p.jsxs("main",{className:"flex-grow container mx-auto px-4 py-8 md:py-6",children:[p.jsx(RO,{}),p.jsxs("div",{className:`text-center transition-all duration-700 ${s===Gt.SUCCESS?"mb-8":"mb-16 mt-4 md:mt-8"}`,children:[p.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/60 dark:bg-slate-800/60 border border-violet-100 dark:border-violet-900 text-violet-700 dark:text-violet-300 text-xs font-bold uppercase tracking-wider mb-6 shadow-sm animate-fade-in-up",children:[p.jsx(sc,{className:"w-3 h-3"}),p.jsx("span",{children:"Powered by Enbee Education Center (Est. 1997)"})]}),p.jsxs("h1",{className:"text-4xl md:text-6xl lg:text-7xl font-extrabold mb-6 tracking-tight leading-tight text-slate-900 dark:text-white",children:["AI-Powered EEC ",p.jsx("br",{className:"hidden md:block"}),p.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-violet-600 via-fuchsia-500 to-indigo-600 dark:from-violet-400 dark:via-fuchsia-400 dark:to-indigo-400 animate-gradient-x",children:"Visa & Travel Services"})]}),p.jsx("p",{className:"text-base md:text-xl text-slate-600/90 dark:text-slate-400/90 max-w-3xl mx-auto mb-10 font-medium leading-relaxed px-4",children:"First of its kind, 100% free tool for Indian students. Get verified Tourist & Student visa requirements, forensic risk analysis, and flight searches for USA, Canada, UK, Australia, Europe & more."}),p.jsxs("div",{className:"max-w-5xl mx-auto relative z-20 px-2 md:px-0",children:[p.jsx("div",{className:"absolute -top-10 -left-10 w-20 h-20 bg-yellow-300 rounded-full blur-2xl opacity-40 dark:opacity-20 animate-pulse hidden md:block"}),p.jsx("div",{className:"absolute -bottom-10 -right-10 w-24 h-24 bg-purple-400 rounded-full blur-2xl opacity-40 dark:opacity-20 animate-pulse delay-700 hidden md:block"}),p.jsxs("form",{onSubmit:E,className:"glass-panel p-3 rounded-3xl shadow-2xl shadow-violet-900/10 dark:shadow-black/40 border border-white/50 dark:border-white/5 flex flex-col md:flex-row gap-2 relative overflow-hidden transition-colors",children:[p.jsx("div",{className:"w-full md:w-32 relative group bg-slate-100/50 dark:bg-slate-800/50 rounded-2xl flex items-center justify-center border border-slate-200 dark:border-slate-700 py-3 md:py-0 transition-colors",children:p.jsxs("div",{className:"flex items-center gap-2 text-slate-500 dark:text-slate-400 font-bold select-none",children:[p.jsx(Na,{className:"w-4 h-4"}),p.jsx("span",{children:"India"})]})}),p.jsxs("div",{className:"flex-1 relative group bg-white/50 dark:bg-slate-900/50 rounded-2xl transition-all focus-within:bg-white dark:focus-within:bg-slate-900 hover:bg-white dark:hover:bg-slate-900",children:[p.jsx("div",{className:"absolute inset-y-0 left-4 flex items-center pointer-events-none",children:p.jsx(Na,{className:"w-5 h-5 text-slate-400 dark:text-slate-500 group-focus-within:text-violet-500 dark:group-focus-within:text-violet-400 transition-colors"})}),p.jsxs("select",{value:t.originState,onChange:N=>e({...t,originState:N.target.value}),className:"w-full pl-12 pr-12 py-4 bg-transparent rounded-2xl outline-none border-2 border-transparent focus:border-violet-100 dark:focus:border-violet-900 focus:ring-0 transition-all font-semibold text-slate-800 dark:text-slate-200 appearance-none cursor-pointer placeholder:text-slate-400 text-sm md:text-base",required:!0,children:[p.jsx("option",{value:"",disabled:!0,className:"dark:bg-slate-900",children:"Select State"}),oy.map(N=>p.jsx("option",{value:N,className:"dark:bg-slate-900",children:N},N))]}),p.jsx("div",{className:"absolute inset-y-0 right-2 flex items-center",children:p.jsx("button",{type:"button",onClick:w,disabled:h,className:`p-2 rounded-xl transition-all ${h?"bg-violet-100 dark:bg-violet-900 text-violet-600 dark:text-violet-300":"bg-transparent text-slate-400 dark:text-slate-500 hover:text-violet-600 dark:hover:text-violet-400 hover:bg-violet-50 dark:hover:bg-violet-900/30"}`,title:"Detect my location",children:h?p.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}):p.jsx(_8,{className:"w-5 h-5"})})})]}),p.jsxs("div",{className:"flex-1 relative group bg-white/50 dark:bg-slate-900/50 rounded-2xl transition-all focus-within:bg-white dark:focus-within:bg-slate-900 hover:bg-white dark:hover:bg-slate-900",children:[p.jsx("div",{className:"absolute inset-y-0 left-4 flex items-center pointer-events-none",children:p.jsx(Kc,{className:"w-5 h-5 text-slate-400 dark:text-slate-500 group-focus-within:text-violet-500 dark:group-focus-within:text-violet-400 transition-colors"})}),p.jsxs("select",{value:t.destination,onChange:N=>e({...t,destination:N.target.value}),className:"w-full pl-12 pr-10 py-4 bg-transparent rounded-2xl outline-none border-2 border-transparent focus:border-violet-100 dark:focus:border-violet-900 focus:ring-0 transition-all font-semibold text-slate-800 dark:text-slate-200 appearance-none cursor-pointer placeholder:text-slate-400 text-sm md:text-base",required:!0,children:[p.jsx("option",{value:"",disabled:!0,className:"dark:bg-slate-900",children:"Select Destination"}),Ak.map(N=>p.jsx("option",{value:N,className:"dark:bg-slate-900",children:N},N))]}),p.jsx("div",{className:"absolute inset-y-0 right-4 flex items-center pointer-events-none text-slate-400 dark:text-slate-500",children:p.jsx(Vr,{className:"w-4 h-4 rotate-90"})})]}),p.jsxs("div",{className:"relative group min-w-[150px] bg-white/50 dark:bg-slate-900/50 rounded-2xl transition-all focus-within:bg-white dark:focus-within:bg-slate-900 hover:bg-white dark:hover:bg-slate-900",children:[p.jsx("div",{className:"absolute inset-y-0 left-4 flex items-center pointer-events-none",children:t.visaType==="Student"?p.jsx(Ra,{className:"w-5 h-5 text-fuchsia-500"}):p.jsx(Qo,{className:"w-5 h-5 text-fuchsia-500"})}),p.jsxs("select",{value:t.visaType,onChange:N=>e({...t,visaType:N.target.value}),className:"w-full pl-12 pr-10 py-4 bg-transparent rounded-2xl outline-none border-2 border-transparent focus:border-violet-100 dark:focus:border-violet-900 focus:ring-0 transition-all font-semibold text-slate-800 dark:text-slate-200 appearance-none cursor-pointer text-sm md:text-base",children:[p.jsx("option",{value:"Tourist",className:"dark:bg-slate-900",children:"Tourist"}),p.jsx("option",{value:"Student",className:"dark:bg-slate-900",children:"Student"})]}),p.jsx("div",{className:"absolute inset-y-0 right-4 flex items-center pointer-events-none text-slate-400 dark:text-slate-500",children:p.jsx(Vr,{className:"w-4 h-4 rotate-90"})})]}),p.jsxs("div",{className:"flex gap-2 min-w-[140px]",children:[p.jsx("button",{type:"submit",disabled:s===Gt.LOADING,className:"bg-gradient-to-r from-violet-600 to-indigo-600 hover:from-violet-500 hover:to-indigo-500 disabled:from-slate-400 disabled:to-slate-500 text-white px-6 py-3 rounded-2xl font-bold transition-all shadow-lg shadow-violet-200 dark:shadow-violet-900/30 hover:shadow-xl hover:shadow-violet-300 dark:hover:shadow-violet-900/50 hover:-translate-y-0.5 active:translate-y-0 flex-1 flex items-center justify-center gap-2 group",children:s===Gt.LOADING?p.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):p.jsx(p8,{className:"w-5 h-5 group-hover:scale-110 transition-transform"})}),p.jsx("button",{type:"button",onClick:T,className:"bg-white dark:bg-slate-800 hover:bg-violet-50 dark:hover:bg-slate-700 text-violet-600 dark:text-violet-400 border border-violet-100 dark:border-slate-700 px-4 py-3 rounded-2xl font-semibold transition-all hover:-translate-y-0.5 shadow-sm hover:shadow-md flex items-center justify-center",title:"Search Flights on Google",children:p.jsx(Qo,{className:"w-5 h-5 transform -rotate-45"})})]})]})]})]}),s===Gt.ERROR&&p.jsx("div",{className:"max-w-md mx-auto p-4 bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-900 text-red-600 dark:text-red-400 rounded-2xl text-center mb-8 font-medium animate-pulse",children:l}),s===Gt.SUCCESS&&o&&n&&p.jsxs("div",{ref:P,className:"space-y-12 animate-fade-in-up",children:[p.jsx(R8,{data:o,origin:`India (${n.originState||""})`,destination:n.destination,visaType:n.visaType},R),p.jsxs("div",{className:"max-w-5xl mx-auto",children:[p.jsxs("div",{className:"relative py-8 mb-4 flex items-center justify-center",children:[p.jsx("div",{className:"absolute inset-0 flex items-center",children:p.jsx("div",{className:"w-full border-t border-slate-200 dark:border-slate-800"})}),p.jsx("div",{className:"relative bg-slate-50 dark:bg-slate-950 px-6",children:p.jsx("span",{className:"text-sm font-black text-slate-400 dark:text-slate-500 uppercase tracking-[0.2em]",children:"Ask the EEC Expert"})})]}),p.jsx(M8,{visaData:o,originState:n.originState,destination:n.destination},`${R}-chat`),p.jsx(H8,{destination:n.destination,visaType:n.visaType},`${R}-bulletin`)]})]}),p.jsx(q8,{}),s===Gt.IDLE&&p.jsx("div",{className:"mt-8 grid md:grid-cols-3 gap-6 max-w-6xl mx-auto",children:[{icon:p.jsx(sc,{className:"w-6 h-6"}),color:"bg-blue-500",bg:"bg-blue-50 dark:bg-blue-900/20",title:"Jurisdiction Accurate",desc:"We check whether you need to apply via BLS, VFS, or directly at the Embassy based on your specific Indian state."},{icon:p.jsx(Ra,{className:"w-6 h-6"}),color:"bg-fuchsia-500",bg:"bg-fuchsia-50 dark:bg-fuchsia-900/20",title:"Student & Tourist",desc:"Specialized logic for F-1, Tier 4, and other complex student visa categories for Indian students."},{icon:p.jsx(Qo,{className:"w-6 h-6"}),color:"bg-violet-500",bg:"bg-violet-50 dark:bg-violet-900/20",title:"Flight Integration",desc:"Plan your entire journey. Check visa requirements and search for the best flight deals."}].map((N,M)=>p.jsxs("div",{className:"bg-white/60 dark:bg-slate-800/60 backdrop-blur-sm p-8 rounded-3xl border border-white dark:border-slate-700 shadow-sm hover:shadow-xl hover:shadow-violet-100 dark:hover:shadow-violet-900/20 transition-all duration-300 group hover:-translate-y-1",children:[p.jsx("div",{className:`w-14 h-14 ${N.bg} rounded-2xl flex items-center justify-center mb-6 text-white shadow-md rotate-3 group-hover:rotate-6 transition-transform`,children:p.jsx("div",{className:`${N.color} w-10 h-10 rounded-xl flex items-center justify-center`,children:N.icon})}),p.jsx("h3",{className:"text-xl font-bold mb-3 text-slate-900 dark:text-white",children:N.title}),p.jsx("p",{className:"text-slate-600 dark:text-slate-400 leading-relaxed font-medium",children:N.desc})]},M))}),p.jsx($8,{}),p.jsx(j8,{})]}),p.jsx(NO,{}),g==="login"&&p.jsx(CO,{onAuthSuccess:k,onSwitchToSignup:U,onClose:L}),g==="signup"&&p.jsx(SO,{onAuthSuccess:k,onSwitchToLogin:D,onClose:L})]})},SI=document.getElementById("root");if(!SI)throw new Error("Could not find root element to mount to");const MO=df.createRoot(SI);MO.render(p.jsx(du.StrictMode,{children:p.jsx(PO,{})}));
